<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>å †æ’åº</title>
    <link href="/2021/11/26/%E5%A0%86%E6%8E%92%E5%BA%8F/"/>
    <url>/2021/11/26/%E5%A0%86%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<p>ç¨å¾®è®°ä¸€ä¸‹å§ï¼ˆè™½ç„¶å¯èƒ½ä¹‹åçœ‹ä¼šæœ‰ç‚¹æŠ½è±¡ï¼Œä½†ä¹Ÿæ‡’å¾—ç”»å›¾äº†ï¼ˆé€ƒï¼‰ï¼‰ï¼›çœ‹å›¾å°±çœ‹<a href="https://testerhome.com/articles/27019">è¿™ä¸ª</a>æ–‡ç« å§</p><p>é¦–å…ˆå°æ ¹å †å¤§æ ¹å †çš„å®šä¹‰å°±ä¸å†™äº†</p><p>ä»¥å°æ ¹å †ä¸ºä¾‹å§ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å½“å‰å·²ç»æœ‰ä¸€ä¸ªæ ‘/å †äº†ï¼ˆç”¨é¡ºåºè¡¨å­˜å‚¨çš„ï¼Œé‚£ç§å…¸ä¸­å…¸çš„<code>t[p], t[p &lt;&lt; 1], t[p &lt;&lt; 1 | 1]</code>çš„æ–¹å¼ï¼‰ï¼Œæˆ‘ä»¬è¦æŠŠè¿™ä¸ªå †å˜æˆä¸€ä¸ªå°æ ¹å †</p><h3 id="å»ºå †"><a href="#å»ºå †" class="headerlink" title="å»ºå †"></a>å»ºå †</h3><p>é¦–å…ˆï¼Œå¶å­èŠ‚ç‚¹ä¸ç”¨åŠ¨ï¼Œä»å€’æ•°ç¬¬ä¸€å±‚èŠ‚ç‚¹å¼€å§‹ï¼Œæ¯”è¾ƒèŠ‚ç‚¹å’Œä»–ä»¬çš„å·¦å³å„¿å­ï¼Œå¦‚æœæ¯”å·¦å³å„¿å­å°ï¼Œå°±<strong>å°†å…¶å’Œå·¦å³å„¿å­ä¸­æœ€å°çš„è¿›è¡Œäº¤æ¢</strong>ï¼ˆå› ä¸ºæ˜¯å°æ ¹å †å˜›ï¼‰</p><p>ä¹‹åï¼Œå†å¾€ä¸Šä¸€å±‚å±‚åœ°åšç±»ä¼¼äºå¯¹å€’æ•°ç¬¬ä¸€å±‚çš„èŠ‚ç‚¹çš„æ¯”è¾ƒå’Œäº¤æ¢æ“ä½œã€‚<strong>æ³¨æ„ï¼Œ</strong>ç”±äºå±‚æ•°å˜å¤šäº†ï¼Œæœ‰å¯èƒ½æŠŠå½“å‰å±‚èŠ‚ç‚¹äº¤æ¢ä¸‹å»åï¼Œä¼šå¯¼è‡´ä¹‹å‰æœ¬æ¥æ­£ç¡®çš„ä¸‹å±‚å †å˜å¾—åˆä¸æ­£ç¡®äº†ï¼Œè¿™æ—¶å€™å°±é€’å½’åœ°å†äº¤æ¢ä¸‹å»å°±è¡Œäº†ï¼›</p><h3 id="æ’åºï¼ˆè¾“å‡ºï¼‰"><a href="#æ’åºï¼ˆè¾“å‡ºï¼‰" class="headerlink" title="æ’åºï¼ˆè¾“å‡ºï¼‰"></a>æ’åºï¼ˆè¾“å‡ºï¼‰</h3><p>é¦–å…ˆï¼Œ<strong>ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€</strong>ï¼ŒæŠŠ<strong>å †é¡¶å…ƒç´ </strong>ï¼ˆå³æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰å’Œæœªæ’åºåºåˆ—çš„<strong>æœ€åä¸€ä¸ªå…ƒç´ </strong>ï¼ˆæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ï¼‰è¿›è¡Œäº¤æ¢ï¼ŒæŠŠæœ€åä¸€ä½ï¼ˆå³åŸå †é¡¶ï¼‰<strong>æ— æƒ…è¸¢å‡º</strong>ï¼Œä¹‹åé‡æ–°å¯¹å°æ ¹å †è¿›è¡Œæ„å»ºï¼ˆä»æ–°æ¢ä¸Šæ¥çš„ä¸´æ—¶å †é¡¶ï¼ˆåŸæœ€åä¸€ä¸ªå…ƒç´ ï¼‰å¼€å§‹ï¼Œä¸€å±‚å±‚å¯¹æ¯”å¹¶ä¸”äº¤æ¢ä¸‹å»ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAXN 10016</span><br><span class="hljs-keyword">int</span> n, t[MAXN];<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å‚è€ƒ</span><br><span class="hljs-comment"> * https://blog.csdn.net/qq_28063811/article/details/93034625</span><br><span class="hljs-comment"> * https://www.cnblogs.com/chengxiao/p/6129630.html</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * è¿™é‡Œä½¿ç”¨çš„æ˜¯æˆ‘å–œæ¬¢çš„ä¸€ç§æ•°ç»„å­˜æ ‘çš„æ–¹å¼ï¼Œè²Œä¼¼ä¹Ÿå¾ˆå¸¸ç”¨ï¼š</span><br><span class="hljs-comment"> * 1 -- æ ¹èŠ‚ç‚¹</span><br><span class="hljs-comment"> * p * 2ï¼ˆå³p &lt;&lt; 1ï¼‰ -- ç¼–å·ä¸ºpçš„èŠ‚ç‚¹çš„å·¦å„¿å­</span><br><span class="hljs-comment"> * p * 2 + 1ï¼ˆå³p &lt;&lt; 1 | 1ï¼‰ -- ç¼–å·ä¸ºpçš„èŠ‚ç‚¹çš„å³å„¿å­</span><br><span class="hljs-comment"> */</span> <br><br><span class="hljs-comment">// å¯¹rootå’Œä»–çš„å„¿å­è¿›è¡Œå †çš„ç»´æŠ¤ï¼›è¿™é‡Œå†™çš„æ˜¯å°æ ¹å †</span><br><span class="hljs-comment">// å› ä¸ºåœ¨è¾“å‡ºçš„è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰èŠ‚ç‚¹è¢«â€œè¸¢å‡ºå»â€ï¼Œæ‰€ä»¥ä¼ å…¥æ•°ç»„å½“å‰çœŸå®é•¿åº¦curN</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">adjust</span><span class="hljs-params">(<span class="hljs-keyword">int</span> root, <span class="hljs-keyword">int</span> curN)</span> </span>&#123; <br>    <span class="hljs-keyword">int</span> left = root &lt;&lt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">int</span> right = root &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// printf(&quot;Comparing %d(%d) and its sons %d(%d) %d(%d\n&quot;, root, t[root], left, t[left], right, t[right]);</span><br>    <span class="hljs-keyword">if</span>(left &gt; curN) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ˜¯å¶å­èŠ‚ç‚¹ï¼Œæ²¡æœ‰å„¿å­</span><br>    <span class="hljs-keyword">if</span>(left == curN) &#123; <span class="hljs-comment">// åªæœ‰å·¦å„¿å­</span><br>        <span class="hljs-keyword">if</span>(t[root] &gt; t[left]) &#123; <span class="hljs-comment">// å·¦å„¿å­æ¯”å½“å‰èŠ‚ç‚¹å°ï¼ŒæŠŠå·¦å„¿å­æ¢ä¸Šæ¥</span><br>            swap(t[root], t[left]);<br>            adjust(left, curN); <span class="hljs-comment">// é€’å½’ç»´æŠ¤ä¸‹ä¸€å±‚èŠ‚ç‚¹ï¼Œé¿å…ä¸Šå±‚çš„äº¤æ¢å½±å“äº†ä¸‹å±‚åŸæœ¬çš„ç»“æœ</span><br>        &#125;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// æ—¢æœ‰å·¦å„¿å­åˆæœ‰å³å„¿å­</span><br>        <span class="hljs-keyword">if</span>(t[left] &lt; t[right] &amp;&amp; t[root] &gt; t[left]) &#123;<br>            swap(t[root], t[left]);<br>            adjust(left, curN);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t[right] &lt; t[left] &amp;&amp; t[root] &gt; t[right]) &#123;<br>            swap(t[root], t[right]);<br>            adjust(right, curN);<br>        &#125;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å¯¹äºè¾“å…¥çš„åŸå§‹å †è¿›è¡Œåˆæ¬¡å»ºå †</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = n / <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">1</span>; i--) <span class="hljs-comment">// è¿™æ˜¯è§‚å¯Ÿå‡ºçš„è§„å¾‹ï¼Œä»n/2å·èŠ‚ç‚¹å¼€å§‹åç€éå†ï¼Œç›´æ¥å°±è·³è¿‡äº†å¶å­èŠ‚ç‚¹</span><br>        adjust(i, n);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sort</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; t[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        swap(t[<span class="hljs-number">1</span>], t[n - i]);<br>        adjust(<span class="hljs-number">1</span>, n - i - <span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) <span class="hljs-built_in">cin</span> &gt;&gt; t[i];<br>    init();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) <span class="hljs-built_in">cout</span> &lt;&lt; t[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>; <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>);<br>    sort();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å°ç”Ÿæˆæ ‘</title>
    <link href="/2021/11/24/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/"/>
    <url>/2021/11/24/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<p>å› ä¸ºå¹³å¸¸ä¸æ€ä¹ˆç”¨åˆ°Primå˜›ï¼Œä½†æ˜¯ç°åœ¨æ•°æ®ç»“æ„è¯¾å­¦åˆ°äº†Primï¼Œå°±å†™ä¸€ä¸‹ç†è§£ï¼Œé¡ºä¾¿ä¹Ÿå¤ä¹ ä¸€ä¸‹Kruskalå§ã€‚</p><p>Primç®—æ³•çš„æ€æƒ³å°±æ˜¯ï¼Œæœ‰ä¸¤ä¸ª<strong>ç‚¹é›†</strong>Uå’ŒVï¼Œæˆ‘ä»¬ä¸€å¼€å§‹éšä¾¿é€‰å–ä¸€ä¸ª<strong>ç‚¹</strong>æ”¾åˆ°Ué‡Œï¼Œå…¶ä»–ç‚¹éƒ½æ”¾åœ¨Vé‡Œï¼Œç„¶åæ¯æ¬¡åœ¨<strong>ç‚¹é›†V</strong>æ‰¾åˆ°ä¸€ä¸ª<strong>è·ç¦»ç‚¹é›†Uå†…çš„ç‚¹æœ€è¿‘çš„ç‚¹</strong>åŠ å…¥ç‚¹é›†Uï¼Œç›´åˆ°Vä¸­çš„ç‚¹å…¨éƒ¨åŠ åˆ°Uä¸­ä¸ºæ­¢</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br></code></pre></td></tr></table></figure><p>Kruskalç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œæœ‰ä¸¤ä¸ª<strong>è¾¹é›†</strong>Tå’ŒGï¼Œæ¯æ¬¡ä»Gä¸­é€‰å–<strong>æœ€çŸ­è¾¹</strong>eï¼ˆæ‰€ä»¥ä¼šå…ˆå¯¹è¾¹è¿›è¡Œæ’åºï¼‰ï¼Œå¦‚æœè¾¹eæ‰€è¿æ¥çš„ä¸¤ä¸ªé¡¶ç‚¹ä¸åœ¨åŒä¸€ä¸ªè¿é€šåˆ†é‡ä¸­ï¼Œå°±æŠŠè¯¥è¾¹åŠ å…¥è¾¹é›†Tï¼Œç›´åˆ°Gä¸­çš„è¾¹å…¨éƒ¨åŠ åˆ°Tä¸­</p><p>ä½†æ˜¯ä¸Šé¢è¿™ä¸ªè¯¡å¼‚çš„æè¿°æ˜¯æ•°æ®ç»“æ„è¯¾ä¸Šè¯´çš„â€¦â€¦æˆ‘æ„Ÿè§‰è¿˜æ˜¯ç”¨å¹¶æŸ¥é›†æ¥æè¿°å’Œå®ç°æ›´å®¹æ˜“ä¸€äº›emm</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> MAXN = <span class="hljs-number">580000</span>;<br><span class="hljs-keyword">int</span> n, m, fa[MAXN], rank_[MAXN];<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">edge</span> &#123;</span><br>    <span class="hljs-keyword">int</span> u, v, cost;<br>    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> edge &amp;x) <span class="hljs-keyword">const</span> &#123;<br>        <span class="hljs-keyword">return</span> cost &lt; x.cost;<br>    &#125;<br>&#125; es[MAXN];<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (fa[a] == a)<br>        <span class="hljs-keyword">return</span> a;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> fa[a] = find(fa[a]);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unite</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> x = find(a);<br>    <span class="hljs-keyword">int</span> y = find(b);<br>    <span class="hljs-keyword">if</span> (x == y) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (rank_[x] &lt; rank_[y])<br>        fa[x] = y;<br>    <span class="hljs-keyword">else</span> &#123;<br>        fa[y] = x;<br>        <span class="hljs-keyword">if</span> (rank_[x] == rank_[y]) rank_[x]++;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">same</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> find(a) == find(b);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>        <span class="hljs-built_in">cin</span> &gt;&gt; es[i].u &gt;&gt; es[i].v &gt;&gt; es[i].cost;<br>    sort(es, es + m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) fa[i] = i;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        edge e = es[i];<br>        <span class="hljs-keyword">if</span> (!same(e.u, e.v)) &#123;<br>            unite(e.u, e.v);<br>            ans += e.cost;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Primæ—¶é—´å¤æ‚åº¦ O(n^2) ï¼Œé€‚åˆç¨ å¯†å›¾</p><p>Kruskalæ—¶é—´å¤æ‚åº¦O(eloge)ï¼Œé€‚åˆç¨€ç–å›¾</p>]]></content>
    
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>KMPç®—æ³•</title>
    <link href="/2021/11/24/KMP%E7%AE%97%E6%B3%95/"/>
    <url>/2021/11/24/KMP%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>å¯¹äºKMPç®—æ³•çš„ç†è§£ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">ABCABCABLTS<br>ABCABLTS<br>     â†‘<br></code></pre></td></tr></table></figure><p>æ˜¾ç„¶ï¼Œæ¨¡å¼ä¸²ç¬¬ä¸€æ¬¡åŒ¹é…åˆ° <strong>L</strong> çš„æ—¶å€™ä¸åŒ¹é…äº†ï¼Œä½†æ˜¯<strong>æˆªæ­¢Lä¹‹å‰çš„éƒ½æ˜¯åŒ¹é…çš„</strong><br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ¨¡å¼ä¸²é‡Œ<strong>æœ‰ä¸€æ®µåç¼€å’Œå‰ç¼€ç›¸åŒ</strong>ï¼Œé‚£ä¹ˆè¿™ä¸€æ®µåç¼€<strong>å¯¹åº”çš„ä¸»ä¸²é‡Œ</strong>çš„é‚£ä¸€éƒ¨åˆ†å­—ç¬¦ä¸²ï¼Œä¹Ÿæ˜¯å’Œ<strong>æ¨¡å¼ä¸²</strong>çš„é‚£ä¸€éƒ¨åˆ†<strong>å‰ç¼€</strong>ç›¸åŒçš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">å‰ç¼€XXåç¼€XXXXXXXXXX<br>    â†—<br>å‰ç¼€XXåç¼€XXX<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æŠŠæ¨¡å¼ä¸²åç§»ï¼Œè®©<strong>æ¨¡å¼ä¸²çš„é‚£ä¸€éƒ¨åˆ†å‰ç¼€</strong>ä¸ä¸»ä¸²é‡Œ<strong>ä¹‹å‰å’Œæ¨¡å¼ä¸²çš„åç¼€åŒ¹é…çš„</strong>é‚£ä¸€éƒ¨åˆ†å­—ç¬¦ä¸²é‡åˆ<br>è¿™æ ·ä¸€æ¥å‰ç¼€çš„é‚£ä¸€éƒ¨åˆ†è‚¯å®šæ˜¯åŒ¹é…çš„ï¼Œç›´æ¥ä»æ¨¡å¼ä¸²ä¸Šæ¬¡ï¼Œä¸åŒ¹é…çš„åœ°æ–¹ç»§ç»­å¼€å§‹åŒ¹é…å³å¯</p><p>nextæ•°ç»„æ­£æ˜¯å­˜å‚¨äº†ï¼šå¯¹äºæ¨¡å¼ä¸²ï¼Œå¦‚æœè¿™ä¸€ä½å‘ç”Ÿäº†ä¸åŒ¹é…ï¼Œå¾€åå†ç§»åŠ¨å¤šå°‘ä½å¯ä»¥å°½å¯èƒ½çš„åˆ©ç”¨ä¹‹å‰å·²ç»åŒ¹é…çš„å‰ç¼€è¿›è¡Œ <del>åŠè·¯èµ·æ­¥çš„</del> åŒ¹é…<br>ï¼ˆå› ä¸ºå½“å‰ä¸åŒ¹é…äº†ï¼Œæ‰€ä»¥å­˜çš„æ˜¯ å½“å‰ä½ä¹‹å‰çš„æœ€å¤§ç›¸åŒå‰åç¼€é•¿åº¦ + 1ï¼ˆè¿™ä¸ª+1è§‚å¯Ÿä¸€ä¸‹å°±èƒ½æ‡‚äº†ï¼‰)</p><ul><li>ç¬¬ä¸€ä¸ªnextè§„å®šä¸º0</li><li>æ˜¾ç„¶ï¼Œæ¨¡å¼ä¸²ä¸­çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¸å½±å“nextæ•°ç»„çš„ç»“æœï¼ˆå› ä¸ºå†³å®šå½“å‰ä½çš„nextå€¼çš„æ˜¯å®ƒä¹‹å‰çš„å­ä¸²ï¼‰</li></ul><p>è‡³äºnextçš„è®¡ç®—ï¼Œå®åœ¨æ˜¯å¾ˆéš¾æ‡‚ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ç»“åˆä¸‹é¢è¿™å¥è¯ç„¶åå»çœ‹ä»£ç æ¯”è¾ƒå¥½ï¼š</p><blockquote><p>è®¡ç®—next[ ]çš„è¿‡ç¨‹ï¼Œå…¶å®å°±ç±»ä¼¼äºæ¨¡å¼ä¸²å¯¹è‡ªèº«è¿›è¡Œäº†ä¸€æ¬¡KMPç®—æ³•</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAXN 10016</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">char</span> a[MAXN], b[MAXN];<br><span class="hljs-keyword">int</span> next[MAXN], lena, lenb;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123;<br>    next[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; lenb; i++) &#123;<br>        <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; b[j + <span class="hljs-number">1</span>] != b[i + <span class="hljs-number">1</span>]) j = next[j]; <span class="hljs-comment">// ä¸åŒ¹é…äº†ï¼Œå›é€€ï¼ˆè®°ä½å°±è¡Œï¼ï¼‰</span><br>        <span class="hljs-keyword">if</span> (b[i + <span class="hljs-number">1</span>] == b[j + <span class="hljs-number">1</span>]) j++; <span class="hljs-comment">// åŒ¹é…äº†ï¼Œå¾€åæ¥ç€åŒ¹é…ï¼Œå¹¶ä¸”è®©åé¢ä¸€ä½çš„nextç­‰äºå½“å‰ä½çš„next+1</span><br>        next[i + <span class="hljs-number">1</span>] = j;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; a + <span class="hljs-number">1</span> &gt;&gt; b + <span class="hljs-number">1</span>;<br>    lena = <span class="hljs-built_in">strlen</span>(a + <span class="hljs-number">1</span>);<br>    lenb = <span class="hljs-built_in">strlen</span>(b + <span class="hljs-number">1</span>);<br>    init();<br>    <span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; lena; i++) &#123; <span class="hljs-comment">// ä¸»ä¸²æŒ‡é’ˆï¼šiï¼Œæ¨¡å¼ä¸²æŒ‡é’ˆï¼šj</span><br>        <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; b[j + <span class="hljs-number">1</span>] != a[i + <span class="hljs-number">1</span>]) j = next[j]; <span class="hljs-comment">// å½“å‰åŒ¹é…å¤±è´¥ï¼Œæ ¹æ®nextå¾€åè·³è½¬ç»§ç»­åŒ¹é…</span><br>        <span class="hljs-keyword">if</span> (b[j + <span class="hljs-number">1</span>] == a[i + <span class="hljs-number">1</span>]) j++; <span class="hljs-comment">// å½“å‰åŒ¹é…æˆåŠŸï¼Œæ¨¡å¼ä¸²æŒ‡é’ˆåç§»ä¸€ä½ï¼ˆä¸»ä¸²æŒ‡é’ˆåœ¨foré‡Œåç§»ï¼‰</span><br>        <span class="hljs-keyword">if</span> (j == lenb) &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Matched at %d\n&quot;</span>, i + <span class="hljs-number">1</span> - lenb + <span class="hljs-number">1</span>);<br>            j = next[j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= lenb; i++) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, next[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Shiroå­¦ä¹ ç¬”è®°</title>
    <link href="/2021/11/16/Shiro%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/11/16/Shiro%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>æå¤–å–å¹³å°çš„å¼€å‘ï¼Œè·Ÿäº†ä¸ªåšå®¢æ­å»ºçš„è§†é¢‘ä½œä¸ºå‚è€ƒï¼Œä½†é‚£ä¸ªç”¨çš„æ˜¯åŸºç¡€çš„Spring Securityï¼Œæˆ‘å¯»æ€ç€åæ­£ä¸»è¦è¿˜æ˜¯ä»¥å­¦ä¹ ä¸ºç›®çš„æ¥æ­å»ºè¿™ä¸ªå¹³å°ï¼Œå¹²è„†ä¸€æ­¥åˆ°ä½ï¼Œå­¦ä¸€å­¦Shiroå§</p><p>çœ‹ç½‘ä¸Šè¯´Spring Securityè¦å¼ºå¤§ä¸€äº›ï¼Œä½†æ˜¯Shiroæ›´ç®€å•è€Œä¸”ä¸åªé™äºSpringæ¡†æ¶</p><blockquote><p>æœ¬æ¥ä»¥ä¸ºè¿™ä¸ªShiroæ˜¯å°ç™½ï¼Œç»“æœæ˜¯åŸçš„æ„æ€â€¦â€¦emmï¼Œå¾ˆåˆç†ï¼Œæ¯•ç«Ÿæ˜¯securityğŸ¤”</p></blockquote><p>å› ä¸ºå·²ç»æœ‰ä¸€ä¸ªè¿˜è¡Œçš„è®²ä¹‰äº†ï¼Œæˆ‘è¿™é‡Œå°±è®°ä¸€äº›å…³é”®çš„</p>]]></content>
    
    
    
    <tags>
      
      <tag>Shiro</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®°ä¸€ä¸‹é«˜ä¸­çš„ä¸€äº›ä»£ç </title>
    <link href="/2021/10/28/%E8%AE%B0%E4%B8%80%E4%B8%8B%E9%AB%98%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BB%A3%E7%A0%81/"/>
    <url>/2021/10/28/%E8%AE%B0%E4%B8%80%E4%B8%8B%E9%AB%98%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BB%A3%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<p>é«˜ä¸­æ—¶æœŸçš„ä¸€äº›æ¿å­ä¸€ç›´å­˜åœ¨ç”µè„‘é‡Œ<br>è™½ç„¶ è¿™äº›æ¿å­ä¸€ç‚¹ä¹Ÿä¸å…¨ &amp; ä»¥å‰çš„ä»£ç ä¹ æƒ¯å¹¶ä¸å’‹åœ° &amp; æ„Ÿè§‰æ”¾ç”µè„‘é‡Œä¹Ÿç”¨ä¸å¤ªä¸Šï¼Œä½†è¿˜æ˜¯ä¸å¤ªèˆå¾—åˆ ï¼Œå¹²è„†æ”¾åšå®¢é‡Œå¾—äº†</p><p>å§‘ä¸”æ ¼å¼åŒ–äº†ä¸€ä¸‹</p><p>å“ï¼Œç°åœ¨éƒ½ä¸ä¸€å®šçœ‹å¾—æ‡‚äº†â€¦â€¦</p><hr><h3 id="äºŒåˆ†å›¾åŒ¹é…"><a href="#äºŒåˆ†å›¾åŒ¹é…" class="headerlink" title="äºŒåˆ†å›¾åŒ¹é…"></a>äºŒåˆ†å›¾åŒ¹é…</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 1.æ ‘æ˜¯äºŒåˆ†å›¾ï¼Œå¥‡æ•°æ·±åº¦ä¸€ä¾§ï¼Œå¶æ•°æ·±åº¦ä¸€ä¾§</span><br><span class="hljs-comment"> * 2.ç½‘æ ¼å›¾ä¹Ÿæ˜¯äºŒåˆ†å›¾</span><br><span class="hljs-comment"> * åŒˆç‰™åˆ©ç®—æ³•ï¼š</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 2018</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, m, E, cnt;<br><span class="hljs-keyword">int</span> e[maxn][maxn], asked[maxn], matched[maxn];<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">found</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;  <span class="hljs-comment">//å¯»æ‰¾å¢å¹¿è·¯</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>        <span class="hljs-keyword">if</span> (!e[x][i] || asked[i])<br>            <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">//ä¸¤ç‚¹é—´æ²¡æœ‰å…³ç³» æˆ– å·²ç»è¢«ä¹‹å‰çš„ç‚¹ç”³è¯·é‡æ–°åŒ¹é…äº†</span><br>        asked[i] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (!matched[i] || found(matched[i])) &#123;  <span class="hljs-comment">//å¦‚æœæ²¡è¢«åŒ¹é…æˆ–è€…èƒ½è…¾å‡ºä½ç½®</span><br>            matched[i] = x;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">match</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">memset</span>(matched, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(matched));<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-built_in">memset</span>(asked, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(asked));<br>        <span class="hljs-keyword">if</span> (found(i))<br>            ++cnt;  <span class="hljs-comment">//æ‰¾åˆ°äº†å°±åŠ 1</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;E);  <span class="hljs-comment">//ç»“ç‚¹ä¸ªæ•°åˆ†åˆ«ä¸ºn,mï¼Œè¾¹æ•°ä¸ºe</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= E; i++) &#123;<br>        <span class="hljs-keyword">int</span> x, y;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);<br>        e[x][y] = <span class="hljs-number">1</span>;<br>    &#125;<br>    match();<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, cnt);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒåˆ†å›¾æœ€å¤§åŒ¹é…"><a href="#äºŒåˆ†å›¾æœ€å¤§åŒ¹é…" class="headerlink" title="äºŒåˆ†å›¾æœ€å¤§åŒ¹é…"></a>äºŒåˆ†å›¾æœ€å¤§åŒ¹é…</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// luogu-judger-enable-o2</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 2010</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, m, E, ans;<br><span class="hljs-keyword">int</span> e[maxn][maxn], asked[maxn], matched[maxn];<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">char</span> ch;<br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isdigit</span>(ch = getchar()))<br>        <span class="hljs-keyword">continue</span>;<br>    ret = ch - <span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">isdigit</span>(ch = getchar()))<br>        ret = ret * <span class="hljs-number">10</span> + ch - <span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">return</span> ret;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">found</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;  <span class="hljs-comment">//å¯»æ‰¾å¢å¹¿è·¯</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>        <span class="hljs-keyword">if</span> (e[x][i]) &#123;     <span class="hljs-comment">//ä¸¤ç‚¹é—´æœ‰å…³ç³»</span><br>            <span class="hljs-keyword">if</span> (asked[i])  <span class="hljs-comment">//å·²ç»è¢«ä¹‹å‰çš„ç‚¹ç”³è¯·é‡æ–°åŒ¹é…äº†</span><br>                <span class="hljs-keyword">continue</span>;<br>            asked[i] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (!matched[i] ||<br>                found(matched[i])) &#123;  <span class="hljs-comment">//å¦‚æœæ²¡è¢«åŒ¹é…æˆ–è€…èƒ½è…¾å‡ºä½ç½®</span><br>                matched[i] = x;<br>                matched[x] = i;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">match</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;  <span class="hljs-comment">// cntæ˜¯è®¡æ•°å™¨</span><br>    <span class="hljs-built_in">memset</span>(matched, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(matched));<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-built_in">memset</span>(asked, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(asked));<br>        <span class="hljs-keyword">if</span> (found(i))<br>            cnt++;  <span class="hljs-comment">//æ‰¾åˆ°äº†å°±åŠ 1</span><br>    &#125;<br>    ans = cnt;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;E);  <span class="hljs-comment">//ç»“ç‚¹ä¸ªæ•°åˆ†åˆ«ä¸ºn,mï¼Œè¾¹æ•°ä¸ºe</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= E; i++) &#123;<br>        <span class="hljs-keyword">int</span> x, y;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);<br>        e[x][y] = <span class="hljs-number">1</span>;<br>    &#125;<br>    match();<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, ans);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åˆ†å±‚å›¾"><a href="#åˆ†å±‚å›¾" class="headerlink" title="åˆ†å±‚å›¾"></a>åˆ†å±‚å›¾</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// é¢˜è§£ P2939ã€æ”¹é€ è·¯ã€‘ï¼ˆæ¨¡æ¿ åˆ†å±‚å›¾ï¼‰</span><br><span class="hljs-comment">// åˆ†å±‚å›¾æ¿å­é¢˜ï¼Œç¬¬ä¸€æ¬¡åšåˆ†å±‚å›¾æ„Ÿè§‰è¿˜å¥½qwq</span><br><span class="hljs-comment">// æ³¨æ„ï¼šæ¯ä¸€å±‚çš„viså•ç‹¬è®¾ç«‹ï¼Œä¸è¦å…±ç”¨ä¸€ä¸ªvis</span><br><span class="hljs-comment">// é¡ºå¸¦ï¼Œä¼˜å…ˆé˜Ÿåˆ—è™½ç„¶é»˜è®¤å¤§æ ¹å †ä½†æ˜¯å®ç°é‡Œç”¨åˆ°çš„æ˜¯å°äºå·ï¼Œå› æ­¤é‡è½½è¦é‡è½½å°äºå·</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 10018</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, m, k, vis[maxn][<span class="hljs-number">24</span>], f[maxn][<span class="hljs-number">24</span>];  <span class="hljs-comment">// f[i][j] åˆ°äº†ç‚¹iä¸”ç”¨äº†jæ¬¡çš„æœ€çŸ­è·¯</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; pii;<br><span class="hljs-built_in">vector</span>&lt;pii&gt; G[maxn];<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span> &#123;</span><br>    <span class="hljs-keyword">int</span> p, dis, level;  <span class="hljs-comment">// level ç¬¬å‡ å±‚ï¼ˆç”¨å‡ æ¬¡ï¼‰</span><br>    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Point&amp; b) <span class="hljs-keyword">const</span> &#123; <span class="hljs-keyword">return</span> dis &gt; b.dis; &#125;<br>&#125;;<br><span class="hljs-built_in">priority_queue</span>&lt;Point&gt; q;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Dij</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">memset</span>(f, <span class="hljs-number">0x3f</span>, <span class="hljs-keyword">sizeof</span>(f));<br>    f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    q.push((Point)&#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;);<br>    <span class="hljs-keyword">while</span> (q.size()) &#123;<br>        <span class="hljs-keyword">int</span> u = q.top().p;<br>        <span class="hljs-keyword">int</span> l = q.top().level;<br>        <span class="hljs-keyword">int</span> d = q.top().dis;<br>        q.pop();<br>        <span class="hljs-keyword">if</span> (vis[u][l])<br>            <span class="hljs-keyword">continue</span>;<br>        vis[u][l] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; G[u].size(); i++) &#123;<br>            <span class="hljs-keyword">int</span> v = G[u][i].first;<br>            <span class="hljs-keyword">int</span> d = G[u][i].second;<br>            <span class="hljs-keyword">if</span> (f[v][l] &gt; f[u][l] + d) &#123;  <span class="hljs-comment">// u -&gt; d ä¸ç”¨</span><br>                f[v][l] = f[u][l] + d;<br>                q.push((Point)&#123;v, f[v][l], l&#125;);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (f[v][l + <span class="hljs-number">1</span>] &gt; f[u][l] &amp;&amp; l &lt; k) &#123;  <span class="hljs-comment">// u -&gt; d ç”¨</span><br>                f[v][l + <span class="hljs-number">1</span>] = f[u][l];<br>                q.push((Point)&#123;v, f[v][l + <span class="hljs-number">1</span>], l + <span class="hljs-number">1</span>&#125;);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;k);<br>    <span class="hljs-keyword">while</span> (m--) &#123;<br>        <span class="hljs-keyword">int</span> a, b, t;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;t);<br>        G[a].push_back(<span class="hljs-built_in">make_pair</span>(b, t));<br>        G[b].push_back(<span class="hljs-built_in">make_pair</span>(a, t));<br>    &#125;<br>    Dij();<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, f[n][k]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é«˜ç²¾åº¦"><a href="#é«˜ç²¾åº¦" class="headerlink" title="é«˜ç²¾åº¦"></a>é«˜ç²¾åº¦</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-comment">// compareæ¯”è¾ƒå‡½æ•°ï¼šç›¸ç­‰è¿”å›0ï¼Œå¤§äºè¿”å›1ï¼Œå°äºè¿”å›-1</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-built_in">string</span> str1, <span class="hljs-built_in">string</span> str2)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (str1.length() &gt; str2.length())<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (str1.length() &lt; str2.length())<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> str1.compare(str2);<br>&#125;<br><span class="hljs-comment">//é«˜ç²¾åº¦åŠ æ³•</span><br><span class="hljs-comment">//åªèƒ½æ˜¯ä¸¤ä¸ªæ­£æ•°ç›¸åŠ </span><br><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-built_in">string</span> str1, <span class="hljs-built_in">string</span> str2)</span>  <span class="hljs-comment">//é«˜ç²¾åº¦åŠ æ³•</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">string</span> str;<br>    <span class="hljs-keyword">int</span> len1 = str1.length();<br>    <span class="hljs-keyword">int</span> len2 = str2.length();<br>    <span class="hljs-comment">//å‰é¢è¡¥0ï¼Œå¼„æˆé•¿åº¦ç›¸åŒ</span><br>    <span class="hljs-keyword">if</span> (len1 &lt; len2) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= len2 - len1; i++)<br>            str1 = <span class="hljs-string">&quot;0&quot;</span> + str1;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= len1 - len2; i++)<br>            str2 = <span class="hljs-string">&quot;0&quot;</span> + str2;<br>    &#125;<br>    len1 = str1.length();<br>    <span class="hljs-keyword">int</span> cf = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> temp;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = len1 - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        temp = str1[i] - <span class="hljs-string">&#x27;0&#x27;</span> + str2[i] - <span class="hljs-string">&#x27;0&#x27;</span> + cf;<br>        cf = temp / <span class="hljs-number">10</span>;<br>        temp %= <span class="hljs-number">10</span>;<br>        str = <span class="hljs-keyword">char</span>(temp + <span class="hljs-string">&#x27;0&#x27;</span>) + str;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cf != <span class="hljs-number">0</span>)<br>        str = <span class="hljs-keyword">char</span>(cf + <span class="hljs-string">&#x27;0&#x27;</span>) + str;<br>    <span class="hljs-keyword">return</span> str;<br>&#125;<br><span class="hljs-comment">//é«˜ç²¾åº¦å‡æ³•</span><br><span class="hljs-comment">//åªèƒ½æ˜¯ä¸¤ä¸ªæ­£æ•°ç›¸å‡ï¼Œè€Œä¸”è¦å¤§å‡å°</span><br><span class="hljs-comment">/*string sub(string str1,string str2)//é«˜ç²¾åº¦å‡æ³•</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">    string str;</span><br><span class="hljs-comment">    int tmp=str1.length()-str2.length();</span><br><span class="hljs-comment">    int cf=0;</span><br><span class="hljs-comment">    for(int i=str2.length()-1;i&gt;=0;i--)</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        if(str1[tmp+i]&lt;str2[i]+cf)</span><br><span class="hljs-comment">        &#123;</span><br><span class="hljs-comment">            str=char(str1[tmp+i]-str2[i]-cf+&#x27;0&#x27;+10)+str;</span><br><span class="hljs-comment">            cf=1;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        else</span><br><span class="hljs-comment">        &#123;</span><br><span class="hljs-comment">            str=char(str1[tmp+i]-str2[i]-cf+&#x27;0&#x27;)+str;</span><br><span class="hljs-comment">            cf=0;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    for(int i=tmp-1;i&gt;=0;i--)</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        if(str1[i]-cf&gt;=&#x27;0&#x27;)</span><br><span class="hljs-comment">        &#123;</span><br><span class="hljs-comment">            str=char(str1[i]-cf)+str;</span><br><span class="hljs-comment">            cf=0;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        else</span><br><span class="hljs-comment">        &#123;</span><br><span class="hljs-comment">            str=char(str1[i]-cf+10)+str;</span><br><span class="hljs-comment">            cf=1;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    str.erase(0,str.find_first_not_of(&#x27;0&#x27;));//å»é™¤ç»“æœä¸­å¤šä½™çš„å‰å¯¼0</span><br><span class="hljs-comment">    return str;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">//é«˜ç²¾åº¦ä¹˜æ³•</span><br><span class="hljs-comment">//åªèƒ½æ˜¯ä¸¤ä¸ªæ­£æ•°ç›¸ä¹˜</span><br><span class="hljs-comment">string mul(string str1,string str2)</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">    string str;</span><br><span class="hljs-comment">    int len1=str1.length();</span><br><span class="hljs-comment">    int len2=str2.length();</span><br><span class="hljs-comment">    string tempstr;</span><br><span class="hljs-comment">    for(int i=len2-1;i&gt;=0;i--)</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        tempstr=&quot;&quot;;</span><br><span class="hljs-comment">        int temp=str2[i]-&#x27;0&#x27;;</span><br><span class="hljs-comment">        int t=0;</span><br><span class="hljs-comment">        int cf=0;</span><br><span class="hljs-comment">        if(temp!=0)</span><br><span class="hljs-comment">        &#123;</span><br><span class="hljs-comment">            for(int j=1;j&lt;=len2-1-i;j++)</span><br><span class="hljs-comment">              tempstr+=&quot;0&quot;;</span><br><span class="hljs-comment">            for(int j=len1-1;j&gt;=0;j--)</span><br><span class="hljs-comment">            &#123;</span><br><span class="hljs-comment">                t=(temp*(str1[j]-&#x27;0&#x27;)+cf)%10;</span><br><span class="hljs-comment">                cf=(temp*(str1[j]-&#x27;0&#x27;)+cf)/10;</span><br><span class="hljs-comment">                tempstr=char(t+&#x27;0&#x27;)+tempstr;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            if(cf!=0) tempstr=char(cf+&#x27;0&#x27;)+tempstr;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        str=add(str,tempstr);</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    str.erase(0,str.find_first_not_of(&#x27;0&#x27;));</span><br><span class="hljs-comment">    return str;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">//é«˜ç²¾åº¦é™¤æ³•</span><br><span class="hljs-comment">//ä¸¤ä¸ªæ­£æ•°ç›¸é™¤ï¼Œå•†ä¸ºquotient,ä½™æ•°ä¸ºresidue</span><br><span class="hljs-comment">//éœ€è¦é«˜ç²¾åº¦å‡æ³•å’Œä¹˜æ³•</span><br><span class="hljs-comment">void div(string str1,string str2,string &amp;quotient,string &amp;residue)</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">    quotient=residue=&quot;&quot;;//æ¸…ç©º</span><br><span class="hljs-comment">    if(str2==&quot;0&quot;)//åˆ¤æ–­é™¤æ•°æ˜¯å¦ä¸º0</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        quotient=residue=&quot;ERROR&quot;;</span><br><span class="hljs-comment">        return;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    if(str1==&quot;0&quot;)//åˆ¤æ–­è¢«é™¤æ•°æ˜¯å¦ä¸º0</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        quotient=residue=&quot;0&quot;;</span><br><span class="hljs-comment">        return;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    int res=compare(str1,str2);</span><br><span class="hljs-comment">    if(res&lt;0)</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        quotient=&quot;0&quot;;</span><br><span class="hljs-comment">        residue=str1;</span><br><span class="hljs-comment">        return;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    else if(res==0)</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        quotient=&quot;1&quot;;</span><br><span class="hljs-comment">        residue=&quot;0&quot;;</span><br><span class="hljs-comment">        return;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    else</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        int len1=str1.length();</span><br><span class="hljs-comment">        int len2=str2.length();</span><br><span class="hljs-comment">        string tempstr;</span><br><span class="hljs-comment">        tempstr.append(str1,0,len2-1);</span><br><span class="hljs-comment">        for(int i=len2-1;i&lt;len1;i++)</span><br><span class="hljs-comment">        &#123;</span><br><span class="hljs-comment">            tempstr=tempstr+str1[i];</span><br><span class="hljs-comment">            tempstr.erase(0,tempstr.find_first_not_of(&#x27;0&#x27;));</span><br><span class="hljs-comment">            if(tempstr.empty())</span><br><span class="hljs-comment">              tempstr=&quot;0&quot;;</span><br><span class="hljs-comment">            for(char ch=&#x27;9&#x27;;ch&gt;=&#x27;0&#x27;;ch--)//è¯•å•†</span><br><span class="hljs-comment">            &#123;</span><br><span class="hljs-comment">                string str,tmp;</span><br><span class="hljs-comment">                str=str+ch;</span><br><span class="hljs-comment">                tmp=mul(str2,str);</span><br><span class="hljs-comment">                if(compare(tmp,tempstr)&lt;=0)//è¯•å•†æˆåŠŸ</span><br><span class="hljs-comment">                &#123;</span><br><span class="hljs-comment">                    quotient=quotient+ch;</span><br><span class="hljs-comment">                    tempstr=sub(tempstr,tmp);</span><br><span class="hljs-comment">                    break;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        residue=tempstr;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    quotient.erase(0,quotient.find_first_not_of(&#x27;0&#x27;));</span><br><span class="hljs-comment">    if(quotient.empty()) quotient=&quot;0&quot;;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">string</span> str1, str2;<br>    <span class="hljs-comment">// string str3,str4;</span><br>    <span class="hljs-built_in">cin</span> &gt;&gt; str1 &gt;&gt; str2;<br>    <span class="hljs-comment">// while()</span><br>    <span class="hljs-comment">//&#123;</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; add(str1, str2) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-comment">// cout&lt;&lt;sub(str1,str2)&lt;&lt;endl;</span><br>    <span class="hljs-comment">// cout&lt;&lt;mul(str1,str2)&lt;&lt;endl;</span><br>    <span class="hljs-comment">// div(str1,str2,str3,str4);</span><br>    <span class="hljs-comment">// cout&lt;&lt;str3&lt;&lt;&quot;  &quot;&lt;&lt;str4&lt;&lt;endl;</span><br>    <span class="hljs-comment">//&#125;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxn = <span class="hljs-number">1000001</span>;<br><span class="hljs-keyword">int</span> n, k, a[maxn];<br><span class="hljs-keyword">int</span> q[maxn], head, tail, p[maxn];<br><span class="hljs-comment">// qæ˜¯å•è°ƒé˜Ÿåˆ—ï¼Œpæ˜¯qä¸­çš„å…ƒç´ åœ¨aä¸­å¯¹åº”çš„ç¼–å·ï¼ˆç”¨äºè®¡ç®—åŒºé—´é•¿åº¦ï¼‰ã€‚</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">qmin</span><span class="hljs-params">()</span> </span>&#123;<br>    head = <span class="hljs-number">0</span>;<br>    tail = <span class="hljs-number">-1</span>;                                           <span class="hljs-comment">//ä¸ºå•¥è¦è¿™æ ·å‘¢?å› ä¸ºheadè¦ä¸¥æ ¼å¯¹åº”é¦–å…ƒç´ ï¼Œtailè¦ä¸¥æ ¼å¯¹åº”å°¾å…ƒç´ ï¼Œæ‰€ä»¥å½“tail&gt;=headæ—¶ï¼Œè¯´æ˜æœ‰å…ƒç´ ã€‚è€Œä¸€å¼€å§‹é˜Ÿåˆ—ä¸ºç©ºï¼Œè¯´ä¸€è¦è¿™æ ·èµ‹å€¼ã€‚å…¶å®è¿™è·Ÿæ™®é€šé˜Ÿåˆ—ä¸€æ ·ã€‚</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;                       <span class="hljs-comment">// a[i]è¡¨ç¤ºå½“å‰è¦å¤„ç†çš„å€¼</span><br>        <span class="hljs-keyword">while</span> (head &lt;= tail &amp;&amp; q[tail] &gt;= a[i]) --tail;  <span class="hljs-comment">//åªè¦é˜Ÿåˆ—é‡Œæœ‰å…ƒç´ ï¼Œå¹¶ä¸”å°¾å…ƒç´ æ¯”å¾…å¤„ç†å€¼å¤§ï¼Œå³è¡¨ç¤ºå°¾å…ƒç´ å·²ç»ä¸å¯èƒ½å‡ºåœºï¼Œæ‰€ä»¥å‡ºé˜Ÿã€‚ç›´åˆ°å°¾å…ƒç´ å°äºå¾…å¤„ç†å€¼ï¼Œæ»¡è¶³&quot;å•è°ƒ&quot;ã€‚</span><br>        q[++tail] = a[i];                                <span class="hljs-comment">//å¾…å¤„ç†å€¼å…¥é˜Ÿã€‚</span><br>        p[tail] = i;                                     <span class="hljs-comment">//åŒæ—¶å­˜ä¸‹å…¶ç¼–å·</span><br>        <span class="hljs-keyword">while</span> (p[head] &lt;= i - k) ++head;                 <span class="hljs-comment">//å¦‚æœé˜Ÿé¦–å…ƒç´ å·²ç»&quot;è¿‡æ—¶&quot;ï¼Œå‡ºé˜Ÿã€‚</span><br>        <span class="hljs-keyword">if</span> (i &gt;= k) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, q[head]);              <span class="hljs-comment">//è¾“å‡ºæœ€å€¼ï¼Œå³é˜Ÿé¦–å…ƒç´ ã€‚i&gt;=kè¡¨ç¤ºè¯¥è¾“å‡ºã€‚</span><br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">qmax</span><span class="hljs-params">()</span> </span>&#123;<br>    head = <span class="hljs-number">0</span>;<br>    tail = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">while</span> (head &lt;= tail &amp;&amp; q[tail] &lt;= a[i]) tail--;<br>        q[++tail] = a[i];<br>        p[tail] = i;<br>        <span class="hljs-keyword">while</span> (p[head] &lt;= i - k) ++head;<br>        <span class="hljs-keyword">if</span> (i &gt;= k) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, q[head]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;n, &amp;k);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>    qmin();<br>    qmax();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="çŸ©é˜µä¹˜æ³•"><a href="#çŸ©é˜µä¹˜æ³•" class="headerlink" title="çŸ©é˜µä¹˜æ³•"></a>çŸ©é˜µä¹˜æ³•</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> mod = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;<br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br>ll n, p;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Mat</span> &#123;</span><br>    ll m[<span class="hljs-number">108</span>][<span class="hljs-number">108</span>];<br>&#125;;<br>Mat a, e;  <span class="hljs-comment">// a:è¾“å…¥çŸ©é˜µï¼Œe:å•ä½çŸ©é˜µ</span><br><br><span class="hljs-function">Mat <span class="hljs-title">mul</span><span class="hljs-params">(Mat x, Mat y)</span> </span>&#123;<br>    Mat c;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            c.m[i][j] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">1</span>; k &lt;= n; k++)<br>                c.m[i][j] = c.m[i][j] % mod + x.m[i][k] * y.m[k][j] % mod;<br>    <span class="hljs-keyword">return</span> c;<br>&#125;<br><br><span class="hljs-function">Mat <span class="hljs-title">qpow</span><span class="hljs-params">(Mat x, ll y)</span> </span>&#123;  <span class="hljs-comment">// x^y</span><br>    Mat ans = e;<br>    <span class="hljs-keyword">while</span> (y) &#123;<br>        <span class="hljs-keyword">if</span> (y &amp; <span class="hljs-number">1</span>)<br>            ans = mul(ans, x);<br>        x = mul(x, x);<br>        y &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; p;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            <span class="hljs-built_in">cin</span> &gt;&gt; a.m[i][j];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        e.m[i][i] = <span class="hljs-number">1</span>;<br>    Mat ans = qpow(a, p);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            <span class="hljs-built_in">cout</span> &lt;&lt; ans.m[i][j] % mod &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ™®é€šå¹³è¡¡æ ‘"><a href="#æ™®é€šå¹³è¡¡æ ‘" class="headerlink" title="æ™®é€šå¹³è¡¡æ ‘"></a>æ™®é€šå¹³è¡¡æ ‘</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxn = <span class="hljs-number">1000018</span>, INF = <span class="hljs-number">1e9</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">rd</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>, f = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">char</span> ch;<br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isdigit</span>(ch = getchar()))<br>        <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;-&#x27;</span>) f = <span class="hljs-number">0</span>;<br>    ret = ch ^ <span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">isdigit</span>(ch = getchar())) ret = (ret &lt;&lt; <span class="hljs-number">1</span>) + (ret &lt;&lt; <span class="hljs-number">3</span>) + (ch ^ <span class="hljs-string">&#x27;0&#x27;</span>);<br>    <span class="hljs-keyword">return</span> f ? ret : -ret;<br>&#125;<br><br><span class="hljs-keyword">int</span> n;<br><span class="hljs-keyword">int</span> ch[maxn][<span class="hljs-number">2</span>];  <span class="hljs-comment">//[i][0]ä»£è¡¨iå·¦å„¿å­ï¼Œ[i][1]ä»£è¡¨iå³å„¿å­</span><br><span class="hljs-keyword">int</span> val[maxn], dat[maxn];<br><span class="hljs-keyword">int</span> size[maxn], cnt[maxn];<br><span class="hljs-keyword">int</span> tot, root;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">New</span><span class="hljs-params">(<span class="hljs-keyword">int</span> v)</span> </span>&#123;        <span class="hljs-comment">//æ–°å¢èŠ‚ç‚¹ï¼Œ</span><br>    val[++tot] = v;     <span class="hljs-comment">//èŠ‚ç‚¹èµ‹å€¼</span><br>    dat[tot] = rand();  <span class="hljs-comment">//éšæœºä¼˜å…ˆçº§</span><br>    size[tot] = <span class="hljs-number">1</span>;      <span class="hljs-comment">//ç›®å‰æ˜¯æ–°å»ºå¶å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å­æ ‘å¤§å°ä¸º1</span><br>    cnt[tot] = <span class="hljs-number">1</span>;       <span class="hljs-comment">//æ–°å»ºèŠ‚ç‚¹åŒç†å‰¯æœ¬æ•°ä¸º1</span><br>    <span class="hljs-keyword">return</span> tot;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pushup</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;  <span class="hljs-comment">//å’Œçº¿æ®µæ ‘çš„pushupæ›´æ–°ä¸€æ ·</span><br>    size[id] = size[ch[id][<span class="hljs-number">0</span>]] + size[ch[id][<span class="hljs-number">1</span>]] + cnt[id];<br>    <span class="hljs-comment">//æœ¬èŠ‚ç‚¹å­æ ‘å¤§å° = å·¦å„¿å­å­æ ‘å¤§å° + å³å„¿å­å­æ ‘å¤§å° + æœ¬èŠ‚ç‚¹å‰¯æœ¬æ•°</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">build</span><span class="hljs-params">()</span> </span>&#123;<br>    root = New(-INF);<br>    ch[root][<span class="hljs-number">1</span>] = New(INF);  <span class="hljs-comment">//å…ˆåŠ å…¥æ­£æ— ç©·å’Œè´Ÿæ— ç©·ï¼Œä¾¿äºä¹‹åæ“ä½œ(è²Œä¼¼ä¸åŠ ä¹Ÿè¡Œ)</span><br>    pushup(root);            <span class="hljs-comment">//å› ä¸ºINF &gt; -INF,æ‰€ä»¥æ˜¯å³å­æ ‘ï¼Œ</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Rotate</span><span class="hljs-params">(<span class="hljs-keyword">int</span>&amp; id, <span class="hljs-keyword">int</span> d)</span> </span>&#123;     <span class="hljs-comment">// idæ˜¯å¼•ç”¨ä¼ é€’ï¼Œd(irection)ä¸ºæ—‹è½¬æ–¹å‘ï¼Œ0ä¸ºå·¦æ—‹ï¼Œ1ä¸ºå³æ—‹</span><br>    <span class="hljs-keyword">int</span> temp = ch[id][d ^ <span class="hljs-number">1</span>];     <span class="hljs-comment">//æ—‹è½¬ç†è§£ï¼šæ‰¾ä¸ªåŠ¨å›¾çœ‹ä¸€çœ‹å°±å¥½(æˆ–å‚è§å…¶ä»–OIerçš„blog)</span><br>    ch[id][d ^ <span class="hljs-number">1</span>] = ch[temp][d];  <span class="hljs-comment">//è¿™é‡Œè®²ä¸€ä¸ªè®°å¿†æŠ€å·§ï¼Œè¿™äº›æ•°æ®éƒ½æ˜¯è¢«è®°å½•åé©¬ä¸Šä¿®æ”¹</span><br>    ch[temp][d] = id;             <span class="hljs-comment">//æ‰€ä»¥åƒâ€œZâ€ä¸€æ ·</span><br>    id = temp;                    <span class="hljs-comment">//æ¯”å¦‚è¿™ä¸ªidï¼Œåœ¨ä¸Šä¸€è¡Œæ‰è¢«è®°å½•è¿‡ï¼Œch[temp][d]ã€ch[id][d ^ 1]ä¹Ÿæ˜¯ä¸€æ ·çš„</span><br>    pushup(ch[id][d]);<br>    pushup(id);  <span class="hljs-comment">//æ—‹è½¬ä»¥åsizeä¼šæ”¹å˜ï¼Œçœ‹å›¾å°±ä¼šå‘ç°åªæ›´æ–°è‡ªå·±å’Œè½¬ä¸Šæ¥çš„ç‚¹ï¼Œpushupä¸€ä¸‹,æ³¨æ„å…ˆå­èŠ‚ç‚¹å†çˆ¶èŠ‚ç‚¹</span><br>&#125;  <span class="hljs-comment">//æ—‹è½¬å®è´¨æ˜¯(&#123;åœ¨æ»¡è¶³BSTçš„æ€§è´¨çš„åŸºç¡€ä¸Šæ¯”è¾ƒä¼˜å…ˆçº§&#125;é€šè¿‡äº¤æ¢æœ¬èŠ‚ç‚¹å’Œå…¶æŸä¸ªå¶å­èŠ‚ç‚¹)æŠŠé“¾å‰å¼€æˆäºŒå‰å½¢çŠ¶(ä»è€Œæ§åˆ¶æ·±åº¦)ï¼Œå¯ä»¥çœ‹å›¾ç†è§£ä¸€ä¸‹</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-keyword">int</span>&amp; id, <span class="hljs-keyword">int</span> v)</span> </span>&#123;  <span class="hljs-comment">// idä¾ç„¶æ˜¯å¼•ç”¨ï¼Œåœ¨æ–°å»ºèŠ‚ç‚¹æ—¶å¯ä»¥ä½“ç°</span><br>    <span class="hljs-keyword">if</span> (!id) &#123;<br>        id = New(v);  <span class="hljs-comment">//è‹¥èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (v == val[id])<br>        cnt[id]++;                                        <span class="hljs-comment">//è‹¥èŠ‚ç‚¹å·²å­˜åœ¨ï¼Œåˆ™å‰¯æœ¬æ•°++;</span><br>    <span class="hljs-keyword">else</span> &#123;                                                <span class="hljs-comment">//è¦æ»¡è¶³BSTæ€§è´¨ï¼Œå°äºæ’åˆ°å·¦è¾¹ï¼Œå¤§äºæ’åˆ°å³è¾¹</span><br>        <span class="hljs-keyword">int</span> d = v &lt; val[id] ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>;                      <span class="hljs-comment">//è¿™ä¸ªdæ˜¯æ–¹å‘çš„æ„æ€ï¼ŒæŒ‰ç…§BSTçš„æ€§è´¨ï¼Œå°äºæœ¬èŠ‚ç‚¹åˆ™å‘å·¦ï¼Œå¤§äºå‘å³</span><br>        insert(ch[id][d], v);                             <span class="hljs-comment">//é€’å½’å®ç°</span><br>        <span class="hljs-keyword">if</span> (dat[id] &lt; dat[ch[id][d]]) Rotate(id, d ^ <span class="hljs-number">1</span>);  <span class="hljs-comment">//(å‚è€ƒä¸€ä¸‹å›¾)ä¸å·¦èŠ‚ç‚¹äº¤æ¢å³æ—‹ï¼Œä¸å³èŠ‚ç‚¹äº¤æ¢å·¦æ—‹</span><br>    &#125;<br>    pushup(id);  <span class="hljs-comment">//ç°åœ¨æ›´æ–°ä¸€ä¸‹æœ¬èŠ‚ç‚¹çš„ä¿¡æ¯</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Remove</span><span class="hljs-params">(<span class="hljs-keyword">int</span>&amp; id, <span class="hljs-keyword">int</span> v)</span> </span>&#123;  <span class="hljs-comment">//æœ€éš¾çš„éƒ¨åˆ†äº†</span><br>    <span class="hljs-keyword">if</span> (!id) <span class="hljs-keyword">return</span>;           <span class="hljs-comment">//åˆ°è¿™äº†å‘ç°æŸ¥ä¸åˆ°è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¯¥ç‚¹ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span><br>    <span class="hljs-keyword">if</span> (v == val[id]) &#123;        <span class="hljs-comment">//æ£€ç´¢åˆ°äº†è¿™ä¸ªå€¼</span><br>        <span class="hljs-keyword">if</span> (cnt[id] &gt; <span class="hljs-number">1</span>) &#123;<br>            cnt[id]--;<br>            pushup(id);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;                                                         <span class="hljs-comment">//è‹¥å‰¯æœ¬ä¸æ­¢ä¸€ä¸ªï¼Œå‡å»ä¸€ä¸ªå°±å¥½</span><br>        <span class="hljs-keyword">if</span> (ch[id][<span class="hljs-number">0</span>] || ch[id][<span class="hljs-number">1</span>]) &#123;                             <span class="hljs-comment">//å‘ç°åªæœ‰ä¸€ä¸ªå€¼ï¼Œä¸”æœ‰å„¿å­èŠ‚ç‚¹,æˆ‘ä»¬åªèƒ½æŠŠå€¼æ—‹è½¬åˆ°åº•éƒ¨åˆ é™¤</span><br>            <span class="hljs-keyword">if</span> (!ch[id][<span class="hljs-number">1</span>] || dat[ch[id][<span class="hljs-number">0</span>]] &gt; dat[ch[id][<span class="hljs-number">1</span>]]) &#123;  <span class="hljs-comment">//å½“å‰ç‚¹è¢«ç§»èµ°ä¹‹åï¼Œä¼šæœ‰ä¸€ä¸ªæ–°çš„ç‚¹è¡¥ä¸Šæ¥(å·¦å„¿å­æˆ–å³å„¿å­)ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§å¤§çš„è¡¥ä¸Šæ¥</span><br>                Rotate(id, <span class="hljs-number">1</span>);<br>                Remove(ch[id][<span class="hljs-number">1</span>], v);  <span class="hljs-comment">//æˆ‘ä»¬ä¼šå‘ç°ï¼Œå³æ—‹æ˜¯ä¸å·¦å„¿å­äº¤æ¢ï¼Œå½“å‰ç‚¹å˜æˆå³èŠ‚ç‚¹ï¼›å·¦æ—‹åˆ™æ˜¯ä¸å³å„¿å­äº¤æ¢ï¼Œå½“å‰ç‚¹å˜ä¸ºå·¦èŠ‚ç‚¹</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                Rotate(id, <span class="hljs-number">0</span>);<br>                Remove(ch[id][<span class="hljs-number">0</span>], v);<br>            &#125;<br>            pushup(id);<br>        &#125; <span class="hljs-keyword">else</span><br>            id = <span class="hljs-number">0</span>;  <span class="hljs-comment">//å‘ç°æœ¬èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤</span><br>        <span class="hljs-keyword">return</span>;      <span class="hljs-comment">//è¿™ä¸ªreturnå¯¹åº”çš„æ˜¯æ£€ç´¢åˆ°å€¼deæ‰€æœ‰æƒ…å†µ</span><br>    &#125;<br>    v &lt; val[id] ? Remove(ch[id][<span class="hljs-number">0</span>], v) : Remove(ch[id][<span class="hljs-number">1</span>], v);  <span class="hljs-comment">//ç»§ç»­BSTæ€§è´¨</span><br>    pushup(id);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">get_rank</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> v)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!id) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">//è‹¥æŸ¥è¯¢å€¼ä¸å­˜åœ¨ï¼Œè¿”å›</span><br>    <span class="hljs-keyword">if</span> (v == val[id])<br>        <span class="hljs-keyword">return</span> size[ch[id][<span class="hljs-number">0</span>]] + <span class="hljs-number">1</span>;  <span class="hljs-comment">//æŸ¥è¯¢åˆ°è¯¥å€¼ï¼Œç”±BSTæ€§è´¨å¯çŸ¥ï¼šè¯¥ç‚¹å·¦è¾¹å€¼éƒ½æ¯”è¯¥ç‚¹çš„å€¼(æŸ¥è¯¢å€¼)å°ï¼Œæ•…rankä¸ºå·¦å„¿å­å¤§å° + 1</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v &lt; val[id])<br>        <span class="hljs-keyword">return</span> get_rank(ch[id][<span class="hljs-number">0</span>], v);  <span class="hljs-comment">//å‘ç°éœ€æŸ¥è¯¢çš„ç‚¹åœ¨è¯¥ç‚¹å·¦è¾¹ï¼Œå¾€å·¦è¾¹é€’å½’æŸ¥è¯¢</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> size[ch[id][<span class="hljs-number">0</span>]] + cnt[id] + get_rank(ch[id][<span class="hljs-number">1</span>], v);  <span class="hljs-comment">//è‹¥æŸ¥è¯¢å€¼å¤§äºè¯¥ç‚¹å€¼ã€‚è¯´æ˜è¯¢é—®ç‚¹åœ¨å½“å‰ç‚¹çš„å³ä¾§ï¼Œä¸”æ­¤ç‚¹çš„å€¼éƒ½å°äºæŸ¥è¯¢å€¼ï¼Œæ‰€ä»¥è¦åŠ ä¸Šcnt[id]</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">get_val</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> rank)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!id) <span class="hljs-keyword">return</span> INF;  <span class="hljs-comment">//ä¸€ç›´å‘å³æ‰¾æ‰¾ä¸åˆ°ï¼Œè¯´æ˜æ˜¯æ­£æ— ç©·</span><br>    <span class="hljs-keyword">if</span> (rank &lt;= size[ch[id][<span class="hljs-number">0</span>]])<br>        <span class="hljs-keyword">return</span> get_val(ch[id][<span class="hljs-number">0</span>], rank);  <span class="hljs-comment">//å·¦è¾¹æ’åå·²ç»å¤§äºrankäº†ï¼Œè¯´æ˜rankå¯¹åº”çš„å€¼åœ¨å·¦å„¿å­é‚£é‡Œ</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rank &lt;= size[ch[id][<span class="hljs-number">0</span>]] + cnt[id])<br>        <span class="hljs-keyword">return</span> val[id];  <span class="hljs-comment">//ä¸Šä¸€æ­¥æ’é™¤äº†åœ¨å·¦åŒºé—´çš„æƒ…å†µï¼Œè‹¥æ˜¯rankåœ¨å·¦ä¸ä¸­(ç›®å‰èŠ‚ç‚¹)ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›ç›®å‰èŠ‚ç‚¹(ä¸­åŒºé—´)çš„å€¼</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> get_val(ch[id][<span class="hljs-number">1</span>], rank - size[ch[id][<span class="hljs-number">0</span>]] - cnt[id]);  <span class="hljs-comment">//å‰©ä¸‹åªèƒ½åœ¨å³åŒºé—´æ‰¾äº†ï¼Œrankå‡å»å·¦åŒºé—´å¤§å°å’Œä¸­åŒºé—´ï¼Œç»§ç»­é€’å½’</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">get_pre</span><span class="hljs-params">(<span class="hljs-keyword">int</span> v)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> id = root, pre;  <span class="hljs-comment">//é€’å½’ä¸å¥½è¿”å›ï¼Œä»¥å¾ªç¯æ±‚è§£</span><br>    <span class="hljs-keyword">while</span> (id) &#123;         <span class="hljs-comment">//æŸ¥åˆ°èŠ‚ç‚¹ä¸å­˜åœ¨ä¸ºæ­¢</span><br>        <span class="hljs-keyword">if</span> (val[id] &lt; v) &#123;<br>            pre = val[id];<br>            id = ch[id][<span class="hljs-number">1</span>];  <span class="hljs-comment">//æ»¡è¶³å½“å‰èŠ‚ç‚¹æ¯”ç›®æ ‡å°ï¼Œå¾€å½“å‰èŠ‚ç‚¹çš„å³ä¾§å¯»æ‰¾æœ€ä¼˜å€¼</span><br>        &#125; <span class="hljs-keyword">else</span><br>            id = ch[id][<span class="hljs-number">0</span>];  <span class="hljs-comment">//æ— è®ºæ˜¯æ¯”ç›®æ ‡èŠ‚ç‚¹å¤§è¿˜æ˜¯ç­‰äºç›®æ ‡èŠ‚ç‚¹ï¼Œéƒ½ä¸æ»¡è¶³å‰é©±æ¡ä»¶ï¼Œåº”å¾€æ›´å°å¤„é è¿‘</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> pre;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">get_next</span><span class="hljs-params">(<span class="hljs-keyword">int</span> v)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> id = root, nxt;<br>    <span class="hljs-keyword">while</span> (id) &#123;<br>        <span class="hljs-keyword">if</span> (val[id] &gt; v) &#123;<br>            nxt = val[id];<br>            id = ch[id][<span class="hljs-number">0</span>];  <span class="hljs-comment">//åŒç†ï¼Œæ»¡è¶³æ¡ä»¶å‘å·¦å¯»æ‰¾æ›´å°è§£(ä¹Ÿå°±æ˜¯æœ€ä¼˜è§£)</span><br>        &#125; <span class="hljs-keyword">else</span><br>            id = ch[id][<span class="hljs-number">1</span>];  <span class="hljs-comment">//ä¸ä¸Šæ–¹åŒç†</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> nxt;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    build();  <span class="hljs-comment">//ä¸è¦å¿˜è®°åˆå§‹åŒ– [è¿è¡Œbuild()ä¼šè¿åŒrootä¸€å¹¶åˆå§‹åŒ–ï¼Œæ‰€ä»¥å¾ˆé‡è¦]</span><br>    n = rd();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">int</span> cmd = rd(), x = rd();<br>        <span class="hljs-keyword">if</span> (cmd == <span class="hljs-number">1</span>)<br>            insert(root, x);  <span class="hljs-comment">//å‡½æ•°éƒ½å†™å¥½äº†ï¼Œæ³¨æ„ï¼šéœ€è¦é€’å½’çš„å‡½æ•°éƒ½ä»æ ¹å¼€å§‹ï¼Œä¸éœ€è¦é€’å½’çš„å‡½æ•°ç›´æ¥æŸ¥è¯¢</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd == <span class="hljs-number">2</span>)<br>            Remove(root, x);<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd == <span class="hljs-number">3</span>)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, get_rank(root, x) - <span class="hljs-number">1</span>);  <span class="hljs-comment">//æ³¨æ„ï¼šå› ä¸ºåˆå§‹åŒ–æ—¶æ’å…¥äº†INFå’Œ-INF,æ‰€ä»¥æŸ¥è¯¢æ’åæ—¶è¦å‡1(-INFä¸æ˜¯ç¬¬ä¸€å°ï¼Œæ˜¯â€œç¬¬é›¶å°â€)</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd == <span class="hljs-number">4</span>)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, get_val(root, x + <span class="hljs-number">1</span>));  <span class="hljs-comment">//åŒç†ï¼Œç”¨æ’åæŸ¥è¯¢å€¼å¾—æ—¶å€™è¦æŸ¥x + 1åï¼Œå› ä¸ºç¬¬ä¸€å(å…¶å®ä¸æ˜¯)æ˜¯-INF</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd == <span class="hljs-number">5</span>)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, get_pre(x));<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd == <span class="hljs-number">6</span>)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, get_next(x));<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¼ºè¿é€šç¼©ç‚¹"><a href="#å¼ºè¿é€šç¼©ç‚¹" class="headerlink" title="å¼ºè¿é€šç¼©ç‚¹"></a>å¼ºè¿é€šç¼©ç‚¹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 208</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, dfn[maxn], low[maxn], idx, stk[maxn], top, clr[maxn], numc, ind[maxn];<br><span class="hljs-comment">//ixd indexæ—¶é—´æˆ³</span><br><span class="hljs-keyword">bool</span> ins[maxn];<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; G[maxn];<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Tarjan</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u)</span> </span>&#123;<br>    dfn[u] = low[u] = ++idx;<br>    stk[++top] = u;<br>    ins[u] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; G[u].size(); i++) &#123;<br>        <span class="hljs-keyword">int</span> v = G[u][i];<br>        <span class="hljs-keyword">if</span> (!dfn[v]) &#123;<br>            Tarjan(v);<br>            low[u] = min(low[u], low[v]);  <span class="hljs-comment">//æ‰¾çˆ¶äº²ï¼ˆç¯çš„å¼€å¤´ï¼‰æœ€å°çš„</span><br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ins[v]) &#123;<br>            low[u] = min(low[u], dfn[v]);  <span class="hljs-comment">//åˆ¤æ–­è°æ‰æ˜¯çˆ¶äº²</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (dfn[u] == low[u]) &#123;  <span class="hljs-comment">//æ›´æ–°å®Œä¸€è½®äº†ï¼Œå‘ç°è‡ªå·±ç«Ÿç„¶å°±æ˜¯çˆ¶äº²</span><br>        ++numc;<br>        <span class="hljs-keyword">while</span> (stk[top + <span class="hljs-number">1</span>] != u) &#123;<br>            clr[stk[top]] = numc;  <span class="hljs-comment">//å‡ºæ ˆ &amp; æŸ“è‰²</span><br>            ins[stk[top--]] = <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">int</span> x;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-built_in">cin</span> &gt;&gt; x) G[i].push_back(x);<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">if</span> (!dfn[i]) Tarjan(i);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; G[i].size(); j++)<br>            <span class="hljs-keyword">if</span> (clr[i] != clr[G[i][j]])<br>                ++ind[clr[G[i][j]]];<br><br>    <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= numc; i++)<br>        <span class="hljs-keyword">if</span> (!ind[i]) ++ans;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, ans);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æ ‘çŠ¶æ•°ç»„"><a href="#æ ‘çŠ¶æ•°ç»„" class="headerlink" title="æ ‘çŠ¶æ•°ç»„"></a>æ ‘çŠ¶æ•°ç»„</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> MAXN = <span class="hljs-number">500008</span>;<br><span class="hljs-keyword">int</span> c[MAXN], n, m;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lowbit</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> x &amp; (-x);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> v)</span> </span>&#123;<br>    <span class="hljs-keyword">while</span> (x &lt;= n) &#123;<br>        c[x] += v;<br>        x += lowbit(x);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (x &gt; <span class="hljs-number">0</span>) &#123;<br>        ret += c[x];<br>        x -= lowbit(x);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ret;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> p;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;p);<br>        update(i, p);<br>    &#125;<br>    <span class="hljs-keyword">while</span> (m--) &#123;<br>        <span class="hljs-keyword">int</span> k, a, b;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;k, &amp;a, &amp;b);<br>        <span class="hljs-keyword">if</span> (k == <span class="hljs-number">1</span>)<br>            update(a, b);<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, sum(b) - sum(a - <span class="hljs-number">1</span>));<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//æ ‘çŠ¶æ•°ç»„ver2</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> lowbit(x) x &amp; -x</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br>ll tree[<span class="hljs-number">500005</span>];<br><span class="hljs-keyword">int</span> n, m;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll num)</span> </span>&#123;<br>    <span class="hljs-keyword">while</span> (x &lt;= n) &#123;<br>        tree[x] += num;<br>        x += lowbit(x);<br>    &#125;<br>&#125;<br><br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    ll ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (x) &#123;<br>        ans += tree[x];<br>        x -= lowbit(x);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);<br>    ll last = <span class="hljs-number">0</span>, now;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;now);<br>        add(i, now - last);<br>        last = now;<br>    &#125;<br>    <span class="hljs-keyword">int</span> flg;<br>    <span class="hljs-keyword">while</span> (m--) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;flg);<br>        <span class="hljs-keyword">if</span> (flg == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">int</span> x, y;<br>            ll k;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%lld&quot;</span>, &amp;x, &amp;y, &amp;k);<br>            add(x, k);<br>            add(y + <span class="hljs-number">1</span>, -k);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (flg == <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">int</span> x;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, query(x));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="çº¿æ®µæ ‘1"><a href="#çº¿æ®µæ ‘1" class="headerlink" title="çº¿æ®µæ ‘1"></a>çº¿æ®µæ ‘1</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 1000016</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, m, a[maxn], t[maxn &lt;&lt; <span class="hljs-number">2</span>], tag[maxn &lt;&lt; <span class="hljs-number">2</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-keyword">int</span> p, <span class="hljs-keyword">int</span> pl, <span class="hljs-keyword">int</span> pr)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (pl == pr) &#123;<br>        t[p] = a[pl];<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">int</span> mid = (pl + pr) &gt;&gt; <span class="hljs-number">1</span>;<br>    build(p &lt;&lt; <span class="hljs-number">1</span>, pl, mid);<br>    build(p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, pr);<br>    t[p] = t[p &lt;&lt; <span class="hljs-number">1</span>] + t[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push_down</span><span class="hljs-params">(<span class="hljs-keyword">int</span> p, <span class="hljs-keyword">int</span> pl, <span class="hljs-keyword">int</span> pr)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!tag[p]) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">int</span> mid = (pl + pr) &gt;&gt; <span class="hljs-number">1</span>;<br>    tag[p &lt;&lt; <span class="hljs-number">1</span>] += tag[p];<br>    t[p &lt;&lt; <span class="hljs-number">1</span>] += (mid - pl + <span class="hljs-number">1</span>) * tag[p];<br>    tag[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] += tag[p];<br>    t[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] += (pr - mid) * tag[p];<br>    tag[p] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-keyword">int</span> p, <span class="hljs-keyword">int</span> pl, <span class="hljs-keyword">int</span> pr, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> k)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (l &lt;= pl &amp;&amp; pr &lt;= r) &#123;<br>        tag[p] += k;<br>        t[p] += k * (pr - pl + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    push_down(p, pl, pr);<br>    <span class="hljs-keyword">int</span> mid = (pl + pr) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (l &lt;= mid) update(p &lt;&lt; <span class="hljs-number">1</span>, pl, mid, l, r, k);<br>    <span class="hljs-keyword">if</span> (r &gt; mid) update(p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, pr, l, r, k);<br>    t[p] = t[p &lt;&lt; <span class="hljs-number">1</span>] + t[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-keyword">int</span> p, <span class="hljs-keyword">int</span> pl, <span class="hljs-keyword">int</span> pr, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (l &lt;= pl &amp;&amp; pr &lt;= r) <span class="hljs-keyword">return</span> t[p];<br>    <span class="hljs-keyword">int</span> mid = (pl + pr) &gt;&gt; <span class="hljs-number">1</span>;<br>    push_down(p, pl, pr);<br>    <span class="hljs-keyword">if</span> (l &lt;= mid) ret += query(p &lt;&lt; <span class="hljs-number">1</span>, pl, mid, l, r);<br>    <span class="hljs-keyword">if</span> (r &gt; mid) ret += query(p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, pr, l, r);<br>    <span class="hljs-keyword">return</span> ret;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> c, l, r, d;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) <span class="hljs-built_in">cin</span> &gt;&gt; a[i];<br>    build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n);<br>    <span class="hljs-keyword">while</span> (m--) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;c);<br>        <span class="hljs-keyword">if</span> (c == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; l &gt;&gt; r &gt;&gt; d;<br>            update(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n, l, r, d);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; l &gt;&gt; r;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; query(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n, l, r) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="çº¿æ®µæ ‘2"><a href="#çº¿æ®µæ ‘2" class="headerlink" title="çº¿æ®µæ ‘2"></a>çº¿æ®µæ ‘2</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// Code by ex-Aster</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxn = <span class="hljs-number">100008</span>;<br>ll n, m, a[maxn], t[maxn &lt;&lt; <span class="hljs-number">2</span>], tagp[maxn &lt;&lt; <span class="hljs-number">2</span>], tagm[maxn &lt;&lt; <span class="hljs-number">2</span>], P;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">build</span><span class="hljs-params">(ll p, ll l, ll r)</span> </span>&#123;<br>    tagp[p] = <span class="hljs-number">0</span>;<br>    tagm[p] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        t[p] = a[l];<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    ll mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    build(p &lt;&lt; <span class="hljs-number">1</span>, l, mid);<br>    build(p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>    t[p] = (t[p &lt;&lt; <span class="hljs-number">1</span>] + t[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>]) % P;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push_down</span><span class="hljs-params">(ll p, ll l, ll r)</span> </span>&#123;  <span class="hljs-comment">//æ ‡è®°ä¸‹ä¼ </span><br>    ll mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;          <span class="hljs-comment">//æ³¨æ„å„ç§æ“ä½œçš„ åŠ  ä¹˜ çš„é¡ºåº</span><br><br>    t[p &lt;&lt; <span class="hljs-number">1</span>] = (t[p &lt;&lt; <span class="hljs-number">1</span>] * tagm[p] + (mid - l + <span class="hljs-number">1</span>) * tagp[p]) % P;  <span class="hljs-comment">// tagpè¯¥ä¹˜çš„åœ¨ä¹‹å‰å·²ç»ä¹˜è¿‡äº†</span><br>    t[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] = (t[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] * tagm[p] + (r - mid) * tagp[p]) % P;<br><br>    tagm[p &lt;&lt; <span class="hljs-number">1</span>] = (tagm[p &lt;&lt; <span class="hljs-number">1</span>] * tagm[p]) % P;<br>    tagp[p &lt;&lt; <span class="hljs-number">1</span>] = (tagp[p &lt;&lt; <span class="hljs-number">1</span>] * tagm[p] + tagp[p]) % P;<br><br>    tagm[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] = (tagm[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] * tagm[p]) % P;<br>    tagp[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] = (tagp[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] * tagm[p] + tagp[p]) % P;<br><br>    tagp[p] = <span class="hljs-number">0</span>;<br>    tagm[p] = <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">updatep</span><span class="hljs-params">(ll p, ll pl, ll pr, ll l, ll r, ll k)</span> </span>&#123;  <span class="hljs-comment">//åŒºé—´åŠ </span><br>    <span class="hljs-keyword">if</span> (pr &lt; l || pl &gt; r) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (l &lt;= pl &amp;&amp; pr &lt;= r) &#123;<br>        t[p] = (t[p] + k * (pr - pl + <span class="hljs-number">1</span>)) % P;<br>        tagp[p] = (tagp[p] + k) % P;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    push_down(p, pl, pr);<br>    ll mid = (pl + pr) &gt;&gt; <span class="hljs-number">1</span>;<br>    updatep(p &lt;&lt; <span class="hljs-number">1</span>, pl, mid, l, r, k);  <span class="hljs-comment">//ç»§ç»­æ›´æ–°å„¿å­</span><br>    updatep(p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, pr, l, r, k);<br>    t[p] = (t[p &lt;&lt; <span class="hljs-number">1</span>] + t[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>]) % P;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">updatem</span><span class="hljs-params">(ll p, ll pl, ll pr, ll l, ll r, ll k)</span> </span>&#123;  <span class="hljs-comment">//åŒºé—´ä¹˜ æ³¨æ„ç»™å·²æœ‰tagpä¹˜k</span><br>    <span class="hljs-keyword">if</span> (pr &lt; l || pl &gt; r) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (l &lt;= pl &amp;&amp; pr &lt;= r) &#123;<br>        t[p] = (t[p] * k) % P;<br>        tagp[p] = (tagp[p] * k) % P;<br>        tagm[p] = (tagm[p] * k) % P;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    push_down(p, pl, pr);<br>    ll mid = (pl + pr) &gt;&gt; <span class="hljs-number">1</span>;<br>    updatem(p &lt;&lt; <span class="hljs-number">1</span>, pl, mid, l, r, k);  <span class="hljs-comment">//ç»§ç»­æ›´æ–°å„¿å­</span><br>    updatem(p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, pr, l, r, k);<br>    t[p] = (t[p &lt;&lt; <span class="hljs-number">1</span>] + t[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>]) % P;<br>&#125;<br><br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(ll p, ll pl, ll pr, ll l, ll r)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (pr &lt; l || pl &gt; r) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (l &lt;= pl &amp;&amp; pr &lt;= r) <span class="hljs-keyword">return</span> t[p];<br>    push_down(p, pl, pr);<br>    ll mid = (pl + pr) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> (query(p &lt;&lt; <span class="hljs-number">1</span>, pl, mid, l, r) + query(p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, pr, l, r)) % P;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ll C, x, y, k;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; P;<br>    <span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;a[i]);<br>    build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n);<br>    <span class="hljs-keyword">while</span> (m--) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;C);<br>        <span class="hljs-keyword">switch</span> (C) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: &#123;<br>                <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld%lld&quot;</span>, &amp;x, &amp;y, &amp;k);<br>                updatem(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n, x, y, k);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: &#123;<br>                <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld%lld&quot;</span>, &amp;x, &amp;y, &amp;k);<br>                updatep(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n, x, y, k);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: &#123;<br>                <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>, &amp;x, &amp;y);<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, query(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n, x, y));<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="çº¿æ€§ç­›ç´ æ•°"><a href="#çº¿æ€§ç­›ç´ æ•°" class="headerlink" title="çº¿æ€§ç­›ç´ æ•°"></a>çº¿æ€§ç­›ç´ æ•°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> pos = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; maxn; i++) &#123;<br>        <span class="hljs-keyword">if</span> (notprime[i] == <span class="hljs-number">0</span>) prime[++pos] = i;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= pos &amp;&amp; i * prime[j] &lt; maxn; j++) &#123;<br>            notprime[i * prime[j]] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">if</span> (i % prime[j] == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> pos = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; maxn; i++) &#123;<br>        <span class="hljs-keyword">if</span> (!notprime[i]) prime[++pos] = i;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; i &lt;= pos &amp;&amp; i * prime[j] &lt; maxn; j++) &#123;<br>            notprime[i * prime[j]] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">if</span> (i % prime[j] == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="è´¨å› æ•°åˆ†è§£"><a href="#è´¨å› æ•°åˆ†è§£" class="headerlink" title="è´¨å› æ•°åˆ†è§£"></a>è´¨å› æ•°åˆ†è§£</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 1016</span><br><span class="hljs-keyword">int</span> c[maxn], n;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">while</span> (x != <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt;= x; i++) &#123;<br>            <span class="hljs-keyword">while</span> (x % i == <span class="hljs-number">0</span>) &#123;<br>                x /= i;<br>                ++c[i];<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> x, x0;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; x;<br>    x0 = x;<br>    divide(x);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt;= x0; i++)<br>        <span class="hljs-keyword">if</span> (c[i]) <span class="hljs-built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; c[i] &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æœ€å°ç”Ÿæˆæ ‘"><a href="#æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘"></a>æœ€å°ç”Ÿæˆæ ‘</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> MAXN = <span class="hljs-number">580000</span>;<br><span class="hljs-keyword">int</span> n, m, fa[MAXN], rank_[MAXN];<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">edge</span> &#123;</span><br>    <span class="hljs-keyword">int</span> u, v, cost;<br>    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> edge &amp;x) <span class="hljs-keyword">const</span> &#123;<br>        <span class="hljs-keyword">return</span> cost &lt; x.cost;<br>    &#125;<br>&#125; es[MAXN];<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (fa[a] == a)<br>        <span class="hljs-keyword">return</span> a;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> fa[a] = find(fa[a]);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unite</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> x = find(a);<br>    <span class="hljs-keyword">int</span> y = find(b);<br>    <span class="hljs-keyword">if</span> (x == y) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (rank_[x] &lt; rank_[y])<br>        fa[x] = y;<br>    <span class="hljs-keyword">else</span> &#123;<br>        fa[y] = x;<br>        <span class="hljs-keyword">if</span> (rank_[x] == rank_[y]) rank_[x]++;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">same</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> find(a) == find(b);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>        <span class="hljs-built_in">cin</span> &gt;&gt; es[i].u &gt;&gt; es[i].v &gt;&gt; es[i].cost;<br>    sort(es, es + m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) fa[i] = i;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        edge e = es[i];<br>        <span class="hljs-keyword">if</span> (!same(e.u, e.v)) &#123;<br>            unite(e.u, e.v);<br>            ans += e.cost;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="æœ€é•¿å…¬å…±å­åºåˆ—"></a>æœ€é•¿å…¬å…±å­åºåˆ—</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 100008</span><br><span class="hljs-keyword">int</span> n, a[maxn], f[maxn], ans = <span class="hljs-number">-1</span>, b[maxn + <span class="hljs-number">2018</span>];<br><span class="hljs-comment">//f[i] é•¿åº¦ä¸ºiçš„LISçš„æœ«å°¾å…ƒç´ æœ€å°å€¼</span><br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">rd</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">char</span> ch;<br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isdigit</span>(ch = getchar())); ret = ch - <span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">isdigit</span>(ch = getchar())) ret = ret * <span class="hljs-number">10</span> + ch - <span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">return</span> ret;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    n = rd();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">register</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        a[i] = rd();<br>        b[a[i]] = i;<br>        f[i] = <span class="hljs-number">0x3f3f3f3f</span>;<br>    &#125;  <span class="hljs-comment">//cout&lt;&lt;endl;</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">register</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        a[i] = rd();<br>        a[i] = b[a[i]];<br>        <span class="hljs-comment">//cout&lt;&lt;a[i]&lt;&lt;&#x27; &#x27;;</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">register</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        *lower_bound(f + <span class="hljs-number">1</span>, f + n + <span class="hljs-number">1</span>, a[i]) = a[i];<br>    <span class="hljs-comment">//cout&lt;&lt;endl; for(int i=1 ; i&lt;=n ; i++) cout&lt;&lt;f[i]&lt;&lt;&#x27; &#x27;;cout&lt;&lt;endl;</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, lower_bound(f + <span class="hljs-number">1</span>, f + n + <span class="hljs-number">1</span>, <span class="hljs-number">0x3f3f3f3f</span>) - f - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title="???"></a>???</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp">å…«ã€Dijç›¸å…³ç»†èŠ‚:<br><br><span class="hljs-built_in">memset</span>(dis, <span class="hljs-number">127</span>, <span class="hljs-keyword">sizeof</span>(dis)); <span class="hljs-comment">//double dis[maxn]</span><br><br><span class="hljs-keyword">while</span>(q.size())&#123;<br>    ...<br>    q.pop(); <span class="hljs-comment">//åˆ«å¿˜äº†popï¼</span><br>    <span class="hljs-keyword">if</span>(vis[u]) <span class="hljs-keyword">continue</span>; <span class="hljs-comment">//æ³¨æ„è¿™ä¸¤å¥è¯å†™åœ¨å¤–é¢ï¼</span><br>    vis[u] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(...)&#123;<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cmath&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 600016</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> m, a, b;<br><br><span class="hljs-comment">//ç­‰æ¯”æ•°åˆ—æ±‚å’Œ 1 + x^1 + ... + x^n</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> n)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> x * (<span class="hljs-number">1</span> - <span class="hljs-built_in">pow</span>(x, n)) / (<span class="hljs-number">1</span> - x);<br>&#125;<br><br><span class="hljs-comment">//è´¨å› æ•°åˆ†è§£å¹¶æ±‚çº¦æ•°å’Œ</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span>&#123;<br>    <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(x != <span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt;= x; i++)&#123;<br>            <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>; <span class="hljs-comment">//è´¨å› æ•°xçš„æ¬¡æ•°</span><br>            <span class="hljs-keyword">while</span>(x % i == <span class="hljs-number">0</span>)&#123;<br>                x /= i;<br>                ++cnt;<br>            &#125;<br>            ret += sum(i, cnt);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ret;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; m;<br>    <span class="hljs-keyword">while</span>(m--)&#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; a &gt;&gt; b;<br>        <span class="hljs-keyword">if</span>(get(a) == b &amp;&amp; get(b) == a) <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;YES&quot;</span>);<br>        <span class="hljs-keyword">else</span> <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;NO&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br>        ...<br>&#125;<br>ä¹ã€äºŒåˆ†åƒä¸‡åˆ«é”™äº†ï¼š<br><br><span class="hljs-keyword">while</span>(l &lt;= r)&#123;<br>    mid = (l + r)/<span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span>(check(mid)) ans = mid, l = mid + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span> r = mid - <span class="hljs-number">1</span>;<br>&#125;   <br></code></pre></td></tr></table></figure><h3 id="bitset"><a href="#bitset" class="headerlink" title="bitset"></a>bitset</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp">åƒè¿™ç§æ±‚ç»„æˆæŸä¸ªä½“ç§¯çš„é¢˜ï¼Œéƒ½èƒ½ç”¨<span class="hljs-built_in">bitset</span>æ°´è¿‡å»ï¼Œè‡ªå¸¦å¸¸æ•°ä¼˜åŒ–<br><br>b[i]ä»£è¡¨èƒ½å¦ç»„æˆä½“ç§¯iï¼Œæ˜“çŸ¥å¦‚æœb[i] = <span class="hljs-literal">true</span>ï¼Œæœ‰ä¸€ä¸ªç‰©å“ä½“ç§¯ä¸ºvï¼Œåˆ™b[i + v] = <span class="hljs-literal">true</span><br><br>æ‰¾åˆ°æœ€å¤§çš„b[i] == <span class="hljs-literal">true</span>çš„iå³ä¸ºæœ€å¤§ä½“ç§¯<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">int</span> h, c, v, ans;<br><span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span> &lt;50018&gt; b;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    b[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; c &gt;&gt; h;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= h; i++) &#123;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; v; b |= b &lt;&lt; v;&#125;<br>    <span class="hljs-keyword">for</span>(ans = c; ans&gt;= <span class="hljs-number">0</span>; ans--) <span class="hljs-keyword">if</span>(b[ans]) <span class="hljs-keyword">break</span>;<br>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; ans;  <br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cctype&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cmath&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 100008</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;<br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, m, s, dis[maxn], vis[maxn];<br><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; pii;<br><span class="hljs-built_in">vector</span>&lt;pii&gt; G[maxn];<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">rd</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">register</span> <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">register</span> <span class="hljs-keyword">char</span> ch;<br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isdigit</span>(ch = getchar()))<br>        ;<br>    ret = ch ^ <span class="hljs-number">48</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">isdigit</span>(ch = getchar())) ret = (ret &lt;&lt; <span class="hljs-number">1</span>) + (ret &lt;&lt; <span class="hljs-number">3</span>) + (ch ^ <span class="hljs-number">48</span>);<br>    <span class="hljs-keyword">return</span> ret;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Dijkstra</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">memset</span>(dis, <span class="hljs-number">0x3f</span>, <span class="hljs-keyword">sizeof</span>(dis));<br>    <span class="hljs-built_in">priority_queue</span>&lt;pii, <span class="hljs-built_in">vector</span>&lt;pii&gt;, greater&lt;pii&gt; &gt; q;<br>    dis[s] = <span class="hljs-number">0</span>, q.push(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">0</span>, s));<br>    <span class="hljs-keyword">while</span> (q.size()) &#123;<br>        <span class="hljs-keyword">int</span> u = q.top().second;<br>        q.pop();<br>        <span class="hljs-keyword">if</span> (vis[u]) <span class="hljs-keyword">continue</span>;<br>        vis[u] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; G[u].size(); i++) &#123;<br>            <span class="hljs-keyword">int</span> v = G[u][i].first;<br>            <span class="hljs-keyword">int</span> d = G[u][i].second;<br>            <span class="hljs-keyword">if</span> (dis[v] &gt; dis[u] + d) &#123;<br>                dis[v] = dis[u] + d;<br>                q.push(<span class="hljs-built_in">make_pair</span>(dis[v], v));<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    n = rd();<br>    m = rd();<br>    s = rd();<br>    <span class="hljs-keyword">int</span> u, v, d;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>        u = rd();<br>        v = rd();<br>        d = rd();<br>        G[u].push_back(<span class="hljs-built_in">make_pair</span>(v, d));<br>    &#125;<br>    Dijkstra();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) <span class="hljs-built_in">cout</span> &lt;&lt; (dis[i] == <span class="hljs-number">0x3f3f3f3f</span> ? <span class="hljs-number">2147483647</span> : dis[i]) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//ver2</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 100008</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxm 200008</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> mp make_pair</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; pii;<br><span class="hljs-keyword">int</span> n, m, s, dis[maxn], vis[maxn], head[maxn], cnt;<br><span class="hljs-built_in">priority_queue</span>&lt;pii, <span class="hljs-built_in">vector</span>&lt;pii&gt;, greater&lt;pii&gt; &gt; q;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Edge</span> &#123;</span><br>    <span class="hljs-keyword">int</span> from, to, dist, nxt;<br>&#125; e[maxm];<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add_edge</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u, <span class="hljs-keyword">int</span> v, <span class="hljs-keyword">int</span> d)</span> </span>&#123;<br>    e[++cnt] = Edge&#123;u, v, d, head[u]&#125;;  <span class="hljs-comment">// &lt;- C++ Standard</span><br>    head[u] = cnt;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Dijkstra</span><span class="hljs-params">()</span> </span>&#123;<br>    dis[s] = <span class="hljs-number">0</span>;<br>    q.push(mp(<span class="hljs-number">0</span>, s));<br>    <span class="hljs-keyword">int</span> u, v, d;<br>    <span class="hljs-keyword">while</span> (q.size()) &#123;<br>        u = q.top().second;<br>        q.pop();<br>        <span class="hljs-keyword">if</span> (vis[u]) <span class="hljs-keyword">continue</span>;<br>        vis[u] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = head[u]; i; i = e[i].nxt) &#123;<br>            v = e[i].to;<br>            d = e[i].dist;<br>            <span class="hljs-keyword">if</span> (dis[v] &gt; dis[u] + d) &#123;<br>                dis[v] = dis[u] + d;<br>                q.push(mp(dis[v], v));<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; s;<br>    <span class="hljs-keyword">int</span> u, v, d;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; u &gt;&gt; v &gt;&gt; d;<br>        add_edge(u, v, d);<br>    &#125;<br>    <span class="hljs-built_in">memset</span>(dis, <span class="hljs-number">0x7F</span>, <span class="hljs-keyword">sizeof</span>(dis));<br>    Dijkstra();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, dis[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="exgcd"><a href="#exgcd" class="headerlink" title="exgcd"></a>exgcd</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/*</span><br><span class="hljs-comment">int gcd(int a, int b)&#123;</span><br><span class="hljs-comment">    return b == 0 ? a : gcd(b, a % b);</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">ax + by = d, d = gcd(a, b)</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">exgcd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b, <span class="hljs-keyword">int</span> &amp;x, <span class="hljs-keyword">int</span> &amp;y)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>) &#123;<br>        d = a;<br>        x = <span class="hljs-number">1</span>;<br>        y = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        exgcd(b, a % b, y, x);<br>        y -= x * (a / b);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cmath&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">char</span> a[<span class="hljs-number">1000020</span>], b[<span class="hljs-number">1000020</span>];<br><span class="hljs-keyword">int</span> nxt[<span class="hljs-number">1000020</span>], lena, lenb;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123;<br>    nxt[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; lenb; i++) &#123;<br>        <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; b[j + <span class="hljs-number">1</span>] != b[i + <span class="hljs-number">1</span>])<br>            j = nxt[j];<br>        <span class="hljs-keyword">if</span> (b[i + <span class="hljs-number">1</span>] == b[j + <span class="hljs-number">1</span>]) j++;<br>        nxt[i + <span class="hljs-number">1</span>] = j;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; a + <span class="hljs-number">1</span> &gt;&gt; b + <span class="hljs-number">1</span>;<br>    lena = <span class="hljs-built_in">strlen</span>(a + <span class="hljs-number">1</span>);<br>    lenb = <span class="hljs-built_in">strlen</span>(b + <span class="hljs-number">1</span>);<br>    init();<br>    <span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; lena; i++) &#123;<br>        <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; b[j + <span class="hljs-number">1</span>] != a[i + <span class="hljs-number">1</span>])<br>            j = nxt[j];<br>        <span class="hljs-keyword">if</span> (b[j + <span class="hljs-number">1</span>] == a[i + <span class="hljs-number">1</span>]) j++;<br>        <span class="hljs-keyword">if</span> (j == lenb) &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, i + <span class="hljs-number">1</span> - lenb + <span class="hljs-number">1</span>);<br>            j = nxt[j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= lenb; i++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, nxt[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="LIS"><a href="#LIS" class="headerlink" title="LIS"></a>LIS</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> INF 0x3F3F3F3F</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 100016</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, a[maxn], f[maxn];<br><span class="hljs-comment">//f[i] é•¿åº¦ä¸ºiçš„LISçš„æœ«å°¾å…ƒç´ çš„æœ€å°å€¼ï¼ˆæœ¬æ¨¡æ¿ä¸ºä¸¥æ ¼å°äºï¼‰</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">memset</span>(f, <span class="hljs-number">0x3F</span>, <span class="hljs-keyword">sizeof</span>(f));<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) <span class="hljs-built_in">cin</span> &gt;&gt; a[i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        *lower_bound(f + <span class="hljs-number">1</span>, f + n + <span class="hljs-number">1</span>, a[i]) = a[i];<br>    <span class="hljs-built_in">cout</span> &lt;&lt; lower_bound(f + <span class="hljs-number">1</span>, f + n + <span class="hljs-number">1</span>, INF) - f - <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="mapset"><a href="#mapset" class="headerlink" title="mapset"></a>mapset</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//ä¼šç”¨çœŸæ˜¯çˆ½åˆ°ï¼šP1097 ç»Ÿè®¡æ•°å­—ï¼Œæ±‚ä¸€å †æ•°ä¸­æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, x;<br><span class="hljs-built_in">map</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; m;  <span class="hljs-comment">//å­˜å‡ºç°æ¬¡æ•°</span><br><span class="hljs-built_in">set</span>&lt;<span class="hljs-keyword">int</span>&gt; s;       <span class="hljs-comment">//å­˜å‡ºç°è¿‡ä»€ä¹ˆæ•°ï¼ˆè¾“å…¥ä¿è¯æœ‰åºï¼‰</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <span class="hljs-keyword">while</span> (n--) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; x;<br>        ++m[x];<br>        s.insert(x);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">set</span>&lt;<span class="hljs-keyword">int</span>&gt;::iterator it = s.begin(); it != s.end(); it++)<br>        <span class="hljs-built_in">cout</span> &lt;&lt; *it &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; m[*it] &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="mat-qpow"><a href="#mat-qpow" class="headerlink" title="mat_qpow"></a>mat_qpow</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> mod = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;<br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Mat</span> &#123;</span><br>    ll m[<span class="hljs-number">108</span>][<span class="hljs-number">108</span>];<br>&#125;;<br>Mat a, e;  <span class="hljs-comment">//a:è¾“å…¥çŸ©é˜µï¼Œe:å•ä½çŸ©é˜µ</span><br>ll n, p;<br><br><span class="hljs-function">Mat <span class="hljs-title">mul</span><span class="hljs-params">(Mat x, Mat y)</span> </span>&#123;<br>    Mat c;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            c.m[i][j] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">1</span>; k &lt;= n; k++)<br>                c.m[i][j] = c.m[i][j] % mod + x.m[i][k] * y.m[k][j] % mod;<br>    <span class="hljs-keyword">return</span> c;<br>&#125;<br><br><span class="hljs-function">Mat <span class="hljs-title">qpow</span><span class="hljs-params">(Mat x, ll y)</span> </span>&#123;<br>    Mat ans = e;<br>    <span class="hljs-keyword">while</span> (y) &#123;<br>        <span class="hljs-keyword">if</span> (y &amp; <span class="hljs-number">1</span>)<br>            ans = mul(ans, x);<br>        x = mul(x, x);<br>        y &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; p;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            <span class="hljs-built_in">cin</span> &gt;&gt; a.m[i][j];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        e.m[i][i] = <span class="hljs-number">1</span>;<br>    Mat ans = qpow(a, p);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            <span class="hljs-built_in">cout</span> &lt;&lt; ans.m[i][j] % mod &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="nim"><a href="#nim" class="headerlink" title="nim"></a>nim</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> T, n, a[<span class="hljs-number">10018</span>], X;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; T;<br>    <span class="hljs-keyword">while</span> (T--) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>        X = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; a[i];<br>            X ^= a[i];  <span class="hljs-comment">//æ±‚å¼‚æˆ–å’Œ</span><br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (!X)<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;No\n&quot;</span>;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Yes\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="qpow"><a href="#qpow" class="headerlink" title="qpow"></a>qpow</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">ll <span class="hljs-title">qpow</span><span class="hljs-params">(ll x, ll y, ll P)</span></span>&#123;<br>    ll ret = <span class="hljs-number">1</span>, a = x;<br>    <span class="hljs-keyword">for</span>( ; y ; y &gt;&gt;= <span class="hljs-number">1</span>, a = (a*a)%P) <span class="hljs-comment">//ç¬¬ä¸€ä¸ªyæ„ä¸ºy&gt;0</span><br>        <span class="hljs-keyword">if</span>(y &amp; <span class="hljs-number">1</span>) ret = (ret*a)%P;<br>    <span class="hljs-keyword">return</span> ret;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="stringè¾“å…¥"><a href="#stringè¾“å…¥" class="headerlink" title="stringè¾“å…¥"></a>stringè¾“å…¥</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">string</span> s;<br>    getline(<span class="hljs-built_in">cin</span>, s);<br>    <span class="hljs-built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCodeè®¾ç½®C++æ ¼å¼åŒ–å¤§æ‹¬å·ä¸æ¢è¡Œ</title>
    <link href="/2021/10/28/VSCode%E8%AE%BE%E7%BD%AECpp%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%A4%A7%E6%8B%AC%E5%8F%B7%E4%B8%8D%E6%8D%A2%E8%A1%8C/"/>
    <url>/2021/10/28/VSCode%E8%AE%BE%E7%BD%AECpp%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%A4%A7%E6%8B%AC%E5%8F%B7%E4%B8%8D%E6%8D%A2%E8%A1%8C/</url>
    
    <content type="html"><![CDATA[<p><del>æ²¡é”™ï¼Œæˆ‘å°±æ˜¯ä¼ è¯´ä¸­çš„å¼‚ç«¯ä¸æ¢è¡Œå…šï¼</del></p><p>Ctrl + Pï¼Œæ‰¾åˆ°settings.jsonï¼ˆæˆ–è€…Ctrl + Shift  + Pï¼‰</p><p>åŠ å…¥è¿™ä¸€å¥</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">&quot;C_Cpp.clang_format_style&quot;: &quot;&#123; BasedOnStyle: Google, IndentWidth: 4&#125;&quot;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³IDEAæ–°å»ºé¡¹ç›®æ—¶æ€»æ˜¯ä½¿ç”¨è‡ªå¸¦Mavençš„é—®é¢˜</title>
    <link href="/2021/10/28/%E8%A7%A3%E5%86%B3IDEA%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%97%B6%E6%80%BB%E6%98%AF%E4%BD%BF%E7%94%A8%E8%87%AA%E5%B8%A6Maven%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2021/10/28/%E8%A7%A3%E5%86%B3IDEA%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%97%B6%E6%80%BB%E6%98%AF%E4%BD%BF%E7%94%A8%E8%87%AA%E5%B8%A6Maven%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>ç½‘ä¸Šçš„æ–¹æ³•ï¼ˆä¿®æ”¹project.defalt.xml / Default Settingsï¼‰éƒ½æ˜¯è¿‡æ—¶çš„æ–¹æ³•ï¼Œæˆ‘çš„ç‰ˆæœ¬ï¼ˆ2021.2.3ï¼‰å·²ç»ä¸èƒ½ç”¨äº†ï¼Œæœ€åè‡ªå·±ç»™æ‘¸ç´¢å‡ºæ¥äº†ï¼š</p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.4ulnuwqnf8g0.png" alt="image" style="zoom:40%;" />]]></content>
    
    
    
    <tags>
      
      <tag>Maven</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³spring-boot-maven-pluginæŠ¥é”™</title>
    <link href="/2021/10/28/%E8%A7%A3%E5%86%B3spring-boot-maven-plugin%E6%8A%A5%E9%94%99/"/>
    <url>/2021/10/28/%E8%A7%A3%E5%86%B3spring-boot-maven-plugin%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¾ˆçƒ¦ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.zxmwi2kg0jk.png" alt="image"></p><p>è§£å†³åŠæ³•ï¼šåŠ ä¸Šå’Œspringbootä¸€è‡´çš„versionå³å¯</p><p>å¯èƒ½æ˜¯å› ä¸ºmavenæ‰¾é”™ç‰ˆæœ¬äº†ï¼Ÿ</p>]]></content>
    
    
    
    <tags>
      
      <tag>Maven</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ£é¼“Linuxçš„ä¸€äº›ç¬”è®°</title>
    <link href="/2021/10/26/%E6%8D%A3%E9%BC%93Linux%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/10/26/%E6%8D%A3%E9%BC%93Linux%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‰è¨€ï¼šæœ€è¿‘æ­£å¥½åˆç”¨åˆ°äº†æœåŠ¡å™¨ï¼Œç»™ç¬”è®°æœ¬è£…ä¸ªLinuxç©ç©</p><p>ï¼ˆåæ­£æ˜¯ç©ç©ï¼Œè£…äº†ä¸ªæœ€ç®€å•(?)çš„Ubuntu 20.04ï¼‰</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/image.8rvznry95v8.png" alt="åŠå¤©çš„æˆæœ"></p><p>é¦–å…ˆåœ¨<strong>è½¯ä»¶ä¸æ›´æ–°</strong>é‡Œæ¢ä¸Šæ¸…åçš„æº <del>ï¼ˆä»€ä¹ˆï¼Ÿä½ è¯´æˆ‘æ˜¯å“ˆå·¥å¤§çš„å­¦ç”Ÿä¸ºä»€ä¹ˆä¸ç”¨å“ˆå·¥å¤§çš„æºï¼Ÿï¼‰</del></p><p>ç„¶åä¸‹è½½ä¸€ä¸ªChromeï¼Œå¯¹äºdebæ ¼å¼è¦è¿™ä¹ˆå®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo dpkg -i xxxx.deb<br></code></pre></td></tr></table></figure><p>æ—¢ç„¶æˆ‘åœ¨å†™è¿™ä¸ªæ–‡ç« ï¼Œè¯´æ˜æˆ‘å·²ç»å®‰è£…äº†Typora</p><p>åœ¨Typoraå®˜ç½‘ä¸‹è½½å‹ç¼©åŒ…ä¹‹åè§£å‹ï¼ˆtar -zxvfï¼‰ï¼Œè§£å‹å‡ºæ¥çš„binç›®å½•é‡Œé¢æœ‰ä¸ªtyporaçš„æ–‡ä»¶å¤¹æŒªåˆ°ï¼ˆè‰ï¼Œè¿™ä¸ªè‡ªå¸¦çš„è¾“å…¥æ³•æ˜¯çœŸçš„<del>ç”·ç”¨</del>éš¾ç”¨ï¼Œå†™å®Œè¿™ä¸ªæˆ‘è£…å®ŒKDEç¬¬ä¸€ä»¶äº‹ä¸€å®šè¦å»è£…ä¸ªæœç‹—è¾“å…¥æ³•ï¼ˆè™½ç„¶ä¹‹å‰è¯´ğŸ¶éƒ½ä¸ç”¨ï¼Œé‚£æ˜¯å› ä¸ºå¾®è½¯çš„è¾“å…¥æ³•è¿˜è¡Œï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/2021-10-26-10-14-28-%E7%9A%84%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.qoc2uo6mops.png" alt="2021-10-26-10-14-28-çš„å±å¹•æˆªå›¾"></p><p>æŒªåˆ°/opté‡Œï¼Œæˆ‘çœ‹ç½‘ä¸Šè¯´ä»€ä¹ˆè¿˜è¦é…ç½®æƒé™ä½†æ˜¯æˆ‘çš„å¹¶ä¸éœ€è¦</p><p>æ¥ä¸‹æ¥æŠŠä»–æ·»åŠ åˆ°åº”ç”¨åˆ—è¡¨é‡Œï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">izayoiaster@Aster-Laptop:/opt/Typora-linux-x64$ vim typora.desktop <br>izayoiaster@Aster-Laptop:/opt/Typora-linux-x64$ sudo cp typora.desktop /usr/share/applications/<br>izayoiaster@Aster-Laptop:/opt/Typora-linux-x64$ cat typora.desktop <br>[Desktop Entry]<br>Name=Typora<br>Exec=/opt/Typora-linux-x64/Typora<br>Type=Application<br>Icon=/opt/Typora-linux-x64/resources/assets/icon/icon_512x512.png<br></code></pre></td></tr></table></figure><p>ç®—äº†ï¼Œå¤ªéš¾å—äº†è¿™ä¸ªè¾“å…¥æ³•ï¼Œå…ˆå®‰ä¸ªæœç‹—å†å®‰KDEå§â€¦â€¦</p><p>å‘ç°<a href="https://pinyin.sogou.com/linux/help.php">å®˜ç½‘</a>æœ‰ï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†ï¼ˆå¥½è¯„ï¼æœç‹—å¥½æ„Ÿ+1ï¼‰</p><p>ä¸è¿‡å®˜ç½‘è¯´çš„æ˜¯æ³¨é”€ï¼Œæ®æˆ‘æµ‹è¯•è¦é‡å¯æ‰æœ‰æœç‹—</p><p>å®‰è£…KDE</p><p><a href="https://blog.csdn.net/weixin_41413372/article/details/109410552">å‚è€ƒ</a>ï¼ˆä¸è¿‡æˆ‘æ²¡æœ‰æŒ‰ç…§æ–‡ç« è¯´çš„ä¸‹è½½AMDçš„æ”¯æŒï¼‰</p><p>è‚¯å®šéœ€è¦ä¸€ä¸ªå¥½çœ‹çš„ç»ˆç«¯å’¯~å®‰è£…oh-my-zsh</p><p>é¦–å…ˆéœ€è¦cat /etc/shellså‘ç°æ²¡æœ‰zshï¼Œå®‰è£…ä¸€ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sudo apt-get install zsh<br></code></pre></td></tr></table></figure><p>æœ¬æ¥æƒ³ç”¨å®˜æ–¹çš„curlæ–¹å¼ç›´æ¥å®‰è£…çš„ï¼Œä½†æ˜¯æ–°ç³»ç»Ÿæ²¡å®‰æ¢¯å­ï¼Œæ²¡åŠæ³•åªèƒ½è‡ªå·±ä¸‹è½½äº†</p><p>é¡ºä¾¿å®‰ä¸Šgitï¼Œæˆ‘ç›´æ¥æ— å¸ˆè‡ªé€šè¾“å…¥ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå®‰è£…æˆåŠŸï¼ˆlinux NBï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sudo apt-get install git<br></code></pre></td></tr></table></figure><p>ç»§ç»­å®‰è£…ohmyzsh</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git <span class="hljs-built_in">clone</span> https://github.com/ohmyzsh/ohmyzsh.git<br></code></pre></td></tr></table></figure><p><strong>ç»·ä¸ä½äº†ï¼Œgit cloneä¹Ÿè¿ä¸ä¸Šâ€¦â€¦è¢«è¿«å®‰äº†ä¸ªæ¢¯å­</strong></p><p>å®‰è£…clashï¼š</p><p>é¦–å…ˆï¼Œå»å®˜ç½‘ä¸‹è½½gz</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">gunzip clash-linux-amd64-v1.7.0.gz<br><br>mv clash-linux-amd64-v1.7.0.gz clash<br>mkdir Clash<br>mv clash ./Clash<br><br>chmod +x clash<br></code></pre></td></tr></table></figure><p>ç„¶åæŒªåˆ°optå»ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/.config/clash/ <span class="hljs-comment">#é…ç½®æ–‡ä»¶åœ¨è¿™é‡Œ</span><br>curl [è®¢é˜…è¿æ¥] &gt;&gt; config.yaml <span class="hljs-comment">#æ›¿æ¢æ‰åŸæ¥çš„æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p>ä¸è¿‡æˆ‘ç”¨çš„è¿™ä¸ªæ¢¯å­å¥½åƒå¹¶ä¸èƒ½curlï¼Ÿæ€»ä¹‹æ˜¯æŠŠæ¢¯å­æä¾›çš„<a href="https://mxwljsq.com/user/tutorial?os=linux&client=clash">ä¸œè¥¿</a>æ”¾è¿›yamlé‡Œ</p><p><a href="https://zhuanlan.zhihu.com/p/396272999">å‚è€ƒæ–‡ç« </a></p><p>è™½ç„¶ä¸Šé¢é‚£ä¸ªå¹¶æ²¡æœ‰æˆåŠŸï¼Œä¸è¿‡å¥½åƒæ˜¯æ¢¯å­çš„é—®é¢˜ï¼Œæ­¥éª¤æ˜¯å¯¹çš„</p><p>ä½†æ˜¯æˆ‘åˆæˆåŠŸgit cloneäº†ï¼<a href="https://blog.csdn.net/u014375643/article/details/115826506">ä¿®æ”¹hosts</a></p><p>ç»§ç»­å¼„oh-my-zshï¼ŒæŒ‰ç…§å®˜ç½‘çš„æ–¹æ³•curlï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/image.7k3bak4k5ss0.png" alt="image"></p><p>ä¸è¿‡ï¼Œå¯ç”¨zshä¹‹åï¼Œè¦ll -a / ls -aæ‰èƒ½æ˜¾ç¤ºéšè—æ–‡ä»¶äº†ï¼Œåˆ«å¿˜äº†</p><p> ç„¶åæ¢ä¸€ä¸ªå–œæ¬¢çš„ä¸»é¢˜å°±å¥½ï¼Œï¼ˆæ³¨æ„æ¢ä¸»é¢˜å¦‚æœå®‰å­—ä½“ï¼Œåˆ«ç”¨gnomeå®‰è£…ï¼ŒKDEè®¾ç½®é‡ŒåŒæ ·èƒ½å®‰è£…å­—ä½“ï¼‰</p><p>å®‰è£…ï¼š<a href="https://zhuanlan.zhihu.com/p/58073103">å‚è€ƒæ–‡ç« 1</a> <a href="https://zhuanlan.zhihu.com/p/63585679">å‚è€ƒæ–‡ç« 2</a></p><p>ç¾åŒ–ï¼š<a href="https://www.jianshu.com/p/b8a80dd59414">å‚è€ƒ</a></p><p>è¾“å…¥è¿™ä¸ªå¯ä»¥é‡æ–°é…ç½®power10k:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs b">p10k configure<br></code></pre></td></tr></table></figure><p>å…³äºKDEå›¾æ ‡åŒ…ï¼Œ<a href="https://store.kde.org/p/1166289">æˆ‘ç”¨çš„è¿™ä¸ª</a>ï¼Œè§£å‹ä¹‹ååœ¨KDEçš„è®¾ç½®é‡Œç›´æ¥å°±èƒ½å¯¼å…¥</p><p>ä¸»é¢˜ç”¨äº†Adaptaï¼Œå·¦è¾¹æ æ˜¯latte</p><p>neofetchå¯ä»¥æå‡ºUbuntuçš„å›¾æ ‡ï¼ŒCtrl + Lå¯ä»¥æ¸…å±</p><p>å®‰è£…QQï¼Œé‚£ä¸ªLinuxQQå®åœ¨æ˜¯UIå¤ªä¸‘äº†ï¼Œè¿˜å¯¹ç¼©æ”¾çš„æ”¯æŒå¾ˆå¥‡æ€ªï¼Œæ‰€ä»¥å®‰è£…wineå§ï¼Œ<a href="https://www.cnblogs.com/hskcool/p/14227695.html">è¿™é‡Œ</a>ï¼›ä½†æ˜¯ç”±äºæˆ‘çš„ç¬”è®°æœ¬æ˜¯2.5kå±æ‰€ä»¥é»˜è®¤çª—å£éå¸¸å°ï¼Œæ”¹ä¸€ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">WINEPREFIX=~/.deepinwine/Deepin-QQ deepin-wine winecfg<br></code></pre></td></tr></table></figure><p>ï¼ˆæˆ‘è¿™ä¸ªæœ€åæµ‹çš„æ˜¯180å·¦å³åˆé€‚ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/image.1wp8gi8m24u8.png" alt="image"></p><p><a href="https://blog.csdn.net/qq_40843987/article/details/105934480?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">QQä¸æ˜¾ç¤ºå¤´åƒçš„è§£å†³åŠæ³•</a></p><p>ä¸ºäº†é¿å…ä¹‹åwineQQä¿®å¤äº†è¿™ä¸ªé—®é¢˜åæ”¹ä¸å›æ¥è®¾ç½®å‡‘å·§è¿™ä¸ªåšå®¢è¿˜æ²¡äº†ï¼Œæˆ‘è¿˜æ˜¯è®°ä¸€ä¸‹æˆ‘æ€ä¹ˆä¿®æ”¹çš„å§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo vim /etc/default/grub<br><br>GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">&quot;splash quiet&quot;</span>                 <span class="hljs-comment"># ä¿®æ”¹å‰</span><br>GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">&quot;ipv6.disable=1 splash quiet&quot;</span>  <span class="hljs-comment"># ä¿®æ”¹å</span><br><br>sudo update-grub  <span class="hljs-comment"># ä½¿åˆšæ‰çš„ä¿®æ”¹ç”Ÿæ•ˆ</span><br></code></pre></td></tr></table></figure><p>å¤§ä¸äº†å¤šé‡å¯å‡ æ¬¡ï¼Œå°±èƒ½æ­£å¸¸æ˜¾ç¤ºå¤´åƒäº†ï¼Œç¬¬ä¸€æ¬¡æ˜¾ç¤ºå¯èƒ½ä¼šæŒºæ…¢çš„ï¼Œä½†æ—¢ç„¶æ˜¯Linuxï¼Œåˆä¸æ˜¯ä¸èƒ½ç”¨å˜›</p><p>å®‰è£…VSCå¾ˆç®€å•ï¼Œæœ‰debï¼Œå®‰è£…IDEAè§£å‹ä¹‹åè€è§„çŸ©æ”¾åœ¨optä¸‹å–œæ¬¢çš„ç›®å½•ï¼Œç„¶åè¿è¡Œè§£å‹å‡ºæ¥çš„æ–‡ä»¶å¤¹é‡Œçš„binçš„idea.shå°±è¡Œ</p><p>ç„¶åï¼Œä¹‹å‰é‚£ä¸ªclashï¼Œæœç„¶æ˜¯æ¢¯å­çš„é—®é¢˜ï¼Œä¸ç®¡clashçš„äº‹ã€‚åˆšæ‰ä¾ç„¶æ˜¯åœ¨/opt/Clashï¼ˆæˆ‘å®‰è£…åœ¨è¿™é‡Œï¼‰ä¸‹ç”¨æ¢¯å­ç»™çš„é“¾æ¥æ›´æ–°äº†ä¸€ä¸‹config.yamlï¼Œç„¶å</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./clash -d . <span class="hljs-comment">#æœ€åé‚£ä¸ª.ä»£è¡¨ç”¨å½“å‰ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p>æˆåŠŸè¿ä¸Šå¤–ç½‘å•¦ï¼å¼€å¿ƒ~</p><p><del>ç”±äºLinuxåœ¨æŸäº›æ–¹é¢å®åœ¨ä¸æ˜¯å¾ˆäººæ€§åŒ–ï¼ˆè™½ç„¶æˆ‘æƒ³æ€ªClashä¸ºä»€ä¹ˆä¸åšä¸€ä¸ªGUIå•¦ï¼‰ï¼ŒåŠ ä¸ŠLinuxä¸æ˜¯ä¸»åŠ›ç³»ç»Ÿï¼Œå°±ä¸é…ç½®æ¢¯å­çš„æœåŠ¡è‡ªå¯åŠ¨è‡ªæ›´æ–°å•¥çš„äº†ã€‚</del></p><p>ç„¶åé…ç½®ä¸€ä¸‹å¼€æœºè‡ªå¯clashï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo vim /etc/systemd/system/clash.service<br><br>[Unit]<br>Description=clash daemon<br><br>[Service]<br>Type=simple<br>User=izayoiaster<br>ExecStart=/opt/Clash/clash -d .<br>Restart=on-failure<br><br>[Install]<br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl daemon-reload <span class="hljs-comment">#é‡æ–°åŠ è½½systemctl deamon</span><br>sudo systemctl start clash.sevice <span class="hljs-comment">#å¯åŠ¨clash</span><br>sudo systemctl <span class="hljs-built_in">enable</span> clash.service <span class="hljs-comment">#å¼€æœºå¯åŠ¨</span><br></code></pre></td></tr></table></figure><p>è¾“å…¥ä¸‹é¢çš„æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl status clash.service<br></code></pre></td></tr></table></figure><p>ï¼ˆè²Œä¼¼è¿˜æ˜¯ä¸å¤ªå¥½ç”¨555ï¼‰ï¼ˆå¥½ç”¨å•¦ï¼ï¼‰</p><p>å¯ä»¥è®¿é—®ä¸‹åˆ—ä»»æ„ä¸€ä¸ªç½‘å€æ¥å¯è§†åŒ–é…ç½®ï¼š</p><p><a href="http://clash.razord.top/#/proxies">http://clash.razord.top/#/proxies</a> ï¼ˆâ†è¿™ä¸ªç½‘å€æ¯æ¬¡éƒ½è¦æ¸…ç¼“å­˜æ‰èƒ½ç™»ä¸Šå»æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰</p><p><a href="http://yacd.haishan.me/#/proxies">http://yacd.haishan.me/#/proxies</a></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/image.4htn013c0eg0.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/image.2b6p7mhc8tgk.png" alt="image"></p><p>å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆ‡æ¢çª—å£ç‰¹æ•ˆï¼Œæˆ‘è§‰å¾—è‡ªå¸¦çš„ä¸€ä¸ªå°±ä¸é”™ï¼Œç¨å¾®è®¾ç½®ä¸€ä¸‹å°±è¡Œï¼ˆå¼ºçƒˆåæ§½å¾®è½¯å–æ¶ˆäº†win7/vistaé‚£ç§åˆ‡æ¢çª—å£çš„ç‰¹æ•ˆï¼ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/image.1cxjc4n6qpgg.png" alt="image"></p><p>ç„¶åè‡ªå¸¦çš„grubå®åœ¨æ˜¯å¤ªä¸‘äº†ï¼Œæä¸ªç¾åŒ–</p><p><a href="https://github.com/vinceliuice/grub2-themes">https://github.com/vinceliuice/grub2-themes</a></p><p>è™½ç„¶ç½‘ä¸Šæœ‰ä¸€äº›æ•™ç¨‹ï¼Œä¸è¿‡æˆ‘è¿™ä¸ªä¸»é¢˜è²Œä¼¼èƒ½è‡ªåŠ¨å®‰è£…é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo ./install.sh -b -t tela -s 2k <br></code></pre></td></tr></table></figure><p>æœ¬æ¥è¿˜æƒ³å¼„ä¸ªxshellçš„ï¼Œå‘ç°æ²¡æœ‰linuxç‰ˆï¼Œä½†æ˜¯åˆä¸€æƒ³ï¼Œæˆ‘éƒ½å·²ç»æ˜¯æœ‰zshçš„linuxäº†ï¼Œç›´æ¥<strong>ssh root@ipåœ°å€</strong>ä¸æ¯”xshellé¦™å¤šäº†ï¼›äºæ˜¯æˆ‘ç›´æ¥æŠŠæœåŠ¡å™¨é‡Œé…å¥½çš„ç¯å¢ƒå˜é‡ç»™æ‹·è¿‡æ¥äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">JAVA_HOME=/usr/<span class="hljs-built_in">local</span>/java/jdk1.8.0_311<br>CLASSPATH=<span class="hljs-variable">$JAVA_HOME</span>/lib/<br>PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$JAVA_HOME</span>/bin<br><span class="hljs-built_in">export</span> PATH JAVA_HOME CLASSPATH<br><br><span class="hljs-built_in">export</span> MAVEN_HOME=/usr/<span class="hljs-built_in">local</span>/maven/apache-maven-3.6.3<br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$MAVEN_HOME</span>/bin:<span class="hljs-variable">$PATH</span> <br><br>PATH=/data/mysql/bin:/data/mysql/lib:<span class="hljs-variable">$PATH</span><br><span class="hljs-built_in">export</span> PATH<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/image.qcf64ds0yww.png" alt="image"></p><p>è‡³äºä¼ è¾“æ–‡ä»¶ï¼Œä½¿ç”¨scpæŒ‡ä»¤å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">scp æœ¬åœ°ç”¨æˆ·å@IPåœ°å€: æ–‡ä»¶1 è¿œç¨‹ç”¨æˆ·å@IPåœ°å€: æ–‡ä»¶2<br>[æœ¬åœ°ç”¨æˆ·å@IPåœ°å€:]å¯ä»¥ä¸è¾“å…¥,å¯èƒ½éœ€è¦è¾“å…¥è¿œç¨‹ç”¨æˆ·åæ‰€å¯¹åº”çš„å¯†ç .<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Linux/image.3dpnwxpgwae0.png" alt="image"></p><p>é¡ºä¾¿ï¼Œå®‰è£…C/C++ç«Ÿç„¶è¿™ä¹ˆç®€å•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install gcc<br>sudo apt-get install g++<br></code></pre></td></tr></table></figure><p>ï¼ˆç„¶åå†™äº†ä¸ªHelloWorldåæ‰å‘ç°å¦‚ä»Šçš„VSCçš„é…ç½®å·²ç»èƒ½è‡ªåŠ¨ç»™ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶äº†ï¼Ÿï¼ï¼‰</p><p>ç„¶åï¼Œæœ¬æ¥æƒ³ç ”ç©¶ç ”ç©¶æ€ä¹ˆå¼„OneDriveçš„ï¼ˆè™½ç„¶ä¹Ÿèƒ½ç™»å½•ç½‘é¡µç‰ˆï¼‰ï¼Œç»“æœå‘ç°KDEçš„Dolphinï¼ˆæ–‡ä»¶ç®¡ç†å™¨ï¼‰ï¼ˆGnomeä¸æ¸…æ¥šï¼Œæ¯•ç«Ÿå·²ç»è¢«æˆ‘ç»™å¸è½½äº†hhï¼‰ç›´æ¥åœ¨è®¾å¤‡é‚£é‡Œåˆ—å‡ºäº†ä¸ªWindowsï¼Œç‚¹è¿›å»ä¸€çœ‹ï¼Œå¥½å®¶ä¼™ï¼Œè¿™ä¸å°±æ˜¯æˆ‘Windowsçš„Cç›˜å—ã€‚äºæ˜¯å¿«ä¹åœ°åœ¨KDEæ¡Œé¢ä¸ŠåŠ äº†æŒ‡å‘Desktopå’ŒOneDriveç›®å½•çš„å¿«æ·æ–¹å¼ï¼Œè¿›è¡Œä¸€ä¸ªæ–‡ä»¶çš„å…±äº«ï¼Œèˆ’æœã€‚</p><p>æ”¶å·¥ï¼ï¼ˆæš‚æ—¶ï¼Ÿï¼‰</p>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootæ•´åˆRedisçš„ä¸€äº›é—®é¢˜</title>
    <link href="/2021/10/24/SpringBoot%E6%95%B4%E5%90%88Redis%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"/>
    <url>/2021/10/24/SpringBoot%E6%95%B4%E5%90%88Redis%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>æŠŠ<code>@Autowired</code>æ”¹æˆ<code>@Resource</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Resource</span><br><span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;<br></code></pre></td></tr></table></figure><p>æœç„¶autoçš„ä¸ä¸€å®šç¨³ï¼Ÿ</p><p>æ”¹äº†ä¹‹åï¼Œç¡®å®èƒ½å­˜è¿›å»äº†ï¼Œä½†æ˜¯æœ‰å¥‡æ€ªçš„å‰ç¼€ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.6e2igifub5o0.png" alt="image"></p><p>è¿™æ˜¯äº§ç”ŸåŸå› ï¼š<a href="https://blog.csdn.net/hunger_wang/article/details/118713579?spm=1001.2014.3001.5501">RedisTemplateå†™å…¥Redisæ•°æ®å‡ºç°æ— æ„ä¹‰ä¹±ç å‰ç¼€\xac\xed\x00\x05</a></p><p>è§£å†³æ–¹æ³•â€”â€”è‡ªå·±é‡å†™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.config;<br><br><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonAutoDetect;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonTypeInfo;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.PropertyAccessor;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.jsontype.impl.LaissezFaireSubTypeValidator;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RedisTemplateConfig</span> </span>&#123;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory factory)</span> </span>&#123;<br>        RedisTemplate&lt;String, Object&gt; template = <span class="hljs-keyword">new</span> RedisTemplate&lt;String, Object&gt;();<br>        template.setConnectionFactory(factory);<br><br>        <span class="hljs-comment">//Jsonåºåˆ—åŒ–é…ç½®</span><br>        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = <span class="hljs-keyword">new</span> Jackson2JsonRedisSerializer(Object.class);<br>        ObjectMapper om = <span class="hljs-keyword">new</span> ObjectMapper();<br>        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);<br>        om.activateDefaultTyping(LaissezFaireSubTypeValidator.instance,<br>                ObjectMapper.DefaultTyping.NON_FINAL,<br>                JsonTypeInfo.As.WRAPPER_ARRAY);<br>        jackson2JsonRedisSerializer.setObjectMapper(om);<br><br>        <span class="hljs-comment">//Stringåºåˆ—åŒ–é…ç½®</span><br>        StringRedisSerializer stringRedisSerializer = <span class="hljs-keyword">new</span> StringRedisSerializer();<br>        <span class="hljs-comment">//keyå’Œhashçš„keyéƒ½é‡‡ç”¨Stringçš„åºåˆ—åŒ–é…ç½®</span><br>        template.setKeySerializer(stringRedisSerializer);<br>        template.setHashKeySerializer(stringRedisSerializer);<br><br>        <span class="hljs-comment">//valueå’Œhashçš„valueé‡‡ç”¨Jsonçš„åºåˆ—åŒ–é…ç½®</span><br>        template.setValueSerializer(jackson2JsonRedisSerializer);<br>        template.setHashValueSerializer(jackson2JsonRedisSerializer);<br>        template.afterPropertiesSet();<br>        <span class="hljs-keyword">return</span> template;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ¬¸å˜¿ï¼Œå¥½ä½¿äº†~</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.6w08mmj5b6g0.png" alt="image"></p><p>é¡ºå¸¦å†æ¥ä¸ªå¥½æ–‡ï¼š<a href="https://www.cnblogs.com/xsj1989/p/15151392.html">https://www.cnblogs.com/xsj1989/p/15151392.html</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨Swagger3ç”Ÿæˆæ¥å£æ–‡æ¡£</title>
    <link href="/2021/10/23/%E4%BD%BF%E7%94%A8Swagger3%E7%94%9F%E6%88%90%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/"/>
    <url>/2021/10/23/%E4%BD%BF%E7%94%A8Swagger3%E7%94%9F%E6%88%90%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<p>1.å¯¼åæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.åœ¨Applicationä¸Šé¢åŠ å…¥ <strong>@EnableOpenApi</strong> æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableOpenApi</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WaimaiApp</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(WaimaiApp.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3.ç¼–å†™é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.config<br><br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiOperation;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;<br><span class="hljs-keyword">import</span> springfox.documentation.builders.PathSelectors;<br><span class="hljs-keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;<br><span class="hljs-keyword">import</span> springfox.documentation.service.ApiInfo;<br><span class="hljs-keyword">import</span> springfox.documentation.service.Contact;<br><span class="hljs-keyword">import</span> springfox.documentation.spi.DocumentationType;<br><span class="hljs-keyword">import</span> springfox.documentation.spring.web.plugins.Docket;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Swagger3Config</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">createRestApi</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.OAS_30)<br>                .apiInfo(apiInfo())<br>                .select()<br>                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))<br>                .paths(PathSelectors.any())<br>                .build();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> ApiInfo <span class="hljs-title">apiInfo</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiInfoBuilder()<br>                .title(<span class="hljs-string">&quot;ICES-Waimaiæ¥å£æ–‡æ¡£&quot;</span>)<br>                .description(<span class="hljs-string">&quot;Author: IzayoiAster&quot;</span>)<br>                .contact(<span class="hljs-keyword">new</span> Contact(<span class="hljs-string">&quot;GitHub&quot;</span>, <span class="hljs-string">&quot;https://github.com/IzayoiAster&quot;</span>, <span class="hljs-string">&quot;[email protected]&quot;</span>))<br>                .version(<span class="hljs-string">&quot;1.0&quot;</span>)<br>                .build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>4.æ·»åŠ ç›¸å…³æ³¨è§£ï¼š</p><p>å…¶å®ä¸»è¦å°±æ˜¯ <strong>@Apiå’Œ@ApiOperation</strong> å•¦</p><p>@Apiè¦ç¼–è¾‘tagså±æ€§æ‰æœ‰æ•ˆæœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Api</span>ï¼šç”¨åœ¨è¯·æ±‚çš„ç±»ä¸Šï¼Œè¡¨ç¤ºå¯¹ç±»çš„è¯´æ˜<br>    tags=<span class="hljs-string">&quot;è¯´æ˜è¯¥ç±»çš„ä½œç”¨ï¼Œå¯ä»¥åœ¨UIç•Œé¢ä¸Šçœ‹åˆ°çš„æ³¨è§£&quot;</span><br>    value=<span class="hljs-string">&quot;è¯¥å‚æ•°æ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œåœ¨UIç•Œé¢ä¸Šä¹Ÿçœ‹åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦é…ç½®&quot;</span><br><br><span class="hljs-meta">@ApiOperation</span>ï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¯´æ˜æ–¹æ³•çš„ç”¨é€”ã€ä½œç”¨<br>    value=<span class="hljs-string">&quot;è¯´æ˜æ–¹æ³•çš„ç”¨é€”ã€ä½œç”¨&quot;</span><br>    notes=<span class="hljs-string">&quot;æ–¹æ³•çš„å¤‡æ³¨è¯´æ˜&quot;</span><br><br><span class="hljs-meta">@ApiImplicitParams</span>ï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å‚æ•°è¯´æ˜<br>    <span class="hljs-meta">@ApiImplicitParam</span>ï¼šç”¨åœ¨<span class="hljs-meta">@ApiImplicitParams</span>æ³¨è§£ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªè¯·æ±‚å‚æ•°çš„å„ä¸ªæ–¹é¢<br>        nameï¼šå‚æ•°å<br>        valueï¼šå‚æ•°çš„æ±‰å­—è¯´æ˜ã€è§£é‡Š<br>        requiredï¼šå‚æ•°æ˜¯å¦å¿…é¡»ä¼ <br>        paramTypeï¼šå‚æ•°æ”¾åœ¨å“ªä¸ªåœ°æ–¹<br>            Â· header --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š<span class="hljs-meta">@RequestHeader</span><br>            Â· query --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š<span class="hljs-meta">@RequestParam</span><br>            Â· pathï¼ˆç”¨äºrestfulæ¥å£ï¼‰--&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š<span class="hljs-meta">@PathVariable</span><br>            Â· bodyï¼ˆä¸å¸¸ç”¨ï¼‰<br>            Â· formï¼ˆä¸å¸¸ç”¨ï¼‰    <br>        dataTypeï¼šå‚æ•°ç±»å‹ï¼Œé»˜è®¤Stringï¼Œå…¶å®ƒå€¼dataType=<span class="hljs-string">&quot;Integer&quot;</span>       <br>        defaultValueï¼šå‚æ•°çš„é»˜è®¤å€¼<br><br><span class="hljs-meta">@ApiResponses</span>ï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å“åº”<br>    <span class="hljs-meta">@ApiResponse</span>ï¼šç”¨åœ¨<span class="hljs-meta">@ApiResponses</span>ä¸­ï¼Œä¸€èˆ¬ç”¨äºè¡¨è¾¾ä¸€ä¸ªé”™è¯¯çš„å“åº”ä¿¡æ¯<br>        codeï¼šæ•°å­—ï¼Œä¾‹å¦‚<span class="hljs-number">400</span><br>        messageï¼šä¿¡æ¯ï¼Œä¾‹å¦‚<span class="hljs-string">&quot;è¯·æ±‚å‚æ•°æ²¡å¡«å¥½&quot;</span><br>        responseï¼šæŠ›å‡ºå¼‚å¸¸çš„ç±»<br><br><span class="hljs-meta">@ApiModel</span>ï¼šç”¨äºå“åº”ç±»ä¸Šï¼Œè¡¨ç¤ºä¸€ä¸ªè¿”å›å“åº”æ•°æ®çš„ä¿¡æ¯<br>            ï¼ˆè¿™ç§ä¸€èˆ¬ç”¨åœ¨poståˆ›å»ºçš„æ—¶å€™ï¼Œä½¿ç”¨<span class="hljs-meta">@RequestBody</span>è¿™æ ·çš„åœºæ™¯ï¼Œ<br>            è¯·æ±‚å‚æ•°æ— æ³•ä½¿ç”¨<span class="hljs-meta">@ApiImplicitParam</span>æ³¨è§£è¿›è¡Œæè¿°çš„æ—¶å€™ï¼‰<br>    <span class="hljs-meta">@ApiModelProperty</span>ï¼šç”¨åœ¨å±æ€§ä¸Šï¼Œæè¿°å“åº”ç±»çš„å±æ€§<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œè®¿é—®<code>http://localhost:8080/swagger-ui/index.html</code>å³å¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/%E6%9D%82%E5%9B%BE/image.4tmphl2fxoq0.png" alt="image"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Swagger</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxéƒ¨ç½²jaråŒ…</title>
    <link href="/2021/10/22/Linux%E9%83%A8%E7%BD%B2jar%E5%8C%85/"/>
    <url>/2021/10/22/Linux%E9%83%A8%E7%BD%B2jar%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<p>Java MySQLè¿™äº›ç¯å¢ƒçš„é…ç½®å°±ä¸è¯´äº†<br>SpringBootå¯¼å¤Ÿé‚£äº›ä¾èµ–ä¹‹åï¼ŒIDEAå³è¾¹é‚£ä¸ªmavené€‰é¡¹å¡åœ¨Lifecircleé‡Œè¿è¡Œpackageï¼Œä¼šç”Ÿæˆä¸€ä¸ªjaråŒ…ï¼Œä¼ åˆ°linuxé‡Œå–œæ¬¢çš„åœ°æ–¹</p><p>ï¼ˆé¡ºä¾¿è¦æ˜¯éƒ¨ç½²çš„æ—¶å€™æƒ³å…³é—­ç¨‹åºï¼Œè¾“<code>ps aux</code>å°±èƒ½åˆ—å‡ºè¿›ç¨‹å’Œè¿›ç¨‹å·ï¼›ä¸è¿‡å¦‚æœæ˜¯ç®€å•çš„æ§åˆ¶å°java -jarçš„è¯Ctrl + Cå°±è¡Œï¼‰</p><p><code>ps -ef|grep xxx.jar</code>ï¼Œæˆ–è€…åƒä¸‹é¢è¿™æ ·ï¼Œåˆ—å‡ºæ‰€æœ‰javaè¿›ç¨‹</p><p>ç„¶å<code>kill -9 è¿›ç¨‹å·</code></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.51wrb33gweg0.png" alt="image"></p><h3 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h3><h4 id="æ–¹æ³•1ï¼š"><a href="#æ–¹æ³•1ï¼š" class="headerlink" title="æ–¹æ³•1ï¼š"></a>æ–¹æ³•1ï¼š</h4><p>1.ä½¿ç”¨å‘½ä»¤ <code>firewall-cmd --state</code>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ã€‚å¾—åˆ°ç»“æœæ˜¯runningæˆ–è€…not running<br>2.åœ¨running çŠ¶æ€ä¸‹ï¼Œå‘firewall æ·»åŠ éœ€è¦å¼€æ”¾çš„ç«¯å£ï¼š<br><code>firewall-cmd --permanent --zone=public --add-port=8080/tcp</code>  æ°¸ä¹…æ·»åŠ ç«¯å£ï¼Œå»æ‰ â€“permanent åˆ™è¡¨ç¤ºä¸´æ—¶<br>3.<code>firewall-cmd --reload</code>  åŠ è½½é…ç½®ï¼Œä½¿å¾—ä¿®æ”¹æœ‰æ•ˆã€‚<br>4.<code>firewall-cmd --permanent --zone=public --list-ports</code> æŸ¥çœ‹å¼€å¯çš„ç«¯å£é‡Œæ˜¯å¦æˆåŠŸæ·»åŠ </p><blockquote><p>p.s.CentOS7ä»¥ä¸‹æœ‰ä¸“é—¨çš„é˜²ç«å¢™æ“ä½œå‘½ä»¤ï¼ˆæˆ‘çš„é‚£ä¸ªé˜¿é‡Œäº‘ä¹Ÿæ˜¯ï¼‰</p><p>å¼€å¯é˜²ç«å¢™ï¼š<code>systemctl start firewalld.service</code><br>å…³é—­é˜²ç«å¢™ï¼š<code>systemctl stop firewalld.service</code><br>å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼š <code>systemctl enable firewalld.service</code><br>å…³é—­å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼š <code>systemctl disable firewalld.service</code><br>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼š<code>systemctl status firewalld</code></p></blockquote><p>ä½†æ˜¯å‘ç°è¿˜æ˜¯æ²¡æ³•ä»å¤–ç•Œè®¿é—®<code>æœåŠ¡å™¨ipåœ°å€:ç«¯å£å·</code></p><p>ç„¶åæƒ³èµ·æ¥ï¼Œå“¦ï¼Œé˜¿é‡Œäº‘é‚£è¾¹çš„å®‰å…¨ç»„æ”¾è¡Œæˆ‘è¿˜æ²¡é…æ¥ç€</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/%E6%9D%82%E5%9B%BE/image.4wil5g4gglk0.png" alt="image"></p><p>å“Ÿè¥¿ï¼ï¼ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/%E6%9D%82%E5%9B%BE/image.462fv1e8hks0.png" alt="image"></p><h4 id="æ–¹æ³•2ï¼šï¼ˆæ¬¡é€‰ï¼‰"><a href="#æ–¹æ³•2ï¼šï¼ˆæ¬¡é€‰ï¼‰" class="headerlink" title="æ–¹æ³•2ï¼šï¼ˆæ¬¡é€‰ï¼‰"></a>æ–¹æ³•2ï¼šï¼ˆæ¬¡é€‰ï¼‰</h4><p>é¦–å…ˆç¡®ä¿æœ‰iptables</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install iptables-services<br></code></pre></td></tr></table></figure><p>ç„¶åå¼€æ”¾å¯¹åº”çš„ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> sample configuration <span class="hljs-keyword">for</span> iptables service</span><br><span class="hljs-meta">#</span><span class="bash"> you can edit this manually or use system-config-firewall</span><br><span class="hljs-meta">#</span><span class="bash"> please <span class="hljs-keyword">do</span> not ask us to add additional ports/services to this default configuration</span><br>*filter<br>:INPUT ACCEPT [0:0]<br>:FORWARD ACCEPT [0:0]<br>:OUTPUT ACCEPT [0:0]<br>-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT<br>-A INPUT -p icmp -j ACCEPT<br>-A INPUT -i lo -j ACCEPT<br>-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT<br>-A INPUT -P tcp -m state --state NEW -m tcp --dport 8080 -j ACCEPT<br>-A INPUT -P tcp -m state --state NEW -m tcp --dport 8888 -j ACCEPT<br>-A INPUT -j REJECT --reject-with icmp-host-prohibited<br>-A FORWARD -j REJECT --reject-with icmp-host-prohibited<br>COMMIT<br></code></pre></td></tr></table></figure><p>é‡å¯é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl restart iptables<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æŠ¥é”™äº†Orzï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ0jl38ljn8gs6phcrziyjZ waimai]# systemctl restart iptables<br>Job for iptables.service failed because the control process exited with error code.<br>See &quot;systemctl status iptables.service&quot; and &quot;journalctl -xe&quot; for details.<br></code></pre></td></tr></table></figure><p>æœäº†åŠå¤©å‘ç°æ˜¯å’ŒåŸæœ‰çš„firewalldå†²çªäº†å¥½åƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">service iptables save<br>systemctl stop firewalld<br>systemctl disable  firewalld<br>systemctl start iptables<br>systemctl status iptables<br>systemctl enable iptables<br></code></pre></td></tr></table></figure><p>ï¼ˆæ³¨æ„å•¦ï¼Œè¿™æ ·ä¸€æ¥/etc/sysconfig/iptablesä¼šé‡ç½®ï¼Œè®°å¾—é‡å†™ä¸€ä¸‹ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">é¢„é˜²ï¼šæƒ³è¦æ”¹å›firewalldé˜²ç«å¢™ç”¨ä¸‹é¢å‘½ä»¤<br>1ï¼‰å¼€æœºè‡ªåŠ¨å¯åŠ¨firewalldé˜²ç«å¢™<br>systemctl enable firewalld.service<br>2ï¼‰å…³é—­å¼€æœºåˆ¶åŠ¨å¯åŠ¨<br>systemctl disable firewalld.service<br>3ï¼‰æŸ¥çœ‹çŠ¶æ€<br>systemctl status firewalld<br>4ï¼‰å¯ç”¨é˜²ç«å¢™firewalld<br>systemctl start firewalld.service<br></code></pre></td></tr></table></figure><h4 id="é…ç½®åå°è¿è¡Œ"><a href="#é…ç½®åå°è¿è¡Œ" class="headerlink" title="é…ç½®åå°è¿è¡Œ"></a>é…ç½®åå°è¿è¡Œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">nohup java -jar jarName-0.0.1-SNAPSHOT.jar &gt;msg.log 2&gt;&amp;1 &amp;<br></code></pre></td></tr></table></figure><p>å‚è€ƒ<a href="https://blog.csdn.net/chen_2890/article/details/90520517">è¿™é‡Œ</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxå®‰è£…é…ç½®MySQLï¼ˆå«è¿œç¨‹è¿æ¥ï¼‰</title>
    <link href="/2021/10/22/Linux%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEMySQL%EF%BC%88%E5%90%AB%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%EF%BC%89/"/>
    <url>/2021/10/22/Linux%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEMySQL%EF%BC%88%E5%90%AB%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>è¿™ä¸æœ€è¿‘åœ¨å†™å¤–å–å°ç¨‹åºçš„åå°å˜›ï¼Œå‰ç«¯çš„å…„å¼Ÿé—®æˆ‘è¦æ¥å£äº†ï¼Œä¸è¿‡ä»–é‚£ä¸ªæœºå­è¿˜æ²¡æ€ä¹ˆé…é‚£ä¸€å †ç¯å¢ƒï¼Œæˆ‘æŠŠé¡¹ç›®å‘ç»™ä»–è®©ä»–è¿localhostä¼¼ä¹æœ‰ç‚¹éº»çƒ¦ï¼Œå¹²è„†å°±å…ˆæäº†ä¸ªæœåŠ¡å™¨ç ”ç©¶ç ”ç©¶éƒ¨ç½²é¡¹ç›®ï¼Œåæ­£ä»¥åä¹Ÿè¦è¿™ä¹ˆå¹²ã€‚</p><p>ç½‘ä¸Šçš„æ•™ç¨‹å®åœ¨æ˜¯â€¦â€¦ä»¤äººæ— è¯­ï¼Œæœå‡ºæ¥10ç¯‡8ç¯‡éƒ½æ˜¯æŠ„æ¥æŠ„å»ä¸€æ¨¡ä¸€æ ·çš„æ–‡ç« ï¼Œå‰©ä¸‹çš„è¿˜æœ‰ä¸€å †è¿‡æ—¶çš„ï¼Œç¨å¾®è®°ä¸€ä¸‹å®‰è£…å§ã€‚</p><p>é¦–å…ˆè¿™æ˜¯ä¸ªå…¨æ–°çš„å¹²å¹²å‡€å‡€çš„æœåŠ¡å™¨</p><p><a href="https://blog.csdn.net/u011421988/article/details/107234718">æŒ–ä¸ªå‘ï¼Œä¸‹æ¬¡é…ç½®å†å†™</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³MyBatisåœ¨æµè§ˆå™¨è¿”å›jsonénullçš„å€¼æ˜¾ç¤ºä¸ºnullçš„é—®é¢˜</title>
    <link href="/2021/10/22/%E8%A7%A3%E5%86%B3MyBatis%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%94%E5%9B%9Ejson%E9%9D%9Enull%E7%9A%84%E5%80%BC%E6%98%BE%E7%A4%BA%E4%B8%BAnull%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2021/10/22/%E8%A7%A3%E5%86%B3MyBatis%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%94%E5%9B%9Ejson%E9%9D%9Enull%E7%9A%84%E5%80%BC%E6%98%BE%E7%A4%BA%E4%B8%BAnull%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/%E6%9D%82%E5%9B%BE/image.png" alt="image"></p><p>æ¯”å¦‚è¿™ç§æƒ…å†µï¼Œä¸€å¼€å§‹ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ï¼Œä¹Ÿæ²¡æœå‡ºæ¥</p><p>åæ¥æ¢äº†æ¢å…³é”®è¯æ‰å‘ç°ä¸æ˜¯mysqlçš„é—®é¢˜ï¼Œæ˜¯mybatisçš„é—®é¢˜</p><p>è€Œå¯¼è‡´è¿™ä¸ªmybatisé—®é¢˜çš„åŸå› æ˜¯é‚£ä¸ªMyBatisXçš„ä»£ç ç”Ÿæˆæ’ä»¶çš„é—®é¢˜</p><p><strong>å¯¹äºsqlä¸­å°å†™å­—æ¯+ä¸‹åˆ’çº¿å½¢å¼çš„è¡¨å‘½åï¼Œåœ¨å®ä½“ç±»ä¸­éœ€è¦æ”¹ä¸ºå¯¹åº”çš„é©¼å³°å‘½åå½¢å¼æ‰èƒ½è¢«MyBatisæ­£ç¡®æ˜ å°„</strong></p><p>é‚£ä¸¤ä¸ªActualColumnçš„é€‰é¡¹ï¼Œå…³ä¸Šä¹‹åå°±æ˜¯é©¼å³°å½¢å¼çš„äº†</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/%E6%9D%82%E5%9B%BE/image.5or87zb42us0.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/%E6%9D%82%E5%9B%BE/image.5pw39uzmdps0.png" alt="image"></p>]]></content>
    
    
    
    <tags>
      
      <tag>MyBatis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootå­¦ä¹ ç¬”è®°2</title>
    <link href="/2021/10/14/SpringBoot%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/"/>
    <url>/2021/10/14/SpringBoot%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸ºä»€ä¹ˆåˆå¼€äº†ä¸ª2å‘¢â€¦â€¦</p><p>å’ŒSSMçš„ä¸åŒï¼Œè¿™ä¸ªæ˜¯å› ä¸ºé‚£ä¸ªSpringBoot1çš„è¯¾å®åœ¨æ˜¯æ¡ç†å¤ªä¹±äº†ï¼Œè®²å¾—ä¹Ÿå¤ªæ·±å…¥ï¼Œä¸æ˜¯å¾ˆé€‚åˆâ€¦â€¦</p><p>ä½†æ˜¯åˆ æ˜¯ä¸å¯èƒ½åˆ çš„ï¼Œå¼€ä¸ª2å¾—äº†</p><p>ï¼ˆç»å…¸å¼¹å°„èµ·æ­¥ï¼‰<br>ï¼ˆä¹Ÿä¸»è¦æ˜¯å› ä¸ºè¿™ä¹‹å‰çš„æ²¡å¿…è¦å†™äº†ï¼‰</p><h1 id="SpringBootæ•´åˆMyBatis"><a href="#SpringBootæ•´åˆMyBatis" class="headerlink" title="SpringBootæ•´åˆMyBatis"></a>SpringBootæ•´åˆMyBatis</h1><p>ç»å…¸Initializrï¼ˆå½“ç„¶è¿™é‡Œåªå¯¼äº†mybatisç”¨åˆ°çš„ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot2/image.78jegnjqhno0.png" alt="image"></p><p>ï¼ˆç›´æ¥å°±ç”¨SSM2æœ€åçš„é‚£ä¸ªaccountè¡¨æ¥æµ‹è¯•äº†ï¼‰</p><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ToString</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> money;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®é…ç½®æ–‡ä»¶ï¼ˆè¾“å…¥datasourceå°±è‡ªåŠ¨æœ‰æç¤ºè¡¥å…¨äº†ï¼ŒSpringBoot1ç¬”è®°é‡Œé‚£ä¸ªè¯¾è¿˜è¦é…ç½®è¡¥å…¨ï¼Œå¤ªè¿‡æ—¶äº†â€¦â€¦ï¼‰</p><p>ï¼ˆjdbc:mysql:///ssm æ˜¯é‚£ä¸ªå…¸ä¸­å…¸åœ°å€çš„ç®€å•å†™æ³•ï¼‰</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql:///springboot</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>æ³¨è§£å¼€å‘ä¸ç”¨å†™MyBatisçš„é…ç½®ä¿¡æ¯ï¼Œå› ä¸ºæˆ‘æ˜¯æ³¨è§£ï¼Œå°±ä¸å†™äº†ï¼Œxmlç”¨åˆ°å†å›æ¥çœ‹</p><p>UserMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.testbatis.mapper;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br><br>    <span class="hljs-meta">@Select(&quot;SELECT * FROM account&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-meta">@Insert(&quot;INSERT INTO account VALUES(#&#123;id&#125;, #&#123;name&#125;, #&#123;money&#125;)&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(User user)</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.testbatis;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestbatisApplicationTests</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testFindAll</span><span class="hljs-params">()</span> </span>&#123;<br>        List&lt;User&gt; userList = userMapper.findAll();<br>        System.out.println(userList); <span class="hljs-comment">// [User(id=1, name=aster, money=16.66)]</span><br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testInsert</span><span class="hljs-params">()</span> </span>&#123;<br>        userMapper.insert(<span class="hljs-keyword">new</span> User(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;aster&quot;</span>, <span class="hljs-number">16.66</span>));<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot2/image.6dtx2q8g8tc.png" alt="image"></p><p><strong>ä¸Šé¢è¿™äº›å°±æ˜¯æ‰€æœ‰çš„ä»£ç äº†</strong></p><p><strong>å¤ªä»–å¦ˆçˆ½äº†ï¼SpringBootçœŸæ˜¯è®©SSMç®€å•å¤ªå¤ªå¤ªå¤ªå¤ªå¤ªå¤ªå¤ªå¤ªå¤šäº†ï¼ï¼ï¼</strong></p><h1 id="SpringBootåŸç†åˆ†æ"><a href="#SpringBootåŸç†åˆ†æ" class="headerlink" title="SpringBootåŸç†åˆ†æ"></a>SpringBootåŸç†åˆ†æ</h1><h2 id="è‡ªåŠ¨é…ç½®"><a href="#è‡ªåŠ¨é…ç½®" class="headerlink" title="è‡ªåŠ¨é…ç½®"></a>è‡ªåŠ¨é…ç½®</h2><h3 id="Condition"><a href="#Condition" class="headerlink" title="Condition"></a>Condition</h3><p>Conditionæ˜¯æ¡ä»¶åˆ¤æ–­ï¼Œé€šè¿‡å®ƒå¯ä»¥<strong>é€‰æ‹©æ€§åœ°</strong>åˆ›å»ºBean</p><p>ä¾‹å¦‚ï¼š<strong>å¦‚æœæœ‰Jeidsåæ ‡ï¼Œå°±ä¸æ³¨å…¥Userï¼Œå¦åˆ™æ³¨å…¥User</strong></p><p>å»ºä¸€ä¸ªç©ºçš„springbooté¡¹ç›®</p><p>å®ä½“ç±»ï¼ˆç•¥ï¼‰</p><p><strong>é…ç½®ç±»ï¼š</strong>ï¼ˆä»¥å‰æ²¡æ€ä¹ˆè¿™æ ·å†™ï¼Œæ‰€ä»¥åŠ ç²—äº†ï¼‰</p><p>ï¼ˆå†æ¬¡æ³¨æ„å“¦ï¼Œè¦åœ¨é…ç½®ç±»é‡Œå®šä¹‰Beanï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.test.config;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserConfig</span> </span>&#123;<br><br>    <span class="hljs-meta">@Bean</span> <span class="hljs-comment">// æ”¾å…¥å®¹å™¨</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">user</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User();<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.test;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestApplication</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">// å¯åŠ¨SpringBootåº”ç”¨ï¼Œè·å–IOCå®¹å™¨</span><br>        ConfigurableApplicationContext context = SpringApplication.run(TestApplication.class, args);<br><br>        User user = (User) context.getBean(<span class="hljs-string">&quot;user&quot;</span>);<br>        System.out.println(user);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ˜¾ç„¶ï¼Œä¸Šé¢çš„ç¨‹åºæ˜¯èƒ½è¾“å‡ºä¸€ä¸ªuserå®ä½“çš„</p><p>æˆ‘ä»¬åœ¨UserConfigä¸ŠåŠ ä¸€ä¸ª**@Conditional<strong>æ³¨è§£ï¼Œåœ¨æ³¨è§£å†…éœ€è¦æ”¾ç½®</strong>å®ç°äº†Conditionæ¥å£**çš„ç±»å­—èŠ‚ç ï¼ˆæ˜¯contextåŒ…é‡Œçš„ï¼Œåˆ«å¯¼é”™äº†ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.test.config;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@Conditional(ClassCondition.class)</span> <span class="hljs-comment">// &lt;----</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserConfig</span> </span>&#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">user</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User();<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.test.condition;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClassCondition</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Condition</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">matches</span><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;<br>        <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">true</span>;<br>        <span class="hljs-keyword">try</span> &#123; <span class="hljs-comment">// åˆ¤æ–­redis.clients.jedis.Jedis.classæ˜¯å¦å­˜åœ¨</span><br>            Class&lt;?&gt; cls = Class.forName(<span class="hljs-string">&quot;redis.clients.jedis.Jedis&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            flag = <span class="hljs-keyword">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> flag;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ˜¾ç„¶ï¼Œå½“æœ‰ä¸‹é¢çš„ä¾èµ–çš„æ—¶å€™ï¼Œèƒ½æ‰¾åˆ°userï¼Œå½“æ²¡æœ‰çš„æ—¶å€™ï¼Œå°±æ‰¾ä¸åˆ°äº†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ›´è¿›ä¸€æ­¥ï¼Œ<strong>å°†ç±»çš„åˆ¤æ–­å®šä¹‰ä¸ºåŠ¨æ€çš„ã€‚å³åˆ¤æ–­å“ªä¸ªå­—èŠ‚ç æ–‡ä»¶å­˜åœ¨å¯ä»¥åŠ¨æ€æŒ‡å®šã€‚</strong></p><p><strong>è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£</strong>@ConditionOnClass</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.test.condition;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-comment">// ä»¥ä¸‹ä¸‰ä¸ªæ˜¯ç›´æ¥å¤åˆ¶è¿‡æ¥çš„@Conditinalå†…çš„æ³¨è§£</span><br><span class="hljs-meta">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span> <span class="hljs-comment">// ä½œç”¨åœ¨ç±»å’Œæ–¹æ³•ä¸Š</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="hljs-comment">// è¿è¡Œæ—¶ç”Ÿæ•ˆ</span><br><span class="hljs-meta">@Documented</span><br><br><span class="hljs-meta">@Conditional(ClassCondition.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> ConditionOnClass &#123;<br>    String[] value(); <span class="hljs-comment">// å¯èƒ½æœ‰å¤šä¸ªæ¡ä»¶ï¼Œæ‰€ä»¥ç”¨æ•°ç»„</span><br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>éšè®°ä¸¤ä¸ªå°çŸ¥è¯†ï¼š1.åœ¨æ–¹æ³•ä¸Šæ•²/**å›è½¦ï¼Œè‡ªåŠ¨ç”Ÿæˆæ–¹æ³•è¯´æ˜çš„æ¨¡æ¿ï¼›2.æ•²iterè‡ªåŠ¨ç”Ÿæˆè¿­ä»£å½¢å¼çš„for</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.test.condition;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClassCondition</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Condition</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> context ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç”¨äºè·å–ç¯å¢ƒã€IOCå®¹å™¨ã€ClassLoaderå¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> metadata æ³¨è§£å…ƒå¯¹è±¡ï¼Œå¯ä»¥ç”¨äºè·å–æ³¨è§£å®šä¹‰çš„å±æ€§å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">matches</span><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;<br>        <span class="hljs-comment">// éœ€æ±‚ï¼šå¯¼å…¥é€šè¿‡æ³¨è§£å±æ€§å€¼valueæŒ‡å®šçš„åæ ‡åæ‰åˆ›å»ºBean</span><br>        <br>        <span class="hljs-comment">// è·å–æ³¨è§£å±æ€§å€¼value</span><br>        Map&lt;String, Object&gt; map = metadata.getAnnotationAttributes(ConditionOnClass.class.getName());<br>        String[] value = (String[]) map.get(<span class="hljs-string">&quot;value&quot;</span>);<br>        <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">true</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">for</span> (String className : value) &#123;<br>                Class&lt;?&gt; cls = Class.forName(className);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            flag = <span class="hljs-keyword">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> flag;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œè¯´å›åŸç†åˆ†æï¼ŒSpringBootæ˜¯å¦‚ä½•å¸®æˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºBeançš„å‘¢ï¼Ÿå½“æˆ‘ä»¬å¼•å…¥å¯¹åº”çš„starterä¹‹åï¼ŒSpringBootå°±ä¼šé€šè¿‡Conditionå¯¹åº”çš„starterä»è€Œå¾—çŸ¥è¦åˆ›å»ºBean</p><p>ç„¶åä½ å°±ä¼šå‘ç°ï¼Œä¸Šé¢çš„ä¸œè¥¿ç™½å­¦äº†ï¼ˆå…¸ä¸­å…¸ï¼‰ï¼ŒSpringBootæä¾›äº†ä¸€å †ç±»ä¼¼çš„æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@ConditionalOnClass(&quot;xxxxx&quot;)</span><br><span class="hljs-meta">@ConditionalOnProperty(name = &quot;xxx&quot;, havingValue = &quot;xxx&quot;)</span> <span class="hljs-comment">// å½“é…ç½®æ–‡ä»¶é‡Œæœ‰name: valueåå†æ‰§è¡Œ</span><br></code></pre></td></tr></table></figure><h3 id="åˆ‡æ¢å†…ç½®webæœåŠ¡å™¨"><a href="#åˆ‡æ¢å†…ç½®webæœåŠ¡å™¨" class="headerlink" title="åˆ‡æ¢å†…ç½®webæœåŠ¡å™¨"></a>åˆ‡æ¢å†…ç½®webæœåŠ¡å™¨</h3><p>ï¼ˆæš‚ç•¥ï¼‰</p><h3 id="Enableâ€¦"><a href="#Enableâ€¦" class="headerlink" title="@Enableâ€¦"></a>@Enableâ€¦</h3><p> springbootä¸­æœ‰å¾ˆå¤šEnableå¼€å¤´çš„æ³¨è§£ï¼Œç”¨äºåŠ¨æ€å¯åŠ¨æŸäº›åŠŸèƒ½ã€‚åº•å±‚åŸç†æ˜¯ä½¿ç”¨@Importå¯¼å…¥ä¸€äº›é…ç½®ç±»ï¼Œå®ç°Beançš„åŠ¨æ€åŠ è½½</p><p>SpringBootå·¥ç¨‹æ˜¯<strong>ä¸å¯ä»¥</strong>ç›´æ¥è·å–åˆ«çš„jaråŒ…ä¸­å®šä¹‰çš„Beançš„</p><p>å› ä¸º@SpringBootApplicationå†…çš„@ComponentScançš„èŒƒå›´æ˜¯å½“å‰å¼•å¯¼ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ï¼Œå°±ç®—åœ¨pom.xmlé‡Œå¯¼åæ ‡äº†ï¼Œä¹Ÿæ‰«ä¸åˆ°å¤–é¢çš„ä¸œè¥¿</p><p><strong>è§£å†³æ–¹æ¡ˆ1ï¼š</strong>ä½¿ç”¨**@Import**æ³¨è§£åŠ è½½ç±»ï¼Œè¢«åŠ è½½çš„ç±»éƒ½ä¼šè¢«Springåˆ›å»ºï¼Œå¹¶è¢«æ”¾å…¥IOCå®¹å™¨</p><p>ä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆä¹ŸæŒºéº»çƒ¦ï¼Œå’Œé…ç½®ä¸€å †@ComponentScanæ²¡å¤šå¤§åŒºåˆ«</p><p><strong>è§£å†³æ–¹æ¡ˆ2ï¼š</strong>å£°æ˜æ³¨è§£@EnableUserï¼ˆå‡å¦‚è¯´æ˜¯åœ¨å¤–é¢å®šä¹‰äº†ä¸ªUserç±»æƒ³è¦æ³¨å…¥ï¼‰ï¼Œåœ¨è¿™ä¸ªæ³¨è§£å†…å†™å¥½@Importç­‰ï¼Œç„¶ååœ¨éœ€è¦ç”¨åˆ°çš„å…¶ä»–åœ°æ–¹@EnableUserå³å¯</p><h3 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h3><p>æ—¢ç„¶ä¸Šé¢çš„Enableåº•å±‚æ˜¯Importï¼Œæ¥çœ‹ä¸€ä¸‹Import</p><p>Importæœ‰å››ç§ç”¨æ³•ï¼š</p><ul><li>å¯¼å…¥Bean</li><li>å¯¼å…¥é…ç½®ç±»</li><li>å¯¼å…¥ImportSelectorå®ç°ç±»ï¼Œä¸€èˆ¬ç”¨äºåŠ è½½é…ç½®æ–‡ä»¶ä¸­çš„ç±»</li><li>å¯¼å…¥ImportBeanDefinitionRegistrarå®ç°ç±»</li></ul><h4 id="ç›´æ¥å¯¼å…¥bean"><a href="#ç›´æ¥å¯¼å…¥bean" class="headerlink" title="ç›´æ¥å¯¼å…¥bean"></a>ç›´æ¥å¯¼å…¥bean</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import(User.class)</span><br></code></pre></td></tr></table></figure><p>å¯¼å…¥åçš„åç§°æ˜¯ç±»çš„å…¨é™å®šå</p><h4 id="å¯¼å…¥é…ç½®ç±»"><a href="#å¯¼å…¥é…ç½®ç±»" class="headerlink" title="å¯¼å…¥é…ç½®ç±»"></a>å¯¼å…¥é…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import(MyConfig.class)</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼ŒMyConfigå†…æ‰€æœ‰å£°æ˜çš„Beanéƒ½ä¼šè¢«å¯¼å…¥ï¼ˆè¿™ç§æƒ…å†µä¸‹ï¼Œé…ç½®ç±»çš„@Configurationæ³¨è§£å¯ä»¥ä¸å†™ï¼‰</p><h4 id="å¯¼å…¥ImportSelectorçš„å®ç°ç±»"><a href="#å¯¼å…¥ImportSelectorçš„å®ç°ç±»" class="headerlink" title="å¯¼å…¥ImportSelectorçš„å®ç°ç±»"></a>å¯¼å…¥ImportSelectorçš„å®ç°ç±»</h4><p>ï¼ˆæš‚ç•¥ï¼‰</p><h2 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h2><p>SpringBootçš„ç›‘å¬æœºåˆ¶å…¶å®æ˜¯å¯¹Javaçš„ç›‘å¬æœºåˆ¶çš„å°è£…</p><p>Javaä¸­çš„äº‹ä»¶ç›‘å¬æœºåˆ¶å®šä¹‰äº†ä»¥ä¸‹çš„å‡ ä¸ªè§’è‰²ï¼š</p><ol><li>äº‹ä»¶Eventï¼šç»§æ‰¿java.util.EventObjectç±»çš„å¯¹è±¡</li><li>äº‹ä»¶æºSourceï¼šä»»æ„å¯¹è±¡Object</li><li>ç›‘å¬å™¨Listenerï¼šå®ç°java.util.EventListeneræ¥å£çš„å¯¹è±¡</li></ol><p>SpringBootåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šå¯¹å‡ ä¸ªç›‘å¬å™¨è¿›è¡Œå›è°ƒï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è¿™äº›ç›‘å¬å™¨æ¥å£ï¼Œåœ¨é¡¹ç›®å¯åŠ¨æ—¶å®Œæˆä¸€äº›æ“ä½œï¼šApplicationContextInitializer, SpringApplicationRunListener, CommandLineRunner, ApplicationRunner</p><p>[ï¼ˆçœ‹äº†ï¼Œæš‚ä¸è®°ï¼‰](<a href="https://www.bilibili.com/video/BV1Lq4y1J77x?p=28">é»‘é©¬ç¨‹åºå‘˜SpringBootæ•™ç¨‹ï¼Œ6å°æ—¶å¿«é€Ÿå…¥é—¨Javaå¾®æœåŠ¡æ¶æ„Spring Boot_å“”å“©å“”å“©_bilibili</a>)</p><h2 id="å¯åŠ¨æµç¨‹åˆ†æ"><a href="#å¯åŠ¨æµç¨‹åˆ†æ" class="headerlink" title="å¯åŠ¨æµç¨‹åˆ†æ"></a>å¯åŠ¨æµç¨‹åˆ†æ</h2><h1 id="SpringBooté¡¹ç›®éƒ¨ç½²"><a href="#SpringBooté¡¹ç›®éƒ¨ç½²" class="headerlink" title="SpringBooté¡¹ç›®éƒ¨ç½²"></a>SpringBooté¡¹ç›®éƒ¨ç½²</h1><p>æ”¯æŒä¸¤ç§æ–¹å¼éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼šjarï¼ˆå®˜æ–¹æ¨èï¼‰ /  war</p><p>åœ¨ç¬”è®°1é‡Œä¹Ÿå­¦è¿‡ï¼Œåœ¨å³è¾¹çš„Mavené€‰é¡¹é‡Œæ‰§è¡Œpackage</p><p>ç„¶åï¼Œjava -jar .\xxxxxx.jar å°±è¡Œäº†</p><p>ï¼ˆwaræš‚ç•¥ï¼‰</p>]]></content>
    
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºIDEAçš„Unable to resolve table</title>
    <link href="/2021/10/14/%E5%85%B3%E4%BA%8EIDEA%E7%9A%84Unable%20to%20resolve%20table/"/>
    <url>/2021/10/14/%E5%85%B3%E4%BA%8EIDEA%E7%9A%84Unable%20to%20resolve%20table/</url>
    
    <content type="html"><![CDATA[<h1 id=""><a href="#" class="headerlink" title="."></a>.</h1><p>ä¸€æ—¶æ²¡æœ‰ä¸€ä¸ªçœ‹èµ·æ¥é è°±çš„æ–¹æ¡ˆ</p><p>ä½†æ˜¯æœ‰ä¸ªå‡‘åˆçš„ï¼šå†™tableçš„å…¨é™å®šå</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.7kuyd0dezi0.png" alt="image"></p>]]></content>
    
    
    
    <tags>
      
      <tag>IDEA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ­å»ºæ ¡å›­å¤–å–å°ç¨‹åº</title>
    <link href="/2021/10/07/%E6%90%AD%E5%BB%BA%E6%A0%A1%E5%9B%AD%E5%A4%96%E5%8D%96%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    <url>/2021/10/07/%E6%90%AD%E5%BB%BA%E6%A0%A1%E5%9B%AD%E5%A4%96%E5%8D%96%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ€•ä»¥åç»´æŠ¤çš„æ—¶å€™å¿˜äº†ï¼Œè¾¹åšè¾¹è®°ä¸€ä¸‹ï¼Œå°±ä¸èµ·å°æ ‡é¢˜äº†ï¼Œä¹Ÿä¸åˆ å¯¼åŒ…äº†</p><p>åæ³¨ï¼šå‘ç°è¿˜æ˜¯æœ‰ç‚¹é•¿ï¼Œèµ·å°æ ‡é¢˜å§â€¦â€¦</p><p><strong>p.s. æ‚è®°ç½¢äº†ï¼Œå¾ˆä¹±ï¼Œä¹Ÿä¸å®Œæ•´ï¼Œå¯èƒ½å†™åˆ°åé¢æ”¹äº†ä¸œè¥¿ä¹Ÿæ‡’å¾—æ”¹å‰é¢ï¼Œé‡Œé¢å……æ»¡äº†å„ç§é”™è¯¯</strong></p><p><strong>ï¼ˆæ¯”å¦‚å‰é¢çš„Serviceéƒ½æ³¨å…¥æˆäº†å®ç°ç±»â€¦â€¦è™½ç„¶æ²¡å•¥å¤§åŒºåˆ«ï¼Ÿï¼‰</strong></p><p>ï¼ˆä¸ä¼šçœŸæœ‰äººé—²çš„æ²¡äº‹æ‰¾åˆ°æˆ‘åšå®¢ç¿»ç€çœ‹å§ï¼‰</p><h4 id="ä¸€äº›å¿«æ·é”®"><a href="#ä¸€äº›å¿«æ·é”®" class="headerlink" title="ä¸€äº›å¿«æ·é”®"></a>ä¸€äº›å¿«æ·é”®</h4><p>Ctrl + Alt + B ç”±controllerå¿«é€Ÿåˆ›å»ºservice</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ”¹ä¸€æ”¹é…ç½®æ–‡ä»¶</p><p>å› ä¸ºå‰ç«¯ç«¯å£æ˜¯8080ï¼ˆæˆ‘çŒœçš„ï¼Œå‰ç«¯çš„å…„å¼Ÿè¿˜æ²¡å†™å®Œåº”è¯¥ï¼‰ï¼Œæˆ‘ä»¬æŠŠåç«¯æ¢æˆ8888</p><p>ç„¶åé…ä¸€ä¸‹æ•°æ®æºã€mybatisplusä¹‹ç±»çš„</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8888</span><br><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">ices_waimai</span><br>  <span class="hljs-comment"># datasource</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/waimai?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimeZone=UTC</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-comment"># é…ç½®sqlæ—¥å¿—</span><br>    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br></code></pre></td></tr></table></figure><p>ä¸¤ä¸ªconfigï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.config;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;<br><span class="hljs-keyword">import</span> org.mybatis.spring.annotation.MapperScan;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@MapperScan(&quot;com.ices.waimai.dao.mapper&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisPlusConfig</span> </span>&#123;<br><br>    <span class="hljs-comment">// åˆ†é¡µæ’ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title">mybatisPlusInterceptor</span><span class="hljs-params">()</span> </span>&#123;<br>        MybatisPlusInterceptor interceptor = <span class="hljs-keyword">new</span> MybatisPlusInterceptor();<br>        interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> PaginationInnerInterceptor());<br>        <span class="hljs-keyword">return</span> interceptor;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.config;<br><br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebMVCConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">WebMvcConfigurer</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addCorsMappings</span><span class="hljs-params">(CorsRegistry registry)</span> </span>&#123;<br>        <span class="hljs-comment">// è·¨åŸŸé…ç½®</span><br>        <span class="hljs-comment">// å‰ç«¯8080è®¿é—®åç«¯8888ç›¸å½“äºä¸¤ä¸ªåŸŸåä¹‹é—´çš„è®¿é—®ï¼Œæ˜¯ä¸åŒæœåŠ¡å™¨ï¼Œè¦å…è®¸8080è®¿é—®æˆ‘ä»¬çš„8888çš„api</span><br>        <span class="hljs-comment">// å¤ä¹ ï¼šåŸŸå = IPåœ°å€ + ç«¯å£</span><br>        registry.addMapping(<span class="hljs-string">&quot;/**&quot;</span>).allowedOrigins(<span class="hljs-string">&quot;http://localhost:8080&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿”å›çš„jsonä¸€èˆ¬éƒ½æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;success&quot;</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-number">200</span>,<br>    <span class="hljs-attr">&quot;msg&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>,<br>    <span class="hljs-attr">&quot;data&quot;</span>: []<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åä»¥ç”¨æˆ·ä¸ºä¾‹å§ï¼Œéœ€è¦å»ºç«‹mapperå’Œå¯¹åº”mapperçš„å®ä½“ç±»</p><p>è¿™é‡Œç©¿æ’ä¸€ä¸ªå°æ’ä»¶â€”â€”MyBatisPlusXï¼Œå¯ä»¥è‡ªåŠ¨æ ¹æ®æ•°æ®åº“ç”Ÿæˆå®ä½“ç±»ä¹‹ç±»çš„ä¸œè¥¿ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/ices-waimai/image.4fa2fbtzpsa0.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/ices-waimai/image.2gvpaa78lhw0.png" alt="image"></p><p>è¿™æ ·å°±ä¼šç”Ÿæˆä¸€ä¸ªå’Œæ•°æ®åº“é‡Œçš„è¡¨å¯¹åº”çš„å®ä½“ç±»å•¦ï¼</p><p>MyBatisPlusæä¾›äº†mapperçš„çˆ¶ç±»BaseMapper&lt; &gt;ï¼Œç”¨çš„æ—¶å€™ç»§æ‰¿å³å¯</p><p>MyBatisPlusä¼šè‡ªåŠ¨å°†Userç±»å’Œæ•°æ®åº“ä¸­åä¸ºuserçš„è¡¨åšå…³è”</p><p>ï¼ˆå½“ç„¶è¿™é‡Œåªæ˜¯æ­æ¶å­ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.dao.pojo;<br><br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String username;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.dao.mapper;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;<br><span class="hljs-keyword">import</span> com.ices.waimai.dao.pojo.User;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseMapper</span>&lt;<span class="hljs-title">User</span>&gt; </span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>jsonè¿”å›å€¼å°è£…ä¸€ä¸‹ï¼Œåœ¨voä¸‹å»ºç«‹ä¸€ä¸ªResultå°è£…ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.vo;<br><br><span class="hljs-keyword">import</span> lombok.AllArgsConstructor;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Result</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> success;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> code;<br>    <span class="hljs-keyword">private</span> String msg;<br>    <span class="hljs-keyword">private</span> Object data;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Result <span class="hljs-title">success</span><span class="hljs-params">(Object data)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Result(<span class="hljs-keyword">true</span>, <span class="hljs-number">200</span>, <span class="hljs-string">&quot;success&quot;</span>, data);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Result <span class="hljs-title">fail</span><span class="hljs-params">(<span class="hljs-keyword">int</span> code, String msg)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Result(<span class="hljs-keyword">false</span>, code, msg, <span class="hljs-keyword">null</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.controller;<br><br><span class="hljs-keyword">import</span> com.ices.waimai.vo.params.PageParams;<br><span class="hljs-keyword">import</span> com.ices.waimai.vo.params.Result;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PostMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestBody;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShopController</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é¦–é¡µ åº—é“ºåˆ—è¡¨</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> pageParams</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Result <span class="hljs-title">listShop</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> PageParams pageParams)</span></span>&#123;<br>        <br>        <span class="hljs-keyword">return</span> shopController.listShop(pageParams);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªä¹Ÿè¿˜æ˜¯ä¸ªæ¶å­</p><p>listShopé‡Œçš„ä¸œè¥¿ï¼Œéœ€è¦äº¤ç»™serviceå»å®ç°ï¼Œæ ‡å‡†çš„å®ç°å½¢å¼æ˜¯<strong>serviceçš„æ¥å£å’Œå®ç°ç±»</strong></p><p><del>æ„Ÿè§‰ä¸Šé¢çš„æ¥å£å‘½åå¾ˆä¹±â€¦â€¦æ”¹ç”¨RESTfulé£æ ¼çš„æ¥å£å‘½åè§„èŒƒ</del></p><p><a href="https://www.cnblogs.com/MTRD/p/12153561.html"><del>RESTfulé£æ ¼çš„æ¥å£å‘½åè§„èŒƒ - å¿«é€Ÿçªå›´ - åšå®¢å›­ (cnblogs.com)</del></a></p><p><del>ç”±äºControlleré‡Œçš„æ–¹æ³•åçš„å‘½åè§„èŒƒå¹¶æ²¡æœ‰æ‰¾åˆ°ï¼Œæ‰€ä»¥è‡ªå·±å®šäº†ä¸€å¥—</del></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs txt">getUser<br>getUserById<br>getAllUsers<br><br>updateUser<br><br>addUser<br><br>deleteUser<br></code></pre></td></tr></table></figure><p>æˆ‘é€æ¸ç†è§£ä¸ºä»€ä¹ˆè¦ç”¨RESTfulé£æ ¼äº†ï¼Œå› ä¸ºæˆ‘ä¸€å¼€å§‹urlä¹Ÿæ˜¯æŒ‰ç…§ä¸Šé¢è‡ªå·±å†™çš„é‚£ä¸ªè§„èŒƒæ¥å†™çš„ï¼Œä½†æ˜¯èµ·åä¾ç„¶æ˜¯å¾ˆæ··ä¹±</p><p><strong>urlé‡Œä¸å‡ºç°åŠ¨è¯ï¼ä»…ä»…è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¯¹åº”çš„èµ„æºï¼æ“ä½œæ–¹å¼ç”±methodæ¥å®ç°</strong></p><p>ç™»å½•ä½¿ç”¨ä¸€ä¸‹JWT</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>JWTç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>å¤´éƒ¨Headerï¼š<code>&#123;&quot;type&quot;: &quot;JWT&quot;, &quot;alg&quot;: &quot;HS256&quot;&#125;</code></li><li>è½½è·Payloadï¼šå­˜æ”¾ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·idã€è¿‡æœŸæ—¶é—´ç­‰ï¼Œå¯ä»¥è¢«è§£å¯†ï¼Œä¸èƒ½å­˜æ•æ„Ÿä¿¡æ¯</li><li>ç­¾è¯Signatureï¼šå¤´éƒ¨å’Œè½½è·åŠ ä¸Šå¯†é’¥åŠ å¯†è€Œæˆï¼Œåªè¦å¯†é’¥ä¸ä¸¢å¤±ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å®‰å…¨çš„</li></ul><p>JWTéªŒè¯ä¸»è¦å°±æ˜¯éªŒè¯Céƒ¨åˆ†æ˜¯å¦åˆæ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.utils;<br><br><span class="hljs-keyword">import</span> io.jsonwebtoken.Jwt;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.JwtBuilder;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.Jwts;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;<br><br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JWTUtils</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String jwtToken = <span class="hljs-string">&quot;I2ay01@sT3RsJwTT0k3N.&quot;</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">creatToken</span><span class="hljs-params">(<span class="hljs-keyword">int</span> userid)</span> </span>&#123;<br>        Map&lt;String, Object&gt; claims = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        claims.put(<span class="hljs-string">&quot;userid&quot;</span>, userid); <span class="hljs-comment">// Payload</span><br>        JwtBuilder jwtBuilder = Jwts.builder()<br>                .signWith(SignatureAlgorithm.HS256, jwtToken) <span class="hljs-comment">// Headerï¼Œç­¾å‘ç®—æ³•ï¼Œå¯†é’¥ä¸ºjwtToken</span><br>                .setClaims(claims) <span class="hljs-comment">// è®¾ç½®Payloadï¼Œè¦å”¯ä¸€ï¼Œæ¯”å¦‚userid</span><br>                .setIssuedAt(<span class="hljs-keyword">new</span> Date()) <span class="hljs-comment">// è®¾ç½®ç­¾å‘æ—¶é—´</span><br>                .setExpiration(<span class="hljs-keyword">new</span> Date(System.currentTimeMillis() + <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>)); <span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´</span><br>        <span class="hljs-keyword">return</span> jwtBuilder.compact();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Map&lt;String, Object&gt; <span class="hljs-title">checkToken</span><span class="hljs-params">(String token)</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Jwt parse = Jwts.parser().setSigningKey(jwtToken).parse(token);<br>            <span class="hljs-keyword">return</span> (Map&lt;String, Object&gt;) parse.getBody();<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String token = JWTUtils.creatToken(<span class="hljs-number">114154</span>);<br>        System.out.println(token);<br>        Map&lt;String, Object&gt; map = JWTUtils.checkToken(token);<br>        <span class="hljs-keyword">assert</span> map != <span class="hljs-keyword">null</span>;<br>        System.out.println(map.get(<span class="hljs-string">&quot;userid&quot;</span>));<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å› ä¸ºæœ€å¥½ä¸€ä¸ªServiceè´Ÿè´£ä¸€ç§äº‹åŠ¡ï¼Œæ‰€ä»¥åœ¨LoginControlleré‡Œæœ€å¥½ä¸æ˜¯æ³¨å…¥UserServiceï¼Œè€Œæ˜¯æ³¨å…¥ä¸€ä¸ªä¸“é—¨çš„LoginService</p><p>è¿™é‡Œï¼ŒisBlankç”¨åˆ°äº†apacheçš„common-lang</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-lang3<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶åè¿˜éœ€è¦ç”¨åˆ°redis</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># redis</span><br><span class="hljs-attr">redis:</span><br>  <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.78<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>md5åŠ å¯†ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-codec<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-codec<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.controller;<br><br><span class="hljs-keyword">import</span> com.ices.waimai.service.LoginService;<br><span class="hljs-keyword">import</span> com.ices.waimai.service.impl.LoginServiceImpl;<br><span class="hljs-keyword">import</span> com.ices.waimai.vo.Result;<br><span class="hljs-keyword">import</span> com.ices.waimai.vo.params.LoginParam;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PostMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestBody;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> LoginServiceImpl loginService;<br><br>    <span class="hljs-meta">@PostMapping(&quot;/login&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Result <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> LoginParam loginParam)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> loginService.login(loginParam);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.service.impl;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> com.ices.waimai.dao.domain.TUser;<br><span class="hljs-keyword">import</span> com.ices.waimai.service.LoginService;<br><span class="hljs-keyword">import</span> com.ices.waimai.service.UserService;<br><span class="hljs-keyword">import</span> com.ices.waimai.utils.JWTUtils;<br><span class="hljs-keyword">import</span> com.ices.waimai.vo.Result;<br><span class="hljs-keyword">import</span> com.ices.waimai.vo.params.LoginParam;<br><span class="hljs-keyword">import</span> org.apache.commons.codec.digest.DigestUtils;<br><span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">LoginService</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String salt = <span class="hljs-string">&quot;ä¸å‘Šè¯‰ä½ &quot;</span>; <span class="hljs-comment">// åŠ å¯†ç› é˜²æ­¢MD5ç ´è§£</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Result <span class="hljs-title">login</span><span class="hljs-params">(LoginParam loginParam)</span> </span>&#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * 1.æ£€æŸ¥å‚æ•°æ˜¯å¦åˆæ³•</span><br><span class="hljs-comment">         * 2.æ ¹æ®ç”µè¯å’Œopenidå»ç”¨æˆ·è¡¨ä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-comment">         * 3.å¦‚æœä¸å­˜åœ¨ï¼Œç™»å½•å¤±è´¥</span><br><span class="hljs-comment">         * 4.å¦‚æœå­˜åœ¨ï¼Œä½¿ç”¨jwtç”Ÿæˆtokenè¿”å›å‰ç«¯</span><br><span class="hljs-comment">         * 5.tokenæ”¾å…¥rediså½“ä¸­ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´</span><br><span class="hljs-comment">         * ï¼ˆç™»å½•è®¤è¯çš„æ—¶å€™ï¼Œ å…ˆè®¤è¯tokenæ˜¯å¦åˆæ³•ï¼Œå†å»redisè®¤è¯æ˜¯å¦å­˜åœ¨ï¼‰</span><br><span class="hljs-comment">         */</span><br>        String phone = loginParam.getPhone();<br>        String openid = loginParam.getOpenid();<br>        <span class="hljs-keyword">if</span>(StringUtils.isBlank(phone) || StringUtils.isBlank(openid)) &#123;<br>            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-number">10001</span>, <span class="hljs-string">&quot;å‚æ•°ä¸åˆæ³•&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">// æ•°æ®åº“é‡Œå­˜çš„æ˜¯åŠ å¯†åçš„openidï¼Œæ‰€ä»¥ä¹Ÿè¦ç”¨åŠ å¯†çš„openidæ¥æ‰¾</span><br>        openid = DigestUtils.md5Hex(openid + salt);<br>        TUser user = userService.findUser(phone, openid);<br>        <span class="hljs-keyword">if</span>(user == <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-number">10002</span>, <span class="hljs-string">&quot;æ‰‹æœºå·æˆ–openidä¸å­˜åœ¨&quot;</span>);<br>        &#125;<br>        String token = JWTUtils.creatToken(user.getId());<br>        <span class="hljs-comment">// å­˜åˆ°redisï¼Œè¿‡æœŸæ—¶é—´ä¸€å¤©</span><br>        redisTemplate.opsForValue().set(<span class="hljs-string">&quot;TOKEN_&quot;</span> + token, JSON.toJSONString(user), <span class="hljs-number">1</span>, TimeUnit.DAYS);<br>        <span class="hljs-keyword">return</span> Result.success(token);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œæ˜¯ç™»å½•ä¹‹åè·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯</p><p> UserController</p><p>tokenå­˜åœ¨è¯·æ±‚å¤´é‡Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å‡­å€Ÿtokenå–å¾—ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-meta">@RequestMapping(&quot;getInfo&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Result <span class="hljs-title">getInfo</span><span class="hljs-params">(<span class="hljs-meta">@RequestHeader</span> String token)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> userService.findUserByToken(token);<br>&#125;<br></code></pre></td></tr></table></figure><p>UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¯·æ±‚ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment"> * è¯·æ±‚å‰è¿›è¡Œtokenåˆæ³•æ€§æ ¡éªŒ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Result <span class="hljs-title">findUserByToken</span><span class="hljs-params">(String token)</span> </span>&#123;<br>    TUser user = loginService.checkToken(token);<br>    <span class="hljs-keyword">return</span> Result.success(user);<br>&#125;<br></code></pre></td></tr></table></figure><p>LoginService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> TUser <span class="hljs-title">checkToken</span><span class="hljs-params">(String token)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span>(StringUtils.isBlank(token)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>    Map&lt;String, Object&gt; map = JWTUtils.checkToken(token);<br>    <span class="hljs-comment">// è§£æå¤±è´¥</span><br>    <span class="hljs-keyword">if</span>(map == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>    <span class="hljs-comment">// è§£ææˆåŠŸ</span><br>    String userJson = redisTemplate.opsForValue().get(<span class="hljs-string">&quot;TOKEN_&quot;</span> + token);<br>    <span class="hljs-keyword">if</span>(StringUtils.isBlank(userJson)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>    TUser user = JSON.parseObject(userJson, TUser.class);<br>    <span class="hljs-keyword">return</span> user;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æˆ‘å‘ç°è¿™ç©æ„å„¿ç¬”è®°è®°çš„è¿˜æ˜¯å¤ªè¯¦ç»†äº†â€¦â€¦å¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨</strong></p><p><strong>åªè®°çŸ¥è¯†ç‚¹å§</strong></p><p>å¯ä»¥å»ºç«‹æšä¸¾æ–¹ä¾¿æŠ¥é”™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.vo;<br><br><span class="hljs-keyword">import</span> lombok.AllArgsConstructor;<br><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">ErrorCode</span> </span>&#123;<br><br>    PARAMS_ERROR(<span class="hljs-number">10001</span>,<span class="hljs-string">&quot;å‚æ•°æœ‰è¯¯&quot;</span>),<br>    ACCOUNT_PWD_NOT_EXIST(<span class="hljs-number">10002</span>,<span class="hljs-string">&quot;ç”µè¯æˆ–openidä¸å­˜åœ¨&quot;</span>),<br>    NO_PERMISSION(<span class="hljs-number">70001</span>,<span class="hljs-string">&quot;æ— è®¿é—®æƒé™&quot;</span>),<br>    SESSION_TIME_OUT(<span class="hljs-number">90001</span>,<span class="hljs-string">&quot;ä¼šè¯è¶…æ—¶&quot;</span>),<br>    NO_LOGIN(<span class="hljs-number">90002</span>,<span class="hljs-string">&quot;æœªç™»å½•&quot;</span>),;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> code;<br>    <span class="hljs-keyword">private</span> String msg;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getCode</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> code;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getMsg</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> msg;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸ªmybatisplusçš„ç”Ÿæˆidçš„<strong>é›ªèŠ±ç®—æ³•</strong>ï¼Œä¹‹åè®°å¾—ç ”ç©¶ä¸€ä¸‹</p><p>åœ¨RegisterServiceå‰åŠ ä¸Š@Transactionalå£°æ˜<strong>äº‹åŠ¡æ§åˆ¶</strong>ï¼Œè¿™æ ·ä¸€æ¥å¦‚æœæ³¨å†Œé€”ä¸­å‡ºé”™äº†å¯ä»¥å›æ»šè€Œä¸æ˜¯æ·»åŠ äº†ç”¨æˆ·</p><p><strong>ç™»å½•æ‹¦æˆªå™¨</strong>ï¼šå¦‚æœé‡åˆ°éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®çš„æ¥å£ï¼Œæœªç™»å½•çš„æƒ…å†µä¸‹ç›´æ¥è¿”å›ï¼Œå¹¶è·³è½¬ç™»å½•é¡µé¢</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.handler;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.toolkit.StringUtils;<br><span class="hljs-keyword">import</span> com.ices.waimai.dao.domain.TUser;<br><span class="hljs-keyword">import</span> com.ices.waimai.service.LoginService;<br><span class="hljs-keyword">import</span> com.ices.waimai.utils.UserThreadLocal;<br><span class="hljs-keyword">import</span> com.ices.waimai.vo.ErrorCode;<br><span class="hljs-keyword">import</span> com.ices.waimai.vo.Result;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> org.springframework.web.method.HandlerMethod;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HandlerInterceptor</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> LoginService loginService;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åœ¨æ‰§è¡Œcontrolleræ–¹æ³•ä¹‹å‰æ‰§è¡Œ</span><br><span class="hljs-comment">     * 1.åˆ¤æ–­è¯·æ±‚çš„æ¥å£è·¯å¾„æ˜¯å¦æ˜¯è¦æ‹¦æˆªçš„HandlerMethodï¼ˆå› ä¸ºæœ‰å¯èƒ½æ˜¯æ¯”å¦‚è®¿é—®é™æ€èµ„æºçš„controllerï¼‰</span><br><span class="hljs-comment">     * 2.åˆ¤æ–­tokenæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œè¯´æ˜æœªç™»å½•</span><br><span class="hljs-comment">     * 3.å¦‚æœtokenä¸ä¸ºç©ºï¼ŒéªŒè¯ç™»å½•æ˜¯å¦åˆæ³•ï¼šloginService.checkToken</span><br><span class="hljs-comment">     * 4.å¦‚æœè®¤è¯æˆåŠŸï¼Œæ”¾è¡Œ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-keyword">if</span>(!(handler <span class="hljs-keyword">instanceof</span> HandlerMethod)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>; <span class="hljs-comment">// ä¸æ˜¯è¦æ‹¦æˆªçš„controllerï¼Œæ”¾è¡Œ</span><br>        &#125;<br>        String token = request.getHeader(<span class="hljs-string">&quot;Authorization&quot;</span>); <span class="hljs-comment">// è·å–è¯·æ±‚å¤´é‡Œçš„token</span><br><br>        <span class="hljs-comment">// æ£€éªŒtokenæ˜¯å¦ä¸ºç©º</span><br>        <span class="hljs-keyword">if</span>(StringUtils.isBlank(token))&#123;<br>            Result result = Result.fail(ErrorCode.NOT_LOGIN.getCode(), <span class="hljs-string">&quot;æœªç™»å½•&quot;</span>);<br>            response.setContentType(<span class="hljs-string">&quot;application/json;charset=utf-8&quot;</span>); <span class="hljs-comment">// è¿”å›json</span><br>            response.getWriter().print(JSON.toJSONString(result)); <span class="hljs-comment">// resultè½¬ä¸ºjson</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// æ£€éªŒç™»å½•æ˜¯å¦åˆæ³•</span><br>        TUser user = loginService.checkToken(token);<br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-keyword">null</span>) &#123;<br>            Result result = Result.fail(ErrorCode.NOT_LOGIN.getCode(), <span class="hljs-string">&quot;æœªç™»å½•&quot;</span>);<br>            response.setContentType(<span class="hljs-string">&quot;application/json;charset=utf-8&quot;</span>);<br>            response.getWriter().print(JSON.toJSONString(result));<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// ç™»å½•éªŒè¯æˆåŠŸï¼Œæ”¾è¡Œ</span><br>        <span class="hljs-comment">// å­˜åœ¨ThreadLocalä¸­ï¼Œä»¥ä¾¿åœ¨controllerä¸­èƒ½ç›´æ¥è·å–ç”¨æˆ·çš„ä¿¡æ¯</span><br>        UserThreadLocal.put(user);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterCompletion</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-comment">// ç”¨å®Œåˆ é™¤ï¼Œé¿å…å†…å­˜æ³„æ¼</span><br>        UserThreadLocal.remove();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.config;<br><br><span class="hljs-keyword">import</span> com.ices.waimai.handler.LoginInterceptor;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebMVCConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">WebMvcConfigurer</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> LoginInterceptor loginInterceptor;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addCorsMappings</span><span class="hljs-params">(CorsRegistry registry)</span> </span>&#123;<br>        <span class="hljs-comment">// è·¨åŸŸé…ç½®</span><br>        <span class="hljs-comment">// å‰ç«¯8080è®¿é—®åç«¯8888ç›¸å½“äºä¸¤ä¸ªåŸŸåä¹‹é—´çš„è®¿é—®ï¼Œæ˜¯ä¸åŒæœåŠ¡å™¨ï¼Œè¦å…è®¸8080è®¿é—®æˆ‘ä»¬çš„8888çš„api</span><br>        <span class="hljs-comment">// å¤ä¹ ï¼šåŸŸå = IPåœ°å€ + ç«¯å£</span><br>        registry.addMapping(<span class="hljs-string">&quot;/**&quot;</span>).allowedOrigins(<span class="hljs-string">&quot;http://localhost:8080&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> </span>&#123;<br>        <span class="hljs-comment">//è¿™é‡Œå‡è®¾æ‹¦æˆªtestï¼Œåç»­å®é™…é‡åˆ°æ‹¦æˆªçš„æ¥å£æ—¶è¦é…ç½®çœŸæ­£çš„æ‹¦æˆªæ¥å£</span><br>        registry.addInterceptor(loginInterceptor)<br>                .addPathPatterns(<span class="hljs-string">&quot;/test&quot;</span>);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>æ‹·è´å±æ€§</strong>ï¼šæ¯”å¦‚è¯´ï¼Œå®ä½“ç±»å’Œcontrolleré‡ŒåŒ…è£…çš„å‚æ•°ç±»ï¼Œå¯èƒ½å…³é”®å±æ€§æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ä½“ç±»æ¯”å‚æ•°ç±»ï¼ˆvoï¼‰å¤šäº†ä¸€äº›ä¸œè¥¿ï¼Œä¸èƒ½ç›´æ¥å¼ºè¡Œèµ‹å€¼ï¼Œè¿™æ—¶å€™éœ€è¦æ‹·è´å®ƒä»¬ç›¸åŒçš„å±æ€§ï¼Œæœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œè¿™é‡Œä½¿ç”¨springçš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Result <span class="hljs-title">addShop</span><span class="hljs-params">(ShopParam shopParam)</span> </span>&#123;<br>    TShop newShop = <span class="hljs-keyword">new</span> TShop();<br>    BeanUtils.copyProperties(shopParam, newShop);<br>    newShop.setTotSales(<span class="hljs-number">0</span>);<br>    shopMapper.insert(newShop);<br>    <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">&quot;æ·»åŠ åº—é“º&quot;</span> + newShop.getId());<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ThreadLocal</strong></p><p>ç±»ä¼¼äºå¾®ä¿¡çš„setStorage?</p><p>LoginInterceptor.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HandlerInterceptor</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> LoginService loginService;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br><br>        ...<span class="hljs-comment">// ä¸æ˜¯è¦æ‹¦æˆªçš„controllerï¼Œæ”¾è¡Œ</span><br>        <br>        ...<span class="hljs-comment">// è·å–è¯·æ±‚å¤´é‡Œçš„token</span><br><br>        <span class="hljs-comment">// æ£€éªŒtokenæ˜¯å¦ä¸ºç©º</span><br>        ...<br><br>        <span class="hljs-comment">// æ£€éªŒç™»å½•æ˜¯å¦åˆæ³•</span><br>...<br><br>        <span class="hljs-comment">// ç™»å½•éªŒè¯æˆåŠŸï¼Œæ”¾è¡Œ</span><br>        <span class="hljs-comment">// å­˜åœ¨ThreadLocalä¸­ï¼Œä»¥ä¾¿åœ¨controllerä¸­èƒ½ç›´æ¥è·å–ç”¨æˆ·çš„ä¿¡æ¯</span><br>        UserThreadLocal.put(user);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterCompletion</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-comment">// ç”¨å®Œåˆ é™¤ï¼Œé¿å…å†…å­˜æ³„æ¼</span><br>        UserThreadLocal.remove();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.utils;<br><br><span class="hljs-keyword">import</span> com.ices.waimai.dao.domain.TUser;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserThreadLocal</span> </span>&#123;<br>    <span class="hljs-comment">// çº¿ç¨‹å˜é‡éš”ç¦»</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;TUser&gt; LOCAL = <span class="hljs-keyword">new</span> ThreadLocal&lt;&gt;();<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">put</span><span class="hljs-params">(TUser user)</span> </span>&#123;<br>        LOCAL.set(user);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> TUser <span class="hljs-title">get</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> LOCAL.get();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span> </span>&#123;<br>        LOCAL.remove();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œåœ¨éœ€è¦ç”¨åˆ°å½“å‰ç™»å½•çš„ç”¨æˆ·çš„åœ°æ–¹ï¼ŒUserThreadLocal.get()å°±èƒ½è·å–å½“å‰ç”¨æˆ·çš„å®ä¾‹äº†</p><p><strong>çº¿ç¨‹æ± </strong></p><p>MySQLåœ¨æ›´æ–°æ•°æ®ï¼ˆemmï¼Œæ¯”å¦‚ï¼Œæ›´æ–°é”€é‡ï¼Ÿï¼‰çš„æ—¶å€™ä¼šåŠ <strong>å†™é”</strong>ï¼Œå¦‚æœè¿™æ—¶å€™æœ‰å…¶ä»–çš„è¯»æ“ä½œï¼Œæ€§èƒ½ä¼šé™ä½</p><p>å†™é”æ˜¯æ²¡æ³•é¿å…çš„ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ›´æ–°æ“ä½œåšæ–‡ç«  â€”â€” ä¸€æ—¦æ›´æ–°å‡ºé—®é¢˜ï¼Œä¸èƒ½è®©ä»–å½±å“å…¶ä»–æ“ä½œ</p><p><strong>æŠŠæ›´æ–°æ“ä½œæ‰”åˆ°çº¿ç¨‹æ± ä¸­å»æ‰§è¡Œï¼Œå’Œä¸»çº¿ç¨‹å°±ä¸ç›¸å…³äº†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.config;<br><br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.EnableAsync;<br><span class="hljs-keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.Executor;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableAsync</span> <span class="hljs-comment">//å¼€å¯å¤šçº¿ç¨‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThreadPoolConfig</span> </span>&#123;<br><br>    <span class="hljs-meta">@Bean(&quot;taskExecutor&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Executor <span class="hljs-title">asyncServiceExecutor</span><span class="hljs-params">()</span> </span>&#123;<br>        ThreadPoolTaskExecutor executor = <span class="hljs-keyword">new</span> ThreadPoolTaskExecutor();<br>        <span class="hljs-comment">// è®¾ç½®æ ¸å¿ƒçº¿ç¨‹æ•°</span><br>        executor.setCorePoolSize(<span class="hljs-number">5</span>);<br>        <span class="hljs-comment">// è®¾ç½®æœ€å¤§çº¿ç¨‹æ•°</span><br>        executor.setMaxPoolSize(<span class="hljs-number">20</span>);<br>        <span class="hljs-comment">//é…ç½®é˜Ÿåˆ—å¤§å°</span><br>        executor.setQueueCapacity(Integer.MAX_VALUE);<br>        <span class="hljs-comment">// è®¾ç½®çº¿ç¨‹æ´»è·ƒæ—¶é—´ï¼ˆç§’ï¼‰</span><br>        executor.setKeepAliveSeconds(<span class="hljs-number">60</span>);<br>        <span class="hljs-comment">// è®¾ç½®é»˜è®¤çº¿ç¨‹åç§°</span><br>        executor.setThreadNamePrefix(<span class="hljs-string">&quot;ICESWaimai&quot;</span>);<br>        <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ç»“æŸåå†å…³é—­çº¿ç¨‹æ± </span><br>        executor.setWaitForTasksToCompleteOnShutdown(<span class="hljs-keyword">true</span>);<br>        <span class="hljs-comment">//æ‰§è¡Œåˆå§‹åŒ–</span><br>        executor.initialize();<br>        <span class="hljs-keyword">return</span> executor;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹åº”çš„serviceï¼ˆæ³¨æ„ï¼šMyBatisPlusçš„updateï¼Œä¼ å…¥çš„æ–°å®ä½“ç±»è®¾å®šäº†ä»€ä¹ˆå€¼æ‰ä¼šå»æ›´æ–°ä»€ä¹ˆå€¼ï¼Œå¯¹äºæ²¡è®¾ç½®å€¼çš„å±æ€§ï¼Œä¸ä¼šå»åŠ¨ï¼‰</p><p>ä¹è§‚é”ï¼Œè§<a href="https://blog.csdn.net/qq_37113604/article/details/81582784">https://blog.csdn.net/qq_37113604/article/details/81582784</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.service.impl;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.update.LambdaUpdateWrapper;<br><span class="hljs-keyword">import</span> com.ices.waimai.dao.domain.TDish;<br><span class="hljs-keyword">import</span> com.ices.waimai.dao.domain.TShop;<br><span class="hljs-keyword">import</span> com.ices.waimai.dao.mapper.DishMapper;<br><span class="hljs-keyword">import</span> com.ices.waimai.dao.mapper.ShopMapper;<br><span class="hljs-keyword">import</span> com.ices.waimai.service.ThreadService;<br><span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Async;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThreadServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ThreadService</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°åº—é“ºæœˆæ€»é”€é‡</span><br><span class="hljs-comment">     * æ­¤æ“ä½œåœ¨çº¿ç¨‹æ± æ‰§è¡Œï¼Œä¸ä¼šå½±å“åŸæœ‰çš„ä¸»çº¿ç¨‹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-meta">@Async(&quot;taskExecutor&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateTotSales</span><span class="hljs-params">(ShopMapper shopMapper, TShop shop)</span> </span>&#123;<br><br>        <span class="hljs-keyword">int</span> totSales = shop.getTotSales();<br>        TShop shopUpdated = <span class="hljs-keyword">new</span> TShop();<br>        shopUpdated.setTotSales(totSales + <span class="hljs-number">1</span>);<br><br>        LambdaUpdateWrapper&lt;TShop&gt; updateWrapper = <span class="hljs-keyword">new</span> LambdaUpdateWrapper&lt;&gt;();<br>        updateWrapper.eq(TShop::getId, shop.getId());<br>        <span class="hljs-comment">//ä¹è§‚é”ï¼›è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶æ˜¯ç¡®ä¿å¤šçº¿ç¨‹ä¸‹çš„çº¿ç¨‹å®‰å…¨ï¼Œæ”¹ä¹‹å‰å†æ¬¡ç¡®è®¤è¿™ä¸ªå€¼æ²¡è¢«å…¶ä»–çº¿ç¨‹æŠ¢å…ˆä¿®æ”¹</span><br>        updateWrapper.eq(TShop::getTotSales, totSales);<br><br>        <span class="hljs-comment">// UPDATE t_shop SET tot_sales=100 WHERE tot_sales=99 AND id=16</span><br>        shopMapper.update(shopUpdated, updateWrapper);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°èœå“æœˆé”€é‡</span><br><span class="hljs-comment">     * æ­¤æ“ä½œåœ¨çº¿ç¨‹æ± æ‰§è¡Œï¼Œä¸ä¼šå½±å“åŸæœ‰çš„ä¸»çº¿ç¨‹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateMonthlySales</span><span class="hljs-params">(DishMapper dishMapper, TDish dish)</span> </span>&#123;<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œç”Ÿæˆçš„å®ä½“ç±»ï¼Œintè½¬æˆäº†Integeræ‰€ä»¥æ²¡é—®é¢˜ã€‚å¦‚æœæ˜¯åŸºæœ¬ç±»å‹intçš„è¯ï¼Œä¼šæœ‰é»˜è®¤å€¼0ï¼ŒMyBatisPlusä¼šè®¤ä¸º0ä¹Ÿæ˜¯ä¸€ä¸ªsetäº†çš„å€¼ï¼Œä»è€Œè¦†ç›–åŸæœ¬çš„å€¼â€”â€” <strong>ä¸€å®šè¦åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨å°è£…ç±»å‹ï¼Œä»è€Œåœ¨æœªè®¾å®šå€¼çš„æ—¶å€™å€¼ä¸ºnull</strong></p><p><strong>AOPæ—¥å¿—</strong> </p><p>æ¯•ç«Ÿæ—¥å¿—ä»£ç åµŒå…¥åœ¨é¡¹ç›®ä»£ç é‡Œä¸æ˜¯å¾ˆåˆé€‚</p><p>åˆ«å¿˜äº†å¯¼å…¥åæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.aspectj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectjweaver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.common.aop;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.*;<br><br><span class="hljs-comment">// TYPEä»£è¡¨å¯ä»¥æ”¾åœ¨ç±»ä¸Šï¼ŒMETHODä»£è¡¨å¯ä»¥æ”¾åœ¨æ–¹æ³•ä¸Š</span><br><span class="hljs-meta">@Target(&#123;ElementType.METHOD&#125;)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> LogAnnotation &#123;<br><br>    <span class="hljs-function">String <span class="hljs-title">module</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;&quot;</span>;<br><br>    <span class="hljs-function">String <span class="hljs-title">operation</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;&quot;</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.common.aop;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> com.ices.waimai.utils.HttpContextUtils;<br><span class="hljs-keyword">import</span> com.ices.waimai.utils.IpUtils;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;<br><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Around;<br><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Aspect;<br><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Pointcut;<br><span class="hljs-keyword">import</span> org.aspectj.lang.reflect.MethodSignature;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Aspect</span> <span class="hljs-comment">// å£°æ˜è¿™æ˜¯ä¸€ä¸ªå®šä¹‰äº†é€šçŸ¥ï¼ˆadviceï¼‰å’Œåˆ‡ç‚¹çš„å…³ç³»çš„åˆ‡é¢ç±»</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogAspect</span> </span>&#123;<br><br>    <span class="hljs-meta">@Pointcut(&quot;@annotation(com.ices.waimai.common.aop.LogAnnotation)&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pt</span><span class="hljs-params">()</span></span>&#123;&#125;<br><br>    <span class="hljs-comment">//ç¯ç»•é€šçŸ¥</span><br>    <span class="hljs-meta">@Around(&quot;pt()&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">log</span><span class="hljs-params">(ProceedingJoinPoint point)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br><br>        <span class="hljs-keyword">long</span> beginTime = System.currentTimeMillis();<br>        <span class="hljs-comment">//æ‰§è¡Œæ–¹æ³•</span><br>        Object result = point.proceed();<br>        <span class="hljs-comment">//æ‰§è¡Œæ—¶é•¿(æ¯«ç§’)</span><br>        <span class="hljs-keyword">long</span> time = System.currentTimeMillis() - beginTime;<br>        <span class="hljs-comment">//ä¿å­˜æ—¥å¿—</span><br>        recordLog(point, time);<br>        <span class="hljs-keyword">return</span> result;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">recordLog</span><span class="hljs-params">(ProceedingJoinPoint joinPoint, <span class="hljs-keyword">long</span> time)</span> </span>&#123;<br>        MethodSignature signature = (MethodSignature) joinPoint.getSignature();<br>        Method method = signature.getMethod();<br>        LogAnnotation logAnnotation = method.getAnnotation(LogAnnotation.class);<br>        log.info(<span class="hljs-string">&quot;=====================log start================================&quot;</span>);<br>        log.info(<span class="hljs-string">&quot;module:&#123;&#125;&quot;</span>,logAnnotation.<span class="hljs-keyword">module</span>());<br>        log.info(<span class="hljs-string">&quot;operation:&#123;&#125;&quot;</span>,logAnnotation.operation());<br><br>        <span class="hljs-comment">//è¯·æ±‚çš„æ–¹æ³•å</span><br>        String className = joinPoint.getTarget().getClass().getName();<br>        String methodName = signature.getName();<br>        log.info(<span class="hljs-string">&quot;request method:&#123;&#125;&quot;</span>,className + <span class="hljs-string">&quot;.&quot;</span> + methodName + <span class="hljs-string">&quot;()&quot;</span>);<br><br>        <span class="hljs-comment">//è¯·æ±‚çš„å‚æ•°</span><br>        Object[] args = joinPoint.getArgs();<br>        String params = JSON.toJSONString(args[<span class="hljs-number">0</span>]);<br>        log.info(<span class="hljs-string">&quot;params:&#123;&#125;&quot;</span>,params);<br><br>        <span class="hljs-comment">//è·å–request è®¾ç½®IPåœ°å€</span><br>        HttpServletRequest request = HttpContextUtils.getHttpServletRequest();<br>        log.info(<span class="hljs-string">&quot;ip:&#123;&#125;&quot;</span>, IpUtils.getIpAddr(request));<br><br>        log.info(<span class="hljs-string">&quot;excute time : &#123;&#125; ms&quot;</span>,time);<br>        log.info(<span class="hljs-string">&quot;=====================log end==================================&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åå‘ç°ï¼Œä¼šæŠ¥æ•°ç»„è¶Šç•Œé”™è¯¯ï¼ŒåŸæ¥æ˜¯å› ä¸ºargså¯èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥æ”¹æˆè¿™æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">String params = args.length == <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;Empty&quot;</span> : JSON.toJSONString(args[<span class="hljs-number">0</span>]);<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨éœ€è¦è¾“å‡ºæ—¥å¿—çš„æ–¹æ³•ä¹‹ä¸Šï¼ŒåŠ å…¥æ³¨è§£å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation(&quot;è·å–åº—é“ºåˆ—è¡¨&quot;)</span><br><span class="hljs-meta">@GetMapping(&quot;all&quot;)</span><br><span class="hljs-meta">@LogAnnotation(module = &quot;åº—é“º&quot;, operator = &quot;è·å–åº—é“ºåˆ—è¡¨&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Result <span class="hljs-title">getAllShops</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">return</span> shopService.getAllShops();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»Ÿä¸€ç¼“å­˜å¤„ç†ï¼ˆä¼˜åŒ–ï¼‰</strong></p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå†…å­˜çš„è®¿é—®é€Ÿåº¦è¿œè¿œå¤§äºç¡¬ç›˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.common.cache;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.*;<br><br><span class="hljs-meta">@Target(&#123;ElementType.METHOD&#125;)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Cache &#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">expire</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> 1 * 60 * 1000</span>; <span class="hljs-comment">// è¿‡æœŸæ—¶é—´</span><br><br>    <span class="hljs-function">String <span class="hljs-title">name</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;&quot;</span>; <span class="hljs-comment">// ç¼“å­˜æ ‡è¯†</span><br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.common.cache;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> com.ices.waimai.vo.Result;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.apache.commons.codec.digest.DigestUtils;<br><span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;<br><span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;<br><span class="hljs-keyword">import</span> org.aspectj.lang.Signature;<br><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Around;<br><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Aspect;<br><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Pointcut;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.time.Duration;<br><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CacheAspect</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;<br><br>    <span class="hljs-meta">@Pointcut(&quot;@annotation(com.ices.waimai.common.cache.Cache)&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pt</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Around(&quot;pt()&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">around</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Signature signature = pjp.getSignature();<br>            <span class="hljs-comment">//ç±»å</span><br>            String className = pjp.getTarget().getClass().getSimpleName();<br>            <span class="hljs-comment">//è°ƒç”¨çš„æ–¹æ³•å</span><br>            String methodName = signature.getName();<br><br><br>            Class[] parameterTypes = <span class="hljs-keyword">new</span> Class[pjp.getArgs().length];<br>            Object[] args = pjp.getArgs();<br>            <span class="hljs-comment">//å‚æ•°</span><br>            String params = <span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; args.length; i++) &#123;<br>                <span class="hljs-keyword">if</span> (args[i] != <span class="hljs-keyword">null</span>) &#123;<br>                    params += JSON.toJSONString(args[i]);<br>                    parameterTypes[i] = args[i].getClass();<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    parameterTypes[i] = <span class="hljs-keyword">null</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (StringUtils.isNotEmpty(params)) &#123;<br>                <span class="hljs-comment">//åŠ å¯† ä»¥é˜²å‡ºç°keyè¿‡é•¿ä»¥åŠå­—ç¬¦è½¬ä¹‰è·å–ä¸åˆ°çš„æƒ…å†µ</span><br>                params = DigestUtils.md5Hex(params);<br>            &#125;<br>            Method method = pjp.getSignature().getDeclaringType().getMethod(methodName, parameterTypes);<br>            <span class="hljs-comment">//è·å–Cacheæ³¨è§£</span><br>            Cache annotation = method.getAnnotation(Cache.class);<br>            <span class="hljs-comment">//ç¼“å­˜è¿‡æœŸæ—¶é—´</span><br>            <span class="hljs-keyword">long</span> expire = annotation.expire();<br>            <span class="hljs-comment">//ç¼“å­˜åç§°</span><br>            String name = annotation.name();<br>            <span class="hljs-comment">//å…ˆä»redisè·å–</span><br>            String redisKey = name + <span class="hljs-string">&quot;::&quot;</span> + className + <span class="hljs-string">&quot;::&quot;</span> + methodName + <span class="hljs-string">&quot;::&quot;</span> + params;<br>            String redisValue = redisTemplate.opsForValue().get(redisKey);<br>            <span class="hljs-keyword">if</span> (StringUtils.isNotEmpty(redisValue)) &#123;<br>                log.info(<span class="hljs-string">&quot;æ–¹æ³•èµ°äº†ç¼“å­˜, &#123;&#125;, &#123;&#125;&quot;</span>, className, methodName);<br>                <span class="hljs-keyword">return</span> JSON.parseObject(redisValue, Result.class);<br>            &#125;<br>            Object proceed = pjp.proceed();<br>            redisTemplate.opsForValue().set(redisKey, JSON.toJSONString(proceed), Duration.ofMillis(expire));<br>            log.info(<span class="hljs-string">&quot;æ–¹æ³•å­˜å…¥ç¼“å­˜, &#123;&#125;, &#123;&#125;&quot;</span>, className, methodName);<br>            <span class="hljs-keyword">return</span> proceed;<br>        &#125; <span class="hljs-keyword">catch</span> (Throwable throwable) &#123;<br>            throwable.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> Result.fail(-<span class="hljs-number">999</span>, <span class="hljs-string">&quot;ç³»ç»Ÿé”™è¯¯&quot;</span>);<br>    &#125;<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation(&quot;è·å–åº—é“ºåˆ—è¡¨&quot;)</span><br><span class="hljs-meta">@GetMapping(&quot;all&quot;)</span><br><span class="hljs-meta">@LogAnnotation(module = &quot;åº—é“º&quot;, operation = &quot;è·å–åº—é“ºåˆ—è¡¨&quot;)</span><br><span class="hljs-meta">@Cache(expire = 5 * 60 * 1000, name = &quot;all_shop&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Result <span class="hljs-title">getAllShops</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">return</span> shopService.getAllShops();<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤šåˆ·æ–°å‡ æ¬¡ï¼Œè¯•ä¸€è¯•ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡ä¹‹å¤–ï¼Œå…¶ä»–æ—¶å€™ç¡®å®å¿«~</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.3joewwmrk8s0.png" alt="image"></p><h1 id="å•å¼€ä¸€ä¸ªåœ°æ–¹è®°ä¸€äº›å‘"><a href="#å•å¼€ä¸€ä¸ªåœ°æ–¹è®°ä¸€äº›å‘" class="headerlink" title="å•å¼€ä¸€ä¸ªåœ°æ–¹è®°ä¸€äº›å‘"></a>å•å¼€ä¸€ä¸ªåœ°æ–¹è®°ä¸€äº›å‘</h1><p>MyBatisXç”Ÿæˆæ¨¡æ¿æ—¶ï¼Œé»˜è®¤æŠŠTimeå¯¹åº”æˆjava.utilsçš„Dateï¼Œä½†æ˜¯å…¶å®åº”è¯¥æ˜¯java.sqlçš„Timeï¼Œä¸ç„¶ä¼šæ— æ³•è½¬æ¢è€ŒæŠ¥é”™ï¼ˆå¾ˆé‡è¦å“¦ï¼åˆ«å¿˜äº†è®¾è®¡å®Œshopè¡¨åé‡æ–°ç”Ÿæˆæ—¶æ”¹å›Timeï¼‰</p><h1 id="å†å•å¼€ä¸€ä¸ªåœ°æ–¹è®°å·¥å…·ç±»å§"><a href="#å†å•å¼€ä¸€ä¸ªåœ°æ–¹è®°å·¥å…·ç±»å§" class="headerlink" title="å†å•å¼€ä¸€ä¸ªåœ°æ–¹è®°å·¥å…·ç±»å§"></a>å†å•å¼€ä¸€ä¸ªåœ°æ–¹è®°å·¥å…·ç±»å§</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.utils;<br><br><span class="hljs-keyword">import</span> org.springframework.web.context.request.RequestContextHolder;<br><span class="hljs-keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpContextUtils</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> HttpServletRequest <span class="hljs-title">getHttpServletRequest</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ices.waimai.utils;<br><br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><br><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IpUtils</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–IPåœ°å€</span><br><span class="hljs-comment">     * ä½¿ç”¨Nginxç­‰åå‘ä»£ç†è½¯ä»¶ï¼Œ åˆ™ä¸èƒ½é€šè¿‡request.getRemoteAddr()è·å–IPåœ°å€</span><br><span class="hljs-comment">     * å¦‚æœä½¿ç”¨äº†å¤šçº§åå‘ä»£ç†çš„è¯ï¼ŒX-Forwarded-Forçš„å€¼å¹¶ä¸æ­¢ä¸€ä¸ªï¼Œè€Œæ˜¯ä¸€ä¸²IPåœ°å€ï¼ŒX-Forwarded-Forä¸­ç¬¬ä¸€ä¸ªéunknownçš„æœ‰æ•ˆIPå­—ç¬¦ä¸²ï¼Œåˆ™ä¸ºçœŸå®IPåœ°å€</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getIpAddr</span><span class="hljs-params">(HttpServletRequest request)</span> </span>&#123;<br>        String ip = <span class="hljs-keyword">null</span>, unknown = <span class="hljs-string">&quot;unknown&quot;</span>, separator = <span class="hljs-string">&quot;,&quot;</span>;<br>        <span class="hljs-keyword">int</span> maxLength = <span class="hljs-number">15</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            ip = request.getHeader(<span class="hljs-string">&quot;x-forwarded-for&quot;</span>);<br>            <span class="hljs-keyword">if</span> (StringUtils.isEmpty(ip) || unknown.equalsIgnoreCase(ip)) &#123;<br>                ip = request.getHeader(<span class="hljs-string">&quot;Proxy-Client-IP&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (StringUtils.isEmpty(ip) || ip.length() == <span class="hljs-number">0</span> || unknown.equalsIgnoreCase(ip)) &#123;<br>                ip = request.getHeader(<span class="hljs-string">&quot;WL-Proxy-Client-IP&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (StringUtils.isEmpty(ip) || unknown.equalsIgnoreCase(ip)) &#123;<br>                ip = request.getHeader(<span class="hljs-string">&quot;HTTP_CLIENT_IP&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (StringUtils.isEmpty(ip) || unknown.equalsIgnoreCase(ip)) &#123;<br>                ip = request.getHeader(<span class="hljs-string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (StringUtils.isEmpty(ip) || unknown.equalsIgnoreCase(ip)) &#123;<br>                ip = request.getRemoteAddr();<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            log.error(<span class="hljs-string">&quot;IpUtils ERROR &quot;</span>, e);<br>        &#125;<br><br>        <span class="hljs-comment">// ä½¿ç”¨ä»£ç†ï¼Œåˆ™è·å–ç¬¬ä¸€ä¸ªIPåœ°å€</span><br>        <span class="hljs-keyword">if</span> (StringUtils.isEmpty(ip) &amp;&amp; ip.length() &gt; maxLength) &#123;<br>            <span class="hljs-keyword">int</span> idx = ip.indexOf(separator);<br>            <span class="hljs-keyword">if</span> (idx &gt; <span class="hljs-number">0</span>) &#123;<br>                ip = ip.substring(<span class="hljs-number">0</span>, idx);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> ip;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getIpAddr</span><span class="hljs-params">()</span> </span>&#123;<br>        HttpServletRequest request = HttpContextUtils.getHttpServletRequest();<br>        <span class="hljs-keyword">return</span> getIpAddr(request);<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootå­¦ä¹ ç¬”è®°1</title>
    <link href="/2021/10/05/SpringBoot%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/"/>
    <url>/2021/10/05/SpringBoot%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ€»ç®—æ˜¯å­¦å®Œäº†SSMï¼ˆå‡è£…å­¦å®Œäº†ï¼ˆé€ƒï¼‰ï¼‰</p><p>ä»€ä¹ˆæ˜¯SpringBootå‘¢ï¼Ÿ</p><p><strong>SpringBootå¹¶ä¸æ˜¯å¯¹SpringåŠŸèƒ½ä¸Šçš„å¢å¼ºï¼Œè€Œæ˜¯æä¾›äº†ä¸€ç§å¿«é€Ÿä½¿ç”¨Springçš„æ–¹å¼</strong></p><p>å¥½çš„ï¼Œå‰è¨€ç»“æŸï¼Œå¼€å§‹å­¦ä¹ </p><p><strong>å†²å†²å†²ï¼ï¼ï¼ï¼ï¼ï¼</strong></p><p>å¦å¤–ï¼Œç”±äºæ„Ÿè§‰æ—¥åè¿˜æ˜¯è‹±è¯­ç”¨çš„å¤šï¼Œæ‰€ä»¥åˆ‡å›è‹±è¯­ç‰ˆIDEAå•¦</p><h1 id="åŸºç¡€å…¥é—¨"><a href="#åŸºç¡€å…¥é—¨" class="headerlink" title="åŸºç¡€å…¥é—¨"></a>åŸºç¡€å…¥é—¨</h1><h2 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>SSMé˜¶æ®µï¼Œæˆ‘ä»¬å¯èƒ½è¿™ä¹ˆå†™ä¸€ä¸ªæµè§ˆå™¨æ‰“å°Helloçš„ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">handle01</span> <span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Spring Boot!&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œç”¨ä¸€ä¸ªSpringBootæ–°çš„æ³¨è§£<code>@RestController</code>å°±å¤Ÿäº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">handle01</span> <span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Spring Boot!&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œmainæ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä¹Ÿä¸ç”¨é…ç½®tomcatï¼Œspringbootå…¨éƒ½å¸®æˆ‘ä»¬åšäº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.boot;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@SpringBootApplication</span> <span class="hljs-comment">// å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªSpringBootåº”ç”¨</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainApplication</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(MainApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è¿™æœŸé—´è¿˜æœ‰ä¸ªå°æ’æ›²â€¦â€¦æˆ‘æŠŠspring-boot-starter-parentå†™é“dependenciesé‡Œå»äº†ï¼Œè¿˜ä»¥ä¸ºæ˜¯mavençš„é—®é¢˜æ£é¼“äº†åŠå¤©â€¦â€¦</p><p>ä¸è¿‡å°±å½“é¡ºä¾¿å†å­¦äº†å­¦mavenäº†å§ï¼Œç°åœ¨æ˜¯ç»ˆäºæ¢æˆäº†è‡ªå·±çš„mavenå’Œé˜¿é‡Œé•œåƒ</p></blockquote><p>ä¸ç”¨æ‰“åŒ…æˆwaråŒ…ï¼Œç›´æ¥è¿è¡Œmainæ–¹æ³•åï¼Œè®¿é—®æœ¬åœ°8080ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.3pnnmx8elt60.png" alt="image"></p><p><strong>æ¯”èµ·SSMçœŸæ˜¯å¤ªç®€å•å•¦ï¼</strong></p><h3 id="ä¿®æ”¹é…ç½®ï¼ˆç®€åŒ–é…ç½®ï¼‰"><a href="#ä¿®æ”¹é…ç½®ï¼ˆç®€åŒ–é…ç½®ï¼‰" class="headerlink" title="ä¿®æ”¹é…ç½®ï¼ˆç®€åŒ–é…ç½®ï¼‰"></a>ä¿®æ”¹é…ç½®ï¼ˆç®€åŒ–é…ç½®ï¼‰</h3><p>åœ¨springbootä¸­ï¼Œå¦‚æœæƒ³ä¿®æ”¹é…ç½®ï¼Œå¯ä»¥åœ¨resourcesçš„application.propertiesä¸­ä¿®æ”¹</p><p>è¯¦è§<strong>å®˜æ–¹æ–‡æ¡£</strong> <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">Spring Boot Reference Documentation</a>ï¼Œå·¦ä¾§æœ‰Application Properties</p><h3 id="æ‰“åŒ…ä¸ºjaråŒ…ï¼ˆç®€åŒ–éƒ¨ç½²ï¼‰"><a href="#æ‰“åŒ…ä¸ºjaråŒ…ï¼ˆç®€åŒ–éƒ¨ç½²ï¼‰" class="headerlink" title="æ‰“åŒ…ä¸ºjaråŒ…ï¼ˆç®€åŒ–éƒ¨ç½²ï¼‰"></a>æ‰“åŒ…ä¸ºjaråŒ…ï¼ˆç®€åŒ–éƒ¨ç½²ï¼‰</h3><p>å¦‚æœä¸åŠ ç‰ˆæœ¬ä¼šæŠ¥é”™ï¼Œç¥ç§˜</p><p>ï¼ˆæ®è¯´å¯¼å…¥ä¹‹åå¯ä»¥å†åˆ æ‰ç‰ˆæœ¬å·ï¼Œæ‡’å¾—è¯•ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.dwb7y55pedc.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.9tw8ug5wc74.png" alt="image"></p><h2 id="è‡ªåŠ¨é…ç½®"><a href="#è‡ªåŠ¨é…ç½®" class="headerlink" title="è‡ªåŠ¨é…ç½®"></a>è‡ªåŠ¨é…ç½®</h2><h3 id="SpringBootçš„ç‰¹ç‚¹"><a href="#SpringBootçš„ç‰¹ç‚¹" class="headerlink" title="SpringBootçš„ç‰¹ç‚¹"></a>SpringBootçš„ç‰¹ç‚¹</h3><h4 id="ä¾èµ–ç®¡ç†"><a href="#ä¾èµ–ç®¡ç†" class="headerlink" title="ä¾èµ–ç®¡ç†"></a>ä¾èµ–ç®¡ç†</h4><p>ä¾é çˆ¶é¡¹ç›®å®ç°ä¾èµ–ç®¡ç†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>ä»–çš„çˆ¶é¡¹ç›®<br><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>å‡ ä¹å£°æ˜äº†æ‰€æœ‰å¼€å‘ä¸­å¸¸ç”¨çš„ä¾èµ–çš„ç‰ˆæœ¬å·,è‡ªåŠ¨ç‰ˆæœ¬ä»²è£æœºåˆ¶<br></code></pre></td></tr></table></figure><p>æ‹¥æœ‰starteråœºæ™¯å¯åŠ¨å™¨</p><ol><li>spring-boot-starter-*ï¼Œ *æ„å‘³ç€æŸç§åœºæ™¯</li><li>åªè¦å¼•å…¥starterï¼Œè¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰å¸¸è§„éœ€è¦çš„ä¾èµ–æˆ‘ä»¬éƒ½è‡ªåŠ¨å¼•å…¥</li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter">SpringBootæ‰€æœ‰æ”¯æŒçš„åœºæ™¯</a></li><li>*-spring-boot-starterï¼š ç¬¬ä¸‰æ–¹ä¸ºæˆ‘ä»¬æä¾›çš„ç®€åŒ–å¼€å‘çš„åœºæ™¯å¯åŠ¨å™¨ã€‚</li><li>æ‰€æœ‰åœºæ™¯å¯åŠ¨å™¨æœ€åº•å±‚çš„ä¾èµ–<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p>æ— éœ€å…³æ³¨ç‰ˆæœ¬å·ï¼Œè‡ªåŠ¨ç‰ˆæœ¬ä»²è£<br>å¼•å…¥ä¾èµ–é»˜è®¤éƒ½å¯ä»¥ä¸å†™ç‰ˆæœ¬ï¼Œå¼•å…¥éç‰ˆæœ¬ä»²è£çš„jarï¼Œè¦å†™ç‰ˆæœ¬å·</p><p>spring-boot-dependenciesé‡Œé¢è§„å®šäº†å½“å‰ä¾èµ–çš„ç‰ˆæœ¬<br>å¯ä»¥ä¿®æ”¹é»˜è®¤ç‰ˆæœ¬å·</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mysql.version</span>&gt;</span>5.1.43<span class="hljs-tag">&lt;/<span class="hljs-name">mysql.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨é…ç½®-1"><a href="#è‡ªåŠ¨é…ç½®-1" class="headerlink" title="è‡ªåŠ¨é…ç½®"></a>è‡ªåŠ¨é…ç½®</h4><ul><li><p>è‡ªåŠ¨é…å¥½Tomcat</p><ul><li>å¼•å…¥Tomcatä¾èµ–ã€‚</li><li>é…ç½®Tomcat</li></ul></li><li><p>è‡ªåŠ¨é…å¥½SpringMVC</p><ul><li>å¼•å…¥SpringMVCå…¨å¥—ç»„ä»¶</li><li>è‡ªåŠ¨é…å¥½SpringMVCå¸¸ç”¨ç»„ä»¶ï¼ˆåŠŸèƒ½ï¼‰</li></ul></li><li><p>è‡ªåŠ¨é…å¥½Webå¸¸è§åŠŸèƒ½ï¼Œå¦‚ï¼šå­—ç¬¦ç¼–ç é—®é¢˜</p><ul><li>SpringBootå¸®æˆ‘ä»¬é…ç½®å¥½äº†æ‰€æœ‰webå¼€å‘çš„å¸¸è§åœºæ™¯</li></ul></li><li><p>é»˜è®¤çš„åŒ…ç»“æ„</p><ul><li>ä¸»ç¨‹åºï¼ˆ<strong>main</strong>ï¼‰<strong>æ‰€åœ¨åŒ…</strong>åŠå…¶ä¸‹é¢çš„<strong>æ‰€æœ‰å­åŒ…</strong>é‡Œé¢çš„ç»„ä»¶éƒ½ä¼šè¢«é»˜è®¤æ‰«æè¿›æ¥</li><li>æ— éœ€ä»¥å‰çš„åŒ…æ‰«æé…ç½®</li><li>æƒ³è¦æ”¹å˜æ‰«æè·¯å¾„ï¼Œ<code>@SpringBootApplication(scanBasePackages=&quot;com.aster&quot;)</code>æˆ–è€…<code>@ComponentScan</code>æŒ‡å®šæ‰«æè·¯å¾„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br>ç­‰åŒäº<br><span class="hljs-meta">@SpringBootConfiguration</span><br><span class="hljs-meta">@EnableAutoConfiguration</span><br><span class="hljs-meta">@ComponentScan(&quot;com.aster.boot&quot;)</span><br></code></pre></td></tr></table></figure></li><li><p>å„ç§é…ç½®æ‹¥æœ‰é»˜è®¤å€¼</p><ul><li>é»˜è®¤é…ç½®æœ€ç»ˆéƒ½æ˜¯æ˜ å°„åˆ°æŸä¸ªç±»ä¸Š</li><li> é…ç½®æ–‡ä»¶çš„å€¼æœ€ç»ˆä¼šç»‘å®šåˆ°æŸä¸ªç±»ä¸Šï¼Œè¿™ä¸ªç±»ä¼šåœ¨å®¹å™¨ä¸­åˆ›å»ºå¯¹è±¡</li></ul></li><li><p>æŒ‰éœ€åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®é¡¹</p><ul><li>éå¸¸å¤šçš„starter</li><li>å¼•å…¥äº†å“ªä¸ªåœºæ™¯ï¼Œè¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®æ‰ä¼šå¼€å¯</li><li>SpringBootæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½éƒ½åœ¨ spring-boot-autoconfigure åŒ…é‡Œé¢</li></ul></li></ul><h3 id="å®¹å™¨åŠŸèƒ½"><a href="#å®¹å™¨åŠŸèƒ½" class="headerlink" title="å®¹å™¨åŠŸèƒ½"></a>å®¹å™¨åŠŸèƒ½</h3><p>ï¼ˆåŸSSMçš„é‚£äº›æ³¨è§£ï¼Œ<code>@Component @Controller @Service @Repository</code>ä¹‹ç±»çš„ï¼Œéƒ½æ˜¯å¯ä»¥ç”¨çš„ï¼‰</p><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h4><p>ä¸‹é¢çš„ä»£ç SSMéƒ½å­¦è¿‡äº†ï¼Œçœ‹çœ‹å§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span> <span class="hljs-comment">// å‘Šè¯‰SBè¿™æ˜¯ä¸ªé…ç½®ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfiguration</span> </span>&#123;<br><br>    <span class="hljs-meta">@Bean</span> <span class="hljs-comment">// ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œä»¥æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idï¼Œè¿”å›ç±»å‹å°±æ˜¯ç»„ä»¶ç±»å‹ï¼Œè¿”å›çš„å€¼å°±æ˜¯ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">user01</span> <span class="hljs-params">()</span> </span>&#123; <span class="hljs-comment">// Useræ˜¾ç„¶æå‰å†™å¥½äº†é‚£ä¸€å †ä¸œè¥¿</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;Aster&quot;</span>, <span class="hljs-number">16</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Bean(&quot;user02&quot;)</span> <span class="hljs-comment">// SSMé‡Œä¹Ÿå­¦è¿‡è¿™ç§ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶å°±å«user02äº†</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">user010</span> <span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;Aster&quot;</span>, <span class="hljs-number">16</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ps é…ç½®ç±»ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶</p><p>æ³¨æ„ï¼Œç»„ä»¶é»˜è®¤æ˜¯<strong>å•å®ä¾‹çš„</strong>ï¼Œå³ç”¨ä¸åŒå˜é‡è·å–ç»„ä»¶åï¼ŒæŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ï¼ˆè§Aï¼‰</p><p>å°±ç®—ç›´æ¥å»è°ƒç”¨è¢«æ³¨å†Œä¸ºç»„ä»¶çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯<strong>å•å®ä¾‹çš„</strong>ï¼ˆè§Bï¼‰ï¼Œä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainApplication</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>        <span class="hljs-comment">// å–å¾—IOCå®¹å™¨</span><br>        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);<br><br>        <span class="hljs-comment">// A</span><br>        User user01 = (User) run.getBean(<span class="hljs-string">&quot;user01&quot;</span>);<br>        User user02 = (User) run.getBean(<span class="hljs-string">&quot;user01&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ï¼Ÿ&quot;</span> + (user01 == user02));<br><br>        <span class="hljs-comment">// B</span><br>        MyConfiguration myConfiguration = run.getBean(MyConfiguration.class);<br>        User user03 = myConfiguration.user01();<br>        User user04 = myConfiguration.user01();<br>        System.out.println(<span class="hljs-string">&quot;æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ï¼Ÿ&quot;</span> + (user03 == user04));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ï¼Ÿ<span class="hljs-literal">true</span><br>æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ï¼Ÿ<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œæƒ³è¦å¤šå®ä¾‹æ€ä¹ˆåŠå‘¢ï¼Ÿéœ€è¦ä¿®æ”¹<code>@Configuration</code>é‡Œçš„<strong>proxyBeanMethods</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br></code></pre></td></tr></table></figure><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ï¼Ÿ<span class="hljs-literal">true</span><br>æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ï¼Ÿ<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>ï¼ˆå½“ç„¶äº†ï¼Œç¬¬ä¸€ä¸ªè‚¯å®šè¿˜æ˜¯trueï¼Œå› ä¸ºé‚£æ˜¯ä½äºIOCå®¹å™¨é‡Œçš„ï¼Œè‡ªç„¶æ˜¯å•å®ä¾‹ï¼‰</p><h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><ul><li><p>å¦‚æœ<code>@Configuration(proxyBeanMethods = true)</code>ï¼ˆé»˜è®¤å°±æ˜¯trueï¼‰ï¼Œé‚£ä¹ˆå½“å¤–ç•Œè®¿é—®<strong>é…ç½®ç±»ä¸­çš„è¢«æ³¨å†Œä¸ºç»„ä»¶çš„æ–¹æ³•</strong>çš„æ—¶å€™ï¼Œspringbootä¼šä»<strong>å®¹å™¨ä¸­</strong>æ‰¾ç»„ä»¶ï¼Œè‡ªç„¶å®¹å™¨ä¸­çš„ç»„ä»¶æ˜¯å•å®ä¾‹</p></li><li><p>å¦‚æœ<code>@Configuration(proxyBeanMethods = false)</code>ï¼ˆé»˜è®¤å°±æ˜¯trueï¼‰ï¼Œé‚£ä¹ˆå½“å¤–ç•Œè®¿é—®<strong>é…ç½®ç±»ä¸­çš„è¢«æ³¨å†Œä¸ºç»„ä»¶çš„æ–¹æ³•</strong>çš„æ—¶å€™ï¼Œspringbootå°±æ‡’å¾—ç®¡äº†ï¼Œå¤–ç•Œæ¯æ¬¡è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ª<strong>æ–°çš„ä»£ç†å¯¹è±¡</strong></p></li></ul><p>ä»¥ä¸Šä¸¤ç§ï¼Œåˆ†åˆ«ç§°ä¸º<strong>å…¨æ¨¡å¼Full Mode</strong>å’Œ<strong>è½»é‡çº§æ¨¡å¼Lite Mode</strong></p><p><strong>å¦‚æœåªæ˜¯å•å•å¾€å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ï¼Œä¸€èˆ¬ç”¨Liteï¼Œå¥½å¤„å°±æ˜¯å¿«</strong></p><p><strong>å¦‚æœç»„ä»¶ä¹‹é—´æœ‰ä¾èµ–ï¼Œä¸€èˆ¬ç”¨Full</strong>ï¼ˆä¸ç„¶ç»„ä»¶æ‰€ä¾èµ–çš„ç»„ä»¶å°±ä¸æ˜¯å®¹å™¨é‡Œçš„äº†ï¼‰</p><h4 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h4><p><code>@Import</code>æ³¨è§£å†™åœ¨æŸä¸ªç»„ä»¶ç±»ä¸Šï¼Œç”¨äºå¯¼å…¥ç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import(&#123;User.class&#125;)</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢è¿™å¥è¯çš„ä½œç”¨å°±æ˜¯<strong>åœ¨å®¹å™¨ä¸­å£°æ˜Userç±»å‹çš„ç»„ä»¶</strong>ï¼Œè¢«å¯¼å…¥çš„ç»„ä»¶åé»˜è®¤ä¸ºå…¶å…¨ç±»å</p><h4 id="Conditional"><a href="#Conditional" class="headerlink" title="@Conditional"></a>@Conditional</h4><p>æ¡ä»¶è£…é…ï¼Œæ»¡è¶³ConditionalæŒ‡å®šçš„æ¡ä»¶åæ‰è¿›è¡Œç»„ä»¶æ³¨å…¥</p><p>å…¶ä¸‹æœ‰è®¸å¤šæ¬¡çº§æ³¨è§£ï¼ˆæŒ‰Ctrl+Shift+Alt+Næ‰“å¼€è¿™ä¸ªç•Œé¢ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.71lp3c0lbds0.png" alt="image"></p><p>ç”¨æ³•ä¸è¨€è€Œå–»å’¯</p><h4 id="ImportResource"><a href="#ImportResource" class="headerlink" title="@ImportResource"></a>@ImportResource</h4><p>å¦‚æœæœ‰æ—¶å€™è¿«ä¸å¾—å·²è¦å¯¼å…¥xmlçš„é…ç½®ï¼Œå°±ç”¨è¿™ä¸ª</p><p>å’ŒImportä¸€æ ·ï¼Œå†™åœ¨é…ç½®ç±»ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ImportResource(&quot;applicationContext.xml&quot;)</span><br></code></pre></td></tr></table></figure><h4 id="é…ç½®ç»‘å®š"><a href="#é…ç½®ç»‘å®š" class="headerlink" title="é…ç½®ç»‘å®š"></a>é…ç½®ç»‘å®š</h4><p>å½“ç„¶å¯ä»¥æ‰‹åŠ¨ç¼–å†™Javaç¨‹åºï¼Œè¯»å–propertiesæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶å°†å…¶å°è£…åˆ°ä¸€ä¸ªJavaBeanä¸­ä»¥ä¾¿éšæ—¶ä½¿ç”¨</p><p>springbootå¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½</p><p>å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªCarç±»ï¼Œé‡Œé¢æœ‰å“ç‰Œå’Œä»·é’±ï¼Œåœ¨application.propertiesé‡Œï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹è®¾å®šæƒ³å¯¼å…¥åˆ°Caré‡Œä»¥ä¾¿ç»™Carè®¾å®šé»˜è®¤å€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pro">mycar.brand&#x3D;BMW<br>mycar.price&#x3D;500000<br></code></pre></td></tr></table></figure><p>æ³¨æ„é‚£ä¸ª<code>@Component</code>æ³¨é‡Šï¼å› ä¸ºåªæœ‰<strong>åœ¨å®¹å™¨ä¸­</strong>çš„ç»„ä»¶ï¼Œæ‰èƒ½ä½¿ç”¨springbootçš„åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String brand;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> price;<br>    ...<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span> <span class="hljs-comment">// ç”±äºæŠŠCarå£°æ˜åœ¨å®¹å™¨é‡Œäº†ï¼Œæ‰€ä»¥ç›´æ¥è‡ªåŠ¨æ³¨å…¥</span><br>    <span class="hljs-keyword">public</span> Car car;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/car&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Car <span class="hljs-title">car</span> <span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> car;<br>    &#125;<br>    ...<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.2iejoo5v6vw0.png" alt="image"></p><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œæ˜¯åœ¨é…ç½®ç±»ä¸Šå£°æ˜<code>@EnableConfigurationProperties(Car.class)</code>ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨Carå‰æ ‡æ³¨<code>@Component</code>äº†ï¼Œä¹Ÿä¼šè‡ªåŠ¨æŠŠCaræ³¨å…¥å®¹å™¨ä¸­</p><p>æºç åˆ†ææš‚ç•¥ï¼Œè§<a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=13">è¿™å„¿</a></p><h3 id="æ€»ç»“ï¼šSpringBootç®€æ˜“å¼€å‘èµ·æ­¥"><a href="#æ€»ç»“ï¼šSpringBootç®€æ˜“å¼€å‘èµ·æ­¥" class="headerlink" title="æ€»ç»“ï¼šSpringBootç®€æ˜“å¼€å‘èµ·æ­¥"></a>æ€»ç»“ï¼šSpringBootç®€æ˜“å¼€å‘èµ·æ­¥</h3><ul><li>å¼•å…¥åœºæ™¯ä¾èµ–ï¼Œå¯å‚è€ƒ<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter">å®˜æ–¹æ–‡æ¡£</a></li><li>æŸ¥çœ‹è‡ªåŠ¨é…ç½®äº†å“ªäº›ï¼ˆé€‰åšï¼‰<ul><li>è‡ªå·±åˆ†æï¼Œå¼•å…¥åœºæ™¯å¯¹åº”çš„è‡ªåŠ¨é…ç½®ä¸€èˆ¬éƒ½ç”Ÿæ•ˆäº†</li><li>é…ç½®æ–‡ä»¶ä¸­debug=trueå¼€å¯è‡ªåŠ¨é…ç½®æŠ¥å‘Šã€‚Negativeï¼ˆä¸ç”Ÿæ•ˆï¼‰\Positiveï¼ˆç”Ÿæ•ˆï¼‰</li></ul></li><li>æ˜¯å¦éœ€è¦åšå‡ºè‡ªå·±çš„ä¿®æ”¹<ul><li>å‚ç…§<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties">å®˜æ–¹æ–‡æ¡£</a>ä¿®æ”¹é…ç½®é¡¹</li><li>è‡ªå·±åˆ†æpropertiesæ–‡ä»¶ç»‘å®šäº†é…ç½®æ–‡ä»¶é‡Œçš„å“ªäº›ä¸œè¥¿</li><li>è‡ªå®šä¹‰åŠ å…¥æˆ–è€…æ›¿æ¢ç»„ä»¶<ul><li><code>@Beanã€@Component...</code></li></ul></li><li>è‡ªå®šä¹‰å™¨  XXXXXCustomizerï¼›</li><li>â€¦â€¦</li></ul></li></ul><h3 id="å¼€å‘å°æŠ€å·§"><a href="#å¼€å‘å°æŠ€å·§" class="headerlink" title="å¼€å‘å°æŠ€å·§"></a>å¼€å‘å°æŠ€å·§</h3><h4 id="Lombok"><a href="#Lombok" class="headerlink" title="Lombok"></a>Lombok</h4><p>Lombokå¯ä»¥ç®€åŒ–JavaBeançš„å¼€å‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿˜éœ€è¦åœ¨IDEAä¸­å®‰è£…å¯¹åº”çš„æ’ä»¶ï¼Œä¸è¿‡çƒ­å¿ƒçš„æ–°ç‰ˆIDEAå·²ç»é›†æˆå¥½äº†</p><p>é‚£ä¹ˆï¼ŒåŸæœ¬å¾ˆé•¿çš„Carç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String brand;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> price;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Car&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;brand=&#x27;&quot;</span> + brand + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, price=&quot;</span> + price +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getBrand</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> brand;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBrand</span><span class="hljs-params">(String brand)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.brand = brand;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPrice</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> price;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPrice</span><span class="hljs-params">(<span class="hljs-keyword">int</span> price)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.price = price;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åªéœ€è¦å†™æˆè¿™æ ·å³å¯ï¼Œç¼–è¯‘æ—¶è‡ªåŠ¨åŠ ä¸ŠtoStringå’Œg/setter</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span><br><span class="hljs-meta">@Data</span> <span class="hljs-comment">// &lt;----</span><br><span class="hljs-meta">@ToString</span> <span class="hljs-comment">// &lt;----</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> </span>&#123;<br>    <br>    <span class="hljs-keyword">private</span> String brand;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> price;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œæœ‰å‚æ— å‚æ„é€ å™¨æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AllArgsConstractor</span><br><span class="hljs-meta">@NoArgsConstractor</span><br></code></pre></td></tr></table></figure><p>å¦å¤–è¿˜æœ‰:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EqualsAndHashCode</span><br></code></pre></td></tr></table></figure><p>æœ€åï¼Œè¿˜æœ‰æ—¥å¿—åŠŸèƒ½<code>@Slf4j</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@Slf4j</span> <span class="hljs-comment">// &lt;----</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span> <br>    <span class="hljs-keyword">public</span> Car car;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/car&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Car <span class="hljs-title">car</span> <span class="hljs-params">()</span> </span>&#123;<br>        log.info(<span class="hljs-string">&quot;è¯·æ±‚è¿›æ¥å’¯~&quot;</span>); <span class="hljs-comment">// &lt;----</span><br>        <span class="hljs-keyword">return</span> car;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.688l5cx4jgw0.png" alt="image"></p><h4 id="Dev-tools"><a href="#Dev-tools" class="headerlink" title="Dev-tools"></a>Dev-tools</h4><p>å¯ä»¥ä½¿å¾—å¯¹ä»£ç åšå‡ºæ›´æ”¹åï¼Œä¸ç”¨éº»çƒ¦åœ°æ‰‹åŠ¨é‡å¯é¡¹ç›®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ¯æ¬¡ä¿®æ”¹ä»£ç ä¹‹åï¼ŒCtrl + F9é‡æ–°ç¼–è¯‘ä¸€ä¸‹é¡¹ç›®ï¼Œdev-toolså°±ä¼šè‡ªåŠ¨é‡æ–°é‡å¯é¡¹ç›®</p><h4 id="Spring-Initializr"><a href="#Spring-Initializr" class="headerlink" title="Spring Initializr"></a>Spring Initializr</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.6orwfhkdq5c0.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.8klojqhum58.png" alt="image"></p><p>ä¹‹åï¼Œä¸ç”¨åƒä¹‹å‰è¯´çš„é‚£æ ·ï¼Œå»å®˜æ–¹æ–‡æ¡£æ‰¾åœºæ™¯ï¼ŒInitializrä¼šæä¾›å¾ˆå¤šåœºæ™¯ä¾›æˆ‘ä»¬å¼•å…¥ï¼Œåœ¨åˆ›å»ºçš„æ—¶å€™</p><p>ä¼šåˆ›å»ºå¥½é¡¹ç›®ç»“æ„ã€ä¾èµ–å’Œé…ç½®æ–‡ä»¶ã€ä¸»ç¨‹åºç±»</p><h1 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h1><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="yaml-yml-yaml"><a href="#yaml-yml-yaml" class="headerlink" title="yaml(.yml/.yaml)"></a>yaml(.yml/.yaml)</h3><blockquote><p>YAML æ˜¯ â€œYAML Ainâ€™t Markup Languageâ€ï¼ˆYAML ä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚ </p><p>éå¸¸é€‚åˆç”¨æ¥åšä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„é…ç½®æ–‡ä»¶</p></blockquote><h4 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h4><ul><li><p><code>key: value</code>ï¼Œkvä¹‹é—´æœ‰ç©ºæ ¼</p></li><li><p>å¤§å°å†™æ•æ„Ÿ</p></li><li><p>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</p></li><li><p>ç¼©è¿›ä¸å…è®¸ä½¿ç”¨tabï¼Œåªå…è®¸ç©ºæ ¼ï¼ˆä¸è¿‡IDEAä¼šè‡ªåŠ¨åŠ ç©ºæ ¼å•¦ï¼‰</p></li><li><p>ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯</p></li><li><p>â€˜#â€™è¡¨ç¤ºæ³¨é‡Š</p></li><li><p>å­—ç¬¦ä¸²æ— éœ€åŠ å¼•å·ï¼Œå¦‚æœè¦åŠ ï¼Œâ€™â€™ä¸â€â€è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ ä¼šè¢« è½¬ä¹‰/ä¸è½¬ä¹‰</p></li></ul><h4 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h4><p>å­—é¢é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ã€‚dateã€booleanã€stringã€numberã€null</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">k:</span> <span class="hljs-string">v</span><br></code></pre></td></tr></table></figure><p>å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆã€‚mapã€hashã€setã€object </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">è¡Œå†…å†™æ³•ï¼š</span>  <span class="hljs-attr">k:</span> &#123;<span class="hljs-string">k1:v1</span>,<span class="hljs-string">k2:v2</span>,<span class="hljs-string">k3:v3</span>&#125;<br><span class="hljs-comment">#æˆ–</span><br><span class="hljs-attr">k:</span> <br>  <span class="hljs-attr">k1:</span> <span class="hljs-string">v1</span><br>  <span class="hljs-attr">k2:</span> <span class="hljs-string">v2</span><br>  <span class="hljs-attr">k3:</span> <span class="hljs-string">v3</span><br></code></pre></td></tr></table></figure><p>æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ã€‚arrayã€listã€queue</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">è¡Œå†…å†™æ³•ï¼š</span>  <span class="hljs-attr">k:</span> [<span class="hljs-string">v1</span>,<span class="hljs-string">v2</span>,<span class="hljs-string">v3</span>]<br><span class="hljs-comment">#æˆ–è€…</span><br><span class="hljs-attr">k:</span><br> <span class="hljs-bullet">-</span> <span class="hljs-string">v1</span><br> <span class="hljs-bullet">-</span> <span class="hljs-string">v2</span><br> <span class="hljs-bullet">-</span> <span class="hljs-string">v3</span><br></code></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ToString</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>  <span class="hljs-keyword">private</span> String userName;<br>  <span class="hljs-keyword">private</span> Boolean boss;<br>  <span class="hljs-keyword">private</span> Date birth;<br>  <span class="hljs-keyword">private</span> Integer age;<br>  <span class="hljs-keyword">private</span> Pet pet;<br>  <span class="hljs-keyword">private</span> String[] interests;<br>  <span class="hljs-keyword">private</span> List&lt;String&gt; animal;<br>  <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; score;<br>  <span class="hljs-keyword">private</span> Set&lt;Double&gt; salarys;<br>  <span class="hljs-keyword">private</span> Map&lt;String, List&lt;Pet&gt;&gt; allPets;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">@ ...<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Pet</span> </span>&#123;<br>  <span class="hljs-keyword">private</span> String name;<br>  <span class="hljs-keyword">private</span> Double weight;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># yamlè¡¨ç¤ºä»¥ä¸Šå¯¹è±¡</span><br><span class="hljs-attr">person:</span><br>  <span class="hljs-attr">userName:</span> <span class="hljs-string">zhangsan</span><br>  <span class="hljs-attr">boss:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">birth:</span> <span class="hljs-number">2019</span><span class="hljs-string">/12/12</span> <span class="hljs-number">20</span><span class="hljs-string">:12:33</span><br>  <span class="hljs-attr">age:</span> <span class="hljs-number">18</span><br>  <span class="hljs-attr">pet:</span> <br>    <span class="hljs-attr">name:</span> <span class="hljs-string">tomcat</span><br>    <span class="hljs-attr">weight:</span> <span class="hljs-number">23.4</span><br>  <span class="hljs-attr">interests:</span> [<span class="hljs-string">ç¯®çƒ</span>,<span class="hljs-string">æ¸¸æ³³</span>]<br>  <span class="hljs-attr">animal:</span> <br>    <span class="hljs-bullet">-</span> <span class="hljs-string">jerry</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">mario</span><br>  <span class="hljs-attr">score:</span><br>    <span class="hljs-attr">english:</span> <br>      <span class="hljs-attr">first:</span> <span class="hljs-number">30</span><br>      <span class="hljs-attr">second:</span> <span class="hljs-number">40</span><br>      <span class="hljs-attr">third:</span> <span class="hljs-number">50</span><br>    <span class="hljs-attr">math:</span> [<span class="hljs-number">131</span>,<span class="hljs-number">140</span>,<span class="hljs-number">148</span>]<br>    <span class="hljs-attr">chinese:</span> &#123;<span class="hljs-attr">first:</span> <span class="hljs-number">128</span>,<span class="hljs-attr">second:</span> <span class="hljs-number">136</span>&#125;<br>  <span class="hljs-attr">salarys:</span> [<span class="hljs-number">3999</span>,<span class="hljs-number">4999.98</span>,<span class="hljs-number">5999.99</span>]<br>  <span class="hljs-attr">allPets:</span><br>    <span class="hljs-attr">sick:</span><br>      <span class="hljs-bullet">-</span> &#123;<span class="hljs-attr">name:</span> <span class="hljs-string">tom</span>&#125;<br>      <span class="hljs-bullet">-</span> &#123;<span class="hljs-attr">name:</span> <span class="hljs-string">jerry</span>,<span class="hljs-attr">weight:</span> <span class="hljs-number">47</span>&#125;<br>    <span class="hljs-attr">health:</span> [&#123;<span class="hljs-attr">name:</span> <span class="hljs-string">mario</span>,<span class="hljs-attr">weight:</span> <span class="hljs-number">47</span>&#125;]<br></code></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º"><a href="#è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º" class="headerlink" title="è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º"></a>è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º</h3><p>ç¼–å†™ymlçš„æ—¶å€™ï¼ŒIDEAå¹¶ä¸ä¼šå¸®æˆ‘ä»¬æç¤ºå‡ºå®Œæ•´çš„å±æ€§å</p><p>é‚£ä¹ˆå°±éœ€è¦æˆ‘ä»¬è‡ªå·±é…ç½®ä¸€ä¸‹è®©å®ƒèƒ½æç¤º</p><p><strong>ï¼ˆInitializrå¯ä»¥åœ¨åˆ›å»ºæ—¶ç›´æ¥å¯¼å…¥è¿™ä¸ªï¼ŒåŒ…æ‹¬Lomboké‚£äº›ï¼‰</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œç”±äºè¿™ä¸ªé…ç½®å¤„ç†å™¨åªæ˜¯ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼Œå’Œä¸šåŠ¡æ— å…³ï¼Œspringå»ºè®®æˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™æ’é™¤è¿™ä¸ªå¤„ç†å™¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span> <span class="hljs-comment">&lt;!-- !!!!!! --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ®è¯´åœ¨2.5.3ä¹‹åä¼šè‡ªåŠ¨æ’é™¤äº†ï¼Œä¸ç”¨å†™</p><h2 id="Webå¼€å‘"><a href="#Webå¼€å‘" class="headerlink" title="Webå¼€å‘"></a>Webå¼€å‘</h2><h3 id="é™æ€èµ„æºè®¿é—®"><a href="#é™æ€èµ„æºè®¿é—®" class="headerlink" title="é™æ€èµ„æºè®¿é—®"></a>é™æ€èµ„æºè®¿é—®</h3><p>åªè¦æŠŠé™æ€èµ„æºæ”¾åœ¨ç±»è·¯å¾„ï¼ˆresourcesï¼‰ä¸‹çš„æŒ‡å®šæ–‡ä»¶å¤¹é‡Œï¼Œspringbootå°±å¯ä»¥è®¿é—®åˆ°ï¼š</p><p> <code>/static</code> or <code>/public</code> or <code>/resources</code> or <code>/META-INF/resources</code></p><p>è®¿é—®æ—¶ï¼Œä¸ç”¨åŠ æ‰€åœ¨çš„æ–‡ä»¶å¤¹åï¼Œç›´æ¥ç”¨é¡¹ç›®æ ¹è·¯å¾„ <code>/</code> + é™æ€èµ„æºåï¼š</p><p><code>http://localhost:8080/aster.png</code></p><p><strong>åŸç†ï¼š</strong>è¯·æ±‚è¿›æ¥åï¼Œå…ˆå»æ‰¾Controllerçœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚å†äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢ï¼›æ¯”å¦‚è¯´ï¼Œå¦‚æœæœ‰ä¸€ä¸ªç¥å¥‡çš„Controllerçš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/aster.png&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showAvatar</span> <span class="hljs-params">()</span> </span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨é™æ€èµ„æºç›®å½•é‡Œè¿˜æœ‰ä¸ª<code>aster.png</code>ï¼Œé‚£ä¹ˆå½“è®¿é—®<code>/aster.png</code>çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨<code>showAvatar()</code>åæ³•ï¼Œè€Œä¸æ˜¯è®¿é—®äº†é™æ€èµ„æº</p><p>ä½†æ˜¯å‘¢ï¼Œspringbootè‡ªå¸¦çš„è¿™ç§<strong>é»˜è®¤æ— å‰ç¼€</strong>çš„ç›´æ¥è®¿é—®çš„æ–¹å¼ä¸æ˜¯å¾ˆå¸¸ç”¨ï¼Œå› ä¸ºå®é™…å¼€å‘ä¸­è¦é…ç½®<strong>æ‹¦æˆªå™¨</strong>ï¼Œå¦‚æœè®¿é—®é™æ€èµ„æºçš„è®¿é—®åœ°å€ä¸å¸¦å‰ç¼€çš„è¯ï¼Œä¸æ–¹ä¾¿æ‹¦æˆªï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦</p><h4 id="è®¾ç½®é™æ€èµ„æºè®¿é—®å‰ç¼€"><a href="#è®¾ç½®é™æ€èµ„æºè®¿é—®å‰ç¼€" class="headerlink" title="è®¾ç½®é™æ€èµ„æºè®¿é—®å‰ç¼€"></a>è®¾ç½®é™æ€èµ„æºè®¿é—®å‰ç¼€</h4><p>application.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">mvc:</span><br>    <span class="hljs-attr">static-path-pattern:</span> <span class="hljs-string">/res/**</span><br></code></pre></td></tr></table></figure><p>ï¼ˆè¿™ä¹ˆè¾“å…¥èƒ½è¡¥å…¨ï¼šspring.mvc.sta â€¦ ï¼‰</p><p>è¿™æ ·ä¸€æ¥ï¼Œè®¿é—®é™æ€èµ„æºçš„æ—¶å€™ï¼Œéƒ½è¦åŠ ä¸Šå‰ç¼€<code>/res</code></p><h4 id="æ›´æ”¹é»˜è®¤é™æ€èµ„æºè·¯å¾„"><a href="#æ›´æ”¹é»˜è®¤é™æ€èµ„æºè·¯å¾„" class="headerlink" title="æ›´æ”¹é»˜è®¤é™æ€èµ„æºè·¯å¾„"></a>æ›´æ”¹é»˜è®¤é™æ€èµ„æºè·¯å¾„</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">mvc:</span><br>    <span class="hljs-attr">static-path-pattern:</span> <span class="hljs-string">/res/**</span><br><br>  <span class="hljs-attr">resources:</span><br>    <span class="hljs-attr">static-locations:</span> [<span class="hljs-string">classpath:/ast/</span>, <span class="hljs-string">classpath:/lts/</span>]<br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰åœ¨resources\astå’Œresources\lsté‡Œçš„é™æ€èµ„æºæ‰èƒ½è¢«è®¿é—®</p><h4 id="è‡ªå®šä¹‰æ¬¢è¿é¡µå’ŒFavicon"><a href="#è‡ªå®šä¹‰æ¬¢è¿é¡µå’ŒFavicon" class="headerlink" title="è‡ªå®šä¹‰æ¬¢è¿é¡µå’ŒFavicon"></a>è‡ªå®šä¹‰æ¬¢è¿é¡µå’ŒFavicon</h4><p>æœ‰ä¸¤ç§æ–¹å¼è‡ªå®šä¹‰æ¬¢è¿é¡µè®©springbootè‡ªåŠ¨æ‰“å¼€ï¼šï¼ˆä½†æ˜¯å¦‚æœé…ç½®äº†é™æ€èµ„æºå‰ç¼€ï¼Œè²Œä¼¼ä¼šå¤±æ•ˆï¼‰</p><ol><li>å†™ä¸€ä¸ªindex.htmlæ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹</li><li>é…ç½®ä¸€ä¸ªå¤„ç†<code>/index</code>è¯·æ±‚çš„æ–¹æ³•</li></ol><p>faviconå³ç½‘é¡µå›¾æ ‡ï¼Œå‘½åä¸ºfavicon.icoåæ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯</p><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">resources:</span><br><span class="hljs-attr">add-mapping:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># ç¦ç”¨æ‰€æœ‰é™æ€èµ„æºè§„åˆ™</span><br>  <span class="hljs-attr">cache:</span><br><span class="hljs-attr">preriod:</span> <span class="hljs-number">1600</span> <span class="hljs-comment"># è®¾ç½®é™æ€èµ„æºç¼“å­˜1600ç§’ï¼Œæµè§ˆå™¨1600ç§’å†…å†è®¿é—®çš„æ—¶å€™ï¼Œä¸å†è¯·æ±‚ï¼Œç›´æ¥è¯»ç¼“å­˜</span><br></code></pre></td></tr></table></figure><h3 id="è¯·æ±‚å‚æ•°å¤„ç†"><a href="#è¯·æ±‚å‚æ•°å¤„ç†" class="headerlink" title="è¯·æ±‚å‚æ•°å¤„ç†"></a>è¯·æ±‚å‚æ•°å¤„ç†</h3><h4 id="è¯·æ±‚æ˜ å°„"><a href="#è¯·æ±‚æ˜ å°„" class="headerlink" title="è¯·æ±‚æ˜ å°„"></a>è¯·æ±‚æ˜ å°„</h4><p><strong>Resté£æ ¼</strong>ï¼šä½¿ç”¨HTTPè¯·æ±‚æ–¹å¼åŠ¨è¯ï¼ˆGET DELETE PUT POSTï¼‰æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œ</p><p>æ ¸å¿ƒFilterï¼š<strong>HiddenHttpMethodFilter</strong></p><p>ä¸ºä»€ä¹ˆæ˜¯æ ¸å¿ƒFiilterå‘¢ï¼Ÿæ¯”å¦‚è¿™ä¸ªæ§åˆ¶å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.boot.controller;<br><br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyController</span> </span>&#123;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.GET)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;GET-å¼ ä¸‰&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.POST)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">saveUser</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;POST-å¼ ä¸‰&quot;</span>;<br>    &#125;<br><br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.PUT)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">putUser</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;PUT-å¼ ä¸‰&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.DELETE)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">deleteUser</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;DELETE-å¼ ä¸‰&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åæœ‰è¿™æ ·ä¸€ä¸ªæµ‹è¯•ç•Œé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html">...<br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-GETæäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-POSTæäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;delete&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-DELETEæäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;put&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-PUTæäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br>...<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.4kimj7sf3ze0.png" alt="image" style="zoom:80%;" /><p>ä½†æ˜¯ï¼Œè¯•ä¸€è¯•ä¼šå‘ç°ï¼Œè¿™ç§å†™æ³•æœ‰é—®é¢˜ï¼Œdeleteå’Œputä¸æ”¯æŒï¼Œä¼šé€šé€šè¢«è§†ä¸ºget</p><p>è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°HiddenHttpMethodFilteræä¾›çš„<strong>éšè—æ–¹æ³•ï¼ˆ_methodï¼‰</strong>ï¼Œä¸è¿‡è¿™ä¸ªåŠŸèƒ½é»˜è®¤æ˜¯å…³çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ‰“å¼€ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">mvc:</span><br>    <span class="hljs-attr">hiddenmethod:</span><br>      <span class="hljs-attr">filter:</span><br>        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä½¿ç”¨_methodæ—¶ï¼Œmethodåº”ä¸ºpostï¼›delete putå¤§å°å†™æ— æ‰€è°“</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä¸€èˆ¬è®¾ç½®ä¸ºhiddenæ¥éšè— --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;DELETE&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-DELETEæäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;PUT&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-PUTæäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œè¿˜æ”¯æŒPATCHè¯·æ±‚</p><p>å› ä¸ºè¡¨å•formåªèƒ½å†™get/postæ‰€ä»¥è¿™æ ·æ“ä½œï¼Œå¦‚æœæ˜¯ä½¿ç”¨<strong>å®¢æˆ·ç«¯</strong>çš„è¯ï¼Œæœ¬èº«å°±å¯ä»¥å‘å„ç§è¯·æ±‚ï¼Œæ— éœ€Filteräº†</p><p>å› ä¸ºä¸€èˆ¬æ˜¯<strong>å‰åç«¯åˆ†ç¦»</strong>ï¼Œæ‰€ä»¥springé»˜è®¤è¿™ä¸ªæ˜¯falseï¼Œè®©æˆ‘ä»¬æ¥é€‰æ‹©æ€§å¼€å¯</p><p>æœ€åï¼Œè¿˜æœ‰ä¸€ç§ç®€ä¾¿å†™æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/user&quot;)</span><br><span class="hljs-meta">@PostMapping(&quot;/user&quot;)</span><br><span class="hljs-meta">@PutMapping(&quot;/user&quot;)</span><br><span class="hljs-meta">@DeleteMapping(&quot;/user&quot;)</span><br></code></pre></td></tr></table></figure><p>(è¿™ä¸ª_methodå¯ä»¥æ”¹åï¼Œè§<a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=28">P27</a>)</p><h4 id="è¯·æ±‚æ˜ å°„çš„åŸç†"><a href="#è¯·æ±‚æ˜ å°„çš„åŸç†" class="headerlink" title="è¯·æ±‚æ˜ å°„çš„åŸç†"></a>è¯·æ±‚æ˜ å°„çš„åŸç†</h4><blockquote><p>åˆä¸€ä¸ªå°çŸ¥è¯†ï¼šCtrl + F12å¯ä»¥æ‰“å¼€ä¸€ä¸ªç±»çš„ç»“æ„æ¦‚è§ˆï¼ŒCtrl + Hå¯ä»¥æ‰“å¼€ä¸€ä¸ªç±»çš„ç»§æ‰¿æ ‘</p></blockquote><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=28">æ¬¸å˜¿</a></p><h3 id="æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"><a href="#æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£" class="headerlink" title="æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"></a>æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£</h3><h4 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h4><p>@PathVariableè·å–è¯·æ±‚è·¯å¾„é‡Œçš„å˜é‡ï¼ˆå³Resté£æ ¼çš„è·å–è¯·æ±‚â€œå‚æ•°â€ï¼‰</p><p>@RequestParamè·å–è¯·æ±‚å‚æ•°</p><p>@PathVariableå’Œ@RequestParamå‚æ•°ä¸ºç©ºçš„æ—¶å€™ï¼Œéƒ½æ˜¯è·å–æ‰€æœ‰å‚æ•°çš„å€¼ï¼Œå­˜åœ¨mapé‡Œ</p><p>@RequestHeaderè·å–è¯·æ±‚å¤´ï¼Œå½“å‚æ•°ä¸ºç©ºçš„æ—¶å€™æ˜¯è·å–æ‰€æœ‰è¯·æ±‚å¤´å­˜åœ¨mapé‡Œ</p><p>@CookieValueè·å–Cookieï¼Œå½“å‚æ•°ä¸ºç©ºçš„æ—¶å€™æ˜¯è·å–æ‰€æœ‰Cookieå­˜åœ¨Cookieï¼ˆæœ‰è¿™ä¸ªç±»å‹ï¼‰é‡Œ</p><p>è·å–åˆ°çš„è¿”å›å€¼å¯ä»¥å­˜åˆ°Springé‡Œä¹Ÿå¯ä»¥å­˜åˆ°Cookieé‡Œ</p><p>@RequestBodyè·å–è¯·æ±‚ä½“ï¼ˆPOSTè¯·æ±‚æ‰æœ‰è¯·æ±‚ä½“ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestController</span> </span>&#123;<br><br>    <span class="hljs-meta">@PostMapping(&quot;/save&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Map <span class="hljs-title">postMethod</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> String content)</span> </span>&#123;<br>        Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        map.put(<span class="hljs-string">&quot;Content&quot;</span>, content);<br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/save&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userName&quot;</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    é‚®ç®±ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.153c7ppwzf34.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.zckc2wgxsy8.png" alt="image"></p><p>@RequestAttributeå¯ä»¥è·å–requeståŸŸå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span> <span class="hljs-comment">// å› ä¸ºæ˜¯é¡µé¢è·³è½¬æ‰€ä»¥å°±ä¸RestControlleräº†</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RequestController</span> </span>&#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/goto&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">goToPage</span><span class="hljs-params">(HttpServletRequest request)</span></span>&#123;<br>        request.setAttribute(<span class="hljs-string">&quot;msg&quot;</span>, <span class="hljs-string">&quot;è¯·æ±‚æˆåŠŸ&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward://success&quot;</span>; <span class="hljs-comment">// è½¬å‘åˆ°successè¯·æ±‚</span><br>    &#125;<br><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-meta">@GetMapping(&quot;/success&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Map <span class="hljs-title">success</span><span class="hljs-params">(<span class="hljs-meta">@RequestAttribute(&quot;msg&quot;)</span> String msg, HttpServletRequest request)</span> </span>&#123;<br>        Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        String msg2 = (String) request.getAttribute(<span class="hljs-string">&quot;msg&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;é€šè¿‡RequestAttrè·å–çš„msgï¼š&quot;</span>, msg);<br>        map.put(<span class="hljs-string">&quot;é€šè¿‡è½¬å‘è·å–çš„msgï¼š&quot;</span>, msg2);<br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SpringBoot1/image.ocjj9z6z5gg.png" alt="image"></p><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=31">@MatrixVariableä¸UrlPathHelperæš‚ç•¥ï¼Œæ¬¸å˜¿</a></p><h4 id="ä¼ å…¥ServletAPIä½œä¸ºå‚æ•°"><a href="#ä¼ å…¥ServletAPIä½œä¸ºå‚æ•°" class="headerlink" title="ä¼ å…¥ServletAPIä½œä¸ºå‚æ•°"></a>ä¼ å…¥ServletAPIä½œä¸ºå‚æ•°</h4><p>æ”¯æŒçš„APIæœ‰ï¼šWebRequestã€ServletRequestã€MultipartRequestã€ HttpSessionã€javax.servlet.http.PushBuilderã€Principalã€InputStreamã€Readerã€HttpMethodã€Localeã€TimeZoneã€ZoneId</p><blockquote><p>é€šè¿‡åˆ†æServletRequestMethodArgumentResolveræºç å¾—åˆ°çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">supportsParameter</span><span class="hljs-params">(MethodParameter parameter)</span> </span>&#123;<br>    Class&lt;?&gt; paramType = parameter.getParameterType();<br>    <span class="hljs-keyword">return</span> (WebRequest.class.isAssignableFrom(paramType) ||<br>            ServletRequest.class.isAssignableFrom(paramType) ||<br>            MultipartRequest.class.isAssignableFrom(paramType) ||<br>            HttpSession.class.isAssignableFrom(paramType) ||<br>            (pushBuilder != <span class="hljs-keyword">null</span> &amp;&amp; pushBuilder.isAssignableFrom(paramType)) ||<br>            Principal.class.isAssignableFrom(paramType) ||<br>            InputStream.class.isAssignableFrom(paramType) ||<br>            Reader.class.isAssignableFrom(paramType) ||<br>            HttpMethod.class == paramType ||<br>            Locale.class == paramType ||<br>            TimeZone.class == paramType ||<br>            ZoneId.class == paramType);<br>&#125;<br></code></pre></td></tr></table></figure></blockquote><h4 id="ä¼ å…¥å¤æ‚å‚æ•°"><a href="#ä¼ å…¥å¤æ‚å‚æ•°" class="headerlink" title="ä¼ å…¥å¤æ‚å‚æ•°"></a>ä¼ å…¥å¤æ‚å‚æ•°</h4><p><strong>Map</strong>ã€<strong>Modelï¼ˆmapã€modelé‡Œé¢çš„æ•°æ®ä¼šè¢«æ”¾åœ¨requestçš„è¯·æ±‚åŸŸ  request.setAttributeï¼‰ã€</strong>Errors/BindingResultã€<strong>RedirectAttributesï¼ˆ é‡å®šå‘æºå¸¦æ•°æ®ï¼‰</strong>ã€<strong>ServletResponseï¼ˆresponseï¼‰</strong>ã€SessionStatusã€UriComponentsBuilderã€ServletUriComponentsBuilder</p><p>ï¼ˆå› ä¸ºç›®å‰åªæ˜¯å¿«é€Ÿå­¦ä¹ æ‰€ä»¥æºç åˆ†æçœç•¥ä¸€ä¸‹å’¯ï¼‰</p><h4 id="ä¼ å…¥è‡ªå®šä¹‰å¯¹è±¡å‚æ•°"><a href="#ä¼ å…¥è‡ªå®šä¹‰å¯¹è±¡å‚æ•°" class="headerlink" title="ä¼ å…¥è‡ªå®šä¹‰å¯¹è±¡å‚æ•°"></a>ä¼ å…¥è‡ªå®šä¹‰å¯¹è±¡å‚æ•°</h4><p>å¯ä»¥è‡ªåŠ¨ç±»å‹è½¬æ¢ä¸æ ¼å¼åŒ–ï¼Œå¯ä»¥çº§è”å°è£…ï¼ˆpet.name, pet.ageï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *     å§“åï¼š &lt;input name=&quot;userName&quot;/&gt; &lt;br/&gt;</span><br><span class="hljs-comment"> *     å¹´é¾„ï¼š &lt;input name=&quot;age&quot;/&gt; &lt;br/&gt;</span><br><span class="hljs-comment"> *     ç”Ÿæ—¥ï¼š &lt;input name=&quot;birth&quot;/&gt; &lt;br/&gt;</span><br><span class="hljs-comment"> *     å® ç‰©å§“åï¼š&lt;input name=&quot;pet.name&quot;/&gt;&lt;br/&gt;</span><br><span class="hljs-comment"> *     å® ç‰©å¹´é¾„ï¼š&lt;input name=&quot;pet.age&quot;/&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <br>    <span class="hljs-keyword">private</span> String userName;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> Date birth;<br>    <span class="hljs-keyword">private</span> Pet pet;<br>    <br>&#125;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Pet</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String age;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æ˜¯ä¸€å¤§æ®µæºç åˆ†æï¼Œå‘œå‘œå‘œå‘œå‘œï¼ŒçœŸéš¾å•Šï¼ˆP35 36 37 è·³è·³è·³ï¼‰</p><h3 id="æ•°æ®å“åº”"><a href="#æ•°æ®å“åº”" class="headerlink" title="æ•°æ®å“åº”"></a>æ•°æ®å“åº”</h3><h4 id="å“åº”JSON"><a href="#å“åº”JSON" class="headerlink" title="å“åº”JSON"></a>å“åº”JSON</h4><p><del>æˆ‘æ„Ÿè§‰æˆ‘çœ‹è¿™ä¸ªè¯¾çš„å¤§çº²çœŸçš„å¥½ä¹±å•Šâ€¦â€¦éƒ½ä¸å¥½åˆ†æ ‡é¢˜äº†</del></p><p>springbootè¿”å›jsonå¾ˆç®€å•ï¼Œåªéœ€è¦ï¼š</p><ol><li>æœ‰starter-webè‡ªåŠ¨å¯¼å…¥ä¾èµ–</li><li>åœ¨éœ€è¦è¿”å›jsonçš„æ–¹æ³•å‰åŠ @ResponseBody</li><li>ç›´æ¥è¿”å›ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œä¼šç»™å‰ç«¯è‡ªåŠ¨è½¬ä¸ºjsonæ ¼å¼</li></ol><p>ï¼ˆåŸç†<a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=37">æš‚ç•¥ï¼ˆå¥½å‡ Péƒ½æ˜¯ï¼‰</a>ï¼‰</p><h3 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="headerlink" title="å†…å®¹åå•†"></a>å†…å®¹åå•†</h3><p>â€œæ ¹æ®å®¢æˆ·ç«¯æ¥å—èƒ½åŠ›ä¸åŒï¼Œè¿”å›ä¸åŒç±»å‹çš„æ•°æ®â€</p><p>è¯´äººè¯å°±æ˜¯ï¼Œå½“ç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œspringä¼šè‡ªåŠ¨è½¬æ¢ç±»å‹ï¼Œæ¯”å¦‚ç»™æµè§ˆå™¨ç«¯è¿”å›jsonï¼Œç»™å®‰å“ç«¯è¿”å›xml</p><p>å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œ<strong>è¯·æ±‚å¤´</strong>Headersé‡Œçš„<strong>Acceptå­—æ®µ</strong>ä¼šå‘Šè¯‰åç«¯ï¼Œå®¢æˆ·ç«¯èƒ½æ¥æ”¶ä»€ä¹ˆç±»å‹çš„æ•°æ®</p><p>æ¯”å¦‚ï¼Œä¹‹å‰å†™å¾®ä¿¡å°ç¨‹åºçš„æ—¶å€™ï¼ˆè™½ç„¶ç°åœ¨ä¹Ÿè¦å†™ï¼‰wx.requesté‡Œé¢é‚£å¥<code>application/json</code>å°±æ˜¯</p><p>ä¸è¿‡ï¼Œè¦æ”¯æŒxmlè½¬æ¢ï¼Œå¾—å¯¼ä¸€ä¸‹åŒ…ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¼€å‘ä¸­ä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">contentnegotiation:</span><br>    <span class="hljs-attr">favor-parameter:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment">#å¼€å¯è¯·æ±‚å‚æ•°å†…å®¹åå•†æ¨¡å¼</span><br></code></pre></td></tr></table></figure><p>ä¹‹åï¼Œå¸¦ä¸Šformat=jsonè¿™ç±»çš„å‚æ•°å°±è¡Œäº†</p><p>ï¼ˆè¿˜æ˜¯ä¸€å¤§æ®µå†…å®¹åå•†çš„æºç ï¼Œå…ˆè·³äº†ï¼‰</p><h4 id="è‡ªå®šä¹‰MessageConverter"><a href="#è‡ªå®šä¹‰MessageConverter" class="headerlink" title="è‡ªå®šä¹‰MessageConverter"></a>è‡ªå®šä¹‰MessageConverter</h4><p>ç”±ä¸Šé¢æºç åˆ†æå¯ä»¥çŸ¥é“ï¼Œè‡ªåŠ¨å†…å®¹åå•†å’ŒMessageConverteræœ‰å…³</p><p>å¤ä¹ ä¸€ä¸‹SSMçŸ¥è¯†ï¼š<code>@ResponseBody</code>æ„å‘³ç€æ–¹æ³•ä¸è¿›è¡Œé¡µé¢è·³è½¬ï¼Œç›´æ¥è¿›è¡Œå“åº”ï¼Œå“åº”æ—¶ä¼šè°ƒç”¨è¿”å›å€¼å¤„ç†å™¨é‡Œçš„MessageConverterè¿›è¡Œå¤„ç†</p><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=41">æ¬¸å˜¿</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³IDEAç¼ºå°‘jspã€Springç­‰ç›¸å…³æç¤ºçš„é—®é¢˜</title>
    <link href="/2021/10/03/%E8%A7%A3%E5%86%B3IDEA%E7%BC%BA%E5%B0%91jsp%E3%80%81Spring%E7%AD%89%E7%9B%B8%E5%85%B3%E6%8F%90%E7%A4%BA%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2021/10/03/%E8%A7%A3%E5%86%B3IDEA%E7%BC%BA%E5%B0%91jsp%E3%80%81Spring%E7%AD%89%E7%9B%B8%E5%85%B3%E6%8F%90%E7%A4%BA%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id=""><a href="#" class="headerlink" title="."></a>.</h1><p>æ¯”å¦‚è¦æ–°å»ºä¸€ä¸ªjspï¼Œå´å‘ç°å³é”®webappç›®å½•åæ²¡æœ‰jspæ¨¡æ¿ï¼Œæˆ–è€…å¹²è„†æ²¡æœ‰webappç›®å½•</p><p>å†æ¯”å¦‚æ–°å»ºSpringçš„xmlå´æ‰¾ä¸åˆ°æ¨¡æ¿</p><p>æ–‡ä»¶-é¡¹ç›®ç»“æ„-æ·»åŠ ï¼Œ ç¼ºå•¥åŠ å•¥</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.65d2nqg93ao.png" alt="image"></p><p>æ¯”å¦‚æ²¡æœ‰webappç›®å½•æˆ–è€…ä¸å«webappï¼Œå°±è‡ªå·±æ”¹ä¸€ä¸‹ï¼Œæœ‰æ—¶å€™è¿˜éœ€è¦é…ç½®ä¸€ä¸‹ä¸‹é¢çš„å¦ä¸€ä¸ªç›®å½•ï¼ˆå›¾é‡ŒæŒ¡ä½äº†ï¼‰</p><p>ä¹‹åå°±èƒ½åœ¨è¿™é‡Œæ–°å»ºjspäº†</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.4hqs7bw9yp40.png" alt="image"></p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/Quantum_Dog/article/details/88848624">(10æ¡æ¶ˆæ¯) é¡¹ç›®æ­£å¸¸å´æŠ¥No Spring WebApplicationInitializer types detected on classpath_Quantum_Dogçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/czc9309/article/details/80304074?utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">(10æ¡æ¶ˆæ¯) IntelliJ IDEAåˆ›å»ºmaven webé¡¹ç›®ï¼ˆIDEAæ–°æ‰‹é€‚ç”¨ï¼‰_czc9309çš„åšå®¢-CSDNåšå®¢_ideaåˆ›å»ºmaven webé¡¹ç›®</a></p><h1 id="æˆ‘çœŸæ˜¯è¢«è‡ªå·±åˆ›å»ºwebé¡¹ç›®æå¾—å¤Ÿå¤Ÿçš„äº†ï¼Œä»¥ååªä»æ¨¡æ¿å¯¼å…¥"><a href="#æˆ‘çœŸæ˜¯è¢«è‡ªå·±åˆ›å»ºwebé¡¹ç›®æå¾—å¤Ÿå¤Ÿçš„äº†ï¼Œä»¥ååªä»æ¨¡æ¿å¯¼å…¥" class="headerlink" title="æˆ‘çœŸæ˜¯è¢«è‡ªå·±åˆ›å»ºwebé¡¹ç›®æå¾—å¤Ÿå¤Ÿçš„äº†ï¼Œä»¥ååªä»æ¨¡æ¿å¯¼å…¥"></a>æˆ‘çœŸæ˜¯è¢«è‡ªå·±åˆ›å»ºwebé¡¹ç›®æå¾—å¤Ÿå¤Ÿçš„äº†ï¼Œä»¥ååªä»æ¨¡æ¿å¯¼å…¥</h1><p>å¯¼å…¥ä¹‹åå¦‚æœä»åˆ«çš„å•¥åœ°æ–¹å¤åˆ¶æ¥comå’Œresourcesï¼Œè®°å¾—æ ‡è®°ä¸€ä¸‹æ–‡ä»¶å¤¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/Other/image.7bykvxrmtz00.png" alt="image"></p><p>ç„¶åæ¨¡æ¿ç”Ÿæˆé‚£ä¸ªindex.jspï¼Œé»˜è®¤æ˜¯ä¸å¼€å¯elçš„ï¼ˆå°±æ˜¯é‚£ä¸ª<code>$&#123; &#125;</code>ï¼‰ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œæˆ‘ä»¬æ‰‹åŠ¨åŠ ä¸Šä¸€è¡Œï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<span class="hljs-meta">@page</span> isELIgnored=<span class="hljs-string">&quot;false&quot;</span>%&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>æ‚é¡¹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SSMå­¦ä¹ ç¬”è®°2</title>
    <link href="/2021/10/03/SSM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/"/>
    <url>/2021/10/03/SSM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/</url>
    
    <content type="html"><![CDATA[<h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><p>å¼€å§‹ä¹‹å‰å…ˆæ¥ç‚¹é˜¶æ®µæ€§çš„ä¸œè¥¿</p><blockquote><p>é¡¹ç›®åŒ…é‡Œï¼Œä¸»è¦æœ‰controllerï¼ˆwebï¼‰ã€daoã€domainï¼ˆæˆ–POJOï¼Œå­˜å®ä½“ç”¨ï¼‰ã€serviceã€utilsï¼ˆå·¥å…·ç±»ï¼‰</p><p>å†å°±æ˜¯ä¸¤ä¸ªåˆ»åœ¨DNAé‡Œçš„xmlæ¨¡æ¿ï¼šspring-mvc.xmlå’Œweb.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml">&gt;<span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br>&gt;<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- mvcæ³¨è§£é©±åŠ¨ --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>/&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- å¼€æ”¾é™æ€èµ„æº --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>/&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- ç»„ä»¶æ‰«æController --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.aster.controller&quot;</span>/&gt;</span><br><br>&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs xml">&gt;<span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br>&gt;<span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- å…¨å±€çš„åˆå§‹åŒ–å‚æ•°ï¼ˆç”¨ä¸åˆ°çš„è¯ä¸ç”¨å†™ï¼SSMç¬”è®°1l --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- Springçš„ç›‘å¬å™¨ --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!--  é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨  --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>       <span class="hljs-comment">&lt;!--  é…ç½®MVCçš„é…ç½®æ–‡ä»¶çš„ä½ç½®  --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>       <span class="hljs-comment">&lt;!--  æœåŠ¡å™¨å¯åŠ¨æ—¶å°±åŠ è½½DispatcherServlet  --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>       <span class="hljs-comment">&lt;!-- é…ç½®ç¼ºçœâ€œ / â€æ„å‘³ç€æ‰€æœ‰è¯·æ±‚éƒ½æ‰¾DispatcherServlet --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br>&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure></blockquote><h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h2><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>MVCçš„æ‹¦æˆªå™¨Intercepterç±»ä¼¼äºServletå¼€å‘ä¸­çš„è¿‡æ»¤å™¨Filterï¼Œç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œ<strong>é¢„å¤„ç†</strong>å’Œ<strong>åå¤„ç†</strong></p><p>å°†æ‹¦æˆªå™¨æŒ‰ç…§ä¸€å®šçš„é¡ºåºè¿æ¥æˆä¸€æ¡é“¾ï¼Œå°±æ˜¯<strong>æ‹¦æˆªå™¨é“¾</strong>ã€‚åœ¨è®¿é—®è¢«æ‹¦æˆªçš„æ–¹æ³•æˆ–å­—æ®µæ—¶ï¼Œæ‹¦æˆªå™¨é“¾ä¸­çš„æ‹¦æˆªå™¨å°±ä¼šæŒ‰ç…§ä¹‹å‰å®šä¹‰çš„é¡ºåºè¿›è¡Œè°ƒç”¨</p><p>ï¼ˆps æ‹¦æˆªå™¨æ˜¯AOPæ€æƒ³çš„å…·ä½“å®ç°ï¼‰</p><h3 id="æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«"><a href="#æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«" class="headerlink" title="æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«"></a>æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.3a1173jbnhw0.png" alt="image"></p><h3 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h3><p>è‡ªå®šä¹‰æ‹¦æˆªå™¨çš„æ­¥éª¤ï¼š</p><ol><li>åˆ›å»ºæ‹¦æˆªå™¨ï¼Œå®ç°HandlerInterceptoræ¥å£</li><li>é…ç½®æ‹¦æˆªå™¨</li><li>æµ‹è¯•æ‹¦æˆªæ•ˆæœï¼ˆemmï¼Œè¿™ä¹Ÿèƒ½ç®—ä¸€æ­¥ï¼Ÿï¼‰</li></ol><p>å…ˆå¿«é€Ÿå»ºç«‹ä¸€ä¸ªæµ‹è¯•é¡¹ç›®å§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.controller;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TargetController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/target&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">show</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç›®æ ‡èµ„æºæ‰§è¡Œâ€¦â€¦&quot;</span>);<br>        ModelAndView modelAndView = <span class="hljs-keyword">new</span> ModelAndView();<br>        modelAndView.addObject(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;aster&quot;</span>);<br>        modelAndView.setViewName(<span class="hljs-string">&quot;index&quot;</span>);<br>        <span class="hljs-keyword">return</span> modelAndView;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<span class="hljs-meta">@page</span> isELIgnored=<span class="hljs-string">&quot;false&quot;</span>%&gt;<br>&lt;html&gt;<br>&lt;body&gt;<br>&lt;h2&gt;Hello World! $&#123;name&#125;&lt;/h2&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>æ˜¾ç„¶ï¼Œè®¿é—®<code>http://localhost:8080/fucku_war_exploded/target</code>æ—¶ä¼šè¾“å‡º<code>Hello World! aster</code></p><blockquote><p>ä¸è¦åœ¨æ„è¿™ä¸ªå¥‡æ€ªçš„é¡¹ç›®åâ€¦â€¦å½“æ—¶é‡åˆ°äº†ä¸€ä¸ªæœªè§£bugâ€¦â€¦</p></blockquote><p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªæ‹¦æˆªå™¨ï¼ˆspring-mvc.xmlï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;<br>   &lt;mvc:interceptors&gt;<br>       &lt;mvc:interceptor&gt;<br>           &lt;!-- é…ç½®å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ --&gt;<br>           &lt;!-- <span class="hljs-comment">/** ï¼š å…¨éƒ½æ‹¦æˆª --&gt;</span><br><span class="hljs-comment">           &lt;mvc:mapping path=&quot;/**&quot;/&gt;</span><br><span class="hljs-comment">           &lt;bean class=&quot;com.aster.interceptor.MyInterceptor1&quot;/&gt;</span><br><span class="hljs-comment">       &lt;/mvc:interceptor&gt;</span><br><span class="hljs-comment">   &lt;/mvc:interceptors&gt;</span><br></code></pre></td></tr></table></figure><p>å†æ¬¡å‘å¸ƒï¼Œå‘ç°é¡µé¢<strong>ä¸€ç‰‡ç©ºç™½</strong>ï¼Œæ§åˆ¶å°åªè¾“å‡ºäº†<code>preHandle...</code>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.7lcwhnuwdao0.png" alt="image"></p><p>æ˜¾ç„¶ï¼Œè¿™æ˜¯å› ä¸º<strong>preHandleè¿”å›äº†false</strong></p><p>æ”¹ä¸ºtrueåè¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">preHandle</span></span>...<br>ç›®æ ‡èµ„æºæ‰§è¡Œâ€¦â€¦<br><span class="hljs-function"><span class="hljs-title">postHandle</span></span>...<br><span class="hljs-function"><span class="hljs-title">afterCompletion</span></span>...<br></code></pre></td></tr></table></figure><h4 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h4><p>ä¿®æ”¹ä¸€ä¸‹preHandleï¼Œå‡å¦‚è¯·æ±‚é‡Œæœ‰ä¸€ä¸ªå‚æ•°æ˜¯keyï¼Œåªæœ‰å­˜åœ¨è¿™ä¸ªå‚æ•°ä¸”key=16ï¼Œæˆ‘ä»¬æ‰ç»§ç»­ï¼Œå¦åˆ™<strong>é‡å®šå‘</strong>åˆ°é”™è¯¯è§†å›¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;preHandle...&quot;</span>);<br>    String user = request.getParameter(<span class="hljs-string">&quot;user&quot;</span>);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;aster&quot;</span>.equals(user)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/error.jsp&quot;</span>).forward(request, response);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.2igwrakcwo40.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.5k0oskeiryo0.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.1gvwz80pzo8w.png" alt="image"></p><p>ä¸Šé¢çš„TargetControlleré‡Œï¼Œæœ‰è¿™ä¸€å¥è¯ï¼š<code>modelAndView.addObject(&quot;name&quot;, &quot;aster&quot;);</code></p><p>æˆ‘ä»¬å¯ä»¥åœ¨<strong>postHandle</strong>é‡Œè¿›è¡Œ<strong>ã€Šç‰›å¤´äººè¡Œä¸ºã€‹</strong>ï¼ŒæŠŠmodelAndViewçš„nameæ”¹æˆlotusï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">postHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;postHandle...&quot;</span>);<br>    modelAndView.addObject(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;lotus&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.19ypbyjaynb4.png" alt="image"></p><h4 id="æ‹¦æˆªå™¨é“¾"><a href="#æ‹¦æˆªå™¨é“¾" class="headerlink" title="æ‹¦æˆªå™¨é“¾"></a>æ‹¦æˆªå™¨é“¾</h4><p>æˆ‘ä»¬å†ç®€å•å†™ä¸€ä¸ªç›´æ¥æ”¾è¡Œçš„åªæœ‰è¾“å‡ºçš„MyInterceptor2ï¼Œç„¶ååœ¨spring-mvc.xmlé‡Œé…ç½®ä¸Šï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptors</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- é…ç½®å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- /** ï¼š å…¨éƒ½æ‹¦æˆª --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/**&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.interceptor.MyInterceptor1&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/**&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.interceptor.MyInterceptor2&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptors</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å†æ¬¡å‘å¸ƒï¼Œæ§åˆ¶å°è¾“å‡ºï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">preHandle</span></span>...<br><span class="hljs-function"><span class="hljs-title">preHandle222222</span></span>...<br>ç›®æ ‡èµ„æºæ‰§è¡Œâ€¦â€¦<br><span class="hljs-function"><span class="hljs-title">postHandle222222</span></span>...<br><span class="hljs-function"><span class="hljs-title">postHandle</span></span>...<br><span class="hljs-function"><span class="hljs-title">afterCompletion222222</span></span>...<br><span class="hljs-function"><span class="hljs-title">afterCompletion</span></span>...<br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„è¾“å‡ºï¼Œå°±å¯ä»¥çœ‹å‡ºæ‹¦æˆªå™¨é“¾çš„é¡ºåºå•¦</p><h2 id="å¼‚å¸¸å¤„ç†æœºåˆ¶"><a href="#å¼‚å¸¸å¤„ç†æœºåˆ¶" class="headerlink" title="å¼‚å¸¸å¤„ç†æœºåˆ¶"></a>å¼‚å¸¸å¤„ç†æœºåˆ¶</h2><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=116">æš‚ç•¥</a></p><h1 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h1><p><strong>A</strong>spect <strong>O</strong>riented <strong>P</strong>rogrammingï¼Œ<strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼Œæ˜¯â€œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯â€</p><p>å…³é”®è¯ï¼šç”Ÿæ•ˆäº<strong>è¿è¡ŒæœŸé—´</strong>ï¼Œåº•å±‚æŠ€æœ¯æ˜¯<strong>åŠ¨æ€ä»£ç†</strong></p><p>åŠ¨æ€ä»£ç†èƒ½åœ¨ä¸ä¿®æ”¹æºç çš„å‰æä¸‹ï¼Œå¯¹ç›®æ ‡æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œå®ç°ç¨‹åºåŠŸèƒ½é—´çš„æ¾è€¦åˆ</p><p>é‚£ä¹ˆï¼Œ AOPè‡ªç„¶ä¹Ÿèƒ½ï¼›AOPå‡å°‘äº†é‡å¤ä»£ç ã€æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºç»´æŠ¤</p><blockquote><p>ç²—ç•¥ç†è§£â€œåˆ‡é¢â€ï¼šç›®æ ‡æ–¹æ³• + ç›®æ ‡çš„å¢å¼ºæ–¹æ³•</p></blockquote><h2 id="åº•å±‚å®ç°"><a href="#åº•å±‚å®ç°" class="headerlink" title="åº•å±‚å®ç°"></a>åº•å±‚å®ç°</h2><p><strong>åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼š</strong>åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼ŒåŠ¨æ€ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œåœ¨ä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œè¿›è¡ŒåŠŸèƒ½å¢å¼ºçš„ä»‹å…¥ï¼Œå†å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</p><p>å¸¸ç”¨çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼š</p><ul><li>JDKä»£ç†ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†æŠ€æœ¯</li><li>cglibä»£ç†ï¼šåŸºäºçˆ¶ç±»çš„åŠ¨æ€ä»£ç†æŠ€æœ¯</li></ul><p>ï¼ˆç›®æ ‡å¯¹è±¡æœ‰æ¥å£ç”¨JDKï¼Œæ²¡æ¥å£ç”¨cglibï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.4t90rv4jzcw0.png" alt="image"></p><p>ä¸‹é¢ï¼Œå†™ä¸€ç‚¹ä»£ç æ¥åŠ æ·±å¯¹è¿™å¼ å›¾çš„ç†è§£</p><h3 id="JDKåŠ¨æ€ä»£ç†"><a href="#JDKåŠ¨æ€ä»£ç†" class="headerlink" title="JDKåŠ¨æ€ä»£ç†"></a>JDKåŠ¨æ€ä»£ç†</h3><p>è€æ ·å­ï¼Œå»ºä¸€ä¸ªwebé¡¹ç›®</p><p>ï¼ˆè™½ç„¶å¢å¼ºè²Œä¼¼ç”¨enhanceæˆ–è€…advanceå¬èµ·æ¥æ›´æ­£ç»ä¸€ç‚¹ï¼Œä½†åœ¨springé‡Œè¿™ç§ç±»ä¼¼äºå¢å¼ºçš„ä¸œè¥¿ç¡®å®è¢«å«åšadviceâ€¦â€¦ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.proxy.jdk;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">TargetInterface</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.proxy.jdk;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Target</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TargetInterface</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;save running...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.proxy.jdk;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Advice</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‰ç½®å¢å¼ºâ€¦â€¦&quot;</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterReturning</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;åç½®å¢å¼ºâ€¦â€¦&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.proxy.jdk;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br><span class="hljs-comment">// åˆ›å»ºç›®æ ‡å¯¹è±¡</span><br>        <span class="hljs-keyword">final</span> Target target = <span class="hljs-keyword">new</span> Target();<br><br>        <span class="hljs-comment">// æ­¤æ–¹æ³•çš„è¿”å›å€¼æ˜¯åŠ¨æ€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡</span><br>        <span class="hljs-comment">// å› ä¸ºæ˜¯åŸºäºæ¥å£çš„ï¼Œæ‰€ä»¥è¦ç”¨æ¥å£æ¥æ¥è¿”å›å€¼</span><br>        TargetInterface proxy = (TargetInterface) Proxy.newProxyInstance(<br>                <span class="hljs-comment">//ç›®æ ‡å¯¹è±¡çš„ç±»åŠ è½½å™¨</span><br>                target.getClass().getClassLoader(),<br>                <span class="hljs-comment">// ä¸ç›®æ ‡å¯¹è±¡ç›¸åŒçš„æ¥å£çš„å­—èŠ‚ç å¯¹è±¡ çš„æ•°ç»„</span><br>                <span class="hljs-comment">// ä¹‹æ‰€ä»¥æ˜¯æ•°ç»„ï¼Œæ˜¯å› ä¸ºjavaæ˜¯å•ç»§æ‰¿ä½†å¤šå®ç°çš„ï¼Œç›®æ ‡å¯¹è±¡å¯èƒ½å®ç°äº†å¤šä¸ªæ¥å£ï¼ˆï¼Ÿï¼‰</span><br>                target.getClass().getInterfaces(),<br>                <span class="hljs-keyword">new</span> InvocationHandler() &#123;<br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-comment">// è°ƒç”¨ä»£ç†å¯¹è±¡çš„ä»»ä½•æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯invoke</span><br>                    <span class="hljs-comment">// (ä»£ç†å¯¹è±¡, ç›®æ ‡æ–¹æ³•, å‚æ•°)</span><br>                    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>                        <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br>                        <span class="hljs-comment">// è¿™é‡Œçš„invokeä¸æ˜¯ä¸Šé¢çš„invokeï¼Œæ˜¯ç›®æ ‡æ–¹æ³•çš„invoke</span><br>                        method.invoke(target, args);<br>                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>                    &#125;<br>                &#125;<br>        );<br><br>        <span class="hljs-comment">// è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•</span><br>        proxy.save();<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œåï¼Œæ§åˆ¶å°è¾“å‡ºäº†<code>save running...</code></p><p>é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦<strong>å¯¹ç›®æ ‡è¿›è¡Œå¢å¼º</strong>äº†ï¼š</p><p>ï¼ˆå…¶å®ä¸æ˜¯å¾ˆæ‡‚ï¼Œä½†ä¸æ‡‚å°±ä¸æ‡‚å§ï¼Œå“¼ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.proxy.jdk;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>        <span class="hljs-comment">// åˆ›å»ºç›®æ ‡å¯¹è±¡</span><br>        <span class="hljs-keyword">final</span> Target target = <span class="hljs-keyword">new</span> Target();<br><br>        <span class="hljs-comment">// å¢å¼ºå¯¹è±¡</span><br>        <span class="hljs-keyword">final</span> Advice advice = <span class="hljs-keyword">new</span> Advice();<br><br>        <span class="hljs-comment">// æ­¤æ–¹æ³•çš„è¿”å›å€¼æ˜¯åŠ¨æ€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡</span><br>        <span class="hljs-comment">// å› ä¸ºæ˜¯åŸºäºæ¥å£çš„ï¼Œæ‰€ä»¥è¦ç”¨æ¥å£æ¥æ¥è¿”å›å€¼</span><br>        TargetInterface proxy = (TargetInterface) Proxy.newProxyInstance(<br>                <span class="hljs-comment">//ç›®æ ‡å¯¹è±¡çš„ç±»åŠ è½½å™¨</span><br>                target.getClass().getClassLoader(),<br>                <span class="hljs-comment">// ä¸ç›®æ ‡å¯¹è±¡ç›¸åŒçš„æ¥å£çš„å­—èŠ‚ç å¯¹è±¡ çš„æ•°ç»„</span><br>                <span class="hljs-comment">// ä¹‹æ‰€ä»¥æ˜¯æ•°ç»„ï¼Œæ˜¯å› ä¸ºjavaæ˜¯å•ç»§æ‰¿ä½†å¤šå®ç°çš„ï¼Œç›®æ ‡å¯¹è±¡å¯èƒ½å®ç°äº†å¤šä¸ªæ¥å£ï¼ˆï¼Ÿï¼‰</span><br>                target.getClass().getInterfaces(),<br>                <span class="hljs-keyword">new</span> InvocationHandler() &#123;<br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-comment">// è°ƒç”¨ä»£ç†å¯¹è±¡çš„ä»»ä½•æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯invoke</span><br>                    <span class="hljs-comment">// (ä»£ç†å¯¹è±¡, ç›®æ ‡æ–¹æ³•, å‚æ•°)</span><br>                    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>                        advice.before(); <span class="hljs-comment">// å‰ç½®å¢å¼º</span><br>                        <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br>                        <span class="hljs-comment">// è¿™é‡Œçš„invokeä¸æ˜¯ä¸Šé¢çš„invokeï¼Œæ˜¯ç›®æ ‡æ–¹æ³•çš„invoke</span><br>                        Object invoke = method.invoke(target, args);<br>                        advice.afterReturning(); <span class="hljs-comment">// åç½®å¢å¼º</span><br>                        <span class="hljs-keyword">return</span> invoke;<br>                    &#125;<br>                &#125;<br>        );<br><br>        <span class="hljs-comment">// è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•</span><br>        proxy.save();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gams">å‰ç½®å¢å¼ºâ€¦â€¦<br><span class="hljs-function"><span class="hljs-title">save</span></span> running...<br>åç½®å¢å¼ºâ€¦â€¦<br></code></pre></td></tr></table></figure><h3 id="cglibåŠ¨æ€ä»£ç†"><a href="#cglibåŠ¨æ€ä»£ç†" class="headerlink" title="cglibåŠ¨æ€ä»£ç†"></a>cglibåŠ¨æ€ä»£ç†</h3><p>è€å¸ˆè¯´ï¼Œæš‚æ—¶ä¸ç”¨æŒæ¡ï¼Œé‚£æˆ‘ç”©ä¸ª<a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=125">é“¾æ¥</a></p><h2 id="AOPç›¸å…³æ¦‚å¿µ"><a href="#AOPç›¸å…³æ¦‚å¿µ" class="headerlink" title="AOPç›¸å…³æ¦‚å¿µ"></a>AOPç›¸å…³æ¦‚å¿µ</h2><ul><li><p>Targetï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡</p></li><li><p>Proxyï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºåï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»</p></li><li><p>Joinpointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šæŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ï¼›springåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼Œå³springä¸­çš„Joinpointå°±æ˜¯<strong>å¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³•</strong></p></li><li><p><strong>Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰</strong>ï¼šæŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº›Joinpointè¿›è¡Œæ‹¦æˆªï¼ˆ<strong>è¿æ¥ç‚¹æ˜¯å¯ä»¥è¢«å¢å¼ºï¼Œåˆ‡å…¥ç‚¹æ˜¯çœŸçš„è¢«å¢å¼ºäº†</strong>ï¼‰</p></li><li><p><strong>Adviceï¼ˆé€šçŸ¥/å¢å¼ºï¼‰</strong>ï¼šæŒ‡æ‹¦æˆªåˆ°Joinpointåæ‰€è¦æ‰§è¡Œçš„æ–¹æ³•</p></li><li><p><strong>Aspectï¼ˆåˆ‡é¢ï¼‰</strong>ï¼šç›®æ ‡æ–¹æ³• + å¢å¼º / åˆ‡å…¥ç‚¹ + é€šçŸ¥</p></li><li><p><strong>Weavingï¼ˆç»‡å…¥ï¼‰</strong>ï¼šæŒ‡<strong>æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡</strong>æ¥åˆ›å»º<strong>æ–°çš„ä»£ç†å¯¹è±¡</strong>çš„<strong>è¿‡ç¨‹</strong>ï¼›springé‡‡ç”¨åŠ¨æ€ä»£ç†ç»‡å…¥ï¼Œaspectjé™æ€</p></li></ul><h2 id="AOPå¼€å‘éœ€æ˜ç¡®çš„äº‹é¡¹"><a href="#AOPå¼€å‘éœ€æ˜ç¡®çš„äº‹é¡¹" class="headerlink" title="AOPå¼€å‘éœ€æ˜ç¡®çš„äº‹é¡¹"></a>AOPå¼€å‘éœ€æ˜ç¡®çš„äº‹é¡¹</h2><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.4wlqkxdsx1q0.png" alt="image"></p><p>ï¼ˆæƒ³ä¸åˆ°å§ï¼ŒspringåˆåŒå’å•å°è£…å¥½äº†ï¼›æ‰€ä»¥ä¹‹å‰é‚£äº›ä¸æ‡‚å½±å“ä¸æ˜¯å¾ˆå¤§ï¼ˆé€ƒï¼‰ï¼‰</p><h2 id="åŸºäºXMLçš„AOPå¼€å‘"><a href="#åŸºäºXMLçš„AOPå¼€å‘" class="headerlink" title="åŸºäºXMLçš„AOPå¼€å‘"></a>åŸºäºXMLçš„AOPå¼€å‘</h2><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li>å¯¼åæ ‡</li><li>åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…å«åˆ‡ç‚¹ï¼‰</li><li>åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…å«å¢å¼ºæ–¹æ³•ï¼‰</li><li>å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring</li><li>åœ¨applicationContext.xmlä¸­é…ç½®ç»‡å…¥å…³ç³»</li><li>æµ‹è¯•</li></ol><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>aspectjæ˜¯ä¸€ä¸ªé…ç½®aopçš„æ¡†æ¶ï¼Œè™½ç„¶springä¹Ÿèƒ½ï¼Œä½†aspectjæ›´æ–¹ä¾¿ä¸€äº›ï¼ˆå¹¶ä¸”springæ¨èç”¨aspectjâ€¦â€¦ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.0.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.aspectj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectjweaver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.8.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ä¸€ä¸ªæ€æƒ³ï¼š</strong>ä½ å¾—åœ¨Springçš„å®¹å™¨é‡Œï¼Œæ‰å¥½è®©Springå¸®ä½ åšäº‹ï¼Œæ‰€ä»¥è¦æŠŠä¸œè¥¿éƒ½ç»™é…è¿›å»</p><p>å¦å¤–ï¼Œåˆ«å¿˜äº†åœ¨xmlçš„beansæ ‡ç­¾é‡Œå¼•å…¥aopï¼ˆè™½ç„¶æˆ‘å‘ç°æ¯æ¬¡IDEAéƒ½ä¼šè‡ªåŠ¨å¸®æˆ‘å¼•å…¥äº†ï¼Œå¥¹çœŸå¥½ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.aop;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">TargetInterface</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">package</span> com.aster.aop;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Target</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TargetInterface</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;save running...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.aop;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAspect</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‰ç½®å¢å¼ºâ€¦â€¦&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;target&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.aop.Target&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- é…ç½®åˆ‡é¢å¯¹è±¡ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myAspect&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.aop.MyAspect&quot;</span>/&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- é…ç½®ç»‡å…¥ï¼Œå‘Šè¯‰springå“ªäº›æ–¹æ³•ï¼ˆåˆ‡ç‚¹ï¼‰éœ€è¦è¿›è¡Œå“ªäº›å¢å¼ºï¼ˆå‰ç½®/åç½®...ï¼‰ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å£°æ˜åˆ‡é¢ï¼Œæœ‰äº†ä¸‹é¢è¿™å¥è¯ï¼Œspringæ‰çŸ¥é“myAspectæ˜¯ä¸€ä¸ªåˆ‡é¢ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;myAspect&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- åˆ‡é¢ = åˆ‡ç‚¹ + é€šçŸ¥ --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut</span>=<span class="hljs-string">&quot;execution(public void com.aster.aop.Target.save())&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é‡ç‚¹åˆ†æä¸€ä¸‹ä¸‹é¢è¿™ä¸€æ®µï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®ç»‡å…¥ï¼Œå‘Šè¯‰springå“ªäº›æ–¹æ³•ï¼ˆåˆ‡ç‚¹ï¼‰éœ€è¦è¿›è¡Œå“ªäº›å¢å¼ºï¼ˆå‰ç½®/åç½®...ï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å£°æ˜åˆ‡é¢ï¼Œæœ‰äº†ä¸‹é¢è¿™å¥è¯ï¼Œspringæ‰çŸ¥é“myAspectæ˜¯ä¸€ä¸ªåˆ‡é¢ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;myAspect&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- åˆ‡é¢ = åˆ‡ç‚¹ + é€šçŸ¥ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut</span>=<span class="hljs-string">&quot;execution(public void com.aster.aop.Target.save())&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ„ä¸ºï¼Œå½“<strong>è°ƒç”¨save()æ–¹æ³•æ—¶</strong>ï¼Œå¯¹äºsave()æ–¹æ³•è¿›è¡Œ<strong>å‰ç½®å¢å¼ºï¼ˆaop:beforeï¼‰</strong>ï¼Œå‰ç½®å¢å¼ºæ‰€<strong>ä½¿ç”¨çš„æ–¹æ³•æ˜¯myAspecté‡Œçš„beforeæ–¹æ³•ï¼ˆmethod=â€beforeâ€ï¼‰</strong>ï¼Œ</p><p>æˆ‘ä»¬å¯¼spring-testå’Œjunitåï¼Œåœ¨testç›®å½•ä¸‹æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.test;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="hljs-meta">@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AopTest</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> TargetInterface target;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span> <span class="hljs-params">()</span> </span>&#123;<br>        target.save();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gams">å‰ç½®å¢å¼ºâ€¦â€¦<br><span class="hljs-function"><span class="hljs-title">save</span></span> running...<br></code></pre></td></tr></table></figure><p><strong>é‡ç‚¹æ¥äº†ï¼å¦‚æœæˆ‘ä»¬æŠŠapplicationContext.xmlä¸­çš„<code>&lt;aop:config&gt;</code>é‚£ä¸€å †æ³¨é‡Šæ‰ï¼Œæ§åˆ¶å°ä¼šåªè¾“å‡º<code>save running...</code></strong></p><p><strong>è¿™æ˜¯ä»€ä¹ˆæ€æƒ³å‘¢ï¼Ÿè§£è€¦åˆï¼</strong></p><h3 id="åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•"><a href="#åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•" class="headerlink" title="åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•"></a>åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•</h3><p><code>execution([ä¿®é¥°ç¬¦]è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°))</code></p><ul><li><p>è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥</p></li><li><p>è¿”å›å€¼ç±»å‹ã€åŒ…åã€ç±»åã€æ–¹æ³•åå¯ä»¥ä½¿ç”¨æ˜Ÿå· ***** ä»£è¡¨ä»»æ„</p></li><li><p>åŒ…åä¸ç±»åä¹‹å‰ä¸€ä¸ªç‚¹ <strong>.</strong> ä»£è¡¨å½“å‰åŒ…ä¸‹çš„ç±»ï¼Œä¸¤ä¸ªç‚¹ <strong>..</strong> ä»£è¡¨å½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç±» </p></li><li><p>å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‚¹ <strong>..</strong> è¡¨ç¤ºä»»æ„ä¸ªæ•°ï¼Œä»»æ„ç±»å‹çš„å‚æ•°åˆ—è¡¨ï¼ˆæ¯”å¦‚æˆ‘æœ‰è®¸å¤šä¸ªsave()ï¼Œå¯èƒ½æœ‰æ— å‚çš„ã€1ä¸ªå‚æ•°çš„ã€2ä¸ªâ€¦â€¦ï¼‰</p></li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">execution</span><span class="hljs-params">(public void com.aster.aop.Target.save()</span></span>)<br><span class="hljs-function"><span class="hljs-title">execution</span><span class="hljs-params">(void com.aster.aop.Target.*(..)</span></span>)<br><span class="hljs-function"><span class="hljs-title">execution</span><span class="hljs-params">(* com.aster.aop.*.*(..)</span></span>)<br><span class="hljs-function"><span class="hljs-title">execution</span><span class="hljs-params">(* com.aster.aop..*.*(..)</span></span>)<br><span class="hljs-function"><span class="hljs-title">execution</span><span class="hljs-params">(* *..*.*(..)</span></span>)<br></code></pre></td></tr></table></figure><h3 id="é€šçŸ¥çš„ç§ç±»"><a href="#é€šçŸ¥çš„ç§ç±»" class="headerlink" title="é€šçŸ¥çš„ç§ç±»"></a>é€šçŸ¥çš„ç§ç±»</h3><h4 id="é€šçŸ¥çš„é…ç½®è¯­æ³•"><a href="#é€šçŸ¥çš„é…ç½®è¯­æ³•" class="headerlink" title="é€šçŸ¥çš„é…ç½®è¯­æ³•"></a>é€šçŸ¥çš„é…ç½®è¯­æ³•</h4><p><code>&lt;aop:é€šçŸ¥ç±»å‹ method=&quot;åˆ‡é¢ç±»ä¸­çš„æ–¹æ³•å&quot; pointcut=&quot;åˆ‡ç‚¹è¡¨è¾¾å¼&quot;&gt;&lt;/aop:é€šçŸ¥ç±»å‹&gt;</code></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.4xden5kcsyo0.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAspect</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‰ç½®å¢å¼º...&quot;</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterReturning</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;åç½®å¢å¼º...&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// ProceedingJoinPointï¼Œæ­£åœ¨æ‰§è¡Œçš„è¿æ¥ç‚¹ï¼Œå³åˆ‡ç‚¹</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">around</span> <span class="hljs-params">(ProceedingJoinPoint pjp)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•å‰å¢å¼º...&quot;</span>);<br>        Object proceed = pjp.proceed();<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•åå¢å¼º&quot;</span>);<br>        <span class="hljs-keyword">return</span> proceed;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®ç»‡å…¥ï¼Œå‘Šè¯‰springå“ªäº›æ–¹æ³•ï¼ˆåˆ‡ç‚¹ï¼‰éœ€è¦è¿›è¡Œå“ªäº›å¢å¼ºï¼ˆå‰ç½®/åç½®...ï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å£°æ˜åˆ‡é¢ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;myAspect&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- åˆ‡é¢ = åˆ‡ç‚¹ + é€šçŸ¥ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut</span>=<span class="hljs-string">&quot;execution(* com.aster.aop.*.*(..))&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-returning</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;afterReturning&quot;</span> <span class="hljs-attr">pointcut</span>=<span class="hljs-string">&quot;execution(* com.aster.aop.*.*(..))&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:around</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;around&quot;</span> <span class="hljs-attr">pointcut</span>=<span class="hljs-string">&quot;execution(* com.aster.aop.*.*(..))&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs erlang">å‰ç½®å¢å¼º...<br>ç¯ç»•å‰å¢å¼º...<br>save running...<br>ç¯ç»•åå¢å¼º<br>åç½®å¢å¼º...<br></code></pre></td></tr></table></figure><h3 id="æŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼"><a href="#æŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼" class="headerlink" title="æŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼"></a>æŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®ç»‡å…¥ï¼Œå‘Šè¯‰springå“ªäº›æ–¹æ³•ï¼ˆåˆ‡ç‚¹ï¼‰éœ€è¦è¿›è¡Œå“ªäº›å¢å¼ºï¼ˆå‰ç½®/åç½®...ï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å£°æ˜åˆ‡é¢ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;myAspect&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myPointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.aster.aop.*.*(..))&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- åˆ‡é¢ = åˆ‡ç‚¹ + é€šçŸ¥ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;myPointcut&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-returning</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;afterReturning&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;myPointcut&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:around</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;around&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;myPointcut&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="åŸºäºæ³¨è§£çš„AOPå¼€å‘"><a href="#åŸºäºæ³¨è§£çš„AOPå¼€å‘" class="headerlink" title="åŸºäºæ³¨è§£çš„AOPå¼€å‘"></a>åŸºäºæ³¨è§£çš„AOPå¼€å‘</h2><h3 id="æ­¥éª¤-1"><a href="#æ­¥éª¤-1" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li>å¯¼åæ ‡</li><li>åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…å«åˆ‡ç‚¹ï¼‰</li><li>åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…å«å¢å¼ºæ–¹æ³•ï¼‰</li><li>å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring</li><li>åœ¨<strong>åˆ‡é¢ç±»</strong>ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³»</li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’Œ<strong>AOPè‡ªåŠ¨ä»£ç†</strong></li><li>æµ‹è¯•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.aop;<br><br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component(&quot;target&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Target</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TargetInterface</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;save running...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.aop;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@Component(&quot;myAspect&quot;)</span><br><span class="hljs-meta">@Aspect</span> <span class="hljs-comment">// å‘Šè¯‰springå½“å‰ç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAspect</span> </span>&#123;<br><br>    <span class="hljs-meta">@Before(&quot;execution(* com.aster.aop.*.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‰ç½®å¢å¼º...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@AfterReturning(&quot;execution(* com.aster.aop.*.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterReturning</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;åç½®å¢å¼º...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Around(&quot;execution(* com.aster.aop.*.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">around</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•å‰å¢å¼º...&quot;</span>);<br>        Object proceed = pjp.proceed();<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•åå¢å¼º&quot;</span>);<br>        <span class="hljs-keyword">return</span> proceed;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml">...<br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.aster.aop&quot;</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- aopè‡ªåŠ¨ä»£ç† --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:aspectj-autoproxy</span>/&gt;</span><br>...<br></code></pre></td></tr></table></figure><h3 id="æŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼-1"><a href="#æŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼-1" class="headerlink" title="æŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼"></a>æŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component(&quot;myAspect&quot;)</span><br><span class="hljs-meta">@Aspect</span> <span class="hljs-comment">// å‘Šè¯‰springå½“å‰ç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAspect</span> </span>&#123;<br><br>    <span class="hljs-meta">@Pointcut(&quot;execution(* com.aster.aop.*.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">myPointcut</span> <span class="hljs-params">()</span> </span>&#123;&#125;<br><br>    <span class="hljs-meta">@Before(&quot;MyAspect.myPointcut()&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‰ç½®å¢å¼º...&quot;</span>);<br>    &#125;<br>    ...<br>&#125;       <br></code></pre></td></tr></table></figure><h1 id="Springçš„äº‹åŠ¡æ§åˆ¶"><a href="#Springçš„äº‹åŠ¡æ§åˆ¶" class="headerlink" title="Springçš„äº‹åŠ¡æ§åˆ¶"></a>Springçš„äº‹åŠ¡æ§åˆ¶</h1><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=136">æ—¶é—´ç´§è¿«ï¼Œå…ˆrunå»åŠè·¯å¼¹å°„èµ·æ­¥å­¦springbootäº†</a></p><h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><p>æƒ³ä¸åˆ°å§ï¼Œæˆ‘åˆrunå›æ¥äº†â€¦â€¦</p><p>å› ä¸ºæ„Ÿè§‰é‚£ä¸ªspringbootçš„è¯¾åé¢å­¦çš„ä¸€äº›ä¸œè¥¿ä¸ä¸€å®šèƒ½ç«‹é©¬ç”¨ä¸Šï¼ˆ<strong>è€Œä¸”åˆéš¾åˆä¹±ï¼ç”Ÿæ°”ï¼</strong>ï¼‰ï¼ŒåŠ ä¸Šåšä¸ªå°é¡¹ç›®å¥½åƒè¿˜ç¡®å®å¾—ä¼šMyBatisï¼ˆä¹‹å‰æœ¬æ¥æ‰“ç®—çº¯å¥—å®Œæ•´æ¨¡æ¿çš„ä½†æ˜¯å‘ç°å®Œæ•´æ¨¡æ¿å®åœ¨æ˜¯å¤ªéš¾äº†æŠ„éƒ½æŠ„ä¸æ˜ç™½æ‰€ä»¥ä¹–ä¹–è‡ªå·±å†™åç«¯ï¼Œè®©å‰ç«¯å»å¥—æ¨¡æ¿å§Orzï¼‰</p><h2 id="åŸå§‹Jdbcæ“ä½œ"><a href="#åŸå§‹Jdbcæ“ä½œ" class="headerlink" title="åŸå§‹Jdbcæ“ä½œ"></a>åŸå§‹Jdbcæ“ä½œ</h2><p><strong>æŸ¥è¯¢æ•°æ®</strong></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.6nhfbvjxnio0.png" alt="image"></p><p><strong>æ’å…¥æ•°æ®</strong></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.ve6oym1rwcw.png" alt="image"></p><p>å¯ä»¥å‘ç°ï¼Œä»£ç æœ‰ä¸å°‘é‡å¤ï¼Œâ‘ åå¤è¿æ¥åˆå…³é—­èŠ±èµ„æºå¤šï¼Œâ‘¡ä¸”SQLè¯­å¥å’Œä»£ç è€¦åˆæ­»äº†ï¼Œâ‘¢æŸ¥è¯¢å’Œæ’å…¥çš„æ—¶å€™ï¼Œè¿˜è¦æ‰‹åŠ¨å¯¹å°è£…æ•°æ®çš„å®ä½“è¿›è¡Œæ“ä½œ</p><p><strong>è§£å†³ï¼š</strong> â‘ æ•°æ®åº“è¿æ¥æ±  â‘¡æŠ½å–SQLè¯­å¥ â‘¢ä»¤å®ä½“ä¸è¡¨è‡ªåŠ¨æ˜ å°„</p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>MyBatisæ˜¯ä¸€ä¸ª<strong>æŒä¹…å±‚ï¼ˆDAOï¼‰</strong>æ¡†æ¶ï¼Œå†…éƒ¨å°è£…äº†jdbc</p><p>é€šè¿‡xml/æ³¨è§£é…ç½®å¥½å„ç§statementï¼ˆSQLæ“ä½œè¯­å¥ï¼‰ï¼Œå¯ä»¥ä¸åŠ¨æ€å‚æ•°è‡ªåŠ¨æ˜ å°„ç”Ÿæˆæœ€ç»ˆçš„SQLè¯­å¥</p><h2 id="å¿«é€Ÿå…¥é—¨-1"><a href="#å¿«é€Ÿå…¥é—¨-1" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><h3 id="æ­¥éª¤-2"><a href="#æ­¥éª¤-2" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><p>ï¼ˆä»¥ç”¨æˆ·ä¸ºä¾‹ï¼‰</p><ol><li>å¯¼åæ ‡</li><li>åˆ›å»ºuserè¡¨</li><li>ç¼–å†™Userå®ä½“ç±»</li><li>ç¼–å†™æ˜ å°„æ–‡ä»¶UserMapper.xml</li><li>ç¼–å†™æ ¸å¿ƒæ–‡ä»¶SqlMapConfig.xml</li><li>ç¼–å†™æµ‹è¯•ç±»</li></ol><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.7g0b1s5aiis0.png" alt="image"></p><p>å› ä¸ºæ˜¯å­¦å®Œï¼ˆbushiï¼‰springbootå›æ¥è¡¥ä¸ŠMyBatisçš„æ‰€ä»¥å°±ä¸å¯¼åæ ‡äº†ï¼ˆé€ƒï¼‰</p><p>åˆ›å»ºå®ä½“ç±»ä¹Ÿä¸å†™äº†ï¼ˆå­¦å®Œspringbootå›æ¥å­¦çœŸå¿«ä¹ï¼Œlombokå¤ªçˆ½äº†å“ˆå“ˆå“ˆï¼ˆè™½ç„¶å¥½åƒå’Œbootæ²¡å•¥å…³ç³»ï¼‰ï¼‰</p><h4 id="ç¼–å†™xml"><a href="#ç¼–å†™xml" class="headerlink" title="ç¼–å†™xml"></a>ç¼–å†™xml</h4><h5 id="UserMapper-xml"><a href="#UserMapper-xml" class="headerlink" title="UserMapper.xml"></a>UserMapper.xml</h5><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ˜ å°„æ–‡ä»¶å’Œè¢«æ˜ å°„çš„å®ä½“ç›®å½•ç›¸åŒï¼ˆä¸è¦åœ¨æ„çº¢çº¿ï¼‰</p><blockquote><p>ps IDEAé‡Œåˆ›å»ºå¤šçº§ç›®å½•æ—¶ç”¨ / åˆ†å¼€</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.4jb089xg9820.png" alt="image"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;userMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.aster.domain.User&quot;</span>&gt;</span><br>        select * from user;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="SqlMapperConfig-xml"><a href="#SqlMapperConfig-xml" class="headerlink" title="SqlMapperConfig.xml"></a>SqlMapperConfig.xml</h5><p>ä¸€èˆ¬æ”¾åœ¨resourcesæ ¹ç›®å½•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- é…ç½®æ•°æ®æºç¯å¢ƒ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- ä½¿ç”¨JDBCåŸç”Ÿçš„äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span> <span class="hljs-comment">&lt;!-- æ± åŒ– --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- åŠ è½½æ˜ å°„å…³ç³» --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/aster/mapper/UserMapper.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="ç¼–å†™æµ‹è¯•ä»£ç "><a href="#ç¼–å†™æµ‹è¯•ä»£ç " class="headerlink" title="ç¼–å†™æµ‹è¯•ä»£ç "></a>ç¼–å†™æµ‹è¯•ä»£ç </h4><p>ï¼ˆç„¶åæˆ‘å‘ç°å¥½åƒspringbootæ²¡å¯¼å¥½ï¼Œè¿˜å¾—å¯¼ä¸€ä¸‹åæ ‡Orzï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.test;<br><br><span class="hljs-keyword">import</span> com.aster.domain.User;<br><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">// è·å¾—æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆè¿™ä¸ªResourcesæ˜¯ibatisçš„åˆ«å¯¼é”™äº†ï¼‰</span><br>        InputStream resourceAsStream = Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>        <span class="hljs-comment">// è·å¾—sessionå·¥å‚å¯¹è±¡</span><br>        SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);<br>        <span class="hljs-comment">// è·å¾—sessionä¼šè¯å¯¹è±¡</span><br>        SqlSession sqlSession = sqlSessionFactory.openSession();<br>        <span class="hljs-comment">// æ‰§è¡Œæ“ä½œ å‚æ•°ï¼šnamespace + id</span><br>        List&lt;User&gt; userList = sqlSession.selectList(<span class="hljs-string">&quot;userMapper.findAll&quot;</span>);<br>        <span class="hljs-comment">// æ‰“å°æ•°æ®</span><br>        System.out.println(userList);<br>        <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span><br>        sqlSession.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸è¿‡è²Œä¼¼å› ä¸ºç‰ˆæœ¬é—®é¢˜æŠ¥é”™äº†ï¼Œä½†æ˜¯æˆ‘ä¹Ÿä¸æ‰“ç®—æ’æŸ¥äº†ï¼Œæ¯•ç«Ÿæœ‰springboot</p><h2 id="æ˜ å°„æ–‡ä»¶æ¦‚è¿°"><a href="#æ˜ å°„æ–‡ä»¶æ¦‚è¿°" class="headerlink" title="æ˜ å°„æ–‡ä»¶æ¦‚è¿°"></a>æ˜ å°„æ–‡ä»¶æ¦‚è¿°</h2><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.5ss9kjdr98g0.png" alt="image"></p><h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><p>ä»¥æ’å…¥ä¸ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;userMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insert&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.aster.domain.User&quot;</span>&gt;</span><br>        insert into user values(#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.aster.domain.User&quot;</span>&gt;</span><br>        select * from user;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br><br>        User user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;aster&quot;</span>, <span class="hljs-string">&quot;000000&quot;</span>); <span class="hljs-comment">// &lt;--</span><br><br>        <span class="hljs-comment">// è·å¾—æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆè¿™ä¸ªResourcesæ˜¯ibatisçš„åˆ«å¯¼é”™äº†ï¼‰</span><br>        InputStream resourceAsStream = Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>        <span class="hljs-comment">// è·å¾—sessionå·¥å‚å¯¹è±¡</span><br>        SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);<br>        <span class="hljs-comment">// è·å¾—sessionä¼šè¯å¯¹è±¡</span><br>        SqlSession sqlSession = sqlSessionFactory.openSession();<br><br>        <span class="hljs-comment">// æ‰§è¡Œæ“ä½œ å‚æ•°ï¼šnamespace + id</span><br>        sqlSession.insert(<span class="hljs-string">&quot;userMapper.insert&quot;</span>, user); <span class="hljs-comment">// &lt;--</span><br><br>        <span class="hljs-comment">// MyBatisä¸ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼éœ€è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡æ¥æ›´æ–°è¡¨</span><br>        sqlSession.commit(); <span class="hljs-comment">// &lt;--</span><br>        <br>        <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span><br>        sqlSession.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒç†ï¼Œä¿®æ”¹æ˜¯updateï¼Œ<code>parameterType=&quot;com.aster.domain.User&quot;</code></p><p>å¦‚æœæ˜¯æŒ‰idæ¥åˆ é™¤deleteï¼Œé‚£ä¹ˆ<code>parameterType=&quot;java.lang.Integer&quot;</code></p><h2 id="æ ¸å¿ƒé…ç½®æ–‡ä»¶æ¦‚è¿°"><a href="#æ ¸å¿ƒé…ç½®æ–‡ä»¶æ¦‚è¿°" class="headerlink" title="æ ¸å¿ƒé…ç½®æ–‡ä»¶æ¦‚è¿°"></a>æ ¸å¿ƒé…ç½®æ–‡ä»¶æ¦‚è¿°</h2><h3 id="å±‚çº§å…³ç³»"><a href="#å±‚çº§å…³ç³»" class="headerlink" title="å±‚çº§å…³ç³»"></a>å±‚çº§å…³ç³»</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.12yjcf85ie40.png" alt="image"></p><h3 id="environments"><a href="#environments" class="headerlink" title="environments"></a>environments</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.3ekky8h5ic40.png" alt="image"></p><h3 id="mappers"><a href="#mappers" class="headerlink" title="mappers"></a>mappers</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.62e2kkol3hw0.png" alt="image"></p><h3 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.40dmvktu2tg0.png" alt="image"></p><h3 id="typeAliases"><a href="#typeAliases" class="headerlink" title="typeAliases"></a>typeAliases</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.65eku2sl6fs0.png" alt="image"></p><p>MyBatisæå‰è®¾ç½®äº†ä¸€äº›é»˜è®¤åˆ«åï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.5o2eyetaiow0.png" alt="image"></p><h2 id="MyBatisç›¸å…³API"><a href="#MyBatisç›¸å…³API" class="headerlink" title="MyBatisç›¸å…³API"></a>MyBatisç›¸å…³API</h2><h3 id="SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilder"><a href="#SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilder" class="headerlink" title="SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilder"></a>SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilder</h3><p>å¸¸ç”¨APIï¼š<code>SqlSessionFactory build(InputStream inputStream)</code></p><p>é€šè¿‡åŠ è½½mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è¾“å…¥æµçš„å½¢å¼æ„å»ºä¸€ä¸ªSqlSessionFactoryå¯¹è±¡</p><h3 id="SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactory"><a href="#SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactory" class="headerlink" title="SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactory"></a>SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactory</h3><p>ç”¨äºåˆ›å»ºSqlSeså®ä¾‹</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.nily1ao1j6o.png" alt="image"></p><h3 id="SqlSessionä¼šè¯å¯¹è±¡"><a href="#SqlSessionä¼šè¯å¯¹è±¡" class="headerlink" title="SqlSessionä¼šè¯å¯¹è±¡"></a>SqlSessionä¼šè¯å¯¹è±¡</h3><p>æ‰§è¡Œè¯­å¥çš„æ–¹æ³•ä¸»è¦æœ‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function">T <span class="hljs-title">selectOne</span><span class="hljs-params">(String statement, Object parameter)</span></span>;<br><span class="hljs-function">List&lt;E&gt; <span class="hljs-title">selectList</span><span class="hljs-params">(String statement, Object parameter)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">insert</span><span class="hljs-params">(String statement, Object parameter)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">update</span><span class="hljs-params">(String statement, Object parameter)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">delete</span><span class="hljs-params">(String statement, Object parameter)</span></span>;<br></code></pre></td></tr></table></figure><p>æ“ä½œäº‹åŠ¡çš„æ–¹æ³•ä¸»è¦æœ‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">commit</span><span class="hljs-params">()</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rollback</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure><h2 id="MyBatisçš„DAOå±‚å®ç°"><a href="#MyBatisçš„DAOå±‚å®ç°" class="headerlink" title="MyBatisçš„DAOå±‚å®ç°"></a>MyBatisçš„DAOå±‚å®ç°</h2><h3 id="ä¼ ç»Ÿå¼€å‘æ–¹å¼"><a href="#ä¼ ç»Ÿå¼€å‘æ–¹å¼" class="headerlink" title="ä¼ ç»Ÿå¼€å‘æ–¹å¼"></a>ä¼ ç»Ÿå¼€å‘æ–¹å¼</h3><p>ä¸€èˆ¬æ˜ å°„ç±»å«åšDao/Mapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.mapper.impl;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserMapperImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br><br>    ...<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        InputStream resourceAsStream = Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>        SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);<br>        SqlSession sqlSession = sqlSessionFactory.openSession();<br>        List&lt;User&gt; userList = sqlSession.selectList(<span class="hljs-string">&quot;userMapper.findAll&quot;</span>);<br>        <span class="hljs-keyword">return</span> userList;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨åˆ«çš„åœ°æ–¹è°ƒç”¨å°±è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">UserMapper userMapper = <span class="hljs-keyword">new</span> UserMapper(); <span class="hljs-comment">// â­â­â­</span><br>List&lt;User&gt; allUser = userMapper.findAll();<br></code></pre></td></tr></table></figure><h3 id="æ¥å£ä»£ç†æ–¹å¼"><a href="#æ¥å£ä»£ç†æ–¹å¼" class="headerlink" title="æ¥å£ä»£ç†æ–¹å¼"></a>æ¥å£ä»£ç†æ–¹å¼</h3><p>å¯ä»¥å‘ç°ä¸Šé¢çš„ä¼ ç»Ÿæ–¹å¼å¾ˆç¹çï¼ˆåˆ«å¿˜äº†é™¤äº†implè¿˜æœ‰ä¸ªæ¥å£ï¼‰</p><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.1mshztd9xzr4.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.2gq6s58itfe0.png" alt="image"></p><p>ä¹‹åï¼Œåªè¦<code>UserMapper userMapper = sqlSession.getMapper(UserMapper.class)</code>ï¼ˆå¯¹åº”ä¸Šæ®µç¨‹åºé‡Œçš„â­â­â­ï¼‰ï¼Œmybatiså°±ä¼šå¸®æˆ‘ä»¬æ˜ å°„å¥½ï¼Œä¸å¿…å†™impl</p><h2 id="æ˜ å°„æ–‡ä»¶æ·±å…¥"><a href="#æ˜ å°„æ–‡ä»¶æ·±å…¥" class="headerlink" title="æ˜ å°„æ–‡ä»¶æ·±å…¥"></a>æ˜ å°„æ–‡ä»¶æ·±å…¥</h2><h3 id="åŠ¨æ€SQL"><a href="#åŠ¨æ€SQL" class="headerlink" title="åŠ¨æ€SQL"></a>åŠ¨æ€SQL</h3><p>å½“ä¸šåŠ¡é€»è¾‘å¤æ‚æ—¶ï¼ŒSQLè¯­å¥æ˜¯åŠ¨æ€å˜åŒ–çš„</p><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image-20211010165610749.13kjx26az6.png" alt="image-20211010165610749"></p><h4 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByIds&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>    select * from user<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;id in(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span><br>            #&#123;id&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findByIds</span><span class="hljs-params">(List&lt;Integer&gt;)</span></span>;<br></code></pre></td></tr></table></figure><p>(sqlç‰‡æ®µæŠ½å–ç•¥)</p><h2 id="æ ¸å¿ƒé…ç½®æ–‡ä»¶æ·±å…¥"><a href="#æ ¸å¿ƒé…ç½®æ–‡ä»¶æ·±å…¥" class="headerlink" title="æ ¸å¿ƒé…ç½®æ–‡ä»¶æ·±å…¥"></a>æ ¸å¿ƒé…ç½®æ–‡ä»¶æ·±å…¥</h2><h3 id="typeHandlers"><a href="#typeHandlers" class="headerlink" title="typeHandlers"></a>typeHandlers</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.bud5bz39jxc.png" alt="image"></p><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=172">å¯ä»¥é‡å†™</a></p><h3 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.6x7uxjwidqo0.png" alt="image"></p><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=176">æš‚æ—¶è·³è¿‡</a>    </p><h2 id="å¤šè¡¨æ“ä½œ"><a href="#å¤šè¡¨æ“ä½œ" class="headerlink" title="å¤šè¡¨æ“ä½œ"></a>å¤šè¡¨æ“ä½œ</h2><blockquote><p>è¡¨ä¸è¡¨é—´çš„å…³ç³»æœ‰ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤š/å¤šå¯¹ä¸€ã€å¤šå¯¹å¤š</p></blockquote><h3 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h3><p>ä¾‹å¦‚ï¼šç”¨æˆ·å’Œè®¢å•ï¼Œè™½ç„¶ç›´è§‚ä¸Šæ˜¯ä¸€å¯¹å¤šï¼ˆä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªè®¢å•ï¼‰ï¼Œä½†æ˜¯åè¿‡æ¥ï¼Œä¸€ä¸ªè®¢å•åªå±äºä¸€ä¸ªç”¨æˆ·</p><p>ä¸šåŠ¡éœ€æ±‚ï¼šæŸ¥è¯¢ä¸€ä¸ªè®¢å•ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥è®¢å•æ‰€å±çš„ç”¨æˆ·</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.1ob5b073po3k.png" alt="image"></p><p>ï¼ˆuidä»£è¡¨è®¢å•å±äºå“ªä¸ªç”¨æˆ·ï¼‰</p><p>ï¼ˆå°çŸ¥è¯†ï¼šorderåœ¨MySQLé‡Œæ˜¯å…³é”®å­—ï¼‰</p><p>é¦–å…ˆç¼–å†™ordersçš„å®ä½“ç±»ï¼Œæ³¨æ„ï¼Œç”±äºJavaæ˜¯<strong>é¢å‘å¯¹è±¡</strong>çš„ï¼Œå®ä½“ä¸å®ä½“ï¼ˆç±»ä¸ç±»ï¼‰ä¹‹é—´çš„å…³ç³»é€šè¿‡<strong>å¼•ç”¨</strong>æ¥å®ç°ï¼Œæ‰€ä»¥åœ¨å±æ€§é‡Œå†™<code>private int uid</code>å›ºç„¶å¯ä»¥ï¼Œä½†æ˜¯æ›´æ­£ç¡®çš„æ˜¯<code>private User user</code></p><p>ç„¶åæ˜¯ç¼–å†™OrderMapper.xmlå’Œé…ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶</p><p>åŸå§‹SQLè¯­å¥æ˜¯è¿™æ ·çš„ï¼ˆoidæ˜¯ä¸ºäº†æ›´æ–¹ä¾¿å†™ï¼‰ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>, o.id oid <span class="hljs-keyword">FROM</span> orders o, <span class="hljs-keyword">user</span> u <span class="hljs-keyword">WHERE</span> o.uid <span class="hljs-operator">=</span> u.id<br></code></pre></td></tr></table></figure><p>OrderMapper.xmlï¼ˆé…ç½®å¥½äº†åˆ«åï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.aster.mapper.OrderMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;orderMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;order&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        æ‰‹åŠ¨æŒ‡å®šå­—æ®µä¸å®ä½“å±æ€§çš„æ˜ å°„å…³ç³»</span><br><span class="hljs-comment">        columnï¼š æ•°æ®è¡¨çš„å­—æ®µåç§°</span><br><span class="hljs-comment">        propertyï¼šå®ä½“çš„å±æ€§åç§°</span><br><span class="hljs-comment">         --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.id&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.username&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.password&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.birthday&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;orderMap&quot;</span>&gt;</span><br>        SELECT *, o.id oid FROM orders o, user u WHERE o.uid = u.id<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ­¤å¤–è¿˜æœ‰ä¸€ç§å†™æ³•ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;orderMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;order&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    æ‰‹åŠ¨æŒ‡å®šå­—æ®µä¸å®ä½“å±æ€§çš„æ˜ å°„å…³ç³»</span><br><span class="hljs-comment">    columnï¼š æ•°æ®è¡¨çš„å­—æ®µåç§°</span><br><span class="hljs-comment">    propertyï¼šå®ä½“çš„å±æ€§åç§°</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    ï¼ˆorderå’Œuserå‡æ˜¯é…ç½®çš„åˆ«åï¼ï¼‰</span><br><span class="hljs-comment">    propertyï¼šå½“å‰å®ä½“ï¼ˆorderï¼‰çš„å±æ€§åç§°ï¼ˆprivate User userï¼‰</span><br><span class="hljs-comment">    javaType: å±æ€§çš„ç±»å‹ï¼ˆUserï¼‰</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;birthday&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ä¸€å¯¹å¤š"><a href="#ä¸€å¯¹å¤š" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h3><p>éœ€æ±‚ï¼šæŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·å…·æœ‰çš„è®¢å•</p><p>é¦–å…ˆï¼Œåœ¨Userå®ä½“ç±»ä¸­æ·»åŠ å±æ€§<code>private List&lt;Order&gt; orderList</code></p><p>åŸå§‹SQLï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>, o.id oid <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">USER</span> u, <span class="hljs-keyword">order</span> o <span class="hljs-keyword">WHERE</span> u.id <span class="hljs-operator">=</span> o.uid<br></code></pre></td></tr></table></figure> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;birthday&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    é…ç½®é›†åˆä¿¡æ¯ï¼ˆå› ä¸ºä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªè®¢å•ï¼‰</span><br><span class="hljs-comment">    propertyï¼šé›†åˆåç§°</span><br><span class="hljs-comment">    ofTypeï¼šé›†åˆä¸­çš„æ•°æ®ç±»å‹</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;orderList&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;order&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å°è£…orderçš„æ•°æ® --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;orderMap&quot;</span>&gt;</span><br>    SELECT *, o.id oid FROM USER u, order o WHERE u.id = o.uid<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h3><p>å¤šå¯¹å¤šçš„æ¨¡å‹ï¼šä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªè§’è‰²ï¼Œä¸€ä¸ªè§’è‰²è¢«å¤šä¸ªç”¨æˆ·æ‰€æ‹¥æœ‰</p><p>æŸ¥è¯¢éœ€æ±‚ï¼šæŸ¥è¯¢ç”¨æˆ·çš„åŒæ—¶ï¼ŒæŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·çš„æ‰€æœ‰è§’è‰²</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.3olgai2nrvw0.png" alt="image"></p><p>ï¼ˆå’Œä¸€å¯¹å¤šå·®ä¸å¤šï¼Œä¸»è¦æ˜¯éœ€è¦ä¸€å¼ <strong>ä¸­é—´è¡¨</strong>ï¼‰</p><p>sys_role:</p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.716fnw2pt2o0.png" alt="image" style="zoom:50%;" /><p>sys_user_roleï¼ˆä¸­é—´è¡¨ï¼‰ï¼š</p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.3j1v6cmjtdm0.png" alt="image" style="zoom:50%;" /><p>ï¼ˆä¸Šé¢çš„éƒ½æ²¡å†™å¤šå°‘ä»£ç ï¼Œè¿™ä¸ªå†™å…¨ç‚¹å§ï¼‰</p><p>Roleå®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@ToString</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Role</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String roleName;<br>    <span class="hljs-keyword">private</span> String roleDesc;<br>&#125;<br></code></pre></td></tr></table></figure><p>Userå®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@ToString</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> String birthday;<br><br>    <span class="hljs-comment">// æè¿°å½“å‰ç”¨æˆ·å…·å¤‡å“ªäº›è§’è‰²</span><br>    <span class="hljs-keyword">private</span> List&lt;Role&gt; roleList;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findAllUserAndRole</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.aster.mapper.UserMapper&quot;</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userRoleMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- userçš„ä¿¡æ¯ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;userId&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;birthday&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- userå†…éƒ¨çš„roleListçš„ä¿¡æ¯ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;roleList&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;role&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;roleId&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;roleName&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;roleName&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;roleDesc&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;roleDesc&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAllUserAndRole&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userRoleMap&quot;</span>&gt;</span><br>        select * from user u, sys_user_role ur, sys_role r WHERE u.id = ur.userId AND ur.roleId = r.id<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p>SqlMapConfig.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- é…ç½®æ•°æ®æºç¯å¢ƒ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- ä½¿ç”¨JDBCåŸç”Ÿçš„äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span> <span class="hljs-comment">&lt;!-- æ± åŒ– --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- åŠ è½½æ˜ å°„å…³ç³» --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.aster.mapper.UserMapper&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- é…ç½®åˆ«å --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.aster.domain.User&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;user&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.aster.domain.Role&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;role&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">// è·å¾—æ ¸å¿ƒé…ç½®æ–‡ä»¶</span><br>        InputStream resourceAsStream = Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>        <span class="hljs-comment">// è·å¾—sessionå·¥å‚å¯¹è±¡</span><br>        SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);<br>        <span class="hljs-comment">// è·å¾—sessionä¼šè¯å¯¹è±¡</span><br>        SqlSession sqlSession = sqlSessionFactory.openSession();<br><br>        UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>        List&lt;User&gt; allUserAndRole = mapper.findAllUserAndRole();<br>        <span class="hljs-keyword">for</span>(User user : allUserAndRole) &#123;<br>            System.out.println(user);<br>        &#125;<br>        <br>        sqlSession.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">ä¸€å¯¹ä¸€ï¼šä½¿ç”¨<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span>&gt;</span>é…ç½®ï¼ˆåœ¨å†…éƒ¨å°è£…å®ä½“è‡ªèº«çš„ä¿¡æ¯å’Œå®ä½“æ‰€å¼•ç”¨çš„åˆ«çš„å®ä½“çš„ä¿¡æ¯ï¼ˆ<span class="hljs-tag">&lt;<span class="hljs-name">association</span>&gt;</span>ï¼‰ï¼‰<br>ä¸€å¯¹å¤šï¼šä½¿ç”¨<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span>&gt;</span>å’Œ<span class="hljs-tag">&lt;<span class="hljs-name">collection</span>&gt;</span>é…ç½®<br>å¤šå¯¹å¤šï¼šä½¿ç”¨<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span>&gt;</span>å’Œ<span class="hljs-tag">&lt;<span class="hljs-name">collection</span>&gt;</span>é…ç½®<br></code></pre></td></tr></table></figure><h2 id="æ³¨è§£å¼€å‘"><a href="#æ³¨è§£å¼€å‘" class="headerlink" title="æ³¨è§£å¼€å‘"></a>æ³¨è§£å¼€å‘</h2><table><thead><tr><th align="center">æ³¨è§£</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center">@Insert</td><td align="center">æ–°å¢</td></tr><tr><td align="center">@Upadte</td><td align="center">æ›´æ–°</td></tr><tr><td align="center">@Delete</td><td align="center">åˆ é™¤</td></tr><tr><td align="center">@Select</td><td align="center">æŸ¥è¯¢</td></tr><tr><td align="center">@Result</td><td align="center">ç»“æœé›†å°è£…</td></tr><tr><td align="center">@Results</td><td align="center">å¯ä»¥ä¸@Resultä¸€èµ·ä½¿ç”¨å°è£…å¤šä¸ªç»“æœé›†</td></tr><tr><td align="center">@One</td><td align="center">å®ç°ä¸€å¯¹ä¸€ç»“æœå°è£…é›†</td></tr><tr><td align="center">@Many</td><td align="center">å®ç°ä¸€å¯¹å¤šç»“æœå°è£…é›†</td></tr></tbody></table><h3 id="æ³¨è§£å®ŒæˆCRUD"><a href="#æ³¨è§£å®ŒæˆCRUD" class="headerlink" title="æ³¨è§£å®ŒæˆCRUD"></a>æ³¨è§£å®ŒæˆCRUD</h3><p>UserMapper.xmlå¯ä»¥åˆ æ‰äº†</p><p>åˆšæ‰å»ºç«‹äº†ä¸€ä¸ªcom.aster.mapper.UserMapperæ¥å£ç”¨äºå¯¹è¡¨è¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œé‡Œé¢å£°æ˜äº†CRUDæ–¹æ³•</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸ªæ¥å£è¿›è¡Œæ”¹å†™æˆæ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.mapper;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br><br>    <span class="hljs-meta">@Insert(&quot;insert into user values(#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;)&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-meta">@Update(&quot;update user set username=#&#123;username&#125;, password=#&#123;password&#125; where id=#&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br><br>    <span class="hljs-meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br><br>    <span class="hljs-meta">@Select(&quot;select * from user&quot;)</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹SqlMapperConfigé‚£é‡Œçš„é…ç½®æ˜ å°„å…³ç³»çš„éƒ¨åˆ†ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- åŠ è½½æ˜ å°„å…³ç³» --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.aster.mapper.UserMapper&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å¤šè¡¨æ“ä½œ-1"><a href="#å¤šè¡¨æ“ä½œ-1" class="headerlink" title="å¤šè¡¨æ“ä½œ"></a>å¤šè¡¨æ“ä½œ</h3><h4 id="ä¸€å¯¹ä¸€-1"><a href="#ä¸€å¯¹ä¸€-1" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h4><p>ä¸šåŠ¡éœ€æ±‚ï¼šæŸ¥è¯¢ä¸€ä¸ªè®¢å•ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥è®¢å•æ‰€å±çš„ç”¨æˆ·ï¼ˆå’Œä¹‹å‰ä¸€æ ·ï¼‰</p><p><code>@Results</code>å¯¹åº”<code>&lt;resultMap&gt;</code>ï¼Œ<code>@Result</code>å¯¹åº”<code>&lt;resultMap&gt;</code>å†…çš„<code>&lt;result&gt;</code></p><p>è™½ç„¶æ²¡æœ‰<code>@Id</code>æ³¨è§£ä½†æ˜¯å¯ä»¥åœ¨<code>@Result</code>é‡Œæ³¨æ˜<code>id = true</code></p><p>å…¶ä½™æ³¨è§£å¤§åŒå°å¼‚ï¼Œè¯¦è§ç¨‹åºå§</p><p>OrderMapper.java</p><p>ï¼ˆåŒxmlå®ç°ä¸€æ ·ï¼ŒOrderæ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»ï¼Œselectå‡ºæ¥çš„ä¸œè¥¿<strong>æ²¡æ³•è‡ªåŠ¨å°è£…</strong>è¿›å»ï¼Œéœ€è¦æˆ‘ä»¬<strong>æ‰‹åŠ¨</strong>å†™<code>@Results</code>ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.mapper;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">OrderMapper</span> </span>&#123;<br><br>    <span class="hljs-meta">@Select(&quot;select *, o.id oid from orders o, user u where o.uid = u.id&quot;)</span><br>    <span class="hljs-meta">@Results(&#123;</span><br><span class="hljs-meta">            @Result(column = &quot;oid&quot;, property = &quot;id&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;ordertime&quot;, property = &quot;ordertime&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;total&quot;, property = &quot;total&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;uid&quot;, property = &quot;user.id&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;username&quot;, property = &quot;user.username&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;password&quot;, property = &quot;user.password&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;birthday&quot;, property = &quot;user.birthday&quot;)</span><br><span class="hljs-meta">    &#125;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¡¥ä¸ªOrderå®ç°ç±»å§â€¦â€¦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ToString</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Order</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> uid;<br>    <span class="hljs-keyword">private</span> Date ordertime;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> total;<br>    <span class="hljs-comment">// å½“å‰è®¢å•å±äºå“ªä¸ªç”¨æˆ·</span><br>    <span class="hljs-keyword">private</span> User user;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿæœ‰å¦ä¸€ç§å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.mapper;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">OrderMapper</span> </span>&#123;<br><br>    <span class="hljs-meta">@Select(&quot;select * from orders&quot;)</span><br>    <span class="hljs-meta">@Results(&#123;</span><br><span class="hljs-meta">            @Result(column = &quot;id&quot;, property = &quot;id&quot;), // å› ä¸ºuidç”¨äºæ‰¾useräº†æ‰€ä»¥è¿™é‡Œæ”¹å›id</span><br><span class="hljs-meta">            @Result(column = &quot;ordertime&quot;, property = &quot;ordertime&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;total&quot;, property = &quot;total&quot;),</span><br><span class="hljs-meta">            @Result(</span><br><span class="hljs-meta">                    column = &quot;uid&quot;, // æ ¹æ®colunmå­—æ®µå»æŸ¥è¯¢user</span><br><span class="hljs-meta">                    property = &quot;user&quot;, // è¦å°è£…çš„å±æ€§æ˜¯åç§°æ˜¯private User user</span><br><span class="hljs-meta">                    javaType = User.class, // è¦å°è£…çš„ç±»å‹æ˜¯User</span><br><span class="hljs-meta">                    // one = @One()ä»£è¡¨ä¸€å¯¹ä¸€</span><br><span class="hljs-meta">                    // selectå±æ€§è§„å®šäº†æŸ¥è¯¢å“ªä¸ªæ¥å£æ¥è·å–æ•°æ®</span><br><span class="hljs-meta">                    // ç»™findByIdä¼ å»uidå­—æ®µï¼Œè¿”å›Userç±»å‹</span><br><span class="hljs-meta">                    one = @One(select = &quot;com.aster.mapper.UserMapper.findById&quot;)</span><br><span class="hljs-meta">            )</span><br><span class="hljs-meta">    &#125;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¸€å¯¹å¤š-1"><a href="#ä¸€å¯¹å¤š-1" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h4><p>éœ€æ±‚ï¼šæŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·çš„æ‰€æœ‰è®¢å•</p><p>OrderMapper.java</p><p>ï¼ˆåŒä¸Šé¢çš„UserMapper.findByIdï¼Œä¸€ä¸ªä½œç”¨ï¼Œä¸è¿‡ä¹‹å‰æ²¡å†™è¿‡è¿™ä¸ªï¼Œå†™ä¸€ä¸‹ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">...<br><span class="hljs-meta">@Select(&quot;select * fron user where uid=#&#123;uid&#125;&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title">findByUid</span><span class="hljs-params">(<span class="hljs-keyword">int</span> uid)</span></span>;<br>...<br></code></pre></td></tr></table></figure><p>Userå®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ToString</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> String birthday;<br>    <span class="hljs-comment">// æè¿°å½“å‰ç”¨æˆ·æœ‰å“ªäº›è®¢å•</span><br>    <span class="hljs-keyword">private</span> List&lt;Order&gt; orderList;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java">...<br>    <span class="hljs-meta">@Select(&quot;select * from user&quot;)</span><br>    <span class="hljs-meta">@Results(&#123;</span><br><span class="hljs-meta">            @Result(column = &quot;id&quot;, property = &quot;id&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;username&quot;, property = &quot;username&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;password&quot;, property = &quot;password&quot;),</span><br><span class="hljs-meta">            @Result(</span><br><span class="hljs-meta">                    property = &quot;orderList&quot;,</span><br><span class="hljs-meta">                    column = &quot;id&quot;,</span><br><span class="hljs-meta">                    javaType = List.class,</span><br><span class="hljs-meta">                    // many = @Many()ä¸€å¯¹å¤š</span><br><span class="hljs-meta">                    many = @Many(select = &quot;com.aster.mapper.OrderMapper.findByUid&quot;)</span><br><span class="hljs-meta">            )</span><br><span class="hljs-meta">    &#125;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findUserAndAllOrder</span><span class="hljs-params">()</span></span>; <br>...<br></code></pre></td></tr></table></figure><h4 id="å¤šå¯¹å¤š-1"><a href="#å¤šå¯¹å¤š-1" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h4><p>éœ€æ±‚ï¼šæŸ¥è¯¢ç”¨æˆ·çš„åŒæ—¶ï¼ŒæŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·çš„æ‰€æœ‰è§’è‰²</p><p>RoleMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">RoleMapper</span> </span>&#123;<br>    <span class="hljs-meta">@Select(&quot;select * from sys_user_role ur, sys_role r where ur.roleId = r.id and ur.userId = #&#123;uid&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">findByUid</span><span class="hljs-params">(<span class="hljs-keyword">int</span> uid)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">...<br>    <span class="hljs-meta">@Select(&quot;select * from user&quot;)</span><br>    <span class="hljs-meta">@Results(&#123;</span><br><span class="hljs-meta">            @Result(column = &quot;id&quot;, property = &quot;id&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;username&quot;, property = &quot;password&quot;),</span><br><span class="hljs-meta">            @Result(column = &quot;password&quot;, property = &quot;password&quot;)</span><br><span class="hljs-meta">            @Result(</span><br><span class="hljs-meta">                    property = &quot;roleList&quot;,</span><br><span class="hljs-meta">                    column = &quot;id&quot;,</span><br><span class="hljs-meta">                    javaType = List.class,</span><br><span class="hljs-meta">                    many = @Many(select = &quot;com.aster.mapper.RoleMapper.findByUid&quot;)</span><br><span class="hljs-meta">            )</span><br><span class="hljs-meta">    &#125;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">findUserAndAllRole</span><span class="hljs-params">()</span></span>; <br>...<br></code></pre></td></tr></table></figure><h1 id="SSMæ•´åˆ"><a href="#SSMæ•´åˆ" class="headerlink" title="SSMæ•´åˆ"></a>SSMæ•´åˆ</h1><p>ï¼ˆç»ˆäºè¦å­¦å®Œå•¦ï¼ï¼‰</p><p>ï¼ˆä¸»è¦æŒ‡Springæ•´åˆMyBatisï¼Œå› ä¸ºMyBatisæ˜¯ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼‰</p><blockquote><p>å†æ¬¡å¤ä¹ æ¦‚å¿µï¼ˆä¸ä¸€å®šå¾ˆå‡†ï¼‰</p><p>Springï¼šç®¡ç†ä¸‰å±‚é‡Œçš„Bean</p><p>Spring MVCï¼šWebå±‚</p><p>MyBatisï¼šDAOå±‚</p></blockquote><h2 id="åŸå§‹æ•´åˆæ–¹å¼"><a href="#åŸå§‹æ•´åˆæ–¹å¼" class="headerlink" title="åŸå§‹æ•´åˆæ–¹å¼"></a>åŸå§‹æ•´åˆæ–¹å¼</h2><p>æ‰“å¥½åŸºç¡€å¾ˆé‡è¦ï¼æ‰€ä»¥å…ˆå†™ä¸ªåŸå§‹æ•´åˆåŠ æ·±ç†è§£ï¼Œæ¯•ç«Ÿå­¦äº†è¿™ä¹ˆå¤šä¹Ÿå¾—çŸ¥é“æ€ä¹ˆç”¨</p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.5kfnl72thhs0.png" alt="image" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.43dy1v3y81c0.png" alt="image" style="zoom:80%;" /><p>ä¸€å †mavenï¼ˆè²Œä¼¼mysql connnectorè¦ç”¨å’Œæˆ‘ä¸€ä¸ªç‰ˆæœ¬çš„8.0.21â€¦â€¦ä¸è¿‡æˆ‘ç”¨äº†ä¹ŸæŠ¥é”™ï¼Œæ‡’å¾—æ”¹äº†ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;ç•¥&gt;<br></code></pre></td></tr></table></figure><p>å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.domain;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>&#123;<br><br>     <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>     <span class="hljs-keyword">private</span> String name;<br>     <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> money;<br> ...<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–å†™mapperæ¥å£ï¼ˆå†æ¬¡å¤ä¹ ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.mapper;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">AccountMapper</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(Account account)</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Account&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–å†™serviceæ¥å£åŠå®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.service.impl;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@Service(&quot;accountService&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AccountService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(Account account)</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            InputStream resourceAsStream = Resources.getResourceAsStream(<span class="hljs-string">&quot;sqlMapConfig.xml&quot;</span>);<br>            SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);<br>            SqlSession sqlSession = sqlSessionFactory.openSession();<br>            AccountMapper mapper = sqlSession.getMapper(AccountMapper.class);<br>            mapper.save(account);<br>            sqlSession.commit();<br>            sqlSession.close();<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Account&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            InputStream resourceAsStream = Resources.getResourceAsStream(<span class="hljs-string">&quot;sqlMapConfig.xml&quot;</span>);<br>            SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);<br>            SqlSession sqlSession = sqlSessionFactory.openSession();<br>            AccountMapper mapper = sqlSession.getMapper(AccountMapper.class);<br>            List&lt;Account&gt; accountList = mapper.findAll();<br>            sqlSession.close();<br>            <span class="hljs-keyword">return</span> accountList;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç¼–å†™Controllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.controller;<br><br><span class="hljs-keyword">import</span> com.aster.domain.Account;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountController</span> </span>&#123;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">save</span><span class="hljs-params">(Account account)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">findAll</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>sqlMapConfig.xml</p><p>æ³¨æ„ï¼šåœ¨å®šä¹‰åˆ«åçš„æ—¶å€™ï¼Œå¦‚æœæ”¾å…¥äº†<strong>packageæ ‡ç­¾</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒ…ä¸‹<strong>æ‰€æœ‰çš„ç±»</strong>éƒ½ä¼š<strong>è‡ªåŠ¨</strong>è¢«å£°æ˜ä¸€ä¸ªåˆ«åï¼Œåˆ«åæ˜¯ç±»åçš„é¦–å­—æ¯å°å†™ï¼›åŒç†ï¼Œåœ¨åŠ è½½æ˜ å°„çš„æ—¶å€™ï¼Œå¦‚æœæ”¾å…¥äº†<strong>packageæ ‡ç­¾</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒ…ä¸‹<strong>æ‰€æœ‰çš„æ˜ å°„é…ç½®æ–‡ä»¶</strong>éƒ½ä¼šè¢«åŠ è½½</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--åŠ è½½propertiesæ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;jdbc.properties&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--å®šä¹‰åˆ«å--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--  &lt;typeAlias type=&quot;com.aster.domain.Account&quot; alias=&quot;account&quot;/&gt;  --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.aster.domain&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--ç¯å¢ƒ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;developement&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;developement&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--åŠ è½½æ˜ å°„--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--  &lt;mapper resource=&quot;com/aster/mapper/AccountMapper.xml&quot;/&gt;  --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.aster.mapper&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ï¼ˆæéº»éº»çš„ï¼ŒæŠ¥é”™ï¼Œä¼°è®¡åˆæ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Œå¼€æ‘†ï¼ï¼‰</p><h2 id="MyBatisæ•´åˆSpringå®ç°"><a href="#MyBatisæ•´åˆSpringå®ç°" class="headerlink" title="MyBatisæ•´åˆSpringå®ç°"></a>MyBatisæ•´åˆSpringå®ç°</h2><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/SSM2/image.3swj78bkzda0.png" alt="image"></p><p>åœ¨å¯¼å…¥mybatisä¾èµ–åï¼Œç³»ç»Ÿå…¶å®å·²ç»æä¾›äº†ä¸€ä¸ª<strong>SqlSessionFactoryBean</strong></p><p>å› æ­¤å¯ä»¥åœ¨springé…ç½®æ–‡ä»¶é‡Œå¼•å…¥å®ƒ</p><p>springä¹Ÿé›†æˆäº†<strong>MapperScannerConfigurer</strong>ç”¨äºæ‰«æmapperæ‰€åœ¨çš„åŒ…å¹¶ä¸ºmapperåˆ›å»ºå®ç°ç±»ï¼Œè€Œä¸”ä¼šè‡ªåŠ¨æŠŠmapperå®ç°ç±»æ³¨å…¥å®¹å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/tx</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/tx/spring-tx.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/aop</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/aop/spring-aop.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--ç»„ä»¶æ‰«æ æ‰«æserviceå’Œmapper--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.aster&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--æ’é™¤controllerçš„æ‰«æ--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">context:exclude-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;annotation&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--åŠ è½½propertiesæ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--é…ç½®æ•°æ®æºä¿¡æ¯--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--é…ç½®sessionFactory--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--åŠ è½½mybatisæ ¸å¿ƒæ–‡ä»¶--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:sqlMapConfig.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--æ‰«æmapperæ‰€åœ¨çš„åŒ… ä¸ºmapperåˆ›å»ºå®ç°ç±»--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;basePackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.aster.mapper&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><br>    <span class="hljs-comment">&lt;!--å£°æ˜å¼äº‹åŠ¡æ§åˆ¶--&gt;</span><br>    <span class="hljs-comment">&lt;!--å¹³å°äº‹åŠ¡ç®¡ç†å™¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡å¢å¼º--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txAdvice&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;*&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--äº‹åŠ¡çš„aopç»‡å…¥--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">pointcut</span>=<span class="hljs-string">&quot;execution(* com.aster.service.impl.*.*(..))&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥AccountServiceå°±å°‘å†™å¥½å¤šä¸œè¥¿äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.service.impl;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-meta">@Service(&quot;accountService&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AccountService</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> AccountMapper accountMapper;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(Account account)</span> </span>&#123;<br>        accountMapper.save(account);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Account&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> accountMapper.findAll();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQLå­¦ä¹ ç¬”è®°1</title>
    <link href="/2021/10/03/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/"/>
    <url>/2021/10/03/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å› ä¸ºå­¦JdbcTemplateå…ä¸äº†ç”¨åˆ°ä¸€äº›MySQLï¼Œæ‰€ä»¥å¼€ä¸€ç¯‡ç¬”è®°éšä¾¿è®°ä¸€è®°ã€‚ä»¥åè®¤çœŸæ·±å…¥å­¦MySQLå¤§æ¦‚ä¼šå†™åœ¨å­¦ä¹ ç¬”è®°2é‡Œå§</p><p>è¿æ¥ä¹‹åï¼Œå³é”®è¿æ¥å¯ä»¥æ–°å»ºä¸€ä¸ªæ•°æ®åº“</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/MySQL1/image.5wsbh0canqs0.png" alt="image"></p><p>æ’åºè§„åˆ™è¿™é‡Œï¼Œutf8_binæ˜¯å¤§å°å†™æ•æ„Ÿï¼Œutf8_general_ciæ˜¯å¤§å°å†™ä¸æ•æ„Ÿï¼ŒæŒ‰ç…§éœ€æ±‚é€‰ä¸€ä¸ª</p><h2 id="Navicatçš„åŸºæœ¬ä½¿ç”¨"><a href="#Navicatçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="Navicatçš„åŸºæœ¬ä½¿ç”¨"></a>Navicatçš„åŸºæœ¬ä½¿ç”¨</h2><h3 id="å»ºè¡¨"><a href="#å»ºè¡¨" class="headerlink" title="å»ºè¡¨"></a>å»ºè¡¨</h3><p>é¦–å…ˆï¼Œä¸€ä¸ªè¡¨ä¸­éœ€è¦è®¾å®šå”¯ä¸€çš„ä¸€åˆ—é”®</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/MySQL1/image.5rhhu38zo7c0.png" alt="image"></p><p>å‡è®¾æˆ‘ä»¬å»ºè¿™ä¸ªè¡¨æœ€åå«infoï¼Œå­˜å‚¨ä¸€äº›ç”¨æˆ·ä¿¡æ¯</p><p>é‚£ä¹ˆè‚¯å®šè¦æ·»åŠ nameå­—æ®µï¼Œç±»å‹æ˜¯<strong>varcharï¼šå¯å˜å­—ç¬¦ä¸²</strong>ï¼ˆåå­—å¯é•¿å¯çŸ­ï¼‰ï¼Œä¸æ˜¯nullå³æ„ä¸ºå¿…é¡»å¡«å†™ï¼Œäººè‚¯å®šä¸èƒ½æ²¡æœ‰åå­—ï¼Œè‡³äºageå°±æ— æ‰€è°“äº†</p><p>genderæ€§åˆ«å­—æ®µï¼Œé‡‡å–<strong>enumæšä¸¾ç±»å‹</strong>ï¼Œéœ€è¦<strong>ç¼–è¾‘ä¸€ä¸‹enumçš„å€¼ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/MySQL1/image.1fil2xrykgf4.png" alt="image"></p><p>ç‚¹å‡»ä¿å­˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/MySQL1/image.4p3y3b3gwh40.png" alt="image"></p><p>å³é”®è®¾è®¡è¡¨ï¼Œå¯ä»¥å¯¹è¡¨è¿›è¡Œæ›´æ”¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/MySQL1/image.4x2o9qf0tqu0.png" alt="image"></p><h3 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h3><blockquote><p>CRUDï¼šå¢åˆ æ”¹æŸ¥ï¼ˆå¢åŠ Createã€æ£€ç´¢Retrieveã€æ›´æ–°Updateã€åˆ é™¤Deleteï¼‰</p></blockquote><p>åŒå‡»infoè¿›å…¥å¯è§†åŒ–ç¼–è¾‘</p><p>ç‚¹å‡»å·¦ä¸‹è§’çš„ <strong>+ æˆ– -</strong> å¢åŠ æˆ–åˆ é™¤è¡Œï¼Œidä¼šè‡ªåŠ¨è‡ªå¢ç”Ÿæˆï¼ˆå¦‚æœå‰é¢æœ‰è¡Œè¢«åˆ äº†ï¼Œidè¿˜æ˜¯ä»è¢«åˆ ä¹‹å‰çš„ä½ç½®é€’å¢ï¼‰</p><p>å†™å®Œä¸€è¡Œåï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„ <strong>å¯¹å‹¾âˆš</strong> ä¿å­˜ï¼Œåšå‡ºä»»ä½•ä¿®æ”¹åï¼Œéƒ½è¦ç‚¹å‡»ä¿å­˜ï¼Œå¦åˆ™æ— æ•ˆ</p><p>ï¼ˆåŒå‡»ç‚¹å¼€infoä¹‹åï¼Œå…¶å®å·²ç»æ˜¯å¤„åœ¨æŸ¥è¯¢çš„çŠ¶æ€äº†ï¼‰</p><p>IDEAé‡Œï¼Œè¿æ¥MySQLåï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨åœ¨è®¾ç½®é‡Œå‹¾é€‰ä¸­éœ€è¦æ˜¾ç¤ºå‡ºæ¥çš„æ•°æ®åº“</p>]]></content>
    
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºJMXç«¯å£è¢«å ç”¨</title>
    <link href="/2021/09/30/%E5%85%B3%E4%BA%8EJMX%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8/"/>
    <url>/2021/09/30/%E5%85%B3%E4%BA%8EJMX%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">netstat -aon|findstr 1099<br>taskkill -f -pid xxxx<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/%E6%9D%82%E5%9B%BE/image.5k8yjqy7f400.png" alt="image"></p>]]></content>
    
    
    
    <tags>
      
      <tag>JMX</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IDEAé…ç½®TomcatæœåŠ¡å™¨</title>
    <link href="/2021/09/24/IDEA%E9%85%8D%E7%BD%AETomcat%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <url>/2021/09/24/IDEA%E9%85%8D%E7%BD%AETomcat%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…Tomcat"><a href="#å®‰è£…Tomcat" class="headerlink" title="å®‰è£…Tomcat"></a>å®‰è£…Tomcat</h3><p>ç®€å•è¯´è¯´ï¼šåœ¨å®˜ç½‘ä¸‹è½½windows x64çš„zipåŒ…ï¼Œç„¶åè§£å‹åˆ°ä½ å–œæ¬¢çš„æ–‡ä»¶å¤¹å°±å¥½</p><p>ç‚¹å‡»biné‡Œçš„startup.batåè®¿é—®localhost:8080å°±èƒ½æµ‹è¯•äº†</p><h3 id="IDEAé…ç½®"><a href="#IDEAé…ç½®" class="headerlink" title="IDEAé…ç½®"></a>IDEAé…ç½®</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/IDEATomcat/image.2h4grhen1ks0.png" alt="image"></p><p>ç¡®ä¿é¡¹ç›®ç»“æ„é‡Œè¿™ä¸¤é¡¹å‹¾é€‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/IDEATomcat/image.1w3kmewznt8g.png" alt="image"></p><p>å³ä¸Šè§’ç¼–è¾‘é…ç½®ï¼Œç‚¹å¼€åé€‰æ‹© Tomcatæœ¬åœ°</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/IDEATomcat/image.6fo43yi11lw0.png" alt="image"></p><p>ä¹‹åï¼ŒIDEAä¼šæç¤ºç¼ºå°‘å·¥ä»¶ï¼Œå¦‚æœå·²ç»æœ‰xxxx:war explodedï¼Œå°±é€‰ä¸Š</p><p>å¦‚æœä¸è‡ªå¸¦å·¥ä»¶ï¼Œçœ‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/IDEATomcat/image.66xis34losw0.png" alt="image"></p><p><a href="https://blog.csdn.net/qq1808814025/article/details/114752140">å¦‚æœè¿˜æœ‰é—®é¢˜å°±çœ‹è¿™ä¸ª</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Tomcat</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SSMå­¦ä¹ ç¬”è®°1</title>
    <link href="/2021/07/15/SSM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/"/>
    <url>/2021/07/15/SSM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><blockquote><p>å‰ç½®å°æŠ±æ€¨ï¼šç”±äºä¸€ç›´ä¸€æ¥æˆ‘è§‰å¾—å±å¹•ä¸å°æ‰€ä»¥éƒ½æ²¡éšè—æ”¶è—æ å¯¼è‡´å‰é¢å¾ˆå¤§ä¸€éƒ¨åˆ†çš„ç½‘é¡µæˆªå›¾æœ‰æ”¶è—æ å¾ˆéš¾çœ‹555ï¼Œåæ¥éšè—äº†æ‰å‘ç°å¹¶æ²¡æœ‰éº»çƒ¦å¤šå°‘è€Œä¸”å¥½çœ‹å¤šäº†Orz</p></blockquote><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h2><p>å‰ç½®å°çŸ¥è¯†ï¼šJavaSEç»å…¸ä¸‰å±‚æ¶æ„æ˜¯<strong>webå±‚ã€ä¸šåŠ¡/serviceå±‚ã€DAOå±‚</strong></p><ul><li>webå±‚ï¼šè·å–æµè§ˆå™¨æäº¤çš„æ•°æ®ï¼Œæˆ–è€…å°†æ•°æ®è¿”å›ç»™æµè§ˆå™¨</li><li>ä¸šåŠ¡å±‚ï¼šä¸“é—¨ç”¨æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘</li><li>DAOå±‚ï¼šä¸“é—¨ç”¨æ¥å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.4mh4jf0ladm0.png" alt="ï¼ˆä»ç½‘ä¸Šéšä¾¿æ‰¾æ¥çš„ä¸€å¼ å›¾ï¼‰"></li></ul><blockquote><p>tips: Ctrl + Oå¿«æ·é‡å†™æ–¹æ³• </p></blockquote><p>æ–°å»ºXMLæ–‡ä»¶æ—¶æ²¡æœ‰springé…ç½®æ–‡ä»¶çš„è§£å†³æ–¹æ³•ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.5idbc1gw6hc0.png" alt="image"><br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.6dd3x6skkm00.png" alt="image"></p><p>ä¸€èˆ¬ä¹ æƒ¯äºå°†é…ç½®æ–‡ä»¶å‘½åä¸º<code>applicationContext.xml</code></p><p>ç»“æ„åŠXMLæ¡ˆä¾‹å¦‚å›¾ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.22vv14r8sjcw.png" alt="image"></p><p>æµ‹è¯•ç”¨ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoDemo</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">// springå®¢æˆ·ç«¯</span><br>        ApplicationContext app = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        UserDao userDao = (UserDao) app.getBean(<span class="hljs-string">&quot;userDao&quot;</span>);<br>        userDao.save(); <span class="hljs-comment">// save running...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“ï¼šSpringçš„å¼€å‘æ­¥éª¤"><a href="#æ€»ç»“ï¼šSpringçš„å¼€å‘æ­¥éª¤" class="headerlink" title="æ€»ç»“ï¼šSpringçš„å¼€å‘æ­¥éª¤"></a>æ€»ç»“ï¼šSpringçš„å¼€å‘æ­¥éª¤</h3><ol><li>å¯¼å…¥Springçš„Mavenåæ ‡</li><li>åˆ›å»ºBeanï¼ˆå³ä¸Šä¾‹ç»“æ„å›¾ä¸­çš„UserDaoå’Œå…¶å®ç°ï¼‰</li><li>åˆ›å»ºé…ç½®æ–‡ä»¶<code>applicationContext.xml</code></li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</li><li>åˆ›å»ºApplicationContextå¯¹è±¡ä»¥è·å¾—Bean</li></ol><h2 id="Springé…ç½®æ–‡ä»¶"><a href="#Springé…ç½®æ–‡ä»¶" class="headerlink" title="Springé…ç½®æ–‡ä»¶"></a>Springé…ç½®æ–‡ä»¶</h2><h3 id="Bean"><a href="#Bean" class="headerlink" title="Bean"></a>Bean</h3><p>ç”¨äºé…ç½®å¯¹è±¡ä»¥ä¾¿äº¤ç»™Springæ¥åˆ›å»º<br>é»˜è®¤è°ƒç”¨ç±»ä¸­çš„<strong>æ— å‚æ„é€ å‡½æ•°</strong>ï¼Œå¦‚æœæ²¡æœ‰åˆ™å¤±è´¥</p><ul><li>idï¼šBeanå®ä¾‹åœ¨Springä¸­çš„å”¯ä¸€æ ‡è¯†</li><li>classï¼šBeançš„<strong>å…¨é™å®šåç§°</strong>ï¼ˆ<code>com.aster.test.impl.TestImpl</code>ï¼‰<h4 id="èŒƒå›´é…ç½®"><a href="#èŒƒå›´é…ç½®" class="headerlink" title="èŒƒå›´é…ç½®"></a>èŒƒå›´é…ç½®</h4></li><li>scopeï¼šå¯¹è±¡çš„ä½œç”¨èŒƒå›´<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.2c5uo1mwzz0g.png" alt="image"></li></ul><p>ï¼ˆsingletonå³beanåªå­˜åœ¨ä¸€ä¸ªï¼Œå³å°±ç®—å¤šæ¬¡getBeanä¹Ÿæ˜¯åŒä¸€åœ°å€ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.3p5u1jgtfly0.png" alt="image"></p><h4 id="ç”Ÿå‘½å‘¨æœŸé…ç½®"><a href="#ç”Ÿå‘½å‘¨æœŸé…ç½®" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé…ç½®"></a>ç”Ÿå‘½å‘¨æœŸé…ç½®</h4><ul><li>init-methodï¼šæŒ‡å®šç±»ä¸­çš„åˆå§‹åŒ–æ–¹æ³•åç§°</li><li>destroy-methodï¼šæŒ‡å®šç±»ä¸­çš„é”€æ¯æ–¹æ³•åç§°<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">...</span> <span class="hljs-attr">init-method</span>=<span class="hljs-string">&quot;init&quot;</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">&quot;destroy&quot;</span> <span class="hljs-attr">...</span> /&gt;</span><br></code></pre></td></tr></table></figure><h4 id="Beançš„ä¸‰ç§å®ä¾‹åŒ–"><a href="#Beançš„ä¸‰ç§å®ä¾‹åŒ–" class="headerlink" title="Beançš„ä¸‰ç§å®ä¾‹åŒ–"></a>Beançš„ä¸‰ç§å®ä¾‹åŒ–</h4></li><li>æ— å‚æ„é€ æ–¹å¼å®ä¾‹åŒ–<code>&lt;bean id=&quot;...&quot; class=&quot;...&quot;&gt;</code>ï¼ˆå…¶å®è¿™ä¸ªæ‰æ˜¯é‡ç‚¹Orzï¼‰</li><li>å·¥å‚<strong>é™æ€</strong>æ–¹æ³•å®ä¾‹åŒ–</li><li>å·¥å‚<strong>å®ä¾‹</strong>æ–¹æ³•å®ä¾‹åŒ–</li></ul><p><strong>ä¾‹1ï¼š</strong> å†™äº†ä¸€ä¸ªé™æ€å·¥å‚<code>com.aster.factory.StaticFactory</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StaticFactory</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> UserDao <span class="hljs-title">getUserDao</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UserDaoImpl();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œå°†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.dao.impl.UserDaoImpl&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>å˜ä¸º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.factory.StaticFactory&quot;</span> <span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;getUserDao&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>æ•ˆæœæ˜¯ä¸€æ ·çš„</p><p><strong>ä¾‹2ï¼š</strong> åˆå†™äº†ä¸ªåŠ¨æ€å·¥å‚<code>com.aster.factory.DynamicFactory</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DynamicFactory</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> UserDao <span class="hljs-title">getUserDao</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UserDaoImpl();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±äºæ˜¯åŠ¨æ€å·¥å‚ï¼Œæ‰€ä»¥ä¸èƒ½åƒé™æ€å·¥å‚é‚£æ ·ç›´æ¥ä½¿ç”¨å†…éƒ¨çš„æ–¹æ³•ï¼Œéœ€è¦å…ˆæœ‰ä¸€ä¸ªåŠ¨æ€å·¥å‚çš„<strong>å®ä¾‹</strong>æ‰è¡Œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;factory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.factory.DynamicFactory&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">factory-bean</span>=<span class="hljs-string">&quot;factory&quot;</span> <span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;getUserDao&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ä¾èµ–æ³¨å…¥"><a href="#ä¾èµ–æ³¨å…¥" class="headerlink" title="ä¾èµ–æ³¨å…¥"></a>ä¾èµ–æ³¨å…¥</h3><blockquote><p>tipsï¼šé€‰ä¸­ç±»åå³é”®ï¼Œæœ‰å¤åˆ¶å¼•ç”¨çš„é€‰é¡¹</p></blockquote><p>ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æˆ‘ä»¬ç¨‹åºä»£ç ä¸­ä¸ç”¨æ‰‹åŠ¨getBeanè·å–daoå±‚beanå¯¹è±¡ï¼Œå¯ä»¥ç”±Springå®¹å™¨æ¥å¸®æˆ‘ä»¬å®Œæˆï¼Œdaoå±‚beanå¯¹è±¡å¯ä»¥åšä¸ºå±æ€§æ³¨å…¥åˆ°serviceå±‚beanå¯¹è±¡ä¸­</p><p>ä¸‹é¢è¿™ä¸¤ä¸ªä»çŸ¥ä¹æ‰¾çš„å›ç­”æ„Ÿè§‰è¿˜ä¸é”™ï¼š<br>ä¸€ã€<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.545hyn4rjdg0.png" alt="image"><br>äºŒã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰å’Œæ§åˆ¶åè½¬ï¼ˆIOCï¼‰åŸºæœ¬æ˜¯ä¸€ä¸ªæ„æ€ï¼Œå› ä¸ºè¯´èµ·æ¥è°éƒ½ç¦»ä¸å¼€è°ã€‚ç®€å•æ¥è¯´ï¼Œaä¾èµ–bï¼Œä½†aä¸æ§åˆ¶bçš„åˆ›å»ºå’Œé”€æ¯ï¼Œä»…ä½¿ç”¨bï¼Œé‚£ä¹ˆbçš„æ§åˆ¶æƒäº¤ç»™aä¹‹å¤–å¤„ç†ï¼Œè¿™å«æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œè€Œaè¦ä¾èµ–bï¼Œå¿…ç„¶è¦ä½¿ç”¨bçš„instanceï¼Œé‚£ä¹ˆé€šè¿‡açš„æ¥å£ï¼ŒæŠŠbä¼ å…¥ï¼›é€šè¿‡açš„æ„é€ ï¼ŒæŠŠbä¼ å…¥ï¼›é€šè¿‡è®¾ç½®açš„å±æ€§ï¼ŒæŠŠbä¼ å…¥ï¼›è¿™ä¸ªè¿‡ç¨‹å«ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯IOC Containerï¼Ÿéšç€DIçš„é¢‘ç¹ä½¿ç”¨ï¼Œè¦å®ç°IOCï¼Œä¼šæœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œç”šè‡³éšç€æŠ€æœ¯çš„å‘å±•ï¼Œæœ‰æ›´å¤šæ–°çš„å®ç°æ–¹æ³•å’Œæ–¹æ¡ˆï¼Œé‚£ä¹ˆæœ‰äººå°±æŠŠè¿™äº›å®ç°IOCçš„ä»£ç æ‰“åŒ…æˆç»„ä»¶æˆ–æ¡†æ¶ï¼Œæ¥é¿å…äººä»¬é‡å¤é€ è½®å­ã€‚æ‰€ä»¥å®ç°IOCçš„ç»„ä»¶æˆ–è€…æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥å«å®ƒIOC Containerã€‚</p><p>å†æ¥çœ‹çœ‹è¯¾é‡Œçš„è¯´æ³•ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.efpiwerst6o.png" alt="image"></p><p>ä¾èµ–æ³¨å…¥æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>æ„é€ æ–¹æ³•</li><li>setæ–¹æ³•</li></ul><h4 id="setæ–¹æ³•æ³¨å…¥"><a href="#setæ–¹æ³•æ³¨å…¥" class="headerlink" title="setæ–¹æ³•æ³¨å…¥"></a>setæ–¹æ³•æ³¨å…¥</h4><p>å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰DAOå±‚çš„UserDaoå’ŒUserDaoImplï¼Œè¿˜æœ‰ä¸šåŠ¡å±‚çš„UserServiceå’ŒUserServiceImplï¼Œ<strong>åœ¨ä¸šåŠ¡å±‚ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæƒ³å®ç°ä¸€ä¸ªsaveæ–¹æ³•ï¼Œæ–¹å¼æ˜¯è°ƒç”¨DAOå±‚çš„saveæ–¹æ³•</strong></p><p><strong>1.éƒ½ä½¿ç”¨Springï¼Œä½†æ˜¯ä¸ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// UserServiceImpl.java</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        ApplicationContext app = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        UserDao userDao = (UserDao) app.getBean(<span class="hljs-string">&quot;userDao&quot;</span>);<br>        userDao.save(); <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.dao.UserDao.UserDaoImpl&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.service.UserService.UserServiceImpl&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯UserDaoå’ŒUserServiceçš„è€¦åˆåº¦æœ‰ç‚¹é«˜äº†ï¼Œç›®å‰æ˜¯åœ¨UserServiceä¸­æ³¨å…¥äº†å®ƒæ‰€ä¾èµ–çš„UserDaoï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•æŠŠå®ƒä»¬<strong>è§£è€¦</strong>â€”â€”<strong>åˆ©ç”¨ä¸­é—´ä»¶Springå®¹å™¨æ¥è€¦åˆä»–ä»¬</strong>ï¼Œè¿™æ ·å¤–éƒ¨çš„UserDaoå’ŒUserServiceçš„è€¦åˆåº¦å°±å˜ä½äº†ï¼ˆä¸çŸ¥é“æˆ‘çš„ç†è§£å¯¹ä¸å¯¹ï¼‰</p><p>å› ä¸ºä¾ç„¶å­˜åœ¨ä¸€å®šçš„ä¾èµ–å…³ç³»çš„ï¼Œæ‰€ä»¥å°±ç®—ä¾èµ–æ³¨å…¥ï¼Œè¿˜æ˜¯éœ€è¦åœ¨UserServiceä¸­é€šè¿‡setæˆ–è€…æ„é€ æ–¹æ³•æ¥å’ŒUserDaoâ€œäº§ç”Ÿè”ç³»â€çš„ï¼Œä½†æ˜¯åŒºåˆ«æ˜¯ï¼Œ<strong>ä¹‹å‰æ˜¯UserServiceä»Springä¸­è‡ªå·±è·å–UserDaoï¼Œè€Œç°åœ¨UserServiceåªéœ€è¦èººå¹³ï¼Œç­‰ç€SpringæŠŠUserDaoé€ä¸Šé—¨æ¥å³å¯ï¼›å› ä¸ºåœ¨xmlæ–‡ä»¶ä¸­åšäº†ç›¸å…³çš„å£°æ˜ï¼Œæ‰€ä»¥SpringçŸ¥é“åº”è¯¥æ€ä¹ˆæŠŠåˆé€‚çš„UserDaoæ³¨å…¥UserService</strong></p><p><strong>ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// UserServiceImpl.java</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> UserDao userDao; <span class="hljs-comment">// å£°æ˜ä¸€ä¸ªå®ä¾‹ä»¥ä¾¿ä½¿ç”¨set</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserDao</span><span class="hljs-params">(UserDao userDao)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userDao = userDao;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.save(); <span class="hljs-comment">// åœ¨ä½¿ç”¨äº†ä¾èµ–æ³¨å…¥ä¹‹åï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨userDaoå°±è¡Œï¼ŒSpringå·²ç»è‡ªåŠ¨å¸®ä½ æŠŠuserDaoæ³¨å…¥äº†</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.dao.UserDao.UserDaoImpl&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.service.impl.UserServiceImpl&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼</strong></p><ol><li>ä¸Šé¢çš„xmlä¸­ï¼Œpropertyçš„nameæ˜¯<strong>setæ–¹æ³•åä¸­ï¼Œâ€œsetâ€ä¹‹åçš„éƒ¨åˆ†é¦–å­—æ¯å˜ä¸ºå°å†™</strong> ï¼ˆset<strong>UserDao</strong> â€“&gt; <strong>U</strong>serDao â€“&gt; <strong>u</strong>serDaoï¼‰</li><li>refï¼ˆé¡¾åæ€ä¹‰ï¼Œå¼•ç”¨ï¼‰æ˜¯xmlä¸­<strong>è¢«æ³¨å…¥çš„beançš„id</strong></li></ol><blockquote><p>å°æŠ€å·§ï¼šè¦é”®å…¥ä¾‹å¦‚A = B.get(â€¦)æ—¶ï¼Œæ‰“B.get(â€¦).varå¯ä»¥è‡ªåŠ¨è¡¥å…¨å‡ºAæ¥</p></blockquote><p>ç„¶åï¼Œè¿è¡Œä¸€ä¸‹ä¸‹é¢è¿™ä¸ªdemoï¼Œå¯ä»¥å‘ç°ç¡®å®è¾“å‡ºäº†save runningâ€¦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoDemo</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ApplicationContext app = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        UserService userService = (UserService) app.getBean(<span class="hljs-string">&quot;userService&quot;</span>);<br>        userService.save(); <span class="hljs-comment">// save running...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="ä½¿ç”¨På‘½åç©ºé—´æ³¨å…¥"><a href="#ä½¿ç”¨På‘½åç©ºé—´æ³¨å…¥" class="headerlink" title="ä½¿ç”¨På‘½åç©ºé—´æ³¨å…¥"></a>ä½¿ç”¨På‘½åç©ºé—´æ³¨å…¥</h5><p>æœ¬è´¨ä¸Šä¹Ÿæ˜¯setæ–¹æ³•æ³¨å…¥ï¼ˆä½†æ˜¯è¿˜æ˜¯å­æ ‡ç­¾å½¢å¼çš„setæ–¹æ³•æ³¨å…¥æ›´å¸¸ç”¨å•¦ï¼Œå› ä¸ºçœ‹èµ·æ¥æ¯”è¾ƒæ¸…æ¥šï¼‰<br>é¦–å…ˆï¼Œåœ¨xmlçš„<code>&lt;beans&gt;</code>æ ‡ç­¾å†…å¼•å…¥På‘½åç©ºé—´</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;beans<br>    ...<br>    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;<br>    ...&gt;<br></code></pre></td></tr></table></figure><p>å…¶æ¬¡ï¼Œéœ€è¦ä¿®æ”¹æ³¨å…¥æ–¹å¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.service.impl.UserServiceImpl&quot;</span> <span class="hljs-attr">p:userDao-ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="æ„é€ æ–¹æ³•æ³¨å…¥"><a href="#æ„é€ æ–¹æ³•æ³¨å…¥" class="headerlink" title="æ„é€ æ–¹æ³•æ³¨å…¥"></a>æ„é€ æ–¹æ³•æ³¨å…¥</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br><br>    <span class="hljs-keyword">public</span> UserDao userDao;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">(UserDao userDao)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userDao = userDao;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.save();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.service.impl.UserServiceImpl&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- argå³argumentï¼Œå‚æ•° --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼</strong></p><ol><li>ä¸Šé¢çš„xmlä¸­ï¼Œconstructor-argçš„nameæ˜¯<strong>æ„é€ å‡½æ•°ä¸­çš„å‚æ•°å</strong> </li><li>refï¼ˆé¡¾åæ€ä¹‰ï¼Œå¼•ç”¨ï¼‰æ˜¯xmlä¸­<strong>è¢«æ³¨å…¥çš„beançš„id</strong></li></ol><h4 id="ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹"><a href="#ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹" class="headerlink" title="ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹"></a>ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹</h4><ul><li>æ™®é€šç±»å‹ï¼ˆå¦‚ï¼šintï¼‰</li><li>å¼•ç”¨ç±»å‹ï¼ˆå¦‚ï¼šç±»ï¼‰</li><li>é›†åˆ</li></ul><p>ä¸‹é¢ä»¥setæ–¹æ³•ä¸ºä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹<br>æ¯”å¦‚ï¼Œåœ¨DAOå±‚çš„saveæ–¹æ³•æ—¶è¾“å‡ºç”¨æˆ·å§“åå’Œå¹´é¾„<br>ç”±äºéƒ½æ˜¯æ™®é€šç±»å‹ï¼Œæ‰€ä»¥xmlä¸­çš„<code>ref</code>å³å¼•ç”¨referenceè¦æ”¹ä¸º<code>value</code>å³å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>&#123;<br><br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAge</span><span class="hljs-params">(<span class="hljs-keyword">int</span> age)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;save running...&quot;</span>);<br>        System.out.println(name + <span class="hljs-string">&quot;, &quot;</span> + age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;åå…­å¤œç´«è€&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;18&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å†æ¥æ¼”ç¤ºä¸€ä¸‹æ³¨å…¥<strong>é›†åˆ</strong><br>ï¼ˆå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·ç±»com.aster.domain.Userï¼Œå…¶ä¸­æœ‰å§“åå’Œåœ°å€å¹¶å†™äº†getter sette toStringï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> List&lt;String&gt; strList;<br>    <span class="hljs-keyword">private</span> Map&lt;String, User&gt; userMap;<br>    <span class="hljs-keyword">private</span> Properties properties;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setStrList</span><span class="hljs-params">(List&lt;String&gt; strList)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.strList = strList;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserMap</span><span class="hljs-params">(Map&lt;String, User&gt; userMap)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userMap = userMap;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProperties</span><span class="hljs-params">(Properties properties)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.properties = properties;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;save running...&quot;</span>);<br>        System.out.println(strList);<br>        System.out.println(userMap);<br>        System.out.println(properties);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¥½äººåšåˆ°åº•ï¼Œå¹²è„†ç»™Userä¹Ÿé¡ºä¾¿æ³¨å…¥ä¸€ä¸‹~~~ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.domain.User&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;åå…­å¤œç´«è€&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addr&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å’Œåå…­å¤œè²ä¸€èµ·æ­å»ºçš„æ·±å±±å°å±‹&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.domain.User&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;åå…­å¤œè²&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addr&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å’Œåå…­å¤œç´«è€ä¸€èµ·æ­å»ºçš„æ·±å±±å°å±‹&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;strList&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>åå…­å¤œç´«è€<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>è¶…çº§è¶…çº§å–œæ¬¢<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>åå…­å¤œè²<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userMap&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;uM1&quot;</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">&quot;user1&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;uM2&quot;</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">&quot;user2&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;properties&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p1&quot;</span>&gt;</span>izayoi<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p2&quot;</span>&gt;</span>aster<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p3&quot;</span>&gt;</span>lotus<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.service.impl.UserServiceImpl&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>â†‘ è®²è§£</strong></p><ol><li>ç”±äºstrListæ˜¯Listç±»å‹ï¼Œæ‰€ä»¥åœ¨æ ‡ç­¾ä¹‹é—´å†™<code>&lt;list&gt;</code>æ¥æ³¨å…¥Listå€¼</li><li>ç”±äºMapçš„å…ƒç´ æœ¬è´¨æ˜¯<strong>é”®å€¼å¯¹ï¼ˆåœ¨Javaä¸­æœ‰Entryç±»å‹æ¥è¡¨ç¤ºï¼‰</strong>ï¼Œæ‰€ä»¥å†™<code>&lt;entry&gt;</code>æ¥æ³¨å…¥é”®å€¼å¯¹ï¼›åˆä¼—æ‰€å‘¨çŸ¥ï¼Œé”®å€¼å¯¹ç”±keyå’Œvalueç»„æˆï¼ŒåˆåŒå’å•ä¼—æ‰€å‘¨çŸ¥ï¼Œrefæ˜¯<strong>å¼•ç”¨</strong>çš„æ„æ€ï¼Œæ‰€ä»¥ä¸Šé¢çš„xmlåº”è¯¥ä¸éš¾æ‡‚äº†â‘§ï¼ˆenrtyé‡Œçš„keyæ˜¯åˆ°æ—¶å€™æ³¨å…¥åˆ°mapé‡Œçš„keyåï¼‰</li><li>å¯èƒ½å¿˜äº†Propertiesæ˜¯å•¥ä¸œè¥¿ï¼Œå®ƒå’ŒMapå¾ˆåƒå¾ˆåƒï¼Œåªä¸è¿‡éƒ½æ˜¯å­—ç¬¦ä¸².propçš„å€¼è¦åœ¨æ ‡ç­¾ä¹‹é—´å†™ï¼ˆå…¶å®æ‰“valueåå°±ä¼šå‘ç°IDEAæ²¡ååº”ï¼‰</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">save running<span class="hljs-built_in">..</span>.<br>[åå…­å¤œç´«è€, è¶…çº§è¶…çº§å–œæ¬¢, åå…­å¤œè²]<br>&#123;<span class="hljs-attribute">uM1</span>=User&#123;<span class="hljs-attribute">name</span>=<span class="hljs-string">&#x27;åå…­å¤œç´«è€&#x27;</span>, <span class="hljs-attribute">addr</span>=<span class="hljs-string">&#x27;å’Œåå…­å¤œè²ä¸€èµ·æ­å»ºçš„æ·±å±±å°å±‹&#x27;</span>&#125;, <span class="hljs-attribute">uM2</span>=User&#123;<span class="hljs-attribute">name</span>=<span class="hljs-string">&#x27;åå…­å¤œè²&#x27;</span>, <span class="hljs-attribute">addr</span>=<span class="hljs-string">&#x27;å’Œåå…­å¤œç´«è€ä¸€èµ·æ­å»ºçš„æ·±å±±å°å±‹&#x27;</span>&#125;&#125;<br>&#123;<span class="hljs-attribute">p1</span>=izayoi, <span class="hljs-attribute">p2</span>=aster, <span class="hljs-attribute">p3</span>=lotus&#125;<br></code></pre></td></tr></table></figure><h3 id="å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶"><a href="#å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶" class="headerlink" title="å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶"></a>å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶</h3><p>å·²ç»å¯ä»¥å‘ç°ï¼Œ<code>applicationContext.xml</code>ä¸€ä¸å°å¿ƒå°±ä¼šå†™å¾—å¾ˆé•¿å¾ˆé•¿ï¼Œè€Œä¸”ä¹Ÿä¸å¥½ç»´æŠ¤</p><p>å¯ä»¥æ‹†æˆå¤šä¸ªé…ç½®æ–‡ä»¶åï¼Œåœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œå¼•ç”¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span><br>    ...<br>    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-xxx.xml&quot;</span>/&gt;</span><br>    ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="Springç›¸å…³API"><a href="#Springç›¸å…³API" class="headerlink" title="Springç›¸å…³API"></a>Springç›¸å…³API</h2><h3 id="ApplicationContextæ¥å£çš„å®ç°ç±»"><a href="#ApplicationContextæ¥å£çš„å®ç°ç±»" class="headerlink" title="ApplicationContextæ¥å£çš„å®ç°ç±»"></a>ApplicationContextæ¥å£çš„å®ç°ç±»</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.ypivedindm8.png" alt="image"></p><h3 id="getBean"><a href="#getBean" class="headerlink" title="getBean()"></a>getBean()</h3><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=20">P20</a></p><h3 id="æ€»ç»“-é‡ç‚¹API"><a href="#æ€»ç»“-é‡ç‚¹API" class="headerlink" title="æ€»ç»“-é‡ç‚¹API"></a>æ€»ç»“-é‡ç‚¹API</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ApplicationContext app = <span class="hljs-keyword">new</span> ClasspathXmlApplicationContext(<span class="hljs-string">&quot;xxx.xml&quot;</span>);<br>app.getBean(<span class="hljs-string">&quot;id&quot;</span>); <span class="hljs-comment">// è¿”å›å€¼éœ€è¦å¼ºè½¬ï¼Œä½†æ˜¯åœ¨å®¹å™¨å†…å…è®¸å­˜åœ¨å¤šä¸ªç›¸åŒçš„å¯¹è±¡ï¼Œåªè¦idä¸ä¸€æ ·å°±è¡Œ</span><br>app.getBean(ClassName.class); <span class="hljs-comment">// è¿”å›å€¼ä¸éœ€è¦å¼ºè½¬ï¼Œä½†æ˜¯å®¹å™¨å†…åªèƒ½å­˜åœ¨ä¸€ä¸ª</span><br></code></pre></td></tr></table></figure><h2 id="æ•°æ®æº"><a href="#æ•°æ®æº" class="headerlink" title="æ•°æ®æº"></a>æ•°æ®æº</h2><h3 id="ç†è§£æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰"><a href="#ç†è§£æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰" class="headerlink" title="ç†è§£æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰"></a>ç†è§£æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰</h3><p>æ•°æ®æºæ˜¯ä¸ºäº†æé«˜ç¨‹åºæ€§èƒ½å‡ºç°çš„ã€‚ç¨‹åºè¿è¡Œæ—¶ï¼Œå®ç°å®ä¾‹åŒ–æ•°æ®æºï¼Œåˆå§‹åŒ–éƒ¨åˆ†è¿æ¥èµ„æºï¼›ä½¿ç”¨è¿æ¥èµ„æºæ—¶ï¼Œä»æ•°æ®æºä¸­è·å–ï¼Œä½¿ç”¨å®Œæ¯•åå†å°†è¿æ¥èµ„æºå½’è¿˜ç»™æ•°æ®æºã€‚ã€å¯ä»¥ç†è§£ä¸ºåå…­å¤œç´«è€å’Œåå…­å¤œè²å»å¹»æƒ³ä¹¡èœœæœˆæ—…è¡Œï¼ˆé›¾ï¼‰ï¼Œä»–ä»¬å¯ä»¥éª‘å¹»æƒ³ä¹¡çš„å…±äº«å•è½¦ï¼Œåœ¨ç¦»å¼€å¹»æƒ³ä¹¡çš„æ—¶å€™å½’è¿˜å…±äº«å•è½¦å³å¯ã€‘</p><p>å¸¸è§çš„æœ‰ï¼šDBCP, C3P0, BoneCP, Druidç­‰</p><h3 id="é…ç½®æ•°æ®æº"><a href="#é…ç½®æ•°æ®æº" class="headerlink" title="é…ç½®æ•°æ®æº"></a>é…ç½®æ•°æ®æº</h3><ol><li>å¯¼å…¥æ•°æ®æºçš„åæ ‡å’Œæ•°æ®åº“é©±åŠ¨åæ ‡</li><li>åˆ›å»ºæ•°æ®æºå¯¹è±¡</li><li>è®¾ç½®æ•°æ®æºçš„åŸºæœ¬è¿æ¥æ•°æ®ï¼ˆæ•°æ®åº“é©±åŠ¨ åœ°å€ ç”¨æˆ·åå¯†ç â€¦â€¦ï¼‰</li><li>ä½¿ç”¨æ•°æ®æºè·å–è¿æ¥èµ„æºå’Œå½’è¿˜è¿æ¥èµ„æº</li></ol><p>ä¸‹é¢åˆ†åˆ«ç»™å‡ºc3p0å’Œdruidçš„æµ‹è¯•æ¡ˆä¾‹<br>mavençš„é…ç½®æ–‡ä»¶é‡Œï¼Œæ³¨æ„mysql-java-connectorçš„ç‰ˆæœ¬è¦ä¸ç³»ç»Ÿå®‰è£…çš„mysqlç›¸ä¸€è‡´<br>ï¼ˆå–„ç”¨ <a href="https://mvnrepository.com/%EF%BC%89">https://mvnrepository.com/ï¼‰</a><br>ï¼ˆå¦å¤–äº†åˆ«å¿˜äº†åœ¨IDEAå»ºç«‹ä¸€ä¸ªMySQLæ•°æ®æºå¹¶å»ºç«‹ä¸€ä¸ªtestçš„æ¶æ„â€¦â€¦æˆ‘å¤ªè ¢äº†ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.21<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>c3p0<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>c3p0<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.9.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DataSourceTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">// c3p0</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span> <span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        ComboPooledDataSource dataSource = <span class="hljs-keyword">new</span> ComboPooledDataSource();<br>        dataSource.setDriverClass(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        <span class="hljs-comment">// com.mysql.jdbc.Driverä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ˜¯æ—§ç‰ˆï¼Œå¯èƒ½æœ‰å…¼å®¹æ€§é—®é¢˜</span><br>        dataSource.setJdbcUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span>);<br>        dataSource.setUser(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;root&quot;</span>);<br><br>        Connection connection = dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">// Druid</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span> <span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        DruidDataSource dataSource = <span class="hljs-keyword">new</span> DruidDataSource();<br>        dataSource.setDriverClassName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        dataSource.setUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span>);<br>        dataSource.setUsername(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;root&quot;</span>);<br><br>        DruidPooledConnection connection = dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=25">ï¼ˆæš‚ä¸”è·³è¿‡æ•°æ®æºï¼‰</a></p><h2 id="æ³¨è§£å¼€å‘"><a href="#æ³¨è§£å¼€å‘" class="headerlink" title="æ³¨è§£å¼€å‘"></a>æ³¨è§£å¼€å‘</h2><p>ç›¸å¯¹äºxmlï¼Œæ›´æ–¹ä¾¿ï¼Œæ‰€ä»¥å¤§å®¶å–œæ¬¢æ³¨è§£å¼€å‘</p><h3 id="SpringåŸå§‹æ³¨è§£"><a href="#SpringåŸå§‹æ³¨è§£" class="headerlink" title="SpringåŸå§‹æ³¨è§£"></a>SpringåŸå§‹æ³¨è§£</h3><p>ä¸»è¦æ˜¯æ›¿ä»£<code>&lt;Bean&gt;</code>çš„é…ç½®<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.6lxp0yc72pc0.png" alt="image"></p><p>ä¸‹é¢ä»¥ç»å…¸çš„ç”± userDaoï¼Œè°ƒç”¨äº†userDaoçš„saveæ–¹æ³•çš„userServiceå’Œç”¨äºæµ‹è¯•çš„userController ç»„æˆçš„æµ‹è¯•æ¡ˆä¾‹æ¥ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// UserDaoImpl.java</span><br><span class="hljs-comment">// &lt;bean id=&quot;userDao&quot; class=&quot;com.aster.dao.impl.UserDaoImpl&quot;/&gt;</span><br><span class="hljs-comment">// ç­‰ä»·äºä¸‹é¢è¿™å¥è¯</span><br><span class="hljs-meta">@Component(&quot;userDao&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;save running...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// UserServiceImpl.java</span><br><span class="hljs-comment">// &lt;bean id=&quot;userService&quot; class=&quot;com.aster.service.impl.UserServiceImpl&quot;&gt;&lt;/bean&gt;</span><br><span class="hljs-comment">// ç­‰ä»·äºä¸‹é¢è¿™å¥è¯</span><br><span class="hljs-meta">@Component(&quot;userService&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br><br>    <span class="hljs-comment">// &lt;property name=&quot;userDao&quot; ref=&quot;userDao&quot;/&gt;</span><br>    <span class="hljs-comment">// ç­‰ä»·äºä¸‹é¢è¿™ä¸¤å¥è¯</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-meta">@Qualifier(&quot;userDao&quot;)</span><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserDao</span><span class="hljs-params">(UserDao userDao)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userDao = userDao;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">()</span> </span>&#123;<br>        userDao.save();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œä½¿ç”¨æ³¨è§£å¼€å‘çš„æ—¶å€™ï¼Œéœ€è¦åœ¨xmlä¸­<strong>é…ç½®ç»„ä»¶æ‰«æ</strong>ï¼Œè®©Springå»æ‰¾æˆ‘ä»¬çš„æ³¨è§£ï¼ˆâ€œæŒ‡å®šå“ªä¸ªåŒ…åŠå…¶å­åŒ…ä¸‹çš„Beanéœ€è¦è¿›è¡Œæ‰«æä»¥ä¾¿è¯†åˆ«ä½¿ç”¨æ³¨è§£é…ç½®çš„ç±»ã€å­—æ®µå’Œæ–¹æ³•â€ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--  é…ç½®ç»„ä»¶æ‰«æï¼ˆå‘Šè¯‰Springå»æ‰¾æˆ‘çš„æ³¨è§£  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.aster&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br>`base-package`ï¼šé…ç½®åŸºæœ¬åŒ…ã€‚Springä¼šæ‰«æåŸºæœ¬åŒ…åŠå…¶å­åŒ…<br></code></pre></td></tr></table></figure><p>é¡ºä¾¿ä¹Ÿè´´ä¸€ä¸‹æµ‹è¯•ç¨‹åºå§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// UserController.java</span><br>...<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ApplicationContext app = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        UserService userService = app.getBean(UserService.class);<br>        userService.save();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„é‚£ä¸ªè¡¨æ ¼ï¼Œä¸ºäº†ä¾¿äºåŒºåˆ†ï¼Œå¯ä»¥åˆ†åˆ«åœ¨dao, serviceå’Œwebå±‚ä¸­å°†<code>@Component</code>å†™ä¸ºå¯¹åº”å½¢å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository(&quot;userDao&quot;)</span><br><span class="hljs-meta">@Service(&quot;userService&quot;)</span><br>(ç¤ºä¾‹ç¨‹åºä¸­çš„webå±‚æ˜¯ä¸€ä¸ªå‡çš„webå±‚å•¦ï¼Œä¸ç„¶å°±<span class="hljs-meta">@Controller(&quot;userController&quot;)</span>)<br></code></pre></td></tr></table></figure><p>å¯ä»¥æŠŠ<code>@Autowired</code>å’Œ<code>@Qualifier</code>ä¹‹ä¸‹çš„setæ–¹æ³•åˆ æ‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-meta">@Qualifier(&quot;userDao&quot;)</span><br><span class="hljs-keyword">private</span> UserDao userDao;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">()</span> </span>&#123;<br>    userDao.save();<br>&#125;<br></code></pre></td></tr></table></figure><p>æ™®é€šæ•°æ®çš„æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Value(&quot;google.com&quot;)</span><br><span class="hljs-keyword">private</span> String url; <span class="hljs-comment">// google.com</span><br></code></pre></td></tr></table></figure><blockquote><p>åˆä¹±è®°ä¸€ä¸ªå°æŠ€å·§ï¼šIDEAé‡Œæ‰“/ä¹‹åä¼šè‡ªåŠ¨è¡¥å…¨å•æ ‡ç­¾/&gt;</p></blockquote><h3 id="Springæ–°æ³¨è§£"><a href="#Springæ–°æ³¨è§£" class="headerlink" title="Springæ–°æ³¨è§£"></a>Springæ–°æ³¨è§£</h3><p>ä¹‹å‰ç•¥è¿‡äº†æ•°æ®æºï¼Œæ­£å¥½å®éªŒå®¤åœ¨åšçš„å°ç¨‹åºç”¨åˆ°äº†druidï¼Œè¿™é‡Œå…ˆå†™ä¸€ä¸‹ä¹‹å‰æ²¡å†™çš„Springé…ç½®druidæ•°æ®æºï¼š</p><p>ä¸€èˆ¬åœ¨å¼€å‘ä¸­ï¼Œä¼šæŠŠé…ç½®beansçš„é…ç½®æ–‡ä»¶å’Œé…ç½®æ•°æ®æºçš„é…ç½®æ–‡ä»¶<strong>åˆ†ç¦»å¼€</strong>ï¼Œä¾¿äºç»´æŠ¤ï¼ˆå³åˆ†å¼€<code>applicationContext.xml</code>å’Œ<code>jdbc.properties</code>ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦æŠŠ<code>jdbc.properties</code><strong>å¯¼å…¥åˆ°</strong><code>applicationContext.xml</code>é‡Œï¼šï¼ˆå½“ç„¶äº†ï¼Œä»¥åSpringBootè‚¯å®šå°±ä¸å¯¼å…¥äº†ï¼Œä½†è¿˜æ˜¯å­¦ä¸€å­¦ï¼‰</p><p>å¯¼å…¥ä¹‹å‰ï¼Œéœ€è¦å¼•å…¥contextå‘½åç©ºé—´å’Œçº¦æŸè·¯å¾„ï¼š</p><ul><li>å‘½åç©ºé—´ï¼š<code>xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</code></li><li>çº¦æŸè·¯å¾„ï¼š<code>http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</code></li></ul><p>å¯¼å…¥æ—¶ï¼Œç”¨åˆ°äº†SPELï¼ˆSpringè¡¨è¾¾å¼ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pro">jdbc.driver&#x3D;com.mysql.cj.jdbc.Driver<br>jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;test<br>jdbc.username&#x3D;root<br>jdbc.password&#x3D;root<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--  é…ç½®ç»„ä»¶æ‰«æï¼ˆå‘Šè¯‰Springå»æ‰¾æˆ‘çš„æ³¨è§£  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.aster&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--  åŠ è½½å¤–éƒ¨çš„é…ç½®æ–‡ä»¶  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--  è¿™é‡Œçš„nameå°±æ˜¯æŒ‰ç…§druidé‡Œsetæ–¹æ³•å»æ‰setä¹‹åæ¥å†™çš„  --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span> <span class="hljs-params">()</span> </span>&#123;<br>    ApplicationContext app = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>    DataSource dataSource = app.getBean(DataSource.class);<br>    Connection connection = dataSource.getConnection();<br>    System.out.println(connection);<br>    connection.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åŸå§‹æ³¨è§£ä¸­ï¼Œé…ç½®æ–‡ä»¶ä¸­çš„æœ‰ä¸€äº›éƒ¨åˆ†ä»ç„¶æ˜¯æ— æ³•çœå»çš„ï¼Œæ¯”å¦‚ä¸Šé¢çš„å¯¼å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ã€å¤–éƒ¨ç±»çš„è¯­å¥ï¼Œä»¥åŠç»„ä»¶æ‰«æå’Œimportçš„è¯­å¥ï¼›å¦‚æœæƒ³æ›¿ä»£æ‰ä»–ä»¬ï¼Œéœ€è¦ç”¨åˆ°æ–°æ³¨è§£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><p>ï¼ˆå¾ˆéš¾å†™æ¸…æ¥šï¼Œæ‰€ä»¥å¹²è„†çœ‹ä»£ç å’¯ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//SpringConfiguration.java</span><br><span class="hljs-keyword">package</span> com.aster.config;<br><br><span class="hljs-keyword">import</span> org.springframework.context.annotation.*;<br><br><span class="hljs-meta">@Configuration</span> <span class="hljs-comment">// å£°æ˜è¿™ä¸ªç±»æ˜¯Springçš„æ ¸å¿ƒé…ç½®ç±»</span><br><span class="hljs-meta">@ComponentScan(&quot;com.aster&quot;)</span> <span class="hljs-comment">// é…ç½®ç»„ä»¶æ‰«æ</span><br><span class="hljs-meta">@Import(DataSourceConfiguration.class)</span> <span class="hljs-comment">// å¼•å…¥åˆ«çš„é…ç½®æ–‡ä»¶</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringConfiguration</span> </span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//DataSourceConfiguration.java</span><br><span class="hljs-keyword">package</span> com.aster.config;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.PropertySource;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span> <span class="hljs-comment">// å¯¼å…¥å¤–éƒ¨é…ç½®</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DataSourceConfiguration</span> </span>&#123;<br><br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String driver;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String url;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String password;<br><br>    <span class="hljs-comment">// Springä¼šå°†è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä»¥name=&quot;dataSource&quot;å­˜åˆ°Springå®¹å™¨ä¸­</span><br>    <span class="hljs-meta">@Bean(&quot;dataSource&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">getDataSource</span> <span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br>        DruidDataSource dataSource = <span class="hljs-keyword">new</span> DruidDataSource();<br>        dataSource.setDriverClassName(driver);<br>        dataSource.setUrl(url);<br>        dataSource.setUsername(username);<br>        dataSource.setPassword(password);<br>        <span class="hljs-keyword">return</span> dataSource;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//UserController.java</span><br> ...<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br>        <span class="hljs-comment">// æ³¨æ„ï¼ç”±äºå·²ç»ä¸æ˜¯ä½¿ç”¨xmlé…ç½®äº†ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰å˜åŒ–ï¼</span><br>        ApplicationContext app = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration.class);<br>        UserService userService = app.getBean(UserService.class);<br>        userService.save();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ï¼ˆæˆ‘æ˜¯ä¸ä¼šè¯´ä¸Šé¢çš„ç¨‹åºæŠ¥é”™äº†æˆ‘è¿˜ä¸çŸ¥é“é”™åœ¨å“ªå„¿çš„ï¼ï¼‰</p><p>ä¸Šè¿°ç¨‹åºä¸­çš„<code>@Import</code>å‚æ•°å…¶å®æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥åŒæ—¶å¯¼å…¥å¤šä¸ªé…ç½®æ–‡ä»¶ï¼š<code>@Import(&#123;a.class, b.class, c.class&#125;)</code></p><p>ç›®å‰çš„é¡¹ç›®ç»“æ„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.ud5vtutzirk.png" alt="image"></p><h2 id="JUnit"><a href="#JUnit" class="headerlink" title="JUnit"></a>JUnit</h2><p>ï¼ˆæ‘¸äº†ï¼Œç”¨åˆ°å†æ¥è¡¥ä¸Šï¼‰</p><h2 id="Springé›†æˆwebç¯å¢ƒ"><a href="#Springé›†æˆwebç¯å¢ƒ" class="headerlink" title="Springé›†æˆwebç¯å¢ƒ"></a>Springé›†æˆwebç¯å¢ƒ</h2><p>ä¹‹å‰éƒ½åªæ˜¯æ‹¿å‡çš„webå±‚æ¥æµ‹è¯•ï¼Œè¿™æ¬¡è¦æ¥çœŸçš„å’¯~</p><p>ï¼ˆä»è¿™é‡Œå¼€å§‹ï¼Œç½‘è¯¾åˆå›åˆ°äº†xmlå¼€å‘ï¼Œæˆ‘å°±è¿˜ç”¨æ³¨è§£å¼€å‘å§ï¼ï¼‰</p><h3 id="å‰ç½®JavaWebçŸ¥è¯†"><a href="#å‰ç½®JavaWebçŸ¥è¯†" class="headerlink" title="å‰ç½®JavaWebçŸ¥è¯†"></a>å‰ç½®JavaWebçŸ¥è¯†</h3><p>ï¼ˆè°è®©æˆ‘æ˜¯å¼¹å°„èµ·æ­¥å‘¢ï¼Œå®³ï¼‰</p><p>åŠ¨æ€Javaé¡¹ç›®çš„ç›®å½•ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">-- é¡¹ç›®æ ¹ç›®å½•</span><br><span class="hljs-comment">-- WEB-INFç›®å½•</span><br><span class="hljs-comment">-- web.xmlï¼šwebé¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</span><br><span class="hljs-comment">-- classesç›®å½•ï¼šæ”¾ç½®å­—èŠ‚ç æ–‡ä»¶çš„ç›®å½•</span><br><span class="hljs-comment">-- libç›®å½•ï¼šæ”¾ç½®ä¾èµ–çš„jaråŒ…</span><br></code></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªæ¨¡å—ï¼Œæ³¨æ„å’¯ï¼Œæ˜¯<strong>æ¨¡å—</strong></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.neh2fbvmx4w.png" alt="image"></p><h3 id="åæ ‡å¯¼å…¥"><a href="#åæ ‡å¯¼å…¥" class="headerlink" title="åæ ‡å¯¼å…¥"></a>åæ ‡å¯¼å…¥</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h3><p>æ–°å»ºä¸€ä¸ªJavaEEçš„webæ¨¡å—ä¹‹åï¼Œä¾ç„¶æ˜¯æŒ‰ç…§ä¹‹å‰çš„ç»“æ„ï¼Œåªä¸è¿‡webåŒ…é‡Œçš„UserControllerå˜æˆUserServeletäº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// UserServlet.java</span><br><span class="hljs-keyword">package</span> com.aster.web;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        ApplicationContext app = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration.class);<br>        UserService userService = app.getBean(UserService.class);<br>        userService.save();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œé…ç½®ä¸€ä¸‹<code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>UserServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.aster.web.UserServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>UserServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/userServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¹‹åï¼Œé…ç½®å¥½Tomcatåç‚¹å‡»å³ä¸Šè§’çš„è¿è¡Œï¼Œæµè§ˆå™¨ä¼šæ‰“å¼€Tomcatä¸»é¡µï¼Œç»§ç»­è®¿é—®<code>/userServlet</code>å³å¯æŠµè¾¾UserServletäº†ï¼ˆå› ä¸ºæˆ‘ä»¬å•¥ä¹Ÿæ²¡å†™ï¼Œæ‰€ä»¥æµè§ˆå™¨è‡ªç„¶æ˜¯ä¸€ç‰‡ç©ºç™½ï¼Œä½†æ˜¯æ­¤æ—¶IDEAçš„æ§åˆ¶å°ä¼šè¾“å‡º<code>save running...</code>ï¼‰</p><h3 id="ContextLoaderListenerç›‘å¬å™¨"><a href="#ContextLoaderListenerç›‘å¬å™¨" class="headerlink" title="ContextLoaderListenerç›‘å¬å™¨"></a>ContextLoaderListenerç›‘å¬å™¨</h3><p>ä¹‹å‰ï¼Œæ¯æ¬¡è·å–Beançš„æ—¶å€™éƒ½è¦<code>ApplicationContext app = new AnnotationConfigApplicationContext(SpringConfiguration.class);</code>ï¼Œå¾ˆéº»çƒ¦ä¼šå¯¼è‡´é…ç½®æ–‡ä»¶åŠ è½½å¤šæ¬¡ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡åŠ è½½å¤šæ¬¡</p><blockquote><p>åˆåˆ°äº†æˆ‘ä¸ä¼šçš„JavaWebå°çŸ¥è¯†æ—¶é—´ï¼šåœ¨webé¡¹ç›®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>ServletContextListener</code>ç›‘å¬webåº”ç”¨çš„å¯åŠ¨ï¼Œå¯ä»¥åœ¨webåº”ç”¨å¯åŠ¨æ—¶ï¼Œå°±åŠ è½½Springé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºApplicationContextå¹¶å­˜å‚¨åœ¨æœ€å¤§åŸŸ<code>servletContext</code>ä¸­</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ContextLoaderListener.java</span><br><span class="hljs-keyword">package</span> com.aster.listener;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ContextLoaderListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ServletContextListener</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextInitialized</span><span class="hljs-params">(ServletContextEvent servletContextEvent)</span> </span>&#123;<br>        ApplicationContext app = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration.class);<br>        <span class="hljs-comment">// å°†Springçš„åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å­˜å‚¨åˆ°serveletContextåŸŸä¸­</span><br>        ServletContext servletContext = servletContextEvent.getServletContext();<br>        servletContext.setAttribute(<span class="hljs-string">&quot;app&quot;</span>, app);<br>        System.out.println(<span class="hljs-string">&quot;Springå®¹å™¨åˆ›å»ºå®Œæ¯•&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextDestroyed</span><span class="hljs-params">(ServletContextEvent servletContextEvent)</span> </span>&#123;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>éœ€è¦é…ç½®ä¸€ä¸‹ä¸Šé¢çš„ç›‘å¬å™¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- web.xml --&gt;</span><br>...<br><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>com.aster.listener.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br>...<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨UserServleté‡Œè°ƒç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//ApplicationContext app = new AnnotationConfigApplicationContext(SpringConfiguration.class);</span><br>        ServletContext servletContext = <span class="hljs-keyword">this</span>.getServletContext();<br>        ApplicationContext app = (ApplicationContext) servletContext.getAttribute(<span class="hljs-string">&quot;app&quot;</span>);<br>        UserService userService = app.getBean(UserService.class);<br>        userService.save();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="web-xmlè®¾ç½®å…¨å±€å‚æ•°"><a href="#web-xmlè®¾ç½®å…¨å±€å‚æ•°" class="headerlink" title="web.xmlè®¾ç½®å…¨å±€å‚æ•°"></a>web.xmlè®¾ç½®å…¨å±€å‚æ•°</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>name<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>value<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">...<br>ServletContext servletContext = <span class="hljs-keyword">this</span>.getServletContext();<br>String s = servletContext.getInitParameter(<span class="hljs-string">&quot;name&quot;</span>);<br>...<br></code></pre></td></tr></table></figure><h3 id="tip"><a href="#tip" class="headerlink" title="tip"></a>tip</h3><p>ä¸Šé¢çš„é¡¹ç›®é‡Œï¼Œappæ˜¾ç„¶æ˜¯å’Œâ€appâ€è€¦åˆæ­»çš„ï¼Œè¦æ˜¯åå­—å¾ˆé•¿è€Œä¸”åœ¨å¾ˆå¤šåœ°æ–¹ç”¨åˆ°çš„è¯ï¼Œä¼šå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æœ€å¥½ä¹Ÿè§£è€¦ï¼Œå³ç”¨åˆ°appçš„æ—¶å€™ï¼Œä¸éœ€è¦ç”¨åˆ°â€appâ€è¿™ä¸ªåå­—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//WebApplicationContextUtils.java</span><br><br><span class="hljs-comment">// å»ºä¸€ä¸ªè·å–webappçš„å·¥å…·ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebApplicationContextUtils</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ApplicationContext <span class="hljs-title">getWebApplicationContext</span> <span class="hljs-params">(ServletContext servletContext)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> (ApplicationContext) servletContext.getAttribute(<span class="hljs-string">&quot;app&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        ServletContext servletContext = <span class="hljs-keyword">this</span>.getServletContext();<br>        <br>        <span class="hljs-comment">// æ³¨æ„ä¸‹é¢è¿™å¥è¯ï¼Œæ²¡æœ‰ç”¨åˆ°&quot;app&quot;å“¦</span><br>        ApplicationContext app = WebApplicationContextUtils.getWebApplicationContext(servletContext);<br>        <br>        UserService userService = app.getBean(UserService.class);<br>        userService.save();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Springæä¾›çš„ç›‘å¬å™¨"><a href="#Springæä¾›çš„ç›‘å¬å™¨" class="headerlink" title="Springæä¾›çš„ç›‘å¬å™¨"></a>Springæä¾›çš„ç›‘å¬å™¨</h3><p>æ²¡é”™ï¼Œä¹‹å‰é‚£ä¸ªè‡ªå·±å†™çš„ç™½å†™äº†ï¼ˆé«˜æƒ…å•†ï¼šåŠ æ·±ç†è§£ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.14iuwycfeqrg.png" alt="image"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.0.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--  è¾“å…¥Contextâ€¦â€¦å°±æç¤ºäº†  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç”±äºæˆ‘ç”¨çš„æ³¨è§£ï¼Œè¿™é‡Œä¼šé‡åˆ°ä¸€ä¸ªå°é—®é¢˜ï¼Œå¯åŠ¨æ—¶ï¼Œé¡¹ç›®ä¼šé»˜è®¤åœ¨WEB-INFç›®å½•ä¸‹å¯»æ‰¾<code>applicationContext.xml</code>ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±æŠ¥é”™ã€‚è™½ç„¶æˆ‘å¹¶æ²¡æœ‰ç”¨åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½†å§‘ä¸”åœ¨resourcesä¸‹åˆ›å»ºä¸€ä¸ªç©ºç™½çš„<code>applicationContext.xml</code>ï¼Œå†åŠ ä¸Šè¿™ä¸€å±€è¯ï¼ˆå°½é‡å¾€å‰åŠ ï¼Œåå­—éšä¾¿ï¼‰</p><p><strong>ï¼ˆåè®°ï¼šå†åæ¥å‘ç°åªè¦ç”¨ä¸åˆ°è¿™ä¸ªapplicationContext.xmlï¼Œä¸åŠ è¿™ä¸€æ®µä¹Ÿä¸ä¼šæŠ¥é”™ã€‚å¯èƒ½å½“æ—¶æ˜¯åˆ«çš„åŸå› æŠ¥é”™Orzï¼‰</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- web.xml --&gt;</span><br>...<br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h1 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h1><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.3wfjv9skmq80.png" alt="Spring MVCçš„å¼€å‘æ­¥éª¤"></p><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><h3 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h3><p>å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚ï¼Œæ‰§è¡Œé€»è¾‘å¹¶è¿›è¡Œè§†å›¾è·³è½¬</p><h3 id="å¼€å‘æ­¥éª¤"><a href="#å¼€å‘æ­¥éª¤" class="headerlink" title="å¼€å‘æ­¥éª¤"></a>å¼€å‘æ­¥éª¤</h3><ol><li>å¯¼å…¥SpringMVCç›¸å…³åæ ‡</li><li>é…ç½®SpringMVCæ ¸å¿ƒæ§åˆ¶å™¨DispatcherServlet</li><li>åˆ›å»ºControlerç±»è§†å›¾å’Œç•Œé¢</li><li>ä½¿ç”¨æ³¨è§£é…ç½®Controllerç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„æ˜ å°„åœ°å€</li><li>é…ç½®SpringMVCæ ¸å¿ƒæ–‡ä»¶spring-mvc.xml</li><li>å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æµ‹è¯•</li></ol><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>æ³¨æ„ä»”ç»†çœ‹ç¨‹åºå“¦ï¼Œå°±æ‡’å¾—å†™é¢å¤–çš„å­—äº†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.0.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--    é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--        é…ç½®MVCçš„é…ç½®æ–‡ä»¶çš„ä½ç½®--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--        æœåŠ¡å™¨å¯åŠ¨æ—¶å°±åŠ è½½--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬åœ¨å†™MVCæ—¶ï¼Œ<strong>webå±‚</strong>çš„åŒ…åéƒ½å«<strong>controller</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.controller;<br><br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><br><span class="hljs-comment">// æ·»åŠ åˆ°å®¹å™¨</span><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-comment">// é…ç½®æ˜ å°„å…³ç³»</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">save</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Controller save running ...&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success.jsp&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;h1&gt;Hello, World!&lt;/h1&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>spring-mvc.xmlï¼ˆä¸€èˆ¬å’ŒSpringçš„åˆ†å¼€ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">...<br><span class="hljs-comment">&lt;!--Controllerçš„ç»„ä»¶æ‰«æ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.aster.controller&quot;</span>/&gt;</span><br>...<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.69t09i7ac340.png" alt="image"></p><p>è¿è¡Œé¡¹ç›®åï¼Œè¿›å…¥/quické¡µé¢å°±èƒ½çœ‹è§Hello, World!å•¦ï¼</p><blockquote><p>æ³¨æ„äº†ï¼æœ‰æ—¶å€™ç½‘é¡µæ‰“ä¸å¼€å¯èƒ½æ˜¯é…ç½®æ–‡ä»¶é‡Œå“ªé‡Œå†™é”™äº†</p></blockquote><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.18o4oq9acow0.png" alt="åˆšæ‰çš„é¡¹ç›®çš„æµç¨‹"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.38be7n11c540.png" alt="SpringMVCæµç¨‹å›¾"></p><h2 id="SpringMVCç»„ä»¶è§£æ"><a href="#SpringMVCç»„ä»¶è§£æ" class="headerlink" title="SpringMVCç»„ä»¶è§£æ"></a>SpringMVCç»„ä»¶è§£æ</h2><h3 id="SpringMVCçš„æ‰§è¡Œæµç¨‹"><a href="#SpringMVCçš„æ‰§è¡Œæµç¨‹" class="headerlink" title="SpringMVCçš„æ‰§è¡Œæµç¨‹"></a>SpringMVCçš„æ‰§è¡Œæµç¨‹</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.mo6mqejbpog.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.4qho60va06g0.png" alt="image"></p><h2 id="SpringMVCæ³¨è§£è§£æ"><a href="#SpringMVCæ³¨è§£è§£æ" class="headerlink" title="SpringMVCæ³¨è§£è§£æ"></a>SpringMVCæ³¨è§£è§£æ</h2><h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h3><p><strong>ä½œç”¨ï¼š</strong>ç”¨äºå»ºç«‹è¯·æ±‚URLå’Œå¤„ç†è¯·æ±‚çš„æ–¹æ³•ä¹‹é—´çš„å¯¹åº”å…³ç³»</p><p><strong>ä½ç½®ï¼š</strong></p><ul><li>æ”¾åœ¨ç±»ä¸Šæ—¶ï¼Œä½œä¸ºè¯·æ±‚URLçš„ç¬¬ä¸€çº§è®¿é—®ç›®å½•ï¼Œå¯ä»¥ä¸å†™</li><li>æ”¾åœ¨æ–¹æ³•ä¸Šæ—¶ï¼Œä½œä¸ºæ¥åœ¨ä¸€çº§ç›®å½•åçš„äºŒçº§ç›®å½•</li></ul><p>ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">save</span> <span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Controller save running ...&quot;</span>);<br>        <span class="hljs-comment">// è¿™é‡Œå¤šåŠ äº†ä¸€å±‚userï¼Œæ‰€ä»¥åŠ ä¸Š/è®©Controllerä»æ ¹ç›®å½•æ‰¾jsp</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/success.jsp&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.533e5wmnycg0.png" alt="image"></p><p><strong>å±æ€§ï¼š</strong></p><ul><li>valueï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„URLï¼ˆåªæœ‰ä¸€ä¸ªå±æ€§æ—¶ï¼Œé»˜è®¤æ˜¯valueï¼‰</li><li>methodï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„æ–¹å¼<ul><li>method çš„é¢„è®¾å€¼æ˜¯æšä¸¾æ–¹å¼çš„ï¼š<code>@RequestMapping(value = &quot;/quick&quot;, method = RequestMethod.GET)</code></li></ul></li><li>paramsï¼šç”¨äºæŒ‡å®šé™åˆ¶è¯·æ±‚å‚æ•°çš„æ¡ä»¶ï¼ˆæ”¯æŒç®€å•çš„è¡¨è¾¾å¼ï¼‰<ul><li>ä¾‹å¦‚<code>params = &#123;&quot;accountName&quot;&#125;</code>è¡¨ç¤ºè¯·æ±‚ä¸­å¿…é¡»æœ‰accountName</li><li><code>params = &#123;&quot;money!100&quot;&#125;</code>è¡¨ç¤ºè¯·æ±‚å‚æ•°ä¸­moneyä¸èƒ½æ˜¯100</li></ul></li></ul><h3 id="ç»„ä»¶æ‰«æ"><a href="#ç»„ä»¶æ‰«æ" class="headerlink" title="ç»„ä»¶æ‰«æ"></a>ç»„ä»¶æ‰«æ</h3><p>ç»„ä»¶æ‰«æä¹Ÿæœ‰è¿™ç§æ–¹æ³•ï¼Œæˆ‘å°±ä¸å†™äº†ï¼Œæä¸€å˜´</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.62wkz49s3ps0.png" alt="image"></p><h3 id="XMLé…ç½®è§£æ"><a href="#XMLé…ç½®è§£æ" class="headerlink" title="XMLé…ç½®è§£æ"></a>XMLé…ç½®è§£æ</h3><p>å…·ä½“æŒºéº»çƒ¦ï¼Œè®°ä¸ªç»“è®ºå°±å¥½ï¼Œè¯¦è§<a href="%5B%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98%E6%9C%80%E5%85%A8SSM%E6%A1%86%E6%9E%B6%E6%95%99%E7%A8%8B%7CSpring+SpringMVC+MyBatis%E5%85%A8%E8%A6%86%E7%9B%96_SSM%E6%95%B4%E5%90%88_%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9_bilibili%5D(https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=49)">è¿™ä¸ª</a></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œ.jspæ–‡ä»¶éƒ½æ”¾åœ¨<code>webapp : jsp</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯ä¸ªControlleréƒ½è¦å†™<code>return &quot;/jsp/xxx.jsp&quot;</code>ï¼Œæœ‰ç‚¹å°éº»çƒ¦ï¼Œå¯ä»¥è®©mvcè‡ªåŠ¨æ·»åŠ å‰åç¼€ï¼Œè¿™æ ·ä¸€æ¥åªå†™<code>return xxx</code>å°±è¡Œ</p><p>ä½†æˆ‘è§‰å¾—è¿™æ ·ä¸æ˜¯å¾ˆç›´è§‚ï¼Œä¸æƒ³ç”¨ï¼ˆ</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.3qzb9u92jls0.png" alt="image"></p><h2 id="å°æ€»ç»“"><a href="#å°æ€»ç»“" class="headerlink" title="å°æ€»ç»“"></a>å°æ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.3wqkvir3pl40.png" alt="image"></p><h2 id="SpringMVCçš„æ•°æ®å“åº”"><a href="#SpringMVCçš„æ•°æ®å“åº”" class="headerlink" title="SpringMVCçš„æ•°æ®å“åº”"></a>SpringMVCçš„æ•°æ®å“åº”</h2><ol><li><strong>é¡µé¢è·³è½¬</strong><ul><li>ç›´æ¥è¿”å›å­—ç¬¦ä¸²</li><li>é€šè¿‡ModelAndViewå¯¹è±¡è¿”å›</li></ul></li><li><strong>å›å†™æ•°æ®</strong><ul><li>ç›´æ¥è¿”å›å­—ç¬¦ä¸²</li><li>è¿”å›å¯¹è±¡æˆ–é›†åˆ</li></ul></li></ol><h3 id="é¡µé¢è·³è½¬"><a href="#é¡µé¢è·³è½¬" class="headerlink" title="é¡µé¢è·³è½¬"></a>é¡µé¢è·³è½¬</h3><h4 id="ç›´æ¥è¿”å›å­—ç¬¦ä¸²"><a href="#ç›´æ¥è¿”å›å­—ç¬¦ä¸²" class="headerlink" title="ç›´æ¥è¿”å›å­—ç¬¦ä¸²"></a>ç›´æ¥è¿”å›å­—ç¬¦ä¸²</h4><p>ç›´æ¥è¿”å›å­—ç¬¦ä¸²æ—¶ï¼Œä¼šå°†è¿”å›çš„å­—ç¬¦ä¸²ä¸è§†å›¾è§£æå™¨çš„<strong>å‰åç¼€</strong>æ‹¼æ¥åè·³è½¬</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.ktfblejri5s.png" alt="image"></p><h4 id="è¿”å›ModelAndViewå¯¹è±¡"><a href="#è¿”å›ModelAndViewå¯¹è±¡" class="headerlink" title="è¿”å›ModelAndViewå¯¹è±¡"></a>è¿”å›ModelAndViewå¯¹è±¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/quick2&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">save2</span> <span class="hljs-params">()</span> </span>&#123;<br>    ModelAndView modelAndView = <span class="hljs-keyword">new</span> ModelAndView();<br>    <span class="hljs-comment">// è®¾ç½®æ¨¡å‹æ•°æ®</span><br>    modelAndView.addObject(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;aster&quot;</span>);<br>    <span class="hljs-comment">// è®¾ç½®è§†å›¾åç§°</span><br>    modelAndView.setViewName(<span class="hljs-string">&quot;/jsp/success.jsp&quot;</span>);<br>    <span class="hljs-keyword">return</span> modelAndView;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Success!&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;h1&gt;Success!Welcome, $&#123;username&#125;&lt;/h1&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.6n4bvtmjl8o0.png"></p><p>ä¹Ÿå¯ä»¥ä¸newä¸€ä¸ªå¯¹è±¡ï¼Œ<strong>ç›´æ¥å†™åœ¨å‚æ•°é‡Œ</strong>ï¼ŒSpringä¼š<strong>è‡ªåŠ¨</strong>ç”Ÿæˆä¸€ä¸ªå¯¹è±¡å¹¶æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/quick3&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">save3</span> <span class="hljs-params">(ModelAndView modelAndView)</span> </span>&#123;<br>    <span class="hljs-comment">// è®¾ç½®æ¨¡å‹æ•°æ®</span><br>    modelAndView.addObject(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;aster&quot;</span>);<br>    <span class="hljs-comment">// è®¾ç½®è§†å›¾åç§°</span><br>    modelAndView.setViewName(<span class="hljs-string">&quot;/jsp/success.jsp&quot;</span>);<br>    <span class="hljs-keyword">return</span> modelAndView;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿèƒ½è¿™ä¹ˆå†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/quick4&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">save4</span> <span class="hljs-params">(Model model)</span> </span>&#123;<br>    model.addAttribute(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;aster&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/jsp/success.jsp&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å†æä¸€å˜´ä¸€ä¸ªä¸å¸¸ç”¨çš„æ–¹å¼ï¼š</p><p>ç”¨åˆ°äº†requestï¼Œä¾ç„¶æ˜¯åœ¨å½¢å‚é‡Œå†™ä¸Šï¼ŒSpringMVCä¼šå¸®æˆ‘ä»¬æ³¨å…¥Tomcatçš„requestï¼ˆå› ä¸ºä¸å¤Ÿè§£è€¦æ‰€ä»¥ä¸å¸¸ç”¨å’¯ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/quick5&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">save5</span> <span class="hljs-params">(HttpServletRequest request)</span> </span>&#123;<br>    request.setAttribute(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;åå…­å¤œç´«è€&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/jsp/success.jsp&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å›å†™æ•°æ®"><a href="#å›å†™æ•°æ®" class="headerlink" title="å›å†™æ•°æ®"></a>å›å†™æ•°æ®</h3><h4 id="ç›´æ¥å›å†™å­—ç¬¦ä¸²"><a href="#ç›´æ¥å›å†™å­—ç¬¦ä¸²" class="headerlink" title="ç›´æ¥å›å†™å­—ç¬¦ä¸²"></a>ç›´æ¥å›å†™å­—ç¬¦ä¸²</h4><blockquote><p>åœ¨webåŸºç¡€é˜¶æ®µï¼Œå®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨ç«¯æƒ³å›å†™å­—ç¬¦ä¸²ï¼Œåªéœ€è¦<code>response.getWriter.print(&quot;Hello&quot;)</code>å³å¯</p></blockquote><p>é‚£ä¹ˆï¼Œå¯ä»¥ï¼š</p><p><strong>1.ï¼ˆä¸æ¨èï¼‰</strong>é€šè¿‡SpringMVCæ³¨å…¥responseå¯¹è±¡ï¼Œä½¿ç”¨<code>response.getWriter.print(&quot;Hello&quot;)</code>å›å†™æ•°æ®ï¼›æ­¤æ—¶ä¸éœ€è¦è§†å›¾è·³è½¬ï¼Œä¸šåŠ¡è¿”å›å€¼ä¸ºvoid</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/quick6&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save6</span> <span class="hljs-params">(HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    response.getWriter().print(<span class="hljs-string">&quot;hello&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.34a9bglqsig0.png" alt="image"></p><p>ä½†æ˜¯æ­£å¦‚é¡µé¢è·³è½¬é‡Œæåˆ°çš„ï¼Œè¿™ç§æ–¹æ³•ä¸å¤Ÿè§£è€¦ï¼Œå»ºè®®ç”¨ä¸‹é¢è¿™ç§ï¼š</p><p><strong>2.<strong>å’Œé¡µé¢è·³è½¬çš„ç›´æ¥è¿”å›å­—ç¬¦ä¸²ä¸€æ ·ï¼Œç›´æ¥è¿”å›å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸ºäº†</strong>è®©SpringæŠŠè¿™ç§æ–¹å¼å’Œé¡µé¢è·³è½¬åŒºåˆ†å¼€</strong>ï¼Œéœ€è¦åŠ æ³¨è§£<code>@ResponseBody</code>å‘Šè¯‰Springï¼Œè¯¥æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ä¸æ˜¯è·³è½¬ï¼Œæ˜¯<strong>ç›´æ¥åœ¨HTTPå“åº”ä½“ä¸­è¿”å›</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/quick7&quot;)</span><br><span class="hljs-meta">@ResponseBody</span> <span class="hljs-comment">// å‘ŠçŸ¥SpringMVCï¼Œä¸è¿›è¡Œé¡µé¢è·³è½¬ï¼Œç›´æ¥è¿›è¡Œæ•°æ®å“åº”</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">save7</span> <span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åº”ç”¨ï¼šè¿”å›jsonæ ¼å¼</strong></p><p>ï¼ˆå»ºäº†ä¸ªcom.aster.domain.Userç”¨äºæ¨¡æ‹Ÿä¸€ä¸ªç”¨æˆ·ï¼Œå®é™…ä¸­ä¸€èˆ¬æ˜¯ä»æ•°æ®åº“æŸ¥è¯¢ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/quick8&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">save8</span> <span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JsonProcessingException </span>&#123;<br>    User user = <span class="hljs-keyword">new</span> User();<br>    user.setUsername(<span class="hljs-string">&quot;Lotus&quot;</span>);<br>    user.setAge(<span class="hljs-number">16</span>);<br>    <span class="hljs-comment">// ä½¿ç”¨jsonè½¬æ¢å·¥å…·å°†å¯¹è±¡è½¬ä¸ºjsonæ ¼å¼çš„å­—ç¬¦ä¸²</span><br>    ObjectMapper objectMapper = <span class="hljs-keyword">new</span> ObjectMapper();<br>    <span class="hljs-keyword">return</span> objectMapper.writeValueAsString(user);<br>&#125;<br></code></pre></td></tr></table></figure><p>éœ€è¦å¯¼å…¥è½¬æ¢å·¥å…·çš„åæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-annotations<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.3wt51d74eba0.png" alt="image"></p><h4 id="è¿”å›å¯¹è±¡æˆ–é›†åˆ"><a href="#è¿”å›å¯¹è±¡æˆ–é›†åˆ" class="headerlink" title="è¿”å›å¯¹è±¡æˆ–é›†åˆ"></a>è¿”å›å¯¹è±¡æˆ–é›†åˆ</h4><p><strong>1.ï¼ˆä¸æ¨èï¼‰</strong>æˆ‘ä»¬æƒ³è¦è¿”å›å¯¹è±¡æˆ–é›†åˆæ—¶ï¼ŒSpringMVCèƒ½è‡ªåŠ¨å¸®æˆ‘ä»¬è½¬æ¢æˆjsonæ ¼å¼çš„å­—ç¬¦ä¸²</p><p>é‚£ä¹ˆæˆ‘ä»¬è¦<strong>æå‰é…ç½®å¥½SpringMVCçš„RequestMappingHandlerAdapter</strong>ï¼ˆå¤„ç†å™¨é€‚é…å™¨ï¼‰ï¼Œè®©HandleAdapterå­¦ä¼šJacksonè½¬æ¢å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--    é…ç½®å¤„ç†å™¨æ˜ å°„å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;messageConverters&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>@ResponseBody</code>ä¾ç„¶éœ€è¦ï¼Œå› ä¸ºè¿™é‡Œæ˜¯SpringMVCè‡ªåŠ¨å¸®å¿™è½¬æˆäº†å­—ç¬¦ä¸²è€Œå·²ï¼Œæœ¬è´¨è¿˜æ˜¯è¿”å›å­—ç¬¦ä¸²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/quick9&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">save9</span> <span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JsonProcessingException </span>&#123;<br>    User user = <span class="hljs-keyword">new</span> User();<br>    user.setUsername(<span class="hljs-string">&quot;Lotus&quot;</span>);<br>    user.setAge(<span class="hljs-number">16</span>);<br>    <span class="hljs-keyword">return</span> user;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2.<strong>ä¸Šé¢çš„æ–¹æ³•æœ‰ç‚¹éº»çƒ¦ï¼Œç”¨</strong>mvcæ³¨è§£é©±åŠ¨</strong><code>&lt;mvc:annotation-driven/&gt;</code>ä¼šç®€å•ä¸€ç‚¹</p><p>åœ¨SpringMVCçš„ä¸‰å¤§ç»„ä»¶ä¸­ï¼Œ<strong>å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨</strong>è¢«ç§°ä¸ºSpringMVCçš„ä¸‰å¤§ç»„ä»¶</p><p>ä½¿ç”¨<code>&lt;mvc:annotation-driven/&gt;</code>è‡ªåŠ¨åŠ è½½RequestMappingHandlerMappingï¼ˆå¤„ç†å™¨æ˜ å°„å™¨ï¼‰ã€RequestMappingHandlerAdapterï¼ˆå¤„ç†å™¨é€‚é…å™¨ï¼‰ï¼›å¯ä»¥åœ¨spring-mvc.xmlä¸­ä½¿ç”¨<code>&lt;mvc:annotation-driven/&gt;</code>æ›¿ä»£æ³¨è§£å¤„ç†å™¨å’Œé€‚é…å™¨çš„é…ç½®</p><p><strong>åŒæ—¶</strong>ï¼Œä½¿ç”¨<code>&lt;mvc:annotation-driven/&gt;</code>æ—¶ï¼Œé»˜è®¤åº•å±‚å°±ä¼š<strong>é›†æˆJackson</strong>è¿›è¡Œå¯¹è±¡æˆ–é›†åˆçš„jsonæ ¼å¼å­—ç¬¦ä¸²è½¬æ¢</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><p>åˆ«å¿˜äº†å¯¼å…¥mvnå‘½åç©ºé—´</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       &quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--  Controllerçš„ç»„ä»¶æ‰«æ  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.aster.controller&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--  mvcçš„æ³¨è§£é©±åŠ¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å…¶ä»–çš„å’Œ <strong>1.</strong> ä¸€æ ·ï¼Œæ˜¯ä¸æ˜¯ç®€å•äº†å‘¢~</p><p><strong>è¿™å¥æ³¨è§£é©±åŠ¨å¾ˆé‡è¦ï¼Œä»¥åçš„mvcé…ç½®æ–‡ä»¶éƒ½åˆ«å¿˜äº†å†™å“¦</strong></p><h2 id="SpringMVCçš„è¯·æ±‚"><a href="#SpringMVCçš„è¯·æ±‚" class="headerlink" title="SpringMVCçš„è¯·æ±‚"></a>SpringMVCçš„è¯·æ±‚</h2><h3 id="è·å¾—è¯·æ±‚å‚æ•°"><a href="#è·å¾—è¯·æ±‚å‚æ•°" class="headerlink" title="è·å¾—è¯·æ±‚å‚æ•°"></a>è·å¾—è¯·æ±‚å‚æ•°</h3><blockquote><p>å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°çš„æ ¼å¼æ˜¯<code>name=value&amp;name=value... ...</code></p><p>æœåŠ¡å™¨ç«¯è¦è·å¾—è¯·æ±‚çš„å‚æ•°ï¼Œæœ‰æ—¶è¿˜éœ€è¦è¿›è¡Œæ•°æ®çš„å°è£…</p></blockquote><p>SpringMVCå¯ä»¥æ¥æ”¶å¦‚ä¸‹ç±»å‹çš„æ•°æ®ï¼š</p><ul><li>åŸºæœ¬ç±»å‹æ•°æ®</li><li>POJOç±»å‹å‚æ•°ï¼ˆç®€å•JavaBeanï¼‰</li><li>æ•°ç»„ç±»å‹å‚æ•°</li><li>é›†åˆç±»å‹å‚æ•°</li></ul><h4 id="è·å¾—åŸºæœ¬ç±»å‹å‚æ•°"><a href="#è·å¾—åŸºæœ¬ç±»å‹å‚æ•°" class="headerlink" title="è·å¾—åŸºæœ¬ç±»å‹å‚æ•°"></a>è·å¾—åŸºæœ¬ç±»å‹å‚æ•°</h4><p>å½“Controllerä¸­ä¸šåŠ¡æ–¹æ³•çš„<strong>å‚æ•°å</strong>ä¸<strong>è¯·æ±‚å‚æ•°çš„name</strong>ä¸€è‡´æ—¶ï¼Œå‚æ•°å€¼ä¼š<strong>è‡ªåŠ¨æ˜ å°„åŒ¹é…</strong></p><p>åœ¨è¿™é‡Œï¼Œå°½ç®¡æ˜¯voidï¼Œä½†æ˜¯ä»ç„¶éœ€è¦å†™ä¸Š<code>@ResponseBody</code>ï¼Œåªä¸è¿‡è¿™æ¬¡å“åº”ä½“æ˜¯ç©ºçš„ç½¢äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">(String username, <span class="hljs-keyword">int</span> age)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(username); <span class="hljs-comment">// Lotus</span><br>        System.out.println(age); <span class="hljs-comment">// 16</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/aster_spring_web_war_exploded/u</span>ser/quick?username=Lotus&amp;age=<span class="hljs-number">16</span><br></code></pre></td></tr></table></figure><h4 id="è·å¾—POJOç±»å‹å‚æ•°"><a href="#è·å¾—POJOç±»å‹å‚æ•°" class="headerlink" title="è·å¾—POJOç±»å‹å‚æ•°"></a>è·å¾—POJOç±»å‹å‚æ•°</h4><p>å½“Controllerä¸­ä¸šåŠ¡æ–¹æ³•çš„<strong>POJOå‚æ•°çš„å±æ€§å</strong>ä¸<strong>è¯·æ±‚å‚æ•°çš„name</strong>ä¸€è‡´æ—¶ï¼Œå‚æ•°å€¼ä¼š<strong>è‡ªåŠ¨æ˜ å°„åŒ¹é…</strong></p><p>Useréœ€è¦é‡å†™toStringå’Œgetter/setterå“¦</p><p>æ¯”å¦‚ä¸‹é¢ï¼ŒUseræœ‰usernameå’Œageå±æ€§ï¼Œurlé‡Œä¼ å…¥æ•°å€¼ä¹‹åï¼ŒSpringMVC<strong>è‡ªåŠ¨</strong>å¸®æˆ‘ä»¬å°è£…æˆäº†ä¸€ä¸ªUserå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">(User user)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(user); <span class="hljs-comment">// User&#123;username=&#x27;Lotus&#x27;, age=16&#125;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/aster_spring_web_war_exploded/u</span>ser/quick?username=Lotus&amp;age=<span class="hljs-number">16</span><br></code></pre></td></tr></table></figure><h4 id="è·å¾—æ•°ç»„ç±»å‹å‚æ•°"><a href="#è·å¾—æ•°ç»„ç±»å‹å‚æ•°" class="headerlink" title="è·å¾—æ•°ç»„ç±»å‹å‚æ•°"></a>è·å¾—æ•°ç»„ç±»å‹å‚æ•°</h4><p>æ¯”å¦‚ï¼Œè¯·æ±‚äº†ä¸€å¤§å †æ•°æ®ï¼Œ<strong>åå­—éƒ½ä¸€æ ·</strong>ï¼Œä½†æ˜¯<strong>å€¼ä¸ä¸€æ ·</strong>ï¼Œé‚£ä¹ˆå°±å¯ä»¥å­˜åˆ°æ•°ç»„é‡Œ</p><p>å½“Controllerä¸­ä¸šåŠ¡æ–¹æ³•çš„<strong>æ•°ç»„åç§°</strong>ä¸<strong>è¯·æ±‚å‚æ•°çš„name</strong>ä¸€è‡´æ—¶ï¼Œå‚æ•°å€¼ä¼š<strong>è‡ªåŠ¨æ˜ å°„åŒ¹é…</strong></p><p>ï¼ˆæ•°ç»„é»˜è®¤ç›´æ¥è¾“å‡ºæ˜¯æ‰“å°åœ°å€ï¼Œè¿™é‡Œè½¬æˆListæ–¹ä¾¿è¾“å‡ºï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">(String[] strs)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(Arrays.asList(strs)); <span class="hljs-comment">// [Izayoi, Aster, Izayoi, Lotus]</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/aster_spring_web_war_exploded/u</span>ser/quick?strs=Izayoi&amp;strs=Aster&amp;strs=Izayoi&amp;strs=Lotus<br></code></pre></td></tr></table></figure><h4 id="è·å¾—é›†åˆç±»å‹å‚æ•°"><a href="#è·å¾—é›†åˆç±»å‹å‚æ•°" class="headerlink" title="è·å¾—é›†åˆç±»å‹å‚æ•°"></a>è·å¾—é›†åˆç±»å‹å‚æ•°</h4><p><strong>1.ï¼ˆä¸æ¨èï¼‰</strong>è·å¾—é›†åˆå‚æ•°æ—¶ï¼Œè¦<strong>å°†é›†åˆåŒ…è£…åˆ°ä¸€ä¸ªPOJOä¸­</strong>æ‰è¡Œ <em>ï¼ˆâ€œSpringMVCæ˜¯æœ‰æé™çš„ï¼â€ï¼‰</em></p><p>å³ï¼Œ<strong>ä¸èƒ½ç›´æ¥å°è£…é›†åˆ</strong></p><p>æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª<strong>VOå¯¹è±¡</strong>ï¼ˆValueObject / ViewObjectï¼‰æ¥åŒ…è£…é›†åˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.domain;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VO</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> List&lt;User&gt; userList;<br><br>    <span class="hljs-comment">// getter setter toString</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±äºä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼ŒVOå†…çš„userListç”¨ä¸Šé¢çš„é‚£ç§GETæ–¹æ³•æäº¤æ•°æ®ä¼šå¾ˆéº»çƒ¦ï¼ˆurlé‡Œè¦æŒ‰ç…§æ ¼å¼å†™ä¸€å¤§å †ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æ–°å¼€ä¸€ä¸ªjspï¼Œç”¨POSTæäº¤è¡¨å•</p><p>æ„Ÿè§‰è¿™æ–¹æ³•ä¸æ˜¯å¾ˆé è°±ï¼Œå…ˆ<a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=65">ä¸¢ä¸ªè¿æ¥ç”¨åˆ°å†çœ‹</a></p><p><strong>2.<strong>å½“ä½¿ç”¨</strong>ajax</strong>æäº¤æ—¶ï¼Œå¯ä»¥æŒ‡å®šcontentTypeä¸ºjsonæ ¼å¼ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåœ¨æ–¹æ³•<strong>å‚æ•°</strong>ä½ç½®ä½¿ç”¨<code>@RequestBody</code>åå°±å¯ä»¥<strong>ç›´æ¥æ¥æ”¶é›†åˆæ•°æ®</strong>ï¼Œè€Œæ— éœ€ä½¿ç”¨POJOè¿›è¡Œå°è£…</p><p>åœ¨webappä¸‹æ–°å»ºä¸€ä¸ªajax.jsï¼Œå¹¶åœ¨jså­ç›®å½•ä¸‹å¯¼å…¥jQueryçš„jsæ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.5wmsyvtpjko0.png" alt="image"></p><p>ajax.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery-3.6.0.js&quot;&gt;&lt;/script&gt;<br>    &lt;script&gt;<br>        <span class="hljs-keyword">var</span> userList = [];<br>        <span class="hljs-comment">// è™½ç„¶æ•™ç¨‹æ˜¯new Arrayä½†æ˜¯IDEAä¸€ä¸ªåŠ²å„¿æ¨èæˆ‘å†™[]</span><br>        userList.push(&#123;username: <span class="hljs-string">&quot;Lotus&quot;</span>, age: <span class="hljs-number">16</span>&#125;);<br>        userList.push(&#123;username: <span class="hljs-string">&quot;Aster&quot;</span>, age: <span class="hljs-number">18</span>&#125;);<br><br>        $.ajax(&#123;<br>            type:<span class="hljs-string">&quot;POST&quot;</span>,<br>            url:<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/user/quick&quot;</span>,<br>            data:JSON.stringify(userList), <span class="hljs-comment">// è½¬ä¸ºjsonæ ¼å¼</span><br>            contentType:<span class="hljs-string">&quot;application/json;charset:utf-8&quot;</span><br>        &#125;)<br>    &lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span> <span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> List&lt;User&gt; userList)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(userList);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œåè®¿é—®/ajax.jspå­é¡µé¢ï¼Œæ‰“å¼€æ§åˆ¶å°å‘ç°æŠ¥é”™äº†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image-20211001170719969.xgbusky0txs.png" alt="image-20211001170719969"></p><p>è¿™é‡Œæ¶‰åŠåˆ°é™æ€èµ„æºè®¿é—®æƒé™é—®é¢˜ï¼Œåé¢å†è¯´ã€‚ç°åœ¨å§‘ä¸”åœ¨spring-mvc.xmlé‡Œæ·»åŠ ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:resources</span> <span class="hljs-attr">mapping</span>=<span class="hljs-string">&quot;/js/**&quot;</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;/js/&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶åå†æ¬¡è®¿é—®å°±å¯ä»¥äº†</p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ€»å…±å‘èµ·äº†ä¸‰æ¬¡è¯·æ±‚ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.6if2jcopxnw0.png" alt="image"></p><p>ç¬¬ä¸€æ¬¡è¯·æ±‚æ˜¯æˆ‘ä»¬ä¸»åŠ¨å»è®¿é—®äº†/ajax.jsp</p><p>ç¬¬äºŒæ¬¡è¯·æ±‚æ˜¯å› ä¸ºajax.jspé‡Œå¯¼å…¥äº†jquery</p><p>ç¬¬ä¸‰æ¬¡è¯·æ±‚æ˜¯æˆ‘ä»¬å†™çš„ajaxé‡Œå‘è¯·æ±‚å»å¯»æ‰¾äº†quickæ–¹æ³•</p><p>åœ¨IDEAæ§åˆ¶å°é‡Œä¹Ÿè¾“å‡ºäº†æ•°æ®ï¼š<code>[User&#123;username=&#39;Lotus&#39;, age=16&#125;, User&#123;username=&#39;Aster&#39;, age=18&#125;]</code></p><h5 id="æŠ¥é”™è¯¦è§£"><a href="#æŠ¥é”™è¯¦è§£" class="headerlink" title="æŠ¥é”™è¯¦è§£"></a>æŠ¥é”™è¯¦è§£</h5><p>ä¸Šé¢ç¬¬ä¸€æ¬¡ä¹‹æ‰€ä»¥æŠ¥é”™ï¼Œæ˜¯å› ä¸ºajaxå‘èµ·å¯¼å…¥jquery-3.6.0.jsçš„è¯·æ±‚æ—¶ï¼Œé»˜è®¤ä¹Ÿåƒæ‰¾quické‚£æ ·å»æ‰¾æ˜ å°„äº†ï¼Œä½†æ˜¯æ˜¾ç„¶æˆ‘ä»¬å¹¶æ²¡æœ‰åƒ<code>@RequestMapping(&quot;/quick&quot;)</code>é‚£æ ·é…ç½®jquery-3.6.0.jsçš„æ˜ å°„ï¼Œé‚£ä¹ˆajaxå°±å‚»çœ¼äº†ã€‚æ·»åŠ çš„è¿™å¥è¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:resources</span> <span class="hljs-attr">mapping</span>=<span class="hljs-string">&quot;/js/**&quot;</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;/js/&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>æ„æ€å°±æ˜¯ï¼Œå½“è®¿é—®äº†<code>/js/**</code>æ˜ å°„çš„æ—¶å€™ï¼Œå¼€æ”¾<code>/js/</code>ç›®å½•çš„æ–‡ä»¶è®¿é—®æƒé™</p><p>æ¯”å¦‚è¯´ï¼Œå¦‚æœåœ¨webappä¸‹æœ‰ä¸ªimgå­˜å›¾ç‰‡ï¼Œé‚£å°±åŠ ä¸Šè¿™ä¸€å¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:resources</span> <span class="hljs-attr">mapping</span>=<span class="hljs-string">&quot;/img/**&quot;</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;/img/&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h5 id="å½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åªåŠ è¿™ä¸€å¥è¯ï¼š"><a href="#å½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åªåŠ è¿™ä¸€å¥è¯ï¼š" class="headerlink" title="å½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åªåŠ è¿™ä¸€å¥è¯ï¼š"></a>å½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åªåŠ è¿™ä¸€å¥è¯ï¼š</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>æ„æ€æ˜¯ï¼Œ<strong>å½“SpringMVCæ‰¾ä¸åˆ°èµ„æºæ—¶ï¼Œäº¤ç»™åŸå§‹å®¹å™¨ï¼ˆTomcatï¼‰å»å¯»æ‰¾èµ„æº</strong></p><h3 id="é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨"><a href="#é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨" class="headerlink" title="é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨"></a>é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨</h3><p>æœ‰æ—¶ï¼Œå½“postè¯·æ±‚æ—¶ï¼ˆæ¯”å¦‚form.jspï¼‰ï¼Œæ•°æ®ä¼šå‡ºç°ä¹±ç ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æ»¤å™¨æ¥è¿›è¡Œä¹±ç çš„è¿‡æ»¤</p><p>web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å‚æ•°ç»‘å®šæ³¨è§£-RequestParam"><a href="#å‚æ•°ç»‘å®šæ³¨è§£-RequestParam" class="headerlink" title="å‚æ•°ç»‘å®šæ³¨è§£@RequestParam"></a>å‚æ•°ç»‘å®šæ³¨è§£@RequestParam</h3><p>å½“è¯·æ±‚çš„å‚æ•°åç§°ä¸Controllerçš„ä¸šåŠ¡æ–¹æ³•å‚æ•°åç§°ä¸ä¸€è‡´æ—¶ï¼Œå°±éœ€è¦é€šè¿‡<code>@RequestParam</code>æ³¨è§£æ˜¾ç¤ºçš„ç»‘å®š</p><p>ï¼ˆè¯´äººè¯å°±æ˜¯ï¼Œsaveé‡Œçš„å‚æ•°å«usernameï¼Œä½†æ˜¯urlé‡Œå†™çš„æ˜¯nameï¼Œåƒè®©usernameè·å¾—nameçš„å€¼ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(value = &quot;name&quot;)</span> String username)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(username); <span class="hljs-comment">// Lotus</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/aster_spring_web_war_exploded/u</span>ser/quick?name=Lotus<br></code></pre></td></tr></table></figure><p><code>@RequestParam</code>çš„å‚æ•°ï¼š</p><ul><li>valueï¼šè¯·æ±‚çš„å‚æ•°åç§°</li><li>requireï¼šæ­¤å‚æ•°æ˜¯å¦å¿…é¡»ï¼ˆé»˜è®¤ä¸ºtrueï¼‰ï¼›å¦‚æœå¿…é¡»ï¼Œé‚£ä¹ˆç¼ºå°‘æ­¤å‚æ•°æ—¶ä¼šæŠ¥é”™</li><li>defaultValueï¼šé»˜è®¤å€¼</li></ul><h3 id="è·å¾—RESTfulé£æ ¼çš„å‚æ•°"><a href="#è·å¾—RESTfulé£æ ¼çš„å‚æ•°" class="headerlink" title="è·å¾—RESTfulé£æ ¼çš„å‚æ•°"></a>è·å¾—RESTfulé£æ ¼çš„å‚æ•°</h3><blockquote><p>RESTfulæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€è®¾è®¡é£æ ¼ï¼Œæä¾›äº†ä¸€ç»„è®¾è®¡åŸåˆ™å’Œçº¦æŸæ¡ä»¶ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶ï¼›åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ã€æ›´æœ‰å±‚æ¬¡ã€æ›´æ˜“äºå®ç°ç¼“å­˜æœºåˆ¶ç­‰ã€‚</p></blockquote><blockquote><p>RESTfulé£æ ¼çš„è¯·æ±‚æ˜¯ä½¿ç”¨<strong>url + è¯·æ±‚æ–¹å¼</strong>è¡¨ç¤ºä¸€æ¬¡è¯·æ±‚ï¼ŒHTTPåè®®é‡Œå››ç§è¯·æ±‚æ–¹å¼å¦‚ä¸‹ï¼š</p><ul><li>GETï¼šç”¨äºè·å–èµ„æº</li><li>POSTï¼šç”¨äºæ–°å»ºèµ„æº</li><li>PUTï¼šç”¨äºæ›´æ–°èµ„æº</li><li>DELETEï¼šç”¨äºåˆ é™¤èµ„æº</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">/<span class="hljs-keyword">user</span>/<span class="hljs-number">1</span> <span class="hljs-keyword">GET</span>ï¼šå¾—åˆ°id=<span class="hljs-number">1</span>çš„<span class="hljs-keyword">user</span><br>/<span class="hljs-keyword">user</span>/<span class="hljs-number">1</span> <span class="hljs-keyword">DELETE</span>ï¼šåˆ é™¤id=<span class="hljs-number">1</span>çš„<span class="hljs-keyword">user</span><br>/<span class="hljs-keyword">user</span>/<span class="hljs-number">1</span> PUTï¼šæ›´æ–°id=<span class="hljs-number">1</span>çš„<span class="hljs-keyword">user</span><br>/<span class="hljs-keyword">user</span> POSTï¼šæ–°å¢<span class="hljs-keyword">user</span><br></code></pre></td></tr></table></figure></blockquote><p>åœ¨ä¸Šè¿°åœ°å€<code>/user/1</code>ä¸­ï¼Œ<strong>1</strong>æ˜¯æˆ‘ä»¬è¦è·å¾—çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>@PathVariable</code>è¿›è¡Œå ä½ç¬¦å‚æ•°ç»‘å®šï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick/&#123;username&#125;&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;username&quot;)</span> String username)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(username); <span class="hljs-comment">// Aster</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„å•¦ï¼Œè¿™é‡Œurlçš„æ ¼å¼å˜äº†ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/aster_spring_web_war_exploded/u</span>ser<span class="hljs-regexp">/quick/</span>Aster<br></code></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨"><a href="#è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨"></a>è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</h3><p>MVCé»˜è®¤æœ‰ä¸€äº›è½¬æ¢å™¨ï¼Œæ¯”å¦‚Stringè½¬int</p><p>ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼ˆæ¯”å¦‚æ—¥æœŸï¼‰ï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰äº†</p><p>æ­¥éª¤ï¼š</p><ol><li>å†™ä¸€ä¸ªè½¬æ¢å™¨ç±»ï¼Œå®ç°Converteræ¥å£</li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜è½¬æ¢å™¨</li><li>åœ¨<code>&lt;annotation-driven&gt;</code>ä¸­å¼•ç”¨è½¬æ¢å™¨</li></ol><p>æ¯”å¦‚ï¼Œjavaé»˜è®¤çš„æ—¥æœŸæ ¼å¼æ˜¯yyyy/MM/ddï¼Œè¦æ˜¯urlé‡Œæ˜¯yyyy-MM-ddçš„è¯ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å†™ä¸€ä¸ªè½¬æ¢å™¨</p><blockquote><p><code>Converter&lt;S, T&gt;</code>ï¼šconvert S to T</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.converter;<br><br><span class="hljs-keyword">import</span> ...<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DateConverter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Converter</span>&lt;<span class="hljs-title">String</span>, <span class="hljs-title">Date</span>&gt; </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">convert</span><span class="hljs-params">(String dateStr)</span> </span>&#123;<br>        SimpleDateFormat format = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>); <span class="hljs-comment">// ï¼ˆè¯·å»å¤ä¹ ä¹‹å‰çš„javaç¬”è®°Orzï¼‰</span><br>        Date date = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            date = format.parse(dateStr);<br>        &#125; <span class="hljs-keyword">catch</span> (ParseException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br>...<br>&#125;<br></code></pre></td></tr></table></figure><p>spring-mvc.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--  mvcçš„æ³¨è§£é©±åŠ¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span> <span class="hljs-attr">conversion-service</span>=<span class="hljs-string">&quot;conversionService2&quot;</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- å£°æ˜è½¬æ¢å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;conversionService2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;converters&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.aster.converter.DateConverter&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="è·å¾—Servletç›¸å…³API"><a href="#è·å¾—Servletç›¸å…³API" class="headerlink" title="è·å¾—Servletç›¸å…³API"></a>è·å¾—Servletç›¸å…³API</h3><p>MVCæ”¯æŒä½¿ç”¨åŸå§‹ServletAPIå¯¹è±¡ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å‚æ•°è¿›è¡Œæ³¨å…¥ï¼Œå¸¸ç”¨çš„å¯¹è±¡å¦‚ä¸‹ï¼š</p><ul><li>HttpServletRequest</li><li>HttpServletResponse</li><li>HttpSession</li></ul><h3 id="è·å¾—è¯·æ±‚å¤´"><a href="#è·å¾—è¯·æ±‚å¤´" class="headerlink" title="è·å¾—è¯·æ±‚å¤´"></a>è·å¾—è¯·æ±‚å¤´</h3><blockquote><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒHTTPè¯·æ±‚æœ‰è¯·æ±‚è¡Œã€è¯·æ±‚å¤´å’Œè¯·æ±‚æ•°æ®</p></blockquote><p>å¶å°”ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ç”¨åˆ°è¯·æ±‚å¤´</p><p><strong>1.</strong> ä½¿ç”¨<code>@RequestHeader</code>ï¼ˆç›¸å½“äºwebé‡Œçš„<code>request.getHeader(name)</code>ï¼‰</p><p>æœ‰ä¸¤ä¸ªå±æ€§ï¼š</p><ul><li>valueï¼šè¯·æ±‚å¤´çš„åç§°</li><li>requiredï¼šæ˜¯å¦å¿…é¡»æºå¸¦æ­¤è¯·æ±‚å¤´ï¼ˆæ¯”å¦‚ï¼Œå¦‚æœå€¼ä¸ºtrueï¼Œä»ç½‘é¡µé‡Œåˆæ²¡æœ‰æŠ“åˆ°è¿™ä¸ªå¤´ï¼Œé‚£ä¹ˆå°±ä¼šç¦æ­¢è®¿é—®ï¼‰</li></ul><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬éšä¾¿æŠ“ä¸€ä¸ªè¿™é‡Œé¢çš„è¯·æ±‚å¤´ï¼ˆå¥½æ€ªçš„DevToolsä¸­æ–‡ç¿»è¯‘emmï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.ftc23kos36w.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(<span class="hljs-meta">@RequestHeader(value = &quot;User-Agent&quot;, required = false)</span>String user_agent)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(user_agent);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/aster_spring_web_war_exploded/u</span>ser/quick<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Windows NT <span class="hljs-number">10</span>.<span class="hljs-number">0</span>; Win<span class="hljs-number">64</span>; x<span class="hljs-number">64</span>) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">94</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4606</span>.<span class="hljs-number">61</span> Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> Edg/<span class="hljs-number">94.0.992.31</span><br></code></pre></td></tr></table></figure><p><strong>2.</strong> ä½¿ç”¨<code>@CookieValue</code>å¯ä»¥ç›´æ¥è·å–Cookie çš„å€¼ï¼Œç”¨æ³•ç›¸åŒ</p><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><p>æ–‡ä»¶ä¸Šä¼ å®¢æˆ·ç«¯ä¸‰è¦ç´ ï¼š</p><ul><li>è¡¨å•é¡¹<code>type = &quot;file&quot;</code></li><li>è¡¨å•çš„æäº¤æ–¹å¼æ˜¯POST</li><li>è¡¨å•çš„enctypeå±æ€§æ˜¯<strong>å¤šéƒ¨åˆ†è¡¨å•å½¢å¼</strong>ï¼Œå³<code>enctype = &quot;multipart/form-data&quot;</code></li></ul><p>upload.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;form action=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/user/quick&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span> enctype=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;<br>        åç§°&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span>&gt;&lt;br/&gt;<br>        æ–‡ä»¶&lt;input type=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;uploadFile&quot;</span>&gt;&lt;br/&gt;<br>        &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;æäº¤&quot;</span>&gt;<br>    &lt;/form&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.4psnt95lh1c0.png" alt="image"></p><h4 id="æ–‡ä»¶ä¸Šä¼ åŸç†"><a href="#æ–‡ä»¶ä¸Šä¼ åŸç†" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ åŸç†"></a>æ–‡ä»¶ä¸Šä¼ åŸç†</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.28w37cmfvzb4.png" alt="image"></p><h4 id="å•æ–‡ä»¶ä¸Šä¼ "><a href="#å•æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="å•æ–‡ä»¶ä¸Šä¼ "></a>å•æ–‡ä»¶ä¸Šä¼ </h4><p>æ­¥éª¤</p><ol><li>å¯¼å…¥FileUploadå’Œioåæ ‡ï¼ˆMVCæ¡†æ¶çš„æ–‡ä»¶ä¸Šä¼ ç”¨åˆ°äº†FileUploadï¼‰</li><li>é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨</li><li>ç¼–å†™æ–‡ä»¶ä¸Šä¼ ä»£ç </li></ol><h5 id="å¯¼åæ ‡"><a href="#å¯¼åæ ‡" class="headerlink" title="å¯¼åæ ‡"></a>å¯¼åæ ‡</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-io<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-io<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨"><a href="#é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨" class="headerlink" title="é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨"></a>é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨</h5><p>spring-mvc.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;multipartResolver&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶çš„æ€»å¤§å°(5GB) --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxUploadSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5242800&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä¸Šä¼ å•ä¸ªæ–‡ä»¶çš„å¤§å° --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxUploadSizePerFile&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5242800&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶çš„ç¼–ç ç±»å‹ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;defaultEncoding&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="ç¼–å†™æ–‡ä»¶ä¸Šä¼ ç¼–ç "><a href="#ç¼–å†™æ–‡ä»¶ä¸Šä¼ ç¼–ç " class="headerlink" title="ç¼–å†™æ–‡ä»¶ä¸Šä¼ ç¼–ç "></a>ç¼–å†™æ–‡ä»¶ä¸Šä¼ ç¼–ç </h5><p>è€è§„çŸ©ï¼Œå‚æ•°åä¸€è‡´çš„æ—¶å€™ï¼ŒSpringä¼šè‡ªåŠ¨æ³¨å…¥ï¼Œåœ¨è¿™é‡Œå°±æ˜¯å’Œupload.jspä¸­è¿™ä¸€å¥é‡Œçš„nameä¸€è‡´ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">æ–‡ä»¶&lt;input type=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;uploadFile&quot;</span>&gt;&lt;br/&gt;<br></code></pre></td></tr></table></figure><p>Springä¼šå°†æ–‡ä»¶å°è£…ä¸ºMultipartFileç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(String username, MultipartFile uploadFile)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(username); <span class="hljs-comment">// IzayoiAster</span><br>        <span class="hljs-comment">// è·å¾—ä¸Šä¼ æ–‡ä»¶åç§°ï¼ˆä¸æ˜¯è¡¨å•é‡Œçš„nameï¼Œè€Œæ˜¯ä»–æœ¬èº«çš„åç§°ï¼‰</span><br>        String originalFilename = uploadFile.getOriginalFilename();<br>        uploadFile.transferTo(<span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;E:\\test\\&quot;</span> + originalFilename));<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.2m26yd98jwi0.png" alt="image"></p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.6rkfkmlaf2k0.png" alt="image"></p><h4 id="å¤šæ–‡ä»¶ä¸Šä¼ "><a href="#å¤šæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="å¤šæ–‡ä»¶ä¸Šä¼ "></a>å¤šæ–‡ä»¶ä¸Šä¼ </h4><p>ç»“åˆä¹‹å‰å­¦åˆ°çš„ä¼ å‚ä¸ºæ•°ç»„ï¼Œæ‡‚çš„éƒ½æ‡‚ï¼Œä¸å¤šè¯´ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;form action=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/user/quick&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span> enctype=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;<br>    åç§°&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span>&gt;&lt;br/&gt;<br>    æ–‡ä»¶<span class="hljs-number">1</span>&lt;input type=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;uploadFile&quot;</span>&gt;&lt;br/&gt;<br>    æ–‡ä»¶<span class="hljs-number">2</span>&lt;input type=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;uploadFile&quot;</span>&gt;&lt;br/&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;æäº¤&quot;</span>&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/quick&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(String username, MultipartFile[] uploadFile)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        System.out.println(username);<br>        <span class="hljs-keyword">for</span>(MultipartFile multipartFile : uploadFile) &#123; <span class="hljs-comment">// åˆ«å¿˜äº†è¿™ç§forå¾ªç¯å“¦~</span><br>            String originalFilename = multipartFile.getOriginalFilename();<br>            multipartFile.transferTo(<span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;E:\\test\\&quot;</span> + originalFilename));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="JdbcTemplateåŸºæœ¬ä½¿ç”¨"><a href="#JdbcTemplateåŸºæœ¬ä½¿ç”¨" class="headerlink" title="JdbcTemplateåŸºæœ¬ä½¿ç”¨"></a>JdbcTemplateåŸºæœ¬ä½¿ç”¨</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>JdbcTemplateæ˜¯Springæ¡†æ¶ä¸­æä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯å¯¹åŸå§‹ç¹ççš„Jdbc APIå¯¹è±¡çš„ç®€å•å°è£…</p><h2 id="å¿«é€Ÿå…¥é—¨-1"><a href="#å¿«é€Ÿå…¥é—¨-1" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><h3 id="å¼€å‘æ­¥éª¤-1"><a href="#å¼€å‘æ­¥éª¤-1" class="headerlink" title="å¼€å‘æ­¥éª¤"></a>å¼€å‘æ­¥éª¤</h3><ol><li>å¯¼å…¥spring-jdbcå’Œspring-txçš„åæ ‡ï¼ˆtxï¼štransection å¤„ç†ï¼Œä¸šåŠ¡ï¼‰</li><li>åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“</li><li>åˆ›å»ºJdbcTemplateå¯¹è±¡</li><li>æ‰§è¡Œæ•°æ®åº“æ“ä½œ</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.0.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-tx<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.0.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ï¼ˆä¹‹å‰çš„è¯¸å¦‚spring mysqlä¹‹ç±»çš„å°±ä¸é‡å¤å†™äº†ï¼‰</p><p>ç„¶åï¼Œæ–°å»ºä¸€ä¸ªaccountè¡¨ï¼ˆè™½ç„¶è€å¸ˆæ²¡è®²ä»–æ€ä¹ˆå»ºçš„ï¼Œä½†å¤§æ¦‚æ˜¯æŠŠnameå½“ä½œkeyäº†ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.7heme5hiezc0.png" alt="image"></p><p>å†åˆ›å»ºä¸€ä¸ªå®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.aster.domain;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> money;<br><span class="hljs-comment">// getter setter toString</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ç»™IDEAè¿æ¥æ•°æ®åº“çš„æ—¶å€™ï¼Œè®°å¾—æŠŠæˆ‘ä»¬çš„testæ•°æ®åº“ï¼ˆæ¶æ„ï¼‰é€‰ä¸Šï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.4lx8iezdrnu0.png" alt="image"></p><p>ç„¶åï¼Œç¼–å†™æ“ä½œæ•°æ®åº“çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JdbcTemplateTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span> <span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-comment">// åˆ›å»ºæ•°æ®æº</span><br>        DruidDataSource dataSource = <span class="hljs-keyword">new</span> DruidDataSource();<br>        dataSource.setDriverClassName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        dataSource.setUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span>);<br>        dataSource.setUsername(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;root&quot;</span>);<br><br>        JdbcTemplate jdbcTemplate = <span class="hljs-keyword">new</span> JdbcTemplate();<br>        <span class="hljs-comment">// è®¾ç½®æ•°æ®æºï¼Œå‘Šè¯‰jdbcæ•°æ®åº“åœ¨å“ª</span><br>        jdbcTemplate.setDataSource(dataSource);<br>        <span class="hljs-comment">// æ‰§è¡Œæ“ä½œ</span><br>        <span class="hljs-keyword">int</span> row = jdbcTemplate.update(<span class="hljs-string">&quot;insert into account values(?, ?)&quot;</span>, <span class="hljs-string">&quot;aster&quot;</span>, <span class="hljs-number">6000</span>);<br>        System.out.println(row);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œåï¼Œæ§åˆ¶å°è¾“å‡ºäº†1ï¼Œå¹¶ä¸”å¯ä»¥çœ‹è§æ–°å»ºäº†ä¸€è¡Œï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.3z35ryh5xh40.png" alt="image"></p><h3 id="Springäº§ç”ŸJdbcTemplateå¯¹è±¡"><a href="#Springäº§ç”ŸJdbcTemplateå¯¹è±¡" class="headerlink" title="Springäº§ç”ŸJdbcTemplateå¯¹è±¡"></a>Springäº§ç”ŸJdbcTemplateå¯¹è±¡</h3><p>è§‚å¯Ÿä¸€ä¸‹è¿™å¥è¯ï¼š<code>JdbcTemplate jdbcTemplate = new JdbcTemplate();</code>ï¼Œå¯ä»¥å‘ç°JdbcTemplateæ˜¯æœ‰<strong>æ— å‚æ„é€ </strong>çš„</p><p>æ—¢ç„¶æœ‰æ— å‚æ„é€ ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒSpringé»˜è®¤æ˜¯é€šè¿‡æ— å‚æ„é€ å¸®æˆ‘ä»¬äº§ç”Ÿå¯¹è±¡</p><p>é‚£ä¹ˆæˆ‘ä»¬å°±è®©Springå¸®æˆ‘ä»¬äº§ç”ŸJdbcTemplateå¯¹è±¡å§ï¼ <strong>ï¼ˆSpringç®€ç›´å°±æ˜¯èƒ½åŒ…å…»æˆ‘çš„æ¢¦ä¸­npyï¼ˆé€ƒï¼‰ï¼‰</strong></p><p>JdbcTemplateéœ€è¦ä¸€ä¸ªæ•°æ®æºdataSourceæ‰èƒ½å·¥ä½œï¼Œè¿™å°±ç”¨åˆ°äº†Springçš„<strong>ä¾èµ–æ³¨å…¥</strong>ï¼ˆDIï¼‰</p><p><strong>åœ¨Springä¸­ï¼Œå¦‚æœæƒ³è¦ä¾èµ–æ³¨å…¥ï¼Œé‚£ä¹ˆæ³¨å…¥å’Œè¢«æ³¨å…¥çš„å¯¹è±¡éƒ½éœ€è¦åœ¨Springå®¹å™¨ä¸­ï¼Œå³dataSourceä¹Ÿéœ€è¦ç”±Springäº§ç”Ÿ</strong></p><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><blockquote><p>è€å¸ˆç”¨çš„ä¾ç„¶æ˜¯<code>applicationContext.xml</code>ï¼Œæˆ‘æ‰“ç®—ç”¨æ³¨è§£æ¥å†™</p><p>ä½†æ˜¯å¹¶æ²¡æœ‰ç”¨æ³¨è§£å†™æˆâ€¦â€¦å¤ªè€»è¾±äº†å‘œå‘œå‘œï¼Œæœ‰ç©ºå†ç ”ç©¶å§ï¼Œæ”¾åœ¨è¿™å„¿äº†ï¼š<a href="https://pan.baidu.com/s/1rY7nF23RN598_KjP4DDtaw">æå–ç jdbc</a></p><p><strong>æéº»éº»çš„ï¼Œåæ­£å®éªŒå®¤é‚£ä¸ªé¡¹ç›®ä¹Ÿç”¨ä¸åˆ°JdbcTemplateï¼Œæ³¨è§£nmï¼Œä¸å†™äº†ğŸ‘¿</strong></p></blockquote><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml">...<br><br><span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;jdbcTemplate&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>...<br></code></pre></td></tr></table></figure><p>jdbc.propertiesï¼ˆä¸åŠ <code>serverTimezone=UTC</code>çš„è¯ï¼Œæœ‰å¯èƒ½ä¼šæŠ¥é”™<code>The server time zone value &#39;xxxxx&#39; is unrecognized or represents more than one time zone.</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pro">jdbc.driver&#x3D;com.mysql.cj.jdbc.Driver<br>jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;test?serverTimezone&#x3D;UTC<br>jdbc.username&#x3D;root<br>jdbc.password&#x3D;root<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JdbcTemplateTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span> <span class="hljs-params">()</span> </span>&#123;<br>        ApplicationContext app = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        JdbcTemplate jdbcTemplate = app.getBean(JdbcTemplate.class);<br>        <span class="hljs-keyword">int</span> row = jdbcTemplate.update(<span class="hljs-string">&quot;insert into account values(?, ?)&quot;</span>, <span class="hljs-string">&quot;lotus&quot;</span>, <span class="hljs-number">6000</span>);<br>        System.out.println(row);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210715/image.23veo710r8u8.png" alt="image"></p><h3 id="JdbcTemplateçš„å¸¸ç”¨æ“ä½œ"><a href="#JdbcTemplateçš„å¸¸ç”¨æ“ä½œ" class="headerlink" title="JdbcTemplateçš„å¸¸ç”¨æ“ä½œ"></a>JdbcTemplateçš„å¸¸ç”¨æ“ä½œ</h3><p>æˆ‘æ€è€ƒäº†ä¸€ä¸‹ï¼Œå†³å®šè·³è¿‡è¿™ä¸€æ®µï¼Œæ¯•ç«Ÿè™½ç„¶æˆ‘æ˜¯æ‰“ç®—å…ˆå­¦SSMå†å»å­¦SpringBootè¿™æ ·ä¸€æ¥æœ‰åŸºç¡€å¥½ç†è§£ï¼Œä½†æ˜¯è¯¾é‡Œæœ‰äº›ä¸œè¥¿å­¦èµ·æ¥æ€§ä»·æ¯”ä¸æ˜¯å¾ˆé«˜ï¼ˆæ¯”å¦‚Jdbcæ¨¡æ¿å’Œä¸€äº›è®­ç»ƒé¡¹ç›®ï¼›</p><p>æ‰€ä»¥è¿™ç¯‡ç¬”è®°å°±å…ˆå®Œç»“å’¯ï¼Œå¥½è€¶ï¼</p><p>é‰´äºå·²ç»å­¦ä¹ äº†SSMçš„ä¸€åŠäº†ï¼Œæ–°å¼€ä¸€ç¯‡ç¬”è®°ç»§ç»­å†™ï¼Œä¸ç„¶å¤ªé•¿äº†ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå­¦ä¹ ç¬”è®°1</title>
    <link href="/2021/06/04/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/"/>
    <url>/2021/06/04/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</url>
    
    <content type="html"><![CDATA[<h2 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h2><p>å­¦ä¹ pythonä¹Ÿå°±æ˜¯ä¸ºäº†å½“ä¸ªå·¥å…·ï¼Œå…ˆå­¦ä¸ªå¤§æ¦‚ä¸æ·±å…¥ï¼Œæš‚ä¸”æ”¾ä¸€æ”¾ï¼Œå¼€å§‹å­¦ä¸»è¯­è¨€Java</p><p>å› ä¸ºJavaè¯­æ³•æ–¹é¢å’ŒC++å®åœ¨æ˜¯å¾ˆåƒï¼Œæ‰€ä»¥ç•¥è¿‡ä¸€å¤§å †ä¸œè¥¿ï¼Œç›´æ¥ä»ä¸€åŠå¼€å§‹å§<br>é¡ºä¾¿ï¼Œè¿˜æ²¡çœ‹é‚£ä¸ªæ ¸å¿ƒæŠ€æœ¯å·ï¼›æ¥ä¸ªå‰ç½®çŸ¥è¯†å§ï¼š</p><blockquote><p>Javaçš„åŒ…ï¼ˆpackageï¼‰å’Œç±»ï¼Œå¯ä»¥ç†è§£æˆæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œå¹¶ä¸”å®é™…ä¸Šåœ¨ç³»ç»Ÿé‡Œå°±æ˜¯ä»¥æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„æ–¹å¼æ¥å­˜æ”¾çš„<br>è·¨åŒ…è°ƒç”¨æ—¶ï¼Œéœ€è¦importï¼Œå’Œpythonä¸€æ ·çš„æ“ä½œ<br>IDEAä¸­ï¼Œä¾‹å¦‚srcæ˜¯æ¨¡å—ï¼ŒåŒ…å«åŒ…å’Œç±»</p><p>åœ¨åœ¨åŒ…Aä¸‹å¦‚æœè¿˜æƒ³å»ºä¸€ä¸ªåŒ…Bï¼ŒåŒ…Båº”å‘½åä¸ºA.Bï¼ˆå®é™…ä¸Šè¡¨ç°ä¸ºæ–‡ä»¶å¤¹Aå†…çš„æ–‡ä»¶å¤¹Bï¼‰</p></blockquote><p>é‚£ä¹ˆå¼€å§‹å§ï¼Œä»å­—ç¬¦ä¸²å¼€å§‹</p><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><blockquote><p>å†å¤ä¹ ä¸€éï¼ŒAPIï¼ŒApplication Programming Interfaceï¼Œåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£<br>Java APIï¼šJDKä¸­æä¾›çš„å„ç§åŠŸèƒ½çš„Javaç±»</p></blockquote><p>å‡ ä¸ªå°æŠ€å·§ï¼ˆè™½ç„¶å’ŒAPIå…³ç³»ä¸å¤§å•¦ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-comment">//æŠ€å·§é›¶ï¼šè¾“å…¥ psvm</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span> <span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">// newä¹‹åçš„Scanneræ˜¯ctorå“¦~ System.inæ˜¯ctorå‚æ•°</span><br>        Scanner sc = <span class="hljs-keyword">new</span> Scanner(System.in);<br><br>        <span class="hljs-comment">//æŠ€å·§ä¸€ï¼šsc.nextLine()</span><br>        <span class="hljs-comment">//æ‰“å®Œä¸Šé¢è¿™å¥ï¼ŒCtrl + Alt + Vï¼Œè‡ªåŠ¨ç”Ÿæˆä¸‹é¢è¿™å¥</span><br>        String line = sc.nextLine();<br><br>        <span class="hljs-comment">//æŠ€å·§äºŒï¼šè¾“å…¥soutï¼Œå³å¯è‡ªåŠ¨è”æƒ³ä¸‹é¢è¿™å¥</span><br>        System.out.println(line);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p>ç‰¹ç‚¹ï¼šå­—ç¬¦ä¸²ä¸å¯å˜ï¼Œåˆ›å»ºåå€¼ä¸èƒ½æ›´æ”¹ï¼Œä½†æ˜¯å¯ä»¥è¢«å…±äº«</p><h4 id="Stringçš„æ„é€ æ–¹æ³•"><a href="#Stringçš„æ„é€ æ–¹æ³•" class="headerlink" title="Stringçš„æ„é€ æ–¹æ³•"></a>Stringçš„æ„é€ æ–¹æ³•</h4><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public String()</td><td>ç©ºå­—ç¬¦ä¸²</td></tr><tr><td>public String(char[] chs)</td><td>æ ¹æ®å­—ç¬¦æ•°ç»„åˆ›å»º</td></tr><tr><td>public String(byte[] bys)</td><td>æ ¹æ®å­—èŠ‚æ•°ç»„åˆ›å»º</td></tr><tr><td>String s = â€œabcâ€</td><td>ç›´æ¥èµ‹å€¼</td></tr></tbody></table><h4 id="Stringçš„ç‰¹ç‚¹"><a href="#Stringçš„ç‰¹ç‚¹" class="headerlink" title="Stringçš„ç‰¹ç‚¹"></a>Stringçš„ç‰¹ç‚¹</h4><ol><li>é€šè¿‡<code>new</code>æ–¹å¼å»ºç«‹çš„å­—ç¬¦ä¸²ï¼Œå°±ç®—å€¼ç›¸åŒï¼Œåœ°å€æ˜¯ä¸åŒçš„<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">char</span>[] chs = &#123;<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>&#125;<br>String a = <span class="hljs-keyword">new</span> String(chs);<br>String b = <span class="hljs-keyword">new</span> String(chs);<br></code></pre></td></tr></table></figure></li><li>ä»¥<code>&quot;&quot;</code>æ–¹å¼ç»™å‡ºçš„å­—ç¬¦ä¸²ï¼Œåªè¦å­—ç¬¦åºåˆ—ç›¸åŒï¼Œæ— è®ºå‡ºç°å‡ æ¬¡ï¼ŒJVMéƒ½åªä¼šå»ºç«‹ä¸€ä¸ªStringå¯¹è±¡ï¼Œå¹¶åœ¨å­—ç¬¦ä¸²æ± ä¸­ç»´æŠ¤<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">String a = <span class="hljs-string">&quot;abc&quot;</span>;<br>String b = <span class="hljs-string">&quot;abc&quot;</span>;<br><span class="hljs-comment">//abæœ¬è´¨ä¸Šæ˜¯åŒä¸€ä¸ªå¯¹è±¡</span><br></code></pre></td></tr></table></figure><h4 id="Stringçš„æ¯”è¾ƒ"><a href="#Stringçš„æ¯”è¾ƒ" class="headerlink" title="Stringçš„æ¯”è¾ƒ"></a>Stringçš„æ¯”è¾ƒ</h4></li></ol><p><strong>æ³¨æ„ï¼</strong><br>javaä¸­çš„æ•°æ®ç±»å‹ï¼Œå¯åˆ†ä¸ºä¸¤ç±»ï¼š<br>1.åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿç§°åŸå§‹æ•°æ®ç±»å‹ã€‚byte,short,char,int,long,float,double,booleanä¹‹é—´çš„æ¯”è¾ƒï¼Œåº”ç”¨ == ï¼Œæ¯”è¾ƒçš„æ˜¯ä»–ä»¬çš„å€¼ã€‚<br>2.å¤åˆæ•°æ®ç±»å‹(ç±»)ï¼Œå½“ä»–ä»¬ç”¨ == è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œæ¯”è¾ƒçš„æ˜¯ä»–ä»¬åœ¨å†…å­˜ä¸­çš„<strong>å­˜æ”¾åœ°å€</strong>ï¼Œæ‰€ä»¥ï¼Œé™¤éæ˜¯åŒä¸€ä¸ªnewå‡ºæ¥çš„å¯¹è±¡ï¼Œä»–ä»¬çš„æ¯”è¾ƒåçš„ç»“æœä¸ºtrueï¼Œå¦åˆ™æ¯”è¾ƒåç»“æœä¸ºfalseã€‚ JAVAå½“ä¸­æ‰€æœ‰çš„ç±»éƒ½æ˜¯ç»§æ‰¿äºObjectè¿™ä¸ªåŸºç±»çš„ï¼Œåœ¨Objectä¸­çš„åŸºç±»ä¸­å®šä¹‰äº†ä¸€ä¸ª<strong>equals</strong>çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„åˆå§‹è¡Œä¸ºæ˜¯æ¯”è¾ƒå¯¹è±¡çš„å†…å­˜åœ° å€ï¼Œä½†åœ¨ä¸€äº›ç±»åº“å½“ä¸­è¿™ä¸ªæ–¹æ³•è¢«è¦†ç›–æ‰äº†ï¼Œå¦‚String,Integer,Dateåœ¨è¿™äº›ç±»å½“ä¸­ï¼Œequalsæœ‰å…¶è‡ªèº«çš„å®ç°ï¼Œè€Œä¸å†æ˜¯æ¯”è¾ƒç±»åœ¨å †å†…å­˜ä¸­çš„å­˜æ”¾åœ°å€äº†ã€‚</p><p>å¯¹äºå¤åˆæ•°æ®ç±»å‹ä¹‹é—´è¿›è¡Œequalsæ¯”è¾ƒï¼Œåœ¨æ²¡æœ‰è¦†å†™equalsæ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œä»–ä»¬ä¹‹é—´çš„æ¯”è¾ƒè¿˜æ˜¯åŸºäºä»–ä»¬åœ¨å†…å­˜ä¸­çš„å­˜æ”¾ä½ç½®çš„åœ°å€å€¼çš„ï¼Œå› ä¸ºObjectçš„equalsæ–¹æ³•ä¹Ÿæ˜¯ç”¨ == è¿›è¡Œæ¯”è¾ƒçš„ï¼Œæ‰€ä»¥æ¯”è¾ƒåçš„ç»“æœè·Ÿ == çš„ç»“æœç›¸åŒã€‚</p><p>Stringç±»å¯¹equalsæ–¹æ³•è¿›è¡Œäº†<strong>é‡å†™</strong>ï¼Œç”¨æ¥æ¯”è¾ƒæŒ‡å‘çš„å­—ç¬¦ä¸²å¯¹è±¡æ‰€å­˜å‚¨çš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ã€‚<br>å…¶ä»–çš„ä¸€äº›ç±»è¯¸å¦‚Doubleï¼ŒDateï¼ŒIntegerç­‰ï¼Œéƒ½å¯¹equalsæ–¹æ³•è¿›è¡Œäº†é‡å†™ç”¨æ¥æ¯”è¾ƒæŒ‡å‘çš„å¯¹è±¡æ‰€å­˜å‚¨çš„å†…å®¹æ˜¯å¦ç›¸ç­‰</p><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.5wrxafsw0xc0.png" alt="image"></p><h4 id="éå†å­—ç¬¦ä¸²"><a href="#éå†å­—ç¬¦ä¸²" class="headerlink" title="éå†å­—ç¬¦ä¸²"></a>éå†å­—ç¬¦ä¸²</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">char</span> <span class="hljs-title">charAt</span><span class="hljs-params">(idx)</span></span>; <span class="hljs-comment">// è¿”å›idxå¤„çš„charå€¼</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">length</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">// æ•°ç»„.length() å­—ç¬¦ä¸².length()</span><br></code></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="å­—ç¬¦ä¸²æ‹¼æ¥"></a>å­—ç¬¦ä¸²æ‹¼æ¥</h4><p>åŸºæœ¬åŒC++<br>å¯ä»¥ç›´æ¥åŠ <code>int</code></p><h3 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.75eyemq3azo0.png" alt="image"></p><p>StringBuilderæ˜¯ä¸€ä¸ª<strong>å¯å˜</strong>çš„å­—ç¬¦ä¸²ç±»</p><h4 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h4><p>ï¼ˆä»¥åéƒ½ç®€å†™äº†ï¼Œpublicå•¥çš„Orzï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">StringBuilder(); <br>StringBuilder(String str);<br></code></pre></td></tr></table></figure><h4 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h4><p>ï¼ˆè®¸å¤šåŒStringï¼‰</p><table><thead><tr><th>æ–¹æ³•</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>StringBuilder append(ä»»æ„ç±»å‹)</td><td>è¿½åŠ ï¼Œå¹¶è¿”å›å¯¹è±¡æœ¬èº«</td></tr><tr><td>StringBuilder reverse()</td><td>åè½¬ï¼Œå¹¶è¿”å›å¯¹è±¡æœ¬èº«</td></tr></tbody></table><p>ç”±äºSBä¸å˜ï¼Œç›´æ¥è°ƒç”¨æ–¹æ³•å³å¯ï¼Œä¸ç”¨å£°æ˜æ–°çš„SBæ¥æ¥æ”¶<br>å¦å¤–ï¼Œç”±äºè¿”å›<strong>æœ¬èº«</strong>ï¼Œæœ¬èº«æ˜¯ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥é“¾å¼ç¼–ç¨‹<br><code>sb.append(x).append(x).append(x)...</code></p><h4 id="ä¸Stringäº’ç›¸è½¬æ¢"><a href="#ä¸Stringäº’ç›¸è½¬æ¢" class="headerlink" title="ä¸Stringäº’ç›¸è½¬æ¢"></a>ä¸Stringäº’ç›¸è½¬æ¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">sb.toString();<br>StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder(str);<br></code></pre></td></tr></table></figure><h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><p>æ•°ç»„é•¿åº¦å›ºå®šï¼Œé›†åˆçš„å­˜å‚¨ç©ºé—´å¯å˜<br>ä»¥<strong>ArrayList</strong>ä¸ºä¾‹ï¼ˆå¯ä»¥ç±»æ¯”pythonçš„listï¼‰</p><h3 id="ALçš„æ„é€ å’Œæ·»åŠ "><a href="#ALçš„æ„é€ å’Œæ·»åŠ " class="headerlink" title="ALçš„æ„é€ å’Œæ·»åŠ "></a>ALçš„æ„é€ å’Œæ·»åŠ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ArrayList();<br>add(E e); <span class="hljs-comment">// å…¶å®å®ƒè¿”å› boolean æˆåŠŸorå¤±è´¥</span><br>add(<span class="hljs-keyword">int</span> idx, E e); <span class="hljs-comment">// åœ¨ä½ç½®idxæ’å…¥å…ƒç´ e</span><br></code></pre></td></tr></table></figure><h3 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h3><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>boolean remove(Object o)</td><td>åˆ é™¤æŒ‡å®šçš„å…ƒç´ ï¼Œè¿”å›åˆ é™¤æ˜¯å¦æˆåŠŸ</td></tr><tr><td>E remove(int idx)</td><td>åˆ é™¤æŒ‡å®šçš„ç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´ </td></tr><tr><td>E set(int idx, E e)</td><td>æ›¿æ¢ï¼Œè¿”å›è¢«æ¢æ‰çš„</td></tr><tr><td>E get(int idx)</td><td>-</td></tr><tr><td>int size()</td><td>è¿”å›é›†åˆä¸­å…ƒç´ ä¸ªæ•°</td></tr></tbody></table><p>â€¦<br>ï¼ˆæ­¤å¤„å¤§è·ƒè¿›ï¼‰<br>â€¦</p><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>ç±»æ¯”C++ï¼Œ<code>:</code>å˜ä¸º<code>extends</code></p><h3 id="super"><a href="#super" class="headerlink" title="super"></a>super</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å‡è®¾çˆ¶ç±»é‡Œ age æ˜¯ 50 å—·</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Father</span> </span>&#123; <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age = <span class="hljs-number">30</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> age = <span class="hljs-number">20</span>;<br>        System.out.println(age); <span class="hljs-comment">// 20</span><br>        <span class="hljs-comment">// æˆ‘è¦è®¿é—®æœ¬ç±»çš„ageï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿthis</span><br>        System.out.println(<span class="hljs-keyword">this</span>.age); <span class="hljs-comment">// 30</span><br>        <span class="hljs-comment">// æˆ‘è¦è®¿é—®çˆ¶ç±»çš„ageï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿsuper</span><br>        System.out.println(<span class="hljs-keyword">super</span>.age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>this()</code>ï¼šæœ¬ç±»çš„æ„é€ æ–¹æ³•<br><code>super()</code>ï¼šçˆ¶ç±»çš„æ„é€ æ–¹æ³•</p><h3 id="æ–¹æ³•çš„è®¿é—®"><a href="#æ–¹æ³•çš„è®¿é—®" class="headerlink" title="æ–¹æ³•çš„è®¿é—®"></a>æ–¹æ³•çš„è®¿é—®</h3><h4 id="æ„é€ æ–¹æ³•-1"><a href="#æ„é€ æ–¹æ³•-1" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h4><p><font color='red'>å­ç±»ä¸­æ‰€æœ‰çš„æ„é€ æ–¹æ³•é»˜è®¤éƒ½ä¼šè®¿é—®çˆ¶ç±»ä¸­çš„<strong>æ— å‚</strong>æ„é€ æ–¹æ³•</font><br>ï¼ˆå³ç›¸å½“äºï¼Œä¸ç®¡ä½ è‡ªå·±å†™è¿˜æ˜¯ä¸å†™ï¼Œå­ç±»æ„é€ æ–¹æ³•æ°¸è¿œæœ‰ä¸€å¥<code>super()</code>ï¼‰</p><p>å¦‚æœçˆ¶ç±»ä¸­æ²¡æœ‰æ— å‚æ„é€ æ–¹æ³•ï¼Œä¼šæŠ¥é”™ï¼Œè§£å†³æ–¹æ¡ˆï¼š</p><ol><li>åœ¨çˆ¶ç±»å†™ä¸€ä¸ªæ— å‚ctorï¼ˆæ¨èï¼‰</li><li>åœ¨å­ç±»æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„<strong>æœ‰å‚</strong>ctor </li></ol><h4 id="æˆå‘˜æ–¹æ³•"><a href="#æˆå‘˜æ–¹æ³•" class="headerlink" title="æˆå‘˜æ–¹æ³•"></a>æˆå‘˜æ–¹æ³•</h4><p>é€šè¿‡å­ç±»å¯¹è±¡è®¿é—®ä¸€ä¸ªæ–¹æ³•ï¼š<br>å­ç±»æˆå‘˜èŒƒå›´å¯»æ‰¾ï¼Ÿ ? çˆ¶ç±»æˆå‘˜èŒƒå›´æ‰¾ï¼Ÿ ? æŠ¥é”™ï¼</p><h3 id="æ–¹æ³•é‡å†™"><a href="#æ–¹æ³•é‡å†™" class="headerlink" title="æ–¹æ³•é‡å†™"></a>æ–¹æ³•é‡å†™</h3><p>æ–¹æ³•é‡å†™ï¼šå­ç±»ä¸­çš„å’Œçˆ¶ç±»<strong>ä¸€æ¨¡ä¸€æ ·</strong>çš„æ–¹æ³•å£°æ˜<br>å°æŠ€å·§ï¼šåœ¨é‡å†™çš„æ–¹æ³•å‰åŠ ä¸€è¡Œ<code>@Override</code>ï¼Œå¦‚æœIDEAæŠ¥é”™äº†ï¼Œè¯´æ˜ä½ å†™é”™å’¯</p><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>çˆ¶ç±»ä¸­çš„<strong>private</strong>å†…å®¹ï¼Œæ— æ³•è¢«é‡å†™<br>å­ç±»çš„è®¿é—®æƒé™ä¸èƒ½æ¯”çˆ¶ç±»ä½ï¼ˆpublic &gt; é»˜è®¤ &gt; privateï¼‰</p><h3 id="ç»§æ‰¿æ³¨æ„äº‹é¡¹"><a href="#ç»§æ‰¿æ³¨æ„äº‹é¡¹" class="headerlink" title="ç»§æ‰¿æ³¨æ„äº‹é¡¹"></a>ç»§æ‰¿æ³¨æ„äº‹é¡¹</h3><ul><li>åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»</li><li>å¯ä»¥å¥—å¨ƒ</li></ul><h2 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h2><h3 id="æƒé™ä¿®é¥°ç¬¦"><a href="#æƒé™ä¿®é¥°ç¬¦" class="headerlink" title="æƒé™ä¿®é¥°ç¬¦"></a>æƒé™ä¿®é¥°ç¬¦</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.3wh11ab9ly60.png" alt="image"></p><h3 id="çŠ¶æ€ä¿®é¥°ç¬¦"><a href="#çŠ¶æ€ä¿®é¥°ç¬¦" class="headerlink" title="çŠ¶æ€ä¿®é¥°ç¬¦"></a>çŠ¶æ€ä¿®é¥°ç¬¦</h3><h4 id="final"><a href="#final" class="headerlink" title="final"></a>final</h4><ul><li>finalä¿®é¥°<strong>åŸºæœ¬ç±»å‹</strong>æ—¶ï¼ŒåŸºæœ¬ç±»å‹çš„<strong>æ•°æ®å€¼</strong>ä¸èƒ½æ”¹å˜ï¼ˆC++ constï¼‰</li><li>finalä¿®é¥°<strong>å¼•ç”¨ç±»å‹</strong>ï¼ˆå¦‚ç±»ï¼‰æ—¶ï¼Œå¼•ç”¨ç±»å‹çš„<strong>åœ°å€å€¼</strong>ä¸èƒ½æ”¹å˜ï¼Œä½†æ˜¯<strong>åœ°å€æŒ‡å‘çš„å†…å®¹</strong>å´æ˜¯<strong>å¯ä»¥æ”¹å˜</strong>çš„<h4 id="static"><a href="#static" class="headerlink" title="static"></a>static</h4></li><li>ï¼ˆåŒC++ pyï¼‰è¢«ç±»çš„æ‰€æœ‰æˆå‘˜<strong>å…±äº«</strong></li><li>é™æ€çš„æˆå‘˜æ–¹æ³•åªèƒ½è®¿é—®åŒä¸ºé™æ€çš„æˆå‘˜æ–¹æ³•å’Œå˜é‡</li></ul><h2 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2><p>å°æŠ€å·§timeï¼šå­ç±»é‡Œè¾“å…¥è¦é‡å†™çš„çˆ¶ç±»æ–¹æ³•åï¼Œå›è½¦ä¸€ä¸‹ï¼ŒIDEAè‡ªåŠ¨è¡¥å…¨æ–¹æ³•å’Œ<code>@Override</code></p><h3 id="å¤šæ€ä¸­æˆå‘˜è®¿é—®ç‰¹ç‚¹ï¼š"><a href="#å¤šæ€ä¸­æˆå‘˜è®¿é—®ç‰¹ç‚¹ï¼š" class="headerlink" title="å¤šæ€ä¸­æˆå‘˜è®¿é—®ç‰¹ç‚¹ï¼š"></a>å¤šæ€ä¸­æˆå‘˜è®¿é—®ç‰¹ç‚¹ï¼š</h3><p>å…ˆç»™å‡ºå‡ æ®µç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age = <span class="hljs-number">10</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">eat</span> <span class="hljs-params">()</span> </span>&#123;<br>        ...<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age = <span class="hljs-number">6</span>;<br>    <span class="hljs-keyword">public</span> String cat_type = <span class="hljs-string">&quot;default&quot;</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">eat</span> <span class="hljs-params">()</span> </span>&#123;<br>        ...<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">play</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span> <span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Animal a = <span class="hljs-keyword">new</span> Cat();<br>        System.out.println(a.age); <span class="hljs-comment">// ä¸æŠ¥é”™ï¼Œä½†è¾“å‡ºäº†Animalçˆ¶ç±»çš„10</span><br>        System.out.println(a.cat_type); <span class="hljs-comment">// æŠ¥é”™ï¼ï¼ï¼çˆ¶ç±»é‡Œæ²¡æœ‰</span><br>        a.eat(); <span class="hljs-comment">// ä¸æŠ¥é”™ï¼Œä¸”è°ƒç”¨çš„æ˜¯Catå­ç±»é‡Œçš„eat</span><br>        a.play(); <span class="hljs-comment">//æŠ¥é”™ï¼ï¼ï¼çˆ¶ç±»é‡Œæ²¡æœ‰</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æˆå‘˜å˜é‡ï¼šç¼–è¯‘çœ‹å·¦è¾¹(Animal)ï¼Œæ‰§è¡Œçœ‹å·¦è¾¹(Animal)</li><li>æˆå‘˜æ–¹æ³•ï¼šç¼–è¯‘çœ‹å·¦è¾¹(Animal)ï¼Œæ‰§è¡Œçœ‹å³è¾¹(Cat)ï¼ˆå› ä¸ºæ–¹æ³•ç»è¿‡äº†é‡å†™è€Œå˜é‡æ²¡æœ‰ï¼‰</li></ul><blockquote><p>å¤šæ€çš„ä¼˜ç‚¹ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å®šä¹‰æ–¹æ³•çš„æ—¶å€™å¯ä»¥åªå®šä¹‰ä¸€ä¸ªç”¨çˆ¶ç±»å‹çš„æ–¹æ³•ï¼Œç”¨è¿™ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ“ä½œæ‰€æœ‰å­ç±»å‹é¿å…ä¸€ä¸ªå­ç±»å‹å†™ä¸€ä¸ªæ–¹æ³•</p><p>è€Œå¤šæ€çš„ç¼ºç‚¹ï¼Œå°±æ˜¯ä¸Šæ–‡æåˆ°çš„ï¼Œä¸èƒ½è®¿é—®<strong>æŸä¸€å…·ä½“å­ç±»ç‰¹æœ‰çš„æ–¹æ³•</strong></p></blockquote><h3 id="å¤šæ€ä¸­çš„è½¬å‹"><a href="#å¤šæ€ä¸­çš„è½¬å‹" class="headerlink" title="å¤šæ€ä¸­çš„è½¬å‹"></a>å¤šæ€ä¸­çš„è½¬å‹</h3><p>å‘<strong>ä¸Š</strong>è½¬å‹ï¼šçˆ¶ç±»å¼•ç”¨ <strong>æŒ‡å‘</strong> å­ç±»å¯¹è±¡<br>å‘<strong>ä¸‹</strong>è½¬å‹ï¼šçˆ¶ç±»å¼•ç”¨ <strong>è½¬ä¸º</strong> å­ç±»å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Animal a = <span class="hljs-keyword">new</span> Cat(); <span class="hljs-comment">// å‘ä¸Šè½¬å‹</span><br>a.play(); <span class="hljs-comment">// åŒä¸Šæ–‡ï¼Œä¼šæŠ¥é”™ï¼å› ä¸ºAnimalé‡Œæ²¡æœ‰playæ–¹æ³•</span><br><br>Cat b = (Cat)a; <span class="hljs-comment">// å‘ä¸‹è½¬å‹ï¼ˆè¿™é‡Œæ²¡æœ‰newï¼Œåªæ˜¯åœ°å€çš„å¼•ç”¨å“¦~ï¼‰</span><br>b.play(); <br></code></pre></td></tr></table></figure><h2 id="æŠ½è±¡"><a href="#æŠ½è±¡" class="headerlink" title="æŠ½è±¡"></a>æŠ½è±¡</h2><blockquote><p><strong>C++ æŠ½è±¡ç±»ï¼š</strong> æ‹¥æœ‰<strong>çº¯è™šå‡½æ•°</strong>çš„ç±»æ˜¯æŠ½è±¡ç±»<br><strong>JAVA æŠ½è±¡ç±»ï¼š</strong> ä½¿ç”¨<strong>abstract</strong>å®šä¹‰ä¸”å«æœ‰abstract<strong>æŠ½è±¡æ–¹æ³•</strong>çš„ç±»æ˜¯æŠ½è±¡ç±»ï¼ˆè™½ç„¶å…¶å®å¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯æ²¡å•¥æ„ä¹‰ï¼‰<br>ä»å®šä¹‰ä¸Šçœ‹ï¼Œçº¯è™šå‡½æ•°å’ŒæŠ½è±¡æ–¹æ³•éå¸¸ç›¸åƒï¼Œçº¯è™šå‡½æ•°å£°æ˜ä¸º<code>virtual type funcname()=0;</code>æŠ½è±¡å‡½æ•°å£°æ˜ä¸º<code>public abstract type funcname();</code>å¯ä»¥çœ‹å‡ºå®ƒä»¬éƒ½æ²¡æœ‰å®šä¹‰ã€‚å‰è€…æ²¡æœ‰å®šä¹‰å‡½æ•°ä½“ï¼Œåè€…æ²¡æœ‰å®šä¹‰æ–¹æ³•ä½“ã€‚</p></blockquote><p>æŠ½è±¡ç±»ä¸æ˜¯å…·ä½“çš„ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥åˆ›å»ºå¯¹è±¡<br>æŠ½è±¡ç±»çš„å­ç±»ï¼Œè¦ä¹ˆ<strong>é‡å†™</strong>çˆ¶ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œè¦ä¹ˆä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»</p><p>æŠ½è±¡ç±»è™½ç„¶ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œä½†æ˜¯ä¹Ÿèƒ½æœ‰æ„é€ æ–¹æ³•ï¼Œå› ä¸ºå®ƒçš„å­ç±»é€šè¿‡å¤šæ€è®¿é—®å®ƒçš„æ„é€ æ–¹æ³•</p><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><p><strong>Interface</strong></p><p>å’Œç±»ä¸€æ ·ï¼Œè¢«åŒ…å«åœ¨packageé‡Œ<br>ç±» <strong>ä¸ç»§æ‰¿</strong> æ¥å£ï¼Œç±» <strong>å®ç°(implements)</strong> æ¥å£ï¼Œä¸€èˆ¬æŠŠå®ç°ç±»å‘½åä¸º â€œæ¥å£å + Implâ€ </p><p>æ¥å£æ˜¯<strong>æŠ½è±¡</strong>çš„ï¼Œéœ€è¦é€šè¿‡ç±»æ¥å®ä¾‹åŒ–ï¼Œç±»æ¯”æŠ½è±¡ç±»çš„ç‰¹æ€§</p><p><strong>å°æ€»ç»“â€”â€”å¤šæ€çš„å½¢å¼ï¼š</strong> å…·ä½“ç±»å¤šæ€ã€<strong>æŠ½è±¡ç±»å¤šæ€ã€æ¥å£å¤šæ€</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Jumping</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">jump</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Jumping</span></span>&#123;<br>    ...<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">jump</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Cat is jumping!&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Cat c = <span class="hljs-keyword">new</span> Cat();<br>        c.jump();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æ¥å£çš„æˆå‘˜ç‰¹ç‚¹"><a href="#æ¥å£çš„æˆå‘˜ç‰¹ç‚¹" class="headerlink" title="æ¥å£çš„æˆå‘˜ç‰¹ç‚¹"></a>æ¥å£çš„æˆå‘˜ç‰¹ç‚¹</h3><ul><li>æˆå‘˜å˜é‡ï¼š<br>åªèƒ½æ˜¯å¸¸é‡ï¼Œé»˜è®¤ä¿®é¥°ç¬¦<code>public static final</code></li><li>æ„é€ æ–¹æ³•ï¼š<br>æ¥å£æ²¡æœ‰æ„é€ æ–¹æ³•ï¼ˆå› ä¸ºæ¥å£ä¸»è¦æ˜¯å¯¹è¡Œä¸ºè¿›è¡ŒæŠ½è±¡çš„ï¼Œæ˜¯æ²¡æœ‰å…·ä½“å­˜åœ¨çš„ï¼‰<br>æ¥å£çš„å®ç°ç±»çœ‹ä¼¼èƒ½è°ƒç”¨<code>super()</code>ï¼Œå…¶å®æ˜¯ç»§æ‰¿è‡ªç©¶æå¤§çˆ¹Objectç±»çš„</li><li>æˆå‘˜æ–¹æ³•ï¼š</li></ul><p><strong>åªèƒ½æ˜¯æŠ½è±¡æ–¹æ³•</strong>ï¼Œé»˜è®¤ä¿®é¥°ç¬¦<code>public abstract</code><br>(JDK8åçš„æ–°ç‰¹æ€§ä»¥åè¯´)</p><blockquote><p>åˆä¸€ä¸ªå°æŠ€å·§ï¼š<code>Alt + Insert</code>å¯ä»¥åœ¨ç±»é‡Œå¿«é€Ÿåˆ›å»ºå„ç§æ–¹æ³•</p></blockquote><h3 id="ç±»å’Œæ¥å£çš„å…³ç³»"><a href="#ç±»å’Œæ¥å£çš„å…³ç³»" class="headerlink" title="ç±»å’Œæ¥å£çš„å…³ç³»"></a>ç±»å’Œæ¥å£çš„å…³ç³»</h3><ul><li>ç±»å’Œç±»çš„å…³ç³»ï¼š<br>ç»§æ‰¿å…³ç³»ï¼Œ<strong>åªèƒ½å•ç»§æ‰¿</strong>ï¼ˆè®¤ä¸€ä¸ªçˆ¹ï¼‰ï¼Œä½†æ˜¯å¯ä»¥å¥—å¨ƒï¼ˆå¤šå±‚ç»§æ‰¿ï¼‰</li><li>ç±»å’Œæ¥å£çš„å…³ç³»ï¼š<br>å®ç°å…³ç³»ï¼Œå¯ä»¥å•å®ç°ï¼Œä¹Ÿå¯ä»¥å¤šå®ç°ï¼Œè¿˜å¯ä»¥åœ¨ç»§æ‰¿ä¸€ä¸ªç±»çš„åŒæ—¶å®ç°å¤šä¸ªæ¥å£</li><li>æ¥å£å’Œæ¥å£çš„å…³ç³»ï¼š<br>ç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥å•ç»§æ‰¿ï¼Œ<strong>ä¹Ÿå¯ä»¥å¤šç»§æ‰¿</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InterImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Object</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Inter1</span>, <span class="hljs-title">Inetr2</span>, <span class="hljs-title">Inter3</span></span>&#123;<br>    ...<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Inter1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Inter2</span>, <span class="hljs-title">Inter3</span></span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«"><a href="#æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«" class="headerlink" title="æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«"></a>æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«</h3></li><li>æŠ½è±¡ç±» â€”â€” å¯¹ç±»æŠ½è±¡ï¼ŒåŒ…æ‹¬å±æ€§ã€è¡Œä¸º</li><li>æ¥å£ â€”â€” å¯¹è¡Œä¸ºæŠ½è±¡ï¼Œä¸»è¦åŒ…æ‹¬è¡Œä¸º<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.46hzx5tnayg0.png" alt="image"></li></ul><h2 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h2><p>ï¼ˆæš‚ç•¥ï¼‰</p><h2 id="å¸¸ç”¨API"><a href="#å¸¸ç”¨API" class="headerlink" title="å¸¸ç”¨API"></a>å¸¸ç”¨API</h2><blockquote><p>å¦‚æœæ˜¯é™æ€ç±»ï¼Œæ— éœ€ctorï¼Œé€šè¿‡ç±»åå°±å¯ä»¥ç›´æ¥è°ƒç”¨</p></blockquote><h3 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h3><p>ï¼ˆå®åœ¨æ˜¯æ‡’å¾—æ‰“è¡¨ç›´æ¥ä¸Šå›¾å§ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.55ocd073yzk0.png" alt="image"></p><h3 id="System"><a href="#System" class="headerlink" title="System"></a>System</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.6vrrs2df4k00.png" alt="image"></p><h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h3><blockquote><p>çœ‹æ–¹æ³•çš„æºç ï¼šé€‰ä¸­æ–¹æ³•ï¼Œ<code>Crtl + B</code>ï¼Œæˆ–å³é”®GoToå®ç°</p></blockquote><h4 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString( )"></a>toString( )</h4><p>ç±»çš„<code>toString()</code>é»˜è®¤ç»§æ‰¿è‡ª<strong>Object</strong>ç±»ï¼›å»ºè®®æ‰€æœ‰ç±»<strong>é‡å†™</strong>æ­¤æ–¹æ³•<br>è‡ªåŠ¨é‡å†™ï¼š<code>Alt + Insert</code></p><h4 id="equals"><a href="#equals" class="headerlink" title="equals( )"></a>equals( )</h4><p>åŒä¸Šï¼Œæ¯”è¾ƒå€¼ï¼ˆè€Œéåœ°å€ï¼‰æ˜¯å¦ç›¸åŒï¼Œéœ€è¦<strong>é‡å†™</strong>ï¼›å¯è‡ªåŠ¨é‡å†™</p><h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.68z67qwynhs0.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Arrays.sort(arr)<br></code></pre></td></tr></table></figure><h3 id="åŸºæœ¬ç±»å‹åŒ…è£…ç±»"><a href="#åŸºæœ¬ç±»å‹åŒ…è£…ç±»" class="headerlink" title="åŸºæœ¬ç±»å‹åŒ…è£…ç±»"></a>åŸºæœ¬ç±»å‹åŒ…è£…ç±»</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.3ngl8hb5f1c0.png" alt="image"><br>å¸¸ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹å’Œå­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢</p><h4 id="Integer"><a href="#Integer" class="headerlink" title="Integer"></a>Integer</h4><h5 id="æ„é€ "><a href="#æ„é€ " class="headerlink" title="æ„é€ "></a>æ„é€ </h5><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.69c646jljr80.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Integer i = Integer.valueOf(<span class="hljs-string">&quot;114514&quot;</span>);<br></code></pre></td></tr></table></figure><h4 id="intä¸Stringè½¬æ¢"><a href="#intä¸Stringè½¬æ¢" class="headerlink" title="intä¸Stringè½¬æ¢"></a>intä¸Stringè½¬æ¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// int è½¬ String</span><br><span class="hljs-keyword">int</span> num = <span class="hljs-number">16</span>;<br><span class="hljs-comment">// æ–¹æ³•ä¸€ï¼ˆæ¯”è¾ƒlowï¼Œä¸»è¦æ˜¯è¯´ä¸€ä¸‹ï¼ŒstringååŠ ä¸œè¥¿è‡ªåŠ¨è½¬stringï¼‰</span><br>String s1 = <span class="hljs-string">&quot;&quot;</span> + num;<br><span class="hljs-comment">// æ–¹æ³•äºŒï¼ˆä¸“ä¸š ~ï¼‰</span><br>String s2 = String.valueOf(num);<br><br><span class="hljs-comment">// String è½¬ int</span><br>String str = <span class="hljs-string">&quot;16&quot;</span>;<br><span class="hljs-keyword">int</span> x = Integer.parseInt(str);<br></code></pre></td></tr></table></figure><h3 id="æ—¥æœŸç±»"><a href="#æ—¥æœŸç±»" class="headerlink" title="æ—¥æœŸç±»"></a>æ—¥æœŸç±»</h3><p>ï¼ˆjava.utilåŒ…ä¸‹çš„ç±»ï¼‰</p><h4 id="æ„é€ æ–¹æ³•-2"><a href="#æ„é€ æ–¹æ³•-2" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Date d1 = <span class="hljs-keyword">new</span> Date();<br>        System.out.println(d1);<br>        Date d2 = <span class="hljs-keyword">new</span> Date(<span class="hljs-number">1000</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>); <span class="hljs-comment">//ä»1970.1.1 00:00 GMTå¼€å§‹çš„æ¯«ç§’æ•°ï¼ˆæ¶‰åŠæ¯«ç§’çš„ï¼Œå˜é‡ç±»å‹çš„longï¼‰</span><br>        System.out.println(d2);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">Sat Jun 05 11:45:14 CST 2021<br>Thu Jan 01 09:00:00 CST 1970<br></code></pre></td></tr></table></figure><h4 id="å¸¸ç”¨æ–¹æ³•-1"><a href="#å¸¸ç”¨æ–¹æ³•-1" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.a8v1bynfrew.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Date d1 = <span class="hljs-keyword">new</span> Date();<br>        System.out.println(d1.getTime());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿”å›ä¸€å¤§ä¸²æ¯«ç§’çœ‹ä¸æ‡‚æ€ä¹ˆåŠï¼Ÿ<code> * 1.0 / 1000 / 60 / 60 / 24 / 365</code>ï¼ˆ<code>Ctrl + Alt + L</code>å¯ä»¥æ ¼å¼åŒ–ä»£ç ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Date d1 = <span class="hljs-keyword">new</span> Date();<br>        System.out.println(d1.getTime() * <span class="hljs-number">1.0</span> / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span> / <span class="hljs-number">60</span> / <span class="hljs-number">24</span> / <span class="hljs-number">365</span> + <span class="hljs-string">&quot;å¹´&quot;</span>);<br>        <span class="hljs-comment">// 51.46074035676687å¹´</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Date d1 = <span class="hljs-keyword">new</span> Date();<br>        <span class="hljs-keyword">long</span> time = System.currentTimeMillis();<br>        d1.setTime(time);<br>        System.out.println(d1); <span class="hljs-comment">//Sat Jun 05 12:07:35 CST 2021</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="SimpleDateFormat"><a href="#SimpleDateFormat" class="headerlink" title="SimpleDateFormat"></a>SimpleDateFormat</h4><ul><li>æ ¼å¼åŒ–æ—¥æœŸï¼šDateè½¬Stringï¼Œ<code>format()</code></li><li>è§£ææ—¥æœŸï¼ŒStringè½¬Dateï¼Œ<code>parse()</code></li></ul><p>æ ¼å¼åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Date d = <span class="hljs-keyword">new</span> Date();<br>        SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(); <span class="hljs-comment">// æ— å‚æ„é€ </span><br>        String s = sdf.format(d);<br>        System.out.println(s); <span class="hljs-comment">// 2021/6/5 ä¸‹åˆ12:24</span><br><br>        <span class="hljs-comment">// ä¸Šé¢çš„é»˜è®¤æ¨¡å¼ä¸å–œæ¬¢ï¼Œé‚£ä¹ˆç”¨å«å‚æ„é€ </span><br>        SimpleDateFormat sdf2 = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;ç°åœ¨æ˜¯yyyyå¹´MMæœˆddæ—¥HHç‚¹mmåˆ†ssç§’å“¦&quot;</span>);<br>        String s2 = sdf2.format(d);<br>        System.out.println(s2); <span class="hljs-comment">// ç°åœ¨æ˜¯2021å¹´06æœˆ05æ—¥12ç‚¹27åˆ†48ç§’å“¦</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è§£æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String s = <span class="hljs-string">&quot;2016-11-16 11:16:16&quot;</span>;<br>        SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;ç°åœ¨æ˜¯yyyyå¹´MMæœˆddæ—¥HHç‚¹mmåˆ†ssç§’å“¦&quot;</span>);<br>        Date d = sdf.parse(s); <span class="hljs-comment">/////////////////</span><br>        System.out.println(d); <span class="hljs-comment">// Wed Nov 16 11:16:16 CST 2016</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>////////////</code>å¤„æŠ¥é”™äº†ï¼<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.45bglx8ujdk0.png" alt="image"><br>å…ˆä¸ç”¨ç®¡ï¼Œ<code>Alt + Enter</code>å†é€‰æ‹© æ·»åŠ å¼‚å¸¸åˆ°æ–¹æ³•ç­¾å<br><code>...main(String[] args) throws ParseException &#123;</code></p><h4 id="Calendar"><a href="#Calendar" class="headerlink" title="Calendar"></a>Calendar</h4><p><a href="https://www.bilibili.com/video/BV1sZ4y1H7gV?p=212&spm_id_from=pageDriver">è½¬P212</a></p><h2 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h2><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/1.1qh15uyyvetc.jpg" alt="1"></p><h3 id="try-catch"><a href="#try-catch" class="headerlink" title="try catch"></a>try catch</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span>[] arr = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br>        <span class="hljs-keyword">try</span> &#123;<br>            System.out.println(arr[<span class="hljs-number">3</span>]);<br>        &#125; <span class="hljs-keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;Error!&quot;</span>);<br>            <span class="hljs-comment">// åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥å¼¹å‡ºä¸€ä¸ªé¡µé¢æç¤ºï¼Œè€Œä¸æ˜¯è¾“å‡ºä¸Šé¢è¿™å¥è¯ï¼›ç”¨ä¸‹é¢è¿™è¡Œ</span><br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Throwableæˆå‘˜æ–¹æ³•"><a href="#Throwableæˆå‘˜æ–¹æ³•" class="headerlink" title="Throwableæˆå‘˜æ–¹æ³•"></a>Throwableæˆå‘˜æ–¹æ³•</h3><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/2.71eibpt5ljk0.jpg" alt="2"></p><h3 id="throws"><a href="#throws" class="headerlink" title="throws"></a>throws</h3><p><code>throws å¼‚å¸¸ç±»å</code>ï¼Œè·Ÿåœ¨æ–¹æ³•çš„æ‹¬å·å<br>å¹¶ä¸æ˜¯çœŸæ­£çš„å¤„ç†ï¼Œåªæ˜¯æŠŠå¼‚å¸¸ç»™æ— è§†äº†</p><p><strong>ç¼–è¯‘æ—¶å¼‚å¸¸CEï¼š</strong> å¿…é¡»å¤„ç†ï¼Œå¯ä»¥é€šè¿‡<code>try catch</code>æˆ–<code>throws</code>ï¼Œå¦‚æœç”¨äº†<code>throws</code>ï¼Œå°†æ¥è°è°ƒç”¨äº†è°å¤„ç†ï¼ˆé™¤éä½ æœ‰è‡ªä¿¡throwsä¹‹åä¸å¯èƒ½å‡ºé—®é¢˜~ï¼‰<br><strong>è¿è¡Œæ—¶å¼‚å¸¸REï¼š</strong> å¯ä»¥ä¸å¤„ç†ï¼Œä½†æ˜¯å¦‚æœå‡ºç°é—®é¢˜äº†å¾—å›æ¥æ”¹ä»£ç </p><h3 id="è‡ªå®šä¹‰å¼‚å¸¸"><a href="#è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸"></a>è‡ªå®šä¹‰å¼‚å¸¸</h3><p>æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> å¼‚å¸¸ç±»å <span class="hljs-keyword">extends</span> <span class="hljs-title">Exception</span> </span>&#123;<br>    æ— å‚æ„é€ <br>    å¸¦å‚æ„é€ <br>&#125;<br></code></pre></td></tr></table></figure><p>ä¾‹å­ï¼šæ£€æµ‹åˆ†æ•°æ˜¯å¦åœ¨0~100</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScoreException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Exception</span> </span>&#123;<br>    <span class="hljs-comment">//Alt + Insè‡ªåŠ¨ç”Ÿæˆåˆ«å¿˜äº†å“¦</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ScoreException</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ScoreException</span><span class="hljs-params">(String message)</span> </span>&#123;<br>        <span class="hljs-keyword">super</span>(message);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ScoreException </span>&#123;<br>        Scanner in = <span class="hljs-keyword">new</span> Scanner(System.in);<br>        <span class="hljs-keyword">int</span> score = in.nextInt();<br>        <span class="hljs-keyword">if</span> (score &lt; <span class="hljs-number">0</span> || score &gt; <span class="hljs-number">100</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ScoreException(<span class="hljs-string">&quot;åˆ†æ•°èŒƒå›´é”™è¯¯ï¼&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;åˆ†æ•°æ­£å¸¸&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„å•¦æ³¨æ„å•¦ï¼</strong> ä¸Šé¢çš„throwsä¹Ÿè¯´äº†ï¼Œé™¤éä½ æœ‰è‡ªä¿¡throwsä¹‹åä¸å¯èƒ½é”™ï¼Œä¸ç„¶è¿˜æ˜¯è¦åœ¨æœ€åæ¥ä¸€ä¸ªtry catchã€‚ä¸Šé¢è¿™ä¸ªç¨‹åºï¼Œmainå°±æ˜¯æœ€åäº†ï¼Œä½†æ˜¯mainé‡Œthrowäº†å¼‚å¸¸å‡ºæ¥ä¹‹åï¼Œå¹¶æ²¡æœ‰try catchå®ƒï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªå¼‚å¸¸throwså‡ºäº†mainï¼Œè¿™æ ·å°±<strong>é”™äº†ï¼</strong>ã€‚ï¼ˆæ¯•ç«Ÿæ—¢ç„¶æ˜¯æ£€æŸ¥åˆ†æ•°èŒƒå›´ï¼Œè‚¯å®šè¦è€ƒè™‘åˆ°èŒƒå›´é”™è¯¯å‘€ï¼‰ï¼Œæ‰€ä»¥ä¸‹é¢çš„æ‰æ˜¯å¯¹çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Scanner in = <span class="hljs-keyword">new</span> Scanner(System.in);<br>        <span class="hljs-keyword">int</span> score = in.nextInt();<br>        <span class="hljs-keyword">if</span> (score &lt; <span class="hljs-number">0</span> || score &gt; <span class="hljs-number">100</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123; <span class="hljs-comment">// !!! ///</span><br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ScoreException(<span class="hljs-string">&quot;åˆ†æ•°èŒƒå›´é”™è¯¯ï¼&quot;</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (ScoreException e) &#123; <span class="hljs-comment">/// !!! ///</span><br>                e.printStackTrace();<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;åˆ†æ•°æ­£å¸¸&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="throwså’Œthrowçš„åŒºåˆ«"><a href="#throwså’Œthrowçš„åŒºåˆ«" class="headerlink" title="throwså’Œthrowçš„åŒºåˆ«"></a>throwså’Œthrowçš„åŒºåˆ«</h4><table><thead><tr><th>throws</th><th>throw</th></tr></thead><tbody><tr><td>ç”¨åœ¨<strong>æ–¹æ³•å£°æ˜</strong>åé¢ï¼Œè·Ÿçš„æ˜¯<strong>å¼‚å¸¸ç±»å</strong></td><td>ç”¨åœ¨<strong>æ–¹æ³•ä½“</strong>å†…ï¼Œè·Ÿçš„æ˜¯<strong>å¼‚å¸¸å¯¹è±¡å</strong></td></tr><tr><td>ç”±è¯¥æ–¹æ³•çš„<strong>è°ƒç”¨è€…</strong>æ¥å¤„ç†ï¼ˆç”©é”…ï¼‰</td><td>ç”±<strong>æ–¹æ³•ä½“å†…</strong>çš„è¯­å¥å¤„ç†ï¼ˆè‡ªå·±èƒŒé”…ï¼‰</td></tr><tr><td>åªæ˜¯å¯èƒ½å‘ç”Ÿå¼‚å¸¸</td><td>æ‰§è¡Œthrowä¸€å®šæŠ›å‡ºäº†æŸç§å¼‚å¸¸</td></tr></tbody></table><h2 id="é›†åˆ-1"><a href="#é›†åˆ-1" class="headerlink" title="é›†åˆ+"></a>é›†åˆ+</h2><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/3.3r1yz5zsjfy0.jpg" alt="3"></p><h3 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h3><p>Collectionæ˜¯å•åˆ—é›†åˆçš„é¡¶å±‚æ¥å£<br>ï¼ˆå³ åªèƒ½é€šè¿‡<strong>å¤šæ€</strong>çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Collection&lt;String&gt; c = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br>        c.add(<span class="hljs-string">&quot;Izayoi&quot;</span>);<br>        c.add(<span class="hljs-string">&quot;ASter&quot;</span>);<br>        System.out.println(c); <span class="hljs-comment">// [Izayoi, ASter]</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¸¸ç”¨æ–¹æ³•-2"><a href="#å¸¸ç”¨æ–¹æ³•-2" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/4.5kz5fpg0k6o0.jpg" alt="4"></p><h4 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h4><p>ï¼ˆç±»æ¯”C++ï¼‰<br>Iteratorï¼Œè¿­ä»£å™¨<br><code>Iterator&lt;E&gt; iterator()</code></p><ul><li><code>E next()</code></li><li><code>boolean hasNext()</code><blockquote><p>p.s. <code>Crtl + B</code>æ˜¯è½¬åˆ° é€‰ä¸­çš„æ–¹æ³•çš„ å®ç°</p></blockquote></li></ul><h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p>æœ‰åºé›†åˆï¼Œå…è®¸é‡å¤</p><h4 id="ç‰¹æœ‰æ–¹æ³•"><a href="#ç‰¹æœ‰æ–¹æ³•" class="headerlink" title="ç‰¹æœ‰æ–¹æ³•"></a>ç‰¹æœ‰æ–¹æ³•</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.2m55aimpul60.png" alt="image"></p><h4 id="å¹¶å‘ä¿®æ”¹å¼‚å¸¸"><a href="#å¹¶å‘ä¿®æ”¹å¼‚å¸¸" class="headerlink" title="å¹¶å‘ä¿®æ”¹å¼‚å¸¸"></a>å¹¶å‘ä¿®æ”¹å¼‚å¸¸</h4><p>ä¸€ä¸ªé”™è¯¯çš„ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        List&lt;String&gt; l = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br>        l.add(<span class="hljs-string">&quot;IzayoiAster&quot;</span>);<br>        l.add(<span class="hljs-string">&quot; loves &quot;</span>);<br>        l.add(<span class="hljs-string">&quot;Izyaoi&quot;</span>);<br>        Iterator&lt;String&gt; it = l.iterator();<br>        <span class="hljs-keyword">while</span> (it.hasNext()) &#123;<br>            String s = it.next();<br>            <span class="hljs-keyword">if</span> (s.equals(<span class="hljs-string">&quot;IzayoiAster&quot;</span>)) &#123;<br>                l.add(<span class="hljs-string">&quot;Lotus&quot;</span>);<br>            &#125;<br>        &#125;<br>        System.out.println(l);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æŠ¥é”™ï¼š</strong> <code>Exception in thread &quot;main&quot; java.util.ConcurrentModificationException</code></p><blockquote><p>ç¨å¾®è§£é‡Šä¸€ä¸‹è¿™ä¸ªå¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼šæ¯æ¬¡addä¸€ä¸ªå…ƒç´ ï¼Œéƒ½ä¼šå¯¼è‡´åˆ—è¡¨<strong>å®é™…å°†è¦ä¿®æ”¹çš„æ¬¡æ•°</strong>(modCount)åŠ ä¸€ï¼Œè€Œå½“è°ƒç”¨nextæ—¶ï¼Œä¹‹å‰ä¼šæŠŠå®é™…å°†è¦ä¿®æ”¹çš„æ¬¡æ•°èµ‹ç»™<strong>é¢„æœŸå°†è¦ä¿®æ”¹çš„æ¬¡æ•°</strong>(expectedModCount)ï¼Œç„¶åå¯¹è¿™ä¸¤ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ã€‚ç”±äºä¸­é€”addäº†ï¼Œä¸ç›¸ç­‰ï¼Œå› æ­¤æŠ¥é”™ã€‚ï¼ˆOrzè§£é‡Šä¸æ¸…ï¼‰<br>æˆ‘æ„Ÿè§‰è¿˜ä¸å¦‚è¿™ä¸€å¥è¯è®²çš„æ¸…æ¥šï¼šè¿­ä»£å™¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡é›†åˆå¯¹è±¡ä¿®æ”¹äº†é›†åˆçš„é•¿åº¦ï¼Œé€ æˆäº†è¿­ä»£å™¨è·å–å…ƒç´ æ—¶ï¼Œåˆ¤å®šå®é™…ä¿®æ”¹å€¼å’Œé¢„æœŸä¿®æ”¹å€¼ä¸ä¸€è‡´</p></blockquote><p><strong>è§£å†³ï¼š</strong> </p><p><code>get()</code>æ–¹æ³•ä¸ä¼šå»å¯¹<code>expectedModCount</code>å’Œ<code>modCount</code>è¿›è¡Œæ£€æŸ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        List&lt;String&gt; l = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br>        l.add(<span class="hljs-string">&quot;IzayoiAster&quot;</span>);<br>        l.add(<span class="hljs-string">&quot;loves&quot;</span>);<br>        l.add(<span class="hljs-string">&quot;Izayoi&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; l.size(); i++) &#123;<br>            String s = l.get(i);<br>            <span class="hljs-keyword">if</span> (s.equals(<span class="hljs-string">&quot;IzayoiAster&quot;</span>)) &#123;<br>                l.add(<span class="hljs-string">&quot;Lotus&quot;</span>);<br>            &#125;<br>        &#125;<br>        System.out.println(l);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ListIterator"><a href="#ListIterator" class="headerlink" title="ListIterator"></a>ListIterator</h4><h5 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h5><p>é™¤äº†ç»§æ‰¿è‡ªCollectionçš„Interatroæ‰€æ‹¥æœ‰çš„<code>next()</code>å’Œ<code>hasNext()</code>å¤–ï¼Œè¿˜æœ‰<code>previous()</code>ï¼Œ<code>hasPrevious()</code>å’Œ<code>add(E e)</code></p><p><font color='red'>æ³¨æ„å•¦æ³¨æ„å•¦ï¼ä¸‹é¢è¿™æ®µä»£ç è¦å’Œä¸Šé¢çš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸åŒºåˆ«å¼€æ¥å“¦ï¼è¿™é‡Œç”¨çš„æ˜¯<strong>List</strong>Iterator</font></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        List&lt;String&gt; l = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br>        l.add(<span class="hljs-string">&quot;IzayoiAster&quot;</span>);<br>        l.add(<span class="hljs-string">&quot;loves&quot;</span>);<br>        l.add(<span class="hljs-string">&quot;Izayoi&quot;</span>);<br>        ListIterator&lt;String&gt; lit = l.listIterator(); <span class="hljs-comment">/// !!! ///</span><br>        <span class="hljs-keyword">while</span> (lit.hasNext()) &#123; <span class="hljs-comment">/// ç”¨äº†while ///</span><br>            String s = lit.next();<br>            <span class="hljs-keyword">if</span>(s.equals(<span class="hljs-string">&quot;Izayoi&quot;</span>)) &#123;<br>                lit.add(<span class="hljs-string">&quot;Lotus&quot;</span>); <span class="hljs-comment">/// å¯ä»¥addå•¦ ///</span><br>            &#125;<br>        &#125;<br>        System.out.println(l);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å› ä¸ºListIteratroåœ¨addæ—¶ï¼Œä¼šæŠŠmodCountèµ‹ç»™expectedModCount</p></blockquote><h4 id="å¢å¼ºforå¾ªç¯"><a href="#å¢å¼ºforå¾ªç¯" class="headerlink" title="å¢å¼ºforå¾ªç¯"></a>å¢å¼ºforå¾ªç¯</h4><p>å…¶å®ä¹‹å‰IDEAå°±å·²ç»æç¤ºå•¦<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.ay1cic1tmg.png" alt="image"><br>æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (ç±»å‹ å˜é‡å : æ•°ç»„æˆ–Collectioné›†åˆ) &#123;<br>    <span class="hljs-comment">// åœ¨æ­¤å¤„ç›´æ¥ä½¿ç”¨å˜é‡åå³å¯</span><br>&#125;<br><br>e.g.<br><span class="hljs-keyword">int</span>[] arr = &#123;...&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i : arr) &#123;<br>    System.out.println(i);<br>&#125;<br></code></pre></td></tr></table></figure><p><font color='red'>å¢å¼ºforå¾ªç¯çš„å†…éƒ¨åŸç†æ˜¯ä¸€ä¸ª<strong>Iterator</strong>è¿­ä»£å™¨ï¼Œæ‰€ä»¥ä¹Ÿè¦æ³¨æ„å¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼é”™è¯¯ç¤ºä¾‹ï¼š</font></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; l = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br>...<br><span class="hljs-keyword">for</span>(String s : list) &#123;<br>    <span class="hljs-keyword">if</span>(s.equals(<span class="hljs-string">&quot;Izayoi&quot;</span>)) &#123;<br>        list.add(<span class="hljs-string">&quot;Lotus&quot;</span>); <span class="hljs-comment">// é€šè¿‡é›†åˆå¯¹è±¡ä¿®æ”¹äº†é›†åˆçš„é•¿åº¦ï¼æŠ¥é”™ï¼</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="éå†å°æ€»ç»“"><a href="#éå†å°æ€»ç»“" class="headerlink" title="éå†å°æ€»ç»“"></a>éå†å°æ€»ç»“</h4><p>ä¸‰ç§æ–¹å¼ï¼šè¿­ä»£å™¨ã€æ™®é€šforã€å¢å¼ºforï¼ˆwhileæ˜¯åæ–‡æ˜ï¼Ÿï¼‰</p><h4 id="Listçš„å¸¸ç”¨å­ç±»"><a href="#Listçš„å¸¸ç”¨å­ç±»" class="headerlink" title="Listçš„å¸¸ç”¨å­ç±»"></a>Listçš„å¸¸ç”¨å­ç±»</h4><ul><li><code>ArrayList</code>ï¼šåº•å±‚ä¸º<strong>æ•°ç»„</strong>ï¼ŒæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢</li><li><code>LinkedList</code>ï¼šåº•å±‚ä¸º<strong>é“¾è¡¨</strong>ï¼ŒæŸ¥è¯¢æ…¢ï¼Œå¢åˆ å¿«</li></ul><h5 id="LinkedListçš„ç‰¹æœ‰åŠŸèƒ½"><a href="#LinkedListçš„ç‰¹æœ‰åŠŸèƒ½" class="headerlink" title="LinkedListçš„ç‰¹æœ‰åŠŸèƒ½"></a>LinkedListçš„ç‰¹æœ‰åŠŸèƒ½</h5><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.4djqmgfh9mk0.png" alt="image"></p><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p>é™¤äº†ä¸èƒ½é‡å¤ä¹‹å¤–ï¼Œå’Œä»–çˆ¹Collectionæ²¡åŒºåˆ«<br>å¦å¤–ï¼Œæ²¡æœ‰å¸¦ç´¢å¼•çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ™®é€šforéå†</p><p>åŒæ ·ï¼Œå› ä¸ºæ˜¯æ¥å£ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼ˆé€šè¿‡å¤šæ€ï¼‰</p><h4 id="å“ˆå¸Œ"><a href="#å“ˆå¸Œ" class="headerlink" title="å“ˆå¸Œ"></a>å“ˆå¸Œ</h4><p>Objectç±»ä¸­ï¼Œ<code>hashCode()</code>æ–¹æ³•å¯ä»¥è·å–å¯¹è±¡çš„å“ˆå¸Œå€¼</p><ul><li>åŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨ï¼Œè¿”å›çš„å“ˆå¸Œå€¼ç›¸åŒ</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åŒå¯¹è±¡å“ˆå¸Œå€¼ä¸åŒï¼ˆé™¤éé‡å†™äº†<code>hashCode()</code>ï¼‰</li></ul><h4 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h4><ul><li>åº•å±‚æ˜¯<a href="https://www.bilibili.com/video/BV1sZ4y1H7gV?p=244&spm_id_from=pageDriver">å“ˆå¸Œè¡¨ï¼ˆP244ï¼‰</a></li><li>ä¸ä¿è¯æœ‰åº</li></ul><blockquote><p>æ‚ä¹±æ— ç« çš„å°æŠ€å·§æ—¶é—´ï¼š<code>Shift + Tab</code>å–æ¶ˆç¼©è¿›</p></blockquote><h4 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h4><p>ç‰¹æ€§å¦‚å…¶åå­—ï¼Œæœ‰åºï¼Œä¸é‡å¤ï¼Œæ˜¯ç”±å“ˆå¸Œè¡¨å’Œé“¾è¡¨å®ç°çš„Setæ¥å£</p><h4 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h4><p>ç‰¹æ€§å¦‚å…¶åå­—ï¼ˆä¸€è¯´åˆ°Treeï¼Œå°±æƒ³åˆ°å¹³è¡¡æ ‘ä¹‹ç±»çš„å˜›~ï¼‰</p><ul><li>å…ƒç´ æŒ‰ç…§<strong>ä¸€å®šçš„è§„åˆ™</strong>è¿›è¡Œæ’åºï¼Œå…·ä½“çš„æ’åºæ–¹å¼å–å†³äº<strong>æ„é€ æ–¹æ³•</strong>ï¼š<ul><li><code>TreeSet()</code>ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶æ’åºè¿›è¡Œæ’åº</li><li><code>TreeSet(Comparator cmp)</code>ï¼šæ ¹æ®æ¯”è¾ƒå™¨cmpè¿›è¡Œæ’åº</li></ul></li><li>æ²¡æœ‰å¸¦ç´¢å¼•çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ™®é€šforéå†</li><li>Setï¼Œå› æ­¤ä¸åŒ…å«é‡å¤å…ƒç´ </li></ul><h5 id="Comparable"><a href="#Comparable" class="headerlink" title="Comparable"></a>Comparable</h5><p><strong>ä¾‹1ï¼š</strong> <code>Integer</code>ç±»å†…å·²ç»å®ç°äº†<strong>è‡ªç„¶æ’åºçš„æ¥å£</strong><code>Comparable</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">// æ³¨æ„ï¼é›†åˆåªèƒ½å­˜å¼•ç”¨ç±»å‹</span><br>        <span class="hljs-comment">// æ‰€ä»¥ä¸èƒ½å†™intï¼Œè€Œåº”è¯¥å†™intçš„åŒ…è£…ç±»Integer</span><br>        <span class="hljs-comment">// p.s. Integerå†…éƒ¨å°è£…äº†æŠŠintè½¬Integerçš„æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥addä¸€ä¸ªint</span><br>        TreeSet&lt;Integer&gt; ts = <span class="hljs-keyword">new</span> TreeSet&lt;&gt;();<br>        ts.add(<span class="hljs-number">14</span>);<br>        ts.add(<span class="hljs-number">18</span>);<br>        ts.add(<span class="hljs-number">16</span>);<br>        System.out.println(ts); <span class="hljs-comment">// [14, 16, 18]</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¾‹2ï¼š</strong> è‡ªå®šä¹‰ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œè¦æ±‚å­¦ç”Ÿä¼˜å…ˆæŒ‰ç…§å¹´é¾„å°çš„è¾“å‡ºï¼Œå¹´é¾„ç›¸åŒçš„å†æ¯”è¾ƒå§“åâ€”â€”<strong>éœ€è¦åœ¨è‡ªå®šä¹‰çš„å­¦ç”Ÿç±»é‡Œå®ç°è‡ªç„¶æ’åºæ¥å£Comparable</strong><br>é‡å†™<code>compareTo()</code>ï¼š</p><ul><li>è¿”å›0ï¼šåˆ¤å®šä¸º<strong>ç›¸ç­‰</strong>ï¼ˆå¯¹äºsetæ¥è¯´ï¼Œç›¸ç­‰çš„å…ƒç´ åªä¼šè¢«å­˜è¿›ä¸€ä¸ªï¼ï¼‰</li><li>è¿”å›æ­£æ•°ï¼š<strong>å‡åº</strong>æ’åˆ—ï¼ˆå³å½“å‰æ¯”è¾ƒçš„å…ƒç´ æ’åœ¨è¢«æ¯”è¾ƒçš„åé¢ï¼‰</li><li>è¿”å›é™„å±ï¼š<strong>é™åº</strong>æ’åˆ—<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Comparable</span>&lt;<span class="hljs-title">Student</span>&gt;</span>&#123;<br>    ...<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compareTo</span><span class="hljs-params">(Student o)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> num = <span class="hljs-keyword">this</span>.age - o.age; <span class="hljs-comment">////// å‡åºï¼Œé‚£ä¹ˆthisæ”¾åœ¨å‰é¢å“¦ï¼ //////</span><br>        <span class="hljs-keyword">int</span> ret = num == <span class="hljs-number">0</span> ? <span class="hljs-keyword">this</span>.name.compareTo(o.name) : num;<br>        <span class="hljs-keyword">return</span> ret;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        TreeSet&lt;Student&gt; ts = <span class="hljs-keyword">new</span> TreeSet&lt;&gt;();<br>        Student s1 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;Illya&quot;</span>, <span class="hljs-number">10</span>);<br>        Student s2 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;Miyu&quot;</span>, <span class="hljs-number">10</span>);<br>        Student s3 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;Chloe&quot;</span>, <span class="hljs-number">9</span>);<br>        Student s4 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;Chloe&quot;</span>, <span class="hljs-number">9</span>);<br>        ts.add(s1);<br>        ts.add(s2);<br>        ts.add(s3);<br>        ts.add(s4);<br>        <span class="hljs-keyword">for</span>(Student s : ts) &#123;<br>            System.out.println(s.getName() + <span class="hljs-string">&quot;, &quot;</span> + s.getAge() + <span class="hljs-string">&quot;å²&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// Chloe, 9å²</span><br><span class="hljs-comment">// Illya, 10å²</span><br><span class="hljs-comment">// Miyu, 10å²</span><br></code></pre></td></tr></table></figure><h5 id="Comparator"><a href="#Comparator" class="headerlink" title="Comparator"></a>Comparator</h5>å’Œä¸Šé¢ä¸€æ ·çš„ä¾‹å­ï¼ˆä½¿ç”¨äº†<strong>åŒ¿åå†…éƒ¨ç±»</strong>ï¼‰<br>ï¼ˆè¿™æ¬¡ï¼Œå­¦ç”Ÿç±»é‡Œå¹¶æ²¡æœ‰å®ç°è‡ªç„¶æ’åºæ¥å£ï¼‰<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>        TreeSet&lt;Student&gt; ts = <span class="hljs-keyword">new</span> TreeSet&lt;&gt;(<span class="hljs-keyword">new</span> Comparator&lt;Student&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(Student o1, Student o2)</span> </span>&#123;<br>                <span class="hljs-comment">// å› ä¸ºåœ¨mainæ–¹æ³•é‡Œï¼Œæ‰€ä»¥thisæŒ‡ä»£çš„æ˜¯main</span><br>                <span class="hljs-comment">// o1ç›¸å½“äºä¹‹å‰çš„thisï¼Œo2ç›¸å½“äºä¹‹å‰çš„o</span><br>                <span class="hljs-keyword">int</span> num = o1.getAge() - o2.getAge(); <span class="hljs-comment">// ä¸åœ¨ç±»é‡Œï¼Œç”¨getAge</span><br>                <span class="hljs-keyword">int</span> ret = num == <span class="hljs-number">0</span> ? o1.getName().compareTo(o2.getName()) : num;<br>                <span class="hljs-keyword">return</span> ret;<br>            &#125;<br>        &#125;);<br><br>        Student s1 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;Illya&quot;</span>, <span class="hljs-number">10</span>);<br>        Student s2 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;Miyu&quot;</span>, <span class="hljs-number">10</span>);<br>        Student s3 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;Chloe&quot;</span>, <span class="hljs-number">9</span>);<br>        Student s4 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;Chloe&quot;</span>, <span class="hljs-number">9</span>);<br>        ts.add(s1);<br>        ts.add(s2);<br>        ts.add(s3);<br>        ts.add(s4);<br>        <span class="hljs-keyword">for</span>(Student s : ts) &#123;<br>            System.out.println(s.getName() + <span class="hljs-string">&quot;, &quot;</span> + s.getAge() + <span class="hljs-string">&quot;å²&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h3><p>å³ å°†åŸæ¥å…·ä½“çš„æŸä¸€ç±»å‹<strong>å‚æ•°åŒ–</strong>ï¼Œåœ¨ä½¿ç”¨/è°ƒç”¨æ—¶å†ä¼ å…¥å…·ä½“çš„ç±»å‹<br>ï¼ˆç±»æ¯”C++ Templateï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">//æ³¨æ„å•¦æ³¨æ„å•¦ï¼è¿™é‡Œæ²¡åŠ å°–æ‹¬å·&lt;&gt;æ¥æŒ‡å®šç±»å‹</span><br>        Collection c = <span class="hljs-keyword">new</span> ArrayList();<br>        c.add(<span class="hljs-string">&quot;Izayoi&quot;</span>);<br>        c.add(<span class="hljs-string">&quot;Aster&quot;</span>);<br>        Iterator it = c.iterator();<br>        <span class="hljs-keyword">while</span> (it.hasNext()) &#123;<br>            System.out.println(it.next());<br>            <span class="hljs-comment">// æˆ–</span><br>            Object o = it.next();<br>            System.out.println(o);<br>            <span class="hljs-comment">// æˆ–</span><br>            String s = (String)it.next();<br>            System.out.println(s);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// Izayoi</span><br><span class="hljs-comment">// Aster</span><br><span class="hljs-comment">// ï¼ˆè™½ç„¶IDEAç»™æˆ‘ç”»äº†æ»¡å±çš„æ³¢æµªçº¿Orzï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;<br>    <span class="hljs-keyword">public</span> T username;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">getUsername</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> username;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUsername</span><span class="hljs-params">(T username)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.username = username;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(T username)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.username = username;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        User&lt;String&gt; u = <span class="hljs-keyword">new</span> User&lt;&gt;(<span class="hljs-string">&quot;IzayoiAster&quot;</span>);<br>        <span class="hljs-comment">// User u = new User(&quot;IzayoiAster&quot;);ï¼Œè™½ç„¶IDEAæ˜¾ç„¶ä¹Ÿä¸å¸Œæœ›ä½ è¿™ä¹ˆå†™</span><br>        System.out.println(u.getUsername());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h4><p>æ³›å‹æ¥å£çš„<strong>å®ç°ç±»</strong>ä»ä¸ºæ³›å‹ç±»</p><h4 id="ç±»å‹é€šé…ç¬¦"><a href="#ç±»å‹é€šé…ç¬¦" class="headerlink" title="ç±»å‹é€šé…ç¬¦"></a>ç±»å‹é€šé…ç¬¦</h4><p>ä¸ºäº†è¡¨ç¤ºå„ç§æ³›å‹çš„çˆ¶ç±»ï¼Œå¯ä»¥ä½¿ç”¨ç±»å‹é€šé…ç¬¦<code>&lt;?&gt;</code></p><p><code>List&lt;?&gt;</code>ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹æœªçŸ¥çš„Listï¼ˆä»…è¡¨ç¤ºæ˜¯å„ç§æ³›å‹Listçš„çˆ¶ç±»ï¼Œå¹¶ä¸èƒ½æŠŠå…ƒç´ åŠ å…¥å…¶ä¸­ï¼‰</p><p><strong>ç±»å‹é€šé…ç¬¦ä¸Šé™ï¼š</strong> <code>&lt;? extends ç±»å‹&gt;</code><br>å¦‚<code>List&lt;? extends Number&gt;</code>ï¼Œè¡¨ç¤ºçš„ç±»å‹æ˜¯<strong>Numberæˆ–å…¶å­ç±»å‹</strong><br><strong>ç±»å‹é€šé…ç¬¦ä¸‹çº¿ï¼š</strong> <code>&lt;? super ç±»å‹&gt;</code><br>å¦‚<code>List&lt;? super Number&gt;</code>ï¼Œè¡¨ç¤ºçš„ç±»å‹æ˜¯<strong>Numberæˆ–å…¶çˆ¶ç±»å‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;?&gt; l1 = <span class="hljs-keyword">new</span> ArrayList&lt;Object&gt;();<br>List&lt;?&gt; l2 = <span class="hljs-keyword">new</span> ArrayList&lt;Number&gt;();<br>List&lt;?&gt; l3 = <span class="hljs-keyword">new</span> ArrayList&lt;Integer&gt;();<br><span class="hljs-comment">// (Object -&gt; Number -&gt; Integer)</span><br><br>List&lt;? extends Number&gt; = <span class="hljs-keyword">new</span> ArrayList&lt;Object&gt;(); <span class="hljs-comment">// æŠ¥é”™ï¼ä¸Šé™æ˜¯Numberï¼</span><br>List&lt;? <span class="hljs-keyword">super</span> Number&gt; = <span class="hljs-keyword">new</span> ArrayList&lt;Integer&gt;(); <span class="hljs-comment">// æŠ¥é”™ï¼ä¸‹é™æ˜¯Numberï¼</span><br></code></pre></td></tr></table></figure><h4 id="å¯å˜å‚æ•°"><a href="#å¯å˜å‚æ•°" class="headerlink" title="å¯å˜å‚æ•°"></a>å¯å˜å‚æ•°</h4><p><code>(å˜é‡ç±»å‹... å˜é‡å)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">int</span>... a)</span> </span>&#123; <span class="hljs-comment">// aæ˜¯ä¸€ä¸ªæ•°ç»„å’¯</span><br>        <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i : a) &#123;<br>            ret += i;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ret;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        System.out.println(sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚æœå‡½æ•°ä¸­å‡ºæ¥å¯å˜å‚æ•°è¿˜æœ‰å…¶ä»–å‚æ•°ï¼Œå¯å˜å‚æ•°è¦<strong>æ”¾åˆ°æœ€å</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> b, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span>... a)</span> </span>&#123; ...<br></code></pre></td></tr></table></figure><h5 id="å¯å˜å‚æ•°çš„ä½¿ç”¨"><a href="#å¯å˜å‚æ•°çš„ä½¿ç”¨" class="headerlink" title="å¯å˜å‚æ•°çš„ä½¿ç”¨"></a>å¯å˜å‚æ•°çš„ä½¿ç”¨</h5><ul><li><p>Arraysç±»ä¸­æœ‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼š<code>Arrays.asList(T... t)</code>ï¼Œè¿”å›ç”±<strong>æŒ‡å®šæ•°ç»„</strong>ç»„æˆçš„<strong>å›ºå®šé•¿åº¦</strong>çš„åˆ—è¡¨ã€‚æ‰€ä»¥ä¸èƒ½addã€removeï¼Œèƒ½set</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">&quot;Izayoi&quot;</span>, <span class="hljs-string">&quot;Aster&quot;</span>, <span class="hljs-string">&quot;Lotus&quot;</span>);<br></code></pre></td></tr></table></figure></li><li><p>Listæ¥å£ä¸­æœ‰ä¸€ä¸ªé™æ€æ–¹æ³•<code>List.of(E... e)</code>ï¼ŒåŒä¸Šï¼Œä½†æ˜¯addã€removeå’Œset<strong>éƒ½ä¸è¡Œï¼ˆä¸èƒ½æ›´æ”¹ï¼‰</strong></p></li><li><p>Setæ¥å£ä¸­ä¹Ÿæœ‰ä¸€ä¸ªé™æ€æ–¹æ³•<code>Set.of(E... e)</code>ï¼ŒåŒä¸Šï¼Œåªæ˜¯<strong>ä¸èƒ½é‡å¤</strong>ï¼ˆè¿™é‡Œæ˜¯ä¸èƒ½é‡å¤ï¼Œå¹¶ä¸æ˜¯è‡ªåŠ¨å»é‡ï¼Œè€Œæ˜¯ä½ ç»™å‡ºçš„<code>E... e</code>é‡Œä¸èƒ½æœ‰é‡å¤çš„ï¼Œä¸ç„¶ä¼šREçš„ï¼‰</p></li></ul><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p><code>Map&lt;Key, Value&gt;</code>ï¼›æ˜¯æ¥å£ï¼Œæ‰€ä»¥ä¾ç„¶è¦é€šè¿‡å¤šæ€æ¥å®ä¾‹åŒ–</p><p>ï¼ˆç±»æ¯”C++ï¼‰é”®ä¸å¯é‡å¤</p><p>æ·»åŠ å…ƒç´ ï¼š<code>put(key, value)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Map&lt;String, String&gt; m = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        m.put(<span class="hljs-string">&quot;Illya&quot;</span>, <span class="hljs-string">&quot;ä¼Šè‰é›…&quot;</span>);<br>        m.put(<span class="hljs-string">&quot;Miyu&quot;</span>, <span class="hljs-string">&quot;ç¾æ¸¸&quot;</span>);<br>        m.put(<span class="hljs-string">&quot;Chloe&quot;</span>, <span class="hljs-string">&quot;å…‹æ´›ä¼Š&quot;</span>);<br>        System.out.println(m); <span class="hljs-comment">// &#123;Illya=ä¼Šè‰é›…, Miyu=ç¾æ¸¸, Chloe=å…‹æ´›ä¼Š&#125;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åŸºæœ¬åŠŸèƒ½"><a href="#åŸºæœ¬åŠŸèƒ½" class="headerlink" title="åŸºæœ¬åŠŸèƒ½"></a>åŸºæœ¬åŠŸèƒ½</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.77tpagxsgx40.png" alt="image"></p><h4 id="è·å–åŠŸèƒ½"><a href="#è·å–åŠŸèƒ½" class="headerlink" title="è·å–åŠŸèƒ½"></a>è·å–åŠŸèƒ½</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.tf6yhdlrzcw.png" alt="image"></p><h4 id="éå†-1"><a href="#éå†-1" class="headerlink" title="éå†"></a>éå†</h4><ul><li>æ–¹æ³•ä¸€ï¼šç”¨<code>keySet()</code>æ–¹æ³•è·å–æ‰€æœ‰<strong>é”®</strong>ï¼Œå†éå†æ‰€æœ‰é”®</li><li>æ–¹æ³•äºŒï¼šç”¨<code>entrySet()</code>æ–¹æ³•è·å–æ‰€æœ‰<strong>é”®å€¼å¯¹</strong>å¯¹è±¡ï¼Œå†åˆ©ç”¨å¢å¼ºforï¼Œæ¥å¾—åˆ°æ¯ä¸€ä¸ª<code>Map.Entry</code>ï¼ˆEntryï¼šæ¡ç›®ï¼‰ï¼Œè€Œ<code>Map.Entry</code>æœ‰<code>getKey()</code>å’Œ<code>getValue()</code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Map&lt;String, String&gt; m = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        m.put(<span class="hljs-string">&quot;Illya&quot;</span>, <span class="hljs-string">&quot;ä¼Šè‰é›…&quot;</span>);<br>        m.put(<span class="hljs-string">&quot;Miyu&quot;</span>, <span class="hljs-string">&quot;ç¾æ¸¸&quot;</span>);<br>        m.put(<span class="hljs-string">&quot;Chloe&quot;</span>, <span class="hljs-string">&quot;å…‹æ´›ä¼Š&quot;</span>);<br><br>        Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = m.entrySet(); <span class="hljs-comment">// Ctrl + Alt + V</span><br>        <span class="hljs-keyword">for</span>(Map.Entry&lt;String, String&gt; wife : entrySet) &#123;<br>            System.out.println(wife.getKey() + <span class="hljs-string">&quot;, &quot;</span> + wife.getValue());<br>        &#125;<br>    &#125;<br><span class="hljs-comment">//    Illya, ä¼Šè‰é›…</span><br><span class="hljs-comment">//    Miyu, ç¾æ¸¸</span><br><span class="hljs-comment">//    Chloe, å…‹æ´›ä¼Š</span><br>&#125;<br></code></pre></td></tr></table></figure>p.s. é›†åˆæ˜¯å¯ä»¥<strong>åµŒå¥—</strong>çš„å“¦ï¼Œæ¯”å¦‚<code>ArrayList</code>å­˜å‚¨<code>HashMap</code></li></ul><h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><p>é‡Œé¢å‡ä¸ºé™æ€æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªé’ˆå¯¹é›†åˆæ“ä½œçš„<strong>å·¥å…·ç±»</strong></p><p>å¸¸ç”¨æ–¹æ³•ï¼š<code>sort(åˆ—è¡¨)</code>å‡åºæ’åºï¼Œ<code>reverse(åˆ—è¡¨)</code>åè½¬ï¼Œ<code>shuffle(åˆ—è¡¨)</code>ï¼šä½¿ç”¨é»˜è®¤çš„éšæœºæºæ¥éšæœºæ’åˆ—æŒ‡å®šçš„åˆ—è¡¨</p><blockquote><p><strong>å“¼ï¼å“¼å“¼ï¼å•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šï¼</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br><br>        Collections.sort(list);<br>        System.out.println(list); <span class="hljs-comment">// [0, 1, 1, 1, 1, 1, 1, 4, 4, 5, 8, 9, 9]</span><br><br>        Collections.reverse(list);<br>        System.out.println(list); <span class="hljs-comment">// [9, 9, 8, 5, 4, 4, 1, 1, 1, 1, 1, 1, 0]</span><br><br>        Collections.shuffle(list);<br>        System.out.println(list); <span class="hljs-comment">// [5, 8, 1, 1, 0, 1, 9, 1, 9, 1, 4, 1, 4]</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="IOæµ"><a href="#IOæµ" class="headerlink" title="IOæµ"></a>IOæµ</h2><p>åˆ†ä¸ºå­—ç¬¦æµå’Œå­—èŠ‚æµ</p><ul><li>è¯»çš„æ‡‚çš„ä¸œè¥¿ç”¨å­—ç¬¦æµï¼Œæ¯”å¦‚ä¸€ç¯‡txtæ ¼å¼çš„ç´«è€å†™çš„å°é»„æ–‡</li><li>è¯»ä¸æ‡‚çš„ä¸œè¥¿ç”¨å­—èŠ‚æµï¼Œæ¯”å¦‚ä¸€å¼ jpgæ ¼å¼çš„ç´«è€åŒ–çš„å°æ¶©å›¾ï¼ˆç”¨è®°äº‹æœ¬æ‰“å¼€è¯»ä¸æ‡‚ï¼‰<br>ï¼ˆå¦‚æœä¸çŸ¥é“ç”¨ä»€ä¹ˆæµï¼Œå°±ç”¨ä¸‡èƒ½çš„å­—èŠ‚æµï¼‰</li></ul><h3 id="File"><a href="#File" class="headerlink" title="File"></a>File</h3><p>Fileç±»æ˜¯æ–‡ä»¶å’Œç›®å½•<strong>è·¯å¾„</strong>åçš„æŠ½è±¡è¡¨ç¤ºï¼ˆä¸è¦ç†è§£æˆæ–‡ä»¶äº†å“¦~ï¼‰</p><h4 id="æ„é€ -1"><a href="#æ„é€ -1" class="headerlink" title="æ„é€ "></a>æ„é€ </h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.1x9tapcoaxcw.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>        File f1 = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;E:\\Aster\\diary.txt&quot;</span>);<br>        System.out.println(f1);<br><br>        File f2 = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;E:\\Aster&quot;</span>, <span class="hljs-string">&quot;diary.txt&quot;</span>);<br>        System.out.println(f2);<br><br>        File f3 = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;E:\\Aster&quot;</span>);<br>        File f4 = <span class="hljs-keyword">new</span> File(f3, <span class="hljs-string">&quot;diary.txt&quot;</span>);<br>        System.out.println(f4);<br>    &#125;<br><span class="hljs-comment">//    E:\Aster\diary.txt</span><br><span class="hljs-comment">//    E:\Aster\diary.txt</span><br><span class="hljs-comment">//    E:\Aster\diary.txt</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.6rdxma3hsr40.png" alt="image"></p><p><strong>createNewFile()</strong></p><ul><li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–‡ä»¶å¹¶è¿”å›trueï¼›åä¹‹false<br>ï¼ˆå†·çŸ¥è¯†ï¼šå¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹å’Œæ–‡ä»¶é‡åï¼Œä¹Ÿæ˜¯ä¸èƒ½åˆ›å»ºçš„ï¼‰<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        File f1 = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;E:\\Aster\\diary.txt&quot;</span>);<br>        System.out.println(f1.createNewFile()); <span class="hljs-comment">// true</span><br>        <span class="hljs-comment">// å¦‚æœAsteræ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œä¼šæŠ¥é”™</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.67oi0x1dt5w0.png" alt="image"></li></ul><p><strong>mkdir()</strong></p><ul><li>å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹å¹¶è¿”å›trueï¼›åä¹‹falseï¼ˆåˆ›å»ºå¤šçº§ä¼šfalseå“¦ï¼‰</li></ul><p><strong>mkdirs()</strong></p><ul><li>â€œä¸æ„§æ˜¯mkdirsï¼Œè½»è€Œæ˜“ä¸¾åœ°åšåˆ°äº†mkdiræƒ³åšå´åšä¸åˆ°çš„äº‹ï¼â€</li></ul><h4 id="åˆ¤æ–­å’Œè·å–"><a href="#åˆ¤æ–­å’Œè·å–" class="headerlink" title="åˆ¤æ–­å’Œè·å–"></a>åˆ¤æ–­å’Œè·å–</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.5h3q4vah6n40.png" alt="image"></p><p><a href="https://www.bilibili.com/video/BV1sZ4y1H7gV?p=276&spm_id_from=pageDriver">ï¼ˆé€ƒ P276ï¼‰</a></p><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><p><code>delete()</code>ï¼šåˆ é™¤ç”±æ­¤æŠ½è±¡è·¯å¾„åæ‰€è¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•</p><p>å¦‚æœè¦åˆ é™¤çš„ç›®å½•é‡Œ<strong>æœ‰å†…å®¹</strong>ï¼Œè¯¥ç›®å½•æ˜¯<strong>ä¸èƒ½ç›´æ¥åˆ é™¤</strong>çš„</p><h4 id="ä¾‹ï¼šé€’å½’éå†ç›®å½•"><a href="#ä¾‹ï¼šé€’å½’éå†ç›®å½•" class="headerlink" title="ä¾‹ï¼šé€’å½’éå†ç›®å½•"></a>ä¾‹ï¼šé€’å½’éå†ç›®å½•</h4><p>è·å–<code>E:\\Aster</code>ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶è¾“å‡ºå®ƒä»¬çš„ç»å¯¹è·¯å¾„ï¼ˆç›®å½•é‡Œå¯èƒ½æœ‰å¤šçº§ç›®å½•ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        File src = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;E:\\Aster&quot;</span>);<br>        getAllFile(src);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getAllFile</span><span class="hljs-params">(File srcFile)</span> </span>&#123;<br>        File[] files = srcFile.listFiles(); <span class="hljs-comment">// è·å–å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶</span><br>        <span class="hljs-keyword">if</span> (files != <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// å¢å¼ºforçš„å¥å£®æ€§æ£€æŸ¥ï¼Œå»ºè®®åŠ ä¸Š</span><br>            <span class="hljs-keyword">for</span> (File file : files) &#123;<br>                <span class="hljs-keyword">if</span> (file.isDirectory()) &#123; <span class="hljs-comment">// å¦‚æœæ˜¯å­ç›®å½•</span><br>                    getAllFile(file);<br>                &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// å¦åˆ™ï¼Œæ˜¯æ–‡ä»¶ï¼Œè¾“å‡ºç»å¯¹è·¯å¾„</span><br>                    System.out.println(file.getAbsolutePath());<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å­—èŠ‚æµ"><a href="#å­—èŠ‚æµ" class="headerlink" title="å­—èŠ‚æµ"></a>å­—èŠ‚æµ</h3><p><code>Input/OutputStream</code>ï¼šæŠ½è±¡ç±»ï¼Œæ‰€æœ‰å­—èŠ‚è¾“å…¥/è¾“å‡ºæµçš„è¶…ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        FileOutputStream fos = <span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">&quot;test.txt&quot;</span>);<br>        fos.write(<span class="hljs-number">97</span>); <span class="hljs-comment">// æ³¨æ„å•¦ï¼è¿™é‡Œçš„97æ˜¯å­—èŠ‚ç ï¼Œå³å®é™…ä¸Šå†™å…¥äº†å­—ç¬¦a</span><br>        fos.close(); <span class="hljs-comment">// ä¸€å®šè¦å…³é—­ï¼</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å†™æ•°æ®"><a href="#å†™æ•°æ®" class="headerlink" title="å†™æ•°æ®"></a>å†™æ•°æ®</h4><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/20210604/image.78edofnpu340.png" alt="image"><br>ï¼ˆæ–¹æ³•ä¸‰ä¸­ï¼Œoffå³ç´¢å¼•ï¼Œä»offå¤„å¼€å§‹å†™ï¼‰</p><p><strong>å°æŠ€å·§ï¼š</strong></p><ol><li>å› ä¸ºæ˜¯å†™å­—èŠ‚ç ï¼Œå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å¯ä»¥ç”¨<code>getBytes()</code>æ–¹æ³•ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">fos.write(<span class="hljs-string">&quot;IzayoiAster&quot;</span>.getBytes());<br></code></pre></td></tr></table></figure></li><li>æ¢è¡Œï¼š<br>ä¸åŒçš„æ“ä½œç³»ç»Ÿå¯¹äºæ¢è¡Œç¬¦çš„è¦æ±‚æ˜¯ä¸åŒçš„ï¼</li></ol><table><thead><tr><th>OS</th><th>æ¢è¡Œç¬¦</th></tr></thead><tbody><tr><td>Windows</td><td>\r\n</td></tr><tr><td>Linux</td><td>\n</td></tr><tr><td>Mac</td><td>\r</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>.write(<span class="hljs-string">&quot;\r\n&quot;</span>.getBytes());<br></code></pre></td></tr></table></figure><ol start="3"><li>è¿½åŠ å†™å…¥<br><code>FileOutputStream(String filename, boolean append)</code><br>å¦‚æœä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>true</strong>ï¼Œé‚£ä¹ˆå°±æ˜¯è¿½åŠ å†™å…¥ï¼Œä»æ–‡ä»¶çš„<strong>æœ«å°¾</strong>å¼€å§‹å†™æ•°æ®<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">FileOutputStream fos = <span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">&quot;test.txt&quot;</span>, <span class="hljs-keyword">true</span>);<br></code></pre></td></tr></table></figure><h4 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h4></li></ol><h2 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h2><h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2><p>å…¶å®å¤šçº¿ç¨‹å’Œç½‘ç»œä¹Ÿå­¦äº†ï¼Œä½†æ˜¯ä¸æ˜¯å¾ˆèƒ½æŠ½ç©ºå†™ï¼ˆ</p><p>å¯’å‡è¡¥ä¸Šå§</p>]]></content>
    
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå­¦ä¹ ç¬”è®°2ï¼ˆæ•°æ®å¯è§†åŒ–ï¼‰</title>
    <link href="/2021/06/02/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%EF%BC%88%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%EF%BC%89/"/>
    <url>/2021/06/02/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%EF%BC%88%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="ç»˜åˆ¶ç®€å•çš„æŠ˜çº¿å›¾"><a href="#ç»˜åˆ¶ç®€å•çš„æŠ˜çº¿å›¾" class="headerlink" title="ç»˜åˆ¶ç®€å•çš„æŠ˜çº¿å›¾"></a>ç»˜åˆ¶ç®€å•çš„æŠ˜çº¿å›¾</h2><h3 id="å®‰è£…Matplotlib"><a href="#å®‰è£…Matplotlib" class="headerlink" title="å®‰è£…Matplotlib"></a>å®‰è£…Matplotlib</h3><p><code>python -m pip install --user matplotlib</code></p><p>ä¸€ä¸ªç®€å•çš„ä¾‹å­</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>squares = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>]<br>fig, ax = plt.subplots()<br>ax.plot(squares)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li><code>subplots()</code>å¯ä»¥åœ¨ä¸€å¼ å›¾ç‰‡ä¸­ç»˜åˆ¶ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰å›¾è¡¨</li><li><code>fig</code>è¡¨ç¤ºæ•´å¼ å›¾ç‰‡</li><li><code>ax</code>è¡¨ç¤ºå›¾ç‰‡ä¸­çš„å„ä¸ªå›¾è¡¨</li><li><code>plot()</code>å°è¯•æ ¹æ®ç»™å®šçš„æ•°æ®ä»¥æœ‰æ„ä¹‰çš„æ–¹å¼ç»˜åˆ¶å›¾è¡¨</li><li><code>plt.show()</code>æ‰“å¼€MatplotlibæŸ¥çœ‹å™¨å¹¶æ˜¾ç¤ºç»˜åˆ¶çš„å›¾è¡¨</li></ul><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/img/image.23nfjpbdhpy8.png" alt="image"></p><p>å‘ç°å¾ˆç®€é™‹ï¼Œåšä¸€ä¸‹ä¿®æ”¹</p><blockquote><p>pyploté»˜è®¤ä¸­æ–‡æ˜¯ä¹±ç ï¼Œæœ‰å¾ˆå¤šç§è§£å†³æ–¹æ¡ˆï¼Œä½†æˆ‘è§‰å¾—æœ€å¥½çš„è¿˜æ˜¯åœ¨ç”¨åˆ°ä¸­æ–‡çš„åœ°æ–¹åè¿½åŠ <code>fontproperties = &#39;Microsoft YaHei&#39;</code><br><a href="https://blog.csdn.net/hoxily/article/details/44240395">æŸ¥è¯¢ä¸­æ–‡å­—ä½“å¯¹åº”çš„è‹±æ–‡åç‚¹æˆ‘</a></p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -!- coding: utf-8 -!-</span><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>squares = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>]<br>fig, ax = plt.subplots()<br><br><span class="hljs-comment"># linewidthå†³å®šçº¿æ¡ç²—ç»†</span><br>ax.plot(squares, linewidth = <span class="hljs-number">3</span>)<br><br><span class="hljs-comment"># è®¾ç½®æ ‡é¢˜åŠåæ ‡è½´æ ‡ç­¾</span><br>ax.set_title(<span class="hljs-string">&quot;å¹³æ–¹æ•°&quot;</span>, fontsize = <span class="hljs-number">24</span>, fontproperties = <span class="hljs-string">&#x27;Microsoft YaHei&#x27;</span>)<br>ax.set_xlabel(<span class="hljs-string">&quot;å€¼&quot;</span>, fontsize = <span class="hljs-number">14</span>, fontproperties = <span class="hljs-string">&#x27;Microsoft YaHei&#x27;</span>)<br>ax.set_ylabel(<span class="hljs-string">&quot;å€¼çš„å¹³æ–¹&quot;</span>, fontsize = <span class="hljs-number">14</span>, fontproperties = <span class="hljs-string">&#x27;Microsoft YaHei&#x27;</span>)<br><br><span class="hljs-comment"># è®¾ç½®åˆ»åº¦æ ‡è®°çš„å¤§å°ï¼ˆaxis = &#x27;both&#x27;ï¼šåŒæ—¶æ›´æ”¹æ‰€æœ‰åæ ‡è½´ï¼‰</span><br>ax.tick_params(axis = <span class="hljs-string">&#x27;both&#x27;</span>, labelsize = <span class="hljs-number">14</span>)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/img/image.6up2pl7vi340.png" alt="image"></p><p>å‘ç°ï¼Œpyplotçš„è‡ªåŠ¨ç”Ÿæˆæ•°æ®å¥½åƒä¸æ˜¯å¾ˆèªæ˜ï¼Œæ²¡æœ‰æ­£ç¡®åœ°ç»˜åˆ¶æ•°æ®â€”â€”æŠ˜çº¿å›¾ç»ˆç‚¹æŒ‡å‡º4çš„å¹³æ–¹æ˜¯25æ˜¾ç„¶æ˜¯ä¸å¯¹çš„ï¼Œä¸‹é¢æ¥ä¿®å¤</p><p>å‘pyplotæä¾›æ•°æ®çš„æ—¶å€™ï¼Œå®ƒä¼šå‡è®¾ x ä» 0 å¼€å§‹ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œæ˜¾ç„¶æ˜¯ä» 1 å¼€å§‹ã€‚éœ€è¦å‘pyplot<strong>åŒæ—¶æä¾›è¾“å…¥å€¼å’Œè¾“å‡ºå€¼</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">...<br>input_values = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>] <span class="hljs-comment"># x</span><br>squares = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>] <span class="hljs-comment"># y</span><br>...<br>ax.plot(input_values, squares, linewidth = <span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><p>æ­£å¸¸å•¦ï¼<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/img/image.6jkthl0rnus0.png" alt="image"></p><h3 id="ä½¿ç”¨å†…ç½®æ ·å¼"><a href="#ä½¿ç”¨å†…ç½®æ ·å¼" class="headerlink" title="ä½¿ç”¨å†…ç½®æ ·å¼"></a>ä½¿ç”¨å†…ç½®æ ·å¼</h3><p>æŸ¥çœ‹æœ‰ä»€ä¹ˆå†…ç½®æ ·å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-meta">&gt;&gt;&gt; </span>plt.style.available<br>[<span class="hljs-string">&#x27;Solarize_Light2&#x27;</span>, <span class="hljs-string">&#x27;_classic_test_patch&#x27;</span>, <span class="hljs-string">&#x27;bmh&#x27;</span>, <span class="hljs-string">&#x27;classic&#x27;</span>, <span class="hljs-string">&#x27;dark_background&#x27;</span>, <span class="hljs-string">&#x27;fast&#x27;</span>, <span class="hljs-string">&#x27;fivethirtyeight&#x27;</span>, <span class="hljs-string">&#x27;ggplot&#x27;</span>, <span class="hljs-string">&#x27;grayscale&#x27;</span>, <span class="hljs-string">&#x27;seaborn&#x27;</span>, <span class="hljs-string">&#x27;seaborn-bright&#x27;</span>, <span class="hljs-string">&#x27;seaborn-colorblind&#x27;</span>, <span class="hljs-string">&#x27;seaborn-dark&#x27;</span>, <span class="hljs-string">&#x27;seaborn-dark-palette&#x27;</span>, <span class="hljs-string">&#x27;seaborn-darkgrid&#x27;</span>, <span class="hljs-string">&#x27;seaborn-deep&#x27;</span>, <span class="hljs-string">&#x27;seaborn-muted&#x27;</span>, <span class="hljs-string">&#x27;seaborn-notebook&#x27;</span>, <span class="hljs-string">&#x27;seaborn-paper&#x27;</span>, <span class="hljs-string">&#x27;seaborn-pastel&#x27;</span>, <span class="hljs-string">&#x27;seaborn-poster&#x27;</span>, <span class="hljs-string">&#x27;seaborn-talk&#x27;</span>, <span class="hljs-string">&#x27;seaborn-ticks&#x27;</span>, <span class="hljs-string">&#x27;seaborn-white&#x27;</span>, <span class="hljs-string">&#x27;seaborn-whitegrid&#x27;</span>, <span class="hljs-string">&#x27;tableau-colorblind10&#x27;</span>]<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ ·å¼ï¼š<br>åœ¨<strong>ç”Ÿæˆå›¾è¡¨</strong>çš„ä»£ç å‰æ·»åŠ ï¼š<br><code>plt.style.use(&#39;seaborn-dark-palette&#39;)</code></p><h3 id="scatter-æ•£ç‚¹å›¾"><a href="#scatter-æ•£ç‚¹å›¾" class="headerlink" title="scatter( ) æ•£ç‚¹å›¾"></a>scatter( ) æ•£ç‚¹å›¾</h3><ol><li>å‘æ–¹æ³•<code>scatter()</code>ä¼ é€’ä¸€å¯¹xyåæ ‡ï¼Œå®ƒå°†åœ¨(x, y)ç»˜åˆ¶ä¸€ä¸ªç‚¹<br><code>ax.scatter(x, y)</code></li><li>å‘æ–¹æ³•<code>scatter()</code>ä¼ é€’ä¸¤ä¸ª<strong>åˆ†åˆ«</strong>åŒ…å«<strong>xå€¼</strong>å’Œ<strong>yå€¼</strong>çš„åˆ—è¡¨ï¼Œå¯ä»¥ç»˜åˆ¶ä¸€ç³»åˆ—çš„ç‚¹</li></ol><p>ï¼ˆé‡Œé¢å‡ºç°äº†æ–°ä¸œè¥¿<code>ax.axis()è®¾å®šåæ ‡è½´èŒƒå›´</code>ï¼‰</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -!- coding: utf-8 -!-</span><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>x_values = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1001</span>) <span class="hljs-comment"># scatteræ˜¯å¯ä»¥ç›´æ¥æ¥æ”¶rangeçš„å“¦~</span><br>y_values = [x ** <span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> x_values] <span class="hljs-comment"># å¾ªç¯ç”Ÿæˆyå€¼</span><br><br>plt.style.use(<span class="hljs-string">&#x27;seaborn&#x27;</span>)<br>fig, ax = plt.subplots()<br>ax.scatter(x_values, y_values, s = <span class="hljs-number">10</span>) <span class="hljs-comment"># s è®¾ç½®æ•£ç‚¹çš„å°ºå¯¸</span><br><br><span class="hljs-comment"># è®¾ç½®æ ‡é¢˜åŠåæ ‡è½´æ ‡ç­¾</span><br>ax.set_title(<span class="hljs-string">&quot;å¹³æ–¹æ•°&quot;</span>, fontsize = <span class="hljs-number">24</span>, fontproperties = <span class="hljs-string">&#x27;Microsoft YaHei&#x27;</span>)<br>ax.set_xlabel(<span class="hljs-string">&quot;å€¼&quot;</span>, fontsize = <span class="hljs-number">14</span>, fontproperties = <span class="hljs-string">&#x27;Microsoft YaHei&#x27;</span>)<br>ax.set_ylabel(<span class="hljs-string">&quot;å€¼çš„å¹³æ–¹&quot;</span>, fontsize = <span class="hljs-number">14</span>, fontproperties = <span class="hljs-string">&#x27;Microsoft YaHei&#x27;</span>)<br><br><span class="hljs-comment"># è®¾ç½®åˆ»åº¦æ ‡è®°çš„å¤§å°ï¼ˆaxis = &#x27;both&#x27;ï¼šåŒæ—¶æ›´æ”¹æ‰€æœ‰åæ ‡è½´ï¼‰</span><br>ax.tick_params(axis = <span class="hljs-string">&#x27;both&#x27;</span>, labelsize = <span class="hljs-number">14</span>)<br><br><span class="hljs-comment"># è®¾å®šå„ä¸ªåæ ‡è½´çš„å–å€¼èŒƒå›´</span><br>ax.axis([<span class="hljs-number">0</span>, <span class="hljs-number">1100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1100000</span>])<br><br>plt.show()<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/img/image.5dr3veuab1s0.png" alt="image"></p><h3 id="è®¾ç½®é¢œè‰²"><a href="#è®¾ç½®é¢œè‰²" class="headerlink" title="è®¾ç½®é¢œè‰²"></a>è®¾ç½®é¢œè‰²</h3><p>å‘scatter()ä¼ é€’å‚æ•°cä»¥è®¾ç½®é¢œè‰²<br>å¯ä»¥æ˜¯é¢œè‰²çš„åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯RGBé¢œè‰²</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">ax.scatter(x_values, y_values, c = <span class="hljs-string">&#x27;red&#x27;</span>, s = <span class="hljs-number">10</span>)<br>ax.scatter(x_values, y_values, c = (<span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0</span>), s = <span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>é¢œè‰²æ˜ å°„</strong>ï¼ˆcolormapï¼‰ï¼Œè®©scatter()æŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ¸å˜é¢œè‰²</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">ax.scatter(x_values, y_values, c = y_values, cmap = plt.cm.Blues, s = <span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/img/image.lhjrr83c28w.png" alt="image"></p><h3 id="è‡ªåŠ¨ä¿å­˜å›¾è¡¨"><a href="#è‡ªåŠ¨ä¿å­˜å›¾è¡¨" class="headerlink" title="è‡ªåŠ¨ä¿å­˜å›¾è¡¨"></a>è‡ªåŠ¨ä¿å­˜å›¾è¡¨</h3><p>å°†è°ƒç”¨<code>plt.show()</code>æ›¿æ¢ä¸º<code>plt.savefig()</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">plt.savefig(<span class="hljs-string">&#x27;test.png&#x27;</span>, bbox_inches = <span class="hljs-string">&#x27;tight&#x27;</span>)<br></code></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€ä¸ªå®å‚æŒ‡å®šæ–‡ä»¶å</li><li>ç¬¬äºŒä¸ªå®å‚ä¼šå°†å›¾è¡¨<strong>å¤šä½™çš„ç©ºç™½åŒºåŸŸ</strong>è£å‰ªæ‰ï¼ˆå¦‚æœä¸æƒ³è£å‰ªï¼Œä¸åŠ ç¬¬äºŒä¸ªå‚æ•°å³å¯ï¼‰</li></ul><h3 id="è°ƒæ•´å°ºå¯¸ä»¥é€‚åˆå±å¹•"><a href="#è°ƒæ•´å°ºå¯¸ä»¥é€‚åˆå±å¹•" class="headerlink" title="è°ƒæ•´å°ºå¯¸ä»¥é€‚åˆå±å¹•"></a>è°ƒæ•´å°ºå¯¸ä»¥é€‚åˆå±å¹•</h3><p>åˆ›å»ºå›¾è¡¨æ—¶ï¼Œå¯ä»¥ä¼ é€’å‚æ•°<strong>figsize</strong>ä»¥æŒ‡å®šç”Ÿæˆçš„å›¾å½¢çš„å°ºå¯¸ï¼Œéœ€è¦ç»™å‚æ•°figsizeæŒ‡å®šä¸€ä¸ª<strong>å…ƒç»„</strong>ï¼Œå‘Šè¯‰Matplotlibç»˜å›¾çª—å£çš„å°ºå¯¸ï¼Œå•ä½ä¸ºè‹±å¯¸ï¼ˆinchï¼‰ï¼ˆ 1 inch  â‰ˆ 2.54 cm ï¼‰<br>å¦‚æœçŸ¥é“å½“å‰ç³»ç»Ÿçš„åˆ†è¾¨ç‡ï¼Œè¿˜å¯ä»¥ä¼ é€’å‚æ•°<strong>dpi</strong> (dots per inchï¼Œå›¾åƒæ¯è‹±å¯¸é•¿åº¦å†…çš„åƒç´ ç‚¹æ•°) ä»¥æœ‰æ•ˆåˆ©ç”¨å±å¹•ç©ºé—´</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">fig, ax = plt.subplots(figsize = (<span class="hljs-number">10</span>, <span class="hljs-number">6</span>), dpi = <span class="hljs-number">128</span>)<br></code></pre></td></tr></table></figure><blockquote><p>ï¼ˆæœ‰ä¸€ä¸ªåº”ç”¨å®ä¾‹è§P284ï¼Œçœ‹äº†ä¸€éæ„Ÿè§‰å†å†™è¿›æ¥çš„æ„ä¹‰ä¸æ˜¯å¾ˆå¤§ï¼Œä¸Šé¢å·²ç»æŠŠä¸€äº›å®ä¾‹é‡Œçš„æ–°ä¸œè¥¿å†™è¿›æ¥äº†ï¼‰</p></blockquote><blockquote><p>è¿˜æœ‰ä¸€ä¸ªPythonåŒ…Ploylyï¼Œæˆ‘æ„Ÿè§‰å¤§åŒå°å¼‚ï¼Œä¹Ÿå°±ä¸å†™äº†ï¼Œè§P292</p></blockquote><h2 id="CSV"><a href="#CSV" class="headerlink" title="CSV"></a>CSV</h2><h3 id="åˆ†æCSVæ–‡ä»¶å¤´"><a href="#åˆ†æCSVæ–‡ä»¶å¤´" class="headerlink" title="åˆ†æCSVæ–‡ä»¶å¤´"></a>åˆ†æCSVæ–‡ä»¶å¤´</h3><blockquote><p>CSVï¼šä»¥é€—å·åˆ†éš”çš„å€¼ï¼Œcomma-separated values</p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> csv<br><br>filename = <span class="hljs-string">&#x27;...&#x27;</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename) <span class="hljs-keyword">as</span> f:<br>    reader = csv.reader(f)<br>    header_row = <span class="hljs-built_in">next</span>(reader)<br>    print(header_row)<br></code></pre></td></tr></table></figure><ul><li>è°ƒç”¨<code>csv.reader(f)</code>ï¼Œä¼šè¿”å›ä¸€ä¸ªå…³è”åˆ°æ–‡ä»¶fçš„CSVé˜…è¯»å™¨å¯¹è±¡ï¼Œå°†è¿™ä¸ªé˜…è¯»å™¨å¯¹è±¡èµ‹ç»™reader</li><li>csvæ¨¡å—ä¸­ï¼ŒåŒ…å«å‡½æ•°<code>next()</code>ï¼Œä½¿ç”¨<code>next(reader)</code>ï¼Œä¼šè¿”å›csvé˜…è¯»å™¨readerçš„<strong>ä¸‹ä¸€è¡Œ</strong>ï¼›ï¼ˆä¸Šé¢çš„ä»£ç ä¸­ï¼Œåªè°ƒç”¨äº†<code>next()</code>ä¸€æ¬¡ï¼Œæ‰€ä»¥å¾—åˆ°çš„æ˜¯æ–‡ä»¶çš„ç¬¬ä¸€è¡Œï¼Œå…¶ä¸­åŒ…å«æ–‡ä»¶å¤´ï¼‰</li></ul><p>ä¸Šè¿°ä»£ç ä¸­çš„<code>print(header_row)</code>è¾“å‡ºå¦‚ä¸‹ï¼š<br><code>[&#39;NAME&#39;, &#39;ADDRESS&#39;, &#39;AGE&#39;, &#39;BIRTHDAY&#39;...]</code><br>ä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºè¿™ä¸¤å¥ï¼Œæ¥è·å–æ¯ä¸ªå…ƒç´ çš„ç´¢å¼•åŠå…¶å€¼ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">for</span> index, column_header <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(header_row):<br>    print(index, column_header)<br></code></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-number">0</span> NAME<br><span class="hljs-number">1</span> <span class="hljs-keyword">ADDRESS</span><br><span class="hljs-keyword">2 </span>AGE<br><span class="hljs-number">3</span> <span class="hljs-keyword">BIRTHDAY</span><br><span class="hljs-keyword">...</span><br></code></pre></td></tr></table></figure><p>â†‘ åœ¨ä¸Šè¿°forå¾ªç¯ä¸­ï¼Œå¯¹åˆ—è¡¨è°ƒç”¨äº†<code>enumerate()</code>æ¥è·å–æ¯ä¸ªå…ƒç´ çš„<strong>ç´¢å¼•</strong>åŠå…¶<strong>å€¼</strong></p><h3 id="æå–å¹¶è¯»å–æ•°æ®"><a href="#æå–å¹¶è¯»å–æ•°æ®" class="headerlink" title="æå–å¹¶è¯»å–æ•°æ®"></a>æå–å¹¶è¯»å–æ•°æ®</h3><p>ä»¥è¯»å–å¹´é¾„ä¸ºä¾‹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> csv<br><br>filename = <span class="hljs-string">&#x27;...&#x27;</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename) <span class="hljs-keyword">as</span> f:<br>    reader = csv.reader(f)<br>    header_row = <span class="hljs-built_in">next</span>(reader)<br>    <br>    ages = [] <span class="hljs-comment"># åˆ›å»ºåä¸ºagesçš„ç©ºåˆ—è¡¨</span><br>    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> reader: <span class="hljs-comment"># éå†csvæ–‡ä»¶ä¸­ä½™ä¸‹çš„æ¯ä¸€è¡Œ</span><br>        age = <span class="hljs-built_in">int</span>(row[<span class="hljs-number">2</span>]) <span class="hljs-comment"># ç”±ä¸Šé¢çš„åˆ†æcsvæ–‡ä»¶å¤´å¯çŸ¥ï¼Œå¹´é¾„æ˜¯ç¬¬ä¸‰åˆ—</span><br>        ages.append(age)<br></code></pre></td></tr></table></figure><h3 id="ç»˜åˆ¶å›¾è¡¨"><a href="#ç»˜åˆ¶å›¾è¡¨" class="headerlink" title="ç»˜åˆ¶å›¾è¡¨"></a>ç»˜åˆ¶å›¾è¡¨</h3><h4 id="datetimeæ¨¡å—"><a href="#datetimeæ¨¡å—" class="headerlink" title="datetimeæ¨¡å—"></a>datetimeæ¨¡å—</h4><p>æ¯”å¦‚è¯´ï¼Œè¦è·å–csvé‡Œæ¯ä¸ªäººçš„ç”Ÿæ—¥<br>å…¶ä¸­æ˜¯è¿™ä¹ˆå­˜å‚¨çš„ï¼š<br><code>&quot;Lotus&quot;, &quot;Shenzhen&quot;, &quot;17&quot;, &quot;2002-9-16&quot;, ...</code><br>æˆ‘ä»¬éœ€è¦æƒ³åŠæ³•ï¼ŒæŠŠâ€2002-9-16â€è½¬æ¢ä¸ºä¸€ä¸ª<strong>è¡¨ç¤ºç›¸åº”æ—¥æœŸçš„å¯¹è±¡</strong><br>å¯ä»¥ä½¿ç”¨æ¨¡å—datetimeä¸­çš„<code>strptime()</code>æ–¹æ³•ï¼Œå°†<strong>åŒ…å«æ‰€éœ€æ—¥æœŸçš„å­—ç¬¦ä¸²</strong>ä½œä¸ºç¬¬ä¸€ä¸ªå®å‚ï¼Œç¬¬äºŒä¸ªå®å‚ç”¨æ¥å‘Šè¯‰Python<strong>å¦‚ä½•è®¾ç½®æ—¥æœŸçš„æ ¼å¼</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> strptime<br>birthday = datetime.strptime(<span class="hljs-string">&quot;2002-9-16&quot;</span>, <span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œ</p><ul><li><code>%Y-</code>è®©pythonå°†å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ª<code>-</code>å‰é¢çš„éƒ¨åˆ†è§†ä¸ºå››ä½çš„å¹´ä»½</li><li><code>%m-</code>è®©pythonå°†å­—ç¬¦ä¸²ä¸­çš„ç¬¬äºŒä¸ª<code>-</code>å‰é¢çš„éƒ¨åˆ†è§†ä¸ºè¡¨ç¤ºæœˆä»½çš„æ•°</li><li><code>%d</code>è®©pythonå°†å­—ç¬¦ä¸²ä¸­çš„æœ€åä¸€éƒ¨åˆ†è§†ä¸ºæœˆä»½ä¸­çš„ä¸€å¤©<br>ï¼ˆç±»æ¯”C++ä¸­çš„æ ¼å¼æ§åˆ¶ç¬¦ï¼‰</li></ul><p>ä¸€äº›å¸¸ç”¨å®å‚å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å®å‚</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>%A</td><td>æ˜ŸæœŸå‡ ï¼Œå¦‚Monday</td></tr><tr><td>%B</td><td>æœˆä»½åï¼Œå¦‚September</td></tr><tr><td>%m</td><td>ç”¨æ•°è¡¨ç¤ºçš„æœˆä»½ï¼Œ01~12</td></tr><tr><td>%d</td><td>ç”¨æ•°è¡¨ç¤ºçš„æœˆä¸­æŸå¤©ï¼Œ01~31</td></tr><tr><td>%Y</td><td>å››ä½æ•°å¹´ä»½</td></tr><tr><td>%y</td><td>å¹´ä»½åä¸¤ä½</td></tr><tr><td>%H</td><td>24å°æ—¶åˆ¶çš„å°æ—¶æ•°ï¼Œ00~23</td></tr><tr><td>%I</td><td>12å°æ—¶åˆ¶çš„å°æ—¶æ•°ï¼Œ01~12</td></tr><tr><td>%p</td><td>amæˆ–pm</td></tr><tr><td>%M</td><td>åˆ†é’Ÿæ•°ï¼Œ00~59</td></tr><tr><td>%S</td><td>ç§’æ•°ï¼Œ 00~61</td></tr><tr><td><del>ï¼ˆæ²¡é”™ï¼Œå°±æ˜¯åˆ°61ç§’ï¼‰</del></td><td></td></tr></tbody></table><blockquote><p>p.s. <code>strftime()</code>æ˜¯è½¬æ¢ä¸ºç‰¹å®šæ ¼å¼è¾“å‡ºï¼Œè€Œ<code>strptime()</code>æ˜¯å°†ä¸€ä¸ªï¼ˆæ—¶é—´ï¼‰å­—ç¬¦ä¸²è§£æä¸ºæ—¶é—´çš„ä¸€ä¸ªç±»å‹å¯¹è±¡</p></blockquote><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼šç»Ÿè®¡æ–‡ä»¶ä¸­ï¼Œäººä»¬çš„å‡ºç”Ÿæ—¥æœŸï¼Œå¹¶ä¸”ç»˜åˆ¶å‡ºç”Ÿæ—¥æœŸå’Œå¹´é¾„çš„æŠ˜çº¿å›¾ <strong>ï¼ˆæ²¡é”™ï¼Œæˆ‘éƒ½æ„Ÿè§‰è¿™ä¸ªä¾‹å­å¤ªâˆšâ‘§å¥‡æ€ªäº†ï¼›è¿˜ä¸æ˜¯å› ä¸ºæˆ‘æƒ³å’Œä¹¦ä¸Šæœ‰ç‚¹åŒºåˆ«å´åˆæƒ³äº†ä¸ªè¿™ä¹ˆä¸åˆé€‚çš„æƒ…æ™¯555ï¼‰</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> strptime<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>filename = <span class="hljs-string">&#x27;...&#x27;</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename) <span class="hljs-keyword">as</span> f:<br>    reader = csv.reader(f)<br>    header_row = <span class="hljs-built_in">next</span>(reader) <span class="hljs-comment"># å…ˆè¯»æ‰æ–‡ä»¶å¤´å†è¯´</span><br><br>    birthdays, ages = [], []<br>    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> reader:<br>        <span class="hljs-comment"># ä¸Šæ–‡é‡Œå‡è®¾äº†ç”Ÿæ—¥æ˜¯ç¬¬å››åˆ—ï¼Œå¹´é¾„æ˜¯ç¬¬ä¸‰åˆ—</span><br>        current_date = datetime.strptime(row[<span class="hljs-number">3</span>], <span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)<br>        age = <span class="hljs-built_in">int</span>(row[<span class="hljs-number">2</span>])<br>        birthdays.append(current_date)<br>        ages.append(age)<br><br>fig, ax = plt.subplots()<br>ax.plot(birthdays, ages) <span class="hljs-comment"># æ•°æ®å¯¼å…¥å›¾è¡¨</span><br><br>ax.set_title(<span class="hljs-string">&quot;æ„ä¹‰ä¸æ˜çš„ç”Ÿæ—¥å¹´é¾„è¡¨&quot;</span>)<br><br>ax.set_xlabel(<span class="hljs-string">&#x27;&#x27;</span>, fontsize = <span class="hljs-number">16</span>)<br>fig.autofmt_xdate() <span class="hljs-comment">#è§ä¸‹</span><br><span class="hljs-meta">... </span><br><span class="hljs-meta">... </span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­<code>fig.autofmt_xdate()</code>æ˜¯ä½¿ç»˜åˆ¶çš„æ—¥æœŸæ ‡ç­¾<strong>å€¾æ–œ</strong>ï¼Œä»¥é¿å…å…¶é‡å </p><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><p><code>fill_between()</code>æ¥å—<strong>ä¸€ä¸ª</strong>xå€¼ç³»åˆ—å’Œ<strong>ä¸¤ä¸ª</strong>yå€¼ç³»åˆ—ï¼Œå¹¶<strong>å¡«å……</strong>ä¸¤ä¸ªyå€¼ç³»åˆ—ä¹‹é—´çš„ç©ºé—´</p><ul><li>facecolorå®å‚ç”¨äºæŒ‡å®šé¢œè‰²</li><li>alphaå®å‚ç”¨äºè®¾ç½®é€æ˜åº¦ï¼ˆ0~1ï¼‰ï¼Œ1ä¸ºå®Œå…¨ä¸é€æ˜<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">ax.fill_between(dates, highs, lows, fac3color = <span class="hljs-string">&#x27;blue&#x27;</span>, alpha = <span class="hljs-number">0.1</span>)<br></code></pre></td></tr></table></figure><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2>p.s. è‹¥å¾—åˆ°çš„jsonæ‚ä¹±æ— ç« å—ï¼Œå¯ä»¥ç”¨pythonæ ¼å¼åŒ–ä¸€ä¸‹<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">...<br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(new_readable_file, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    json.dump(origin_data, f, indent=<span class="hljs-number">4</span>) <span class="hljs-comment"># indent=4ï¼Œç¼©è¿›4</span><br></code></pre></td></tr></table></figure><blockquote><p>è§†æƒ…å†µå†å†™ï¼ŒP314</p></blockquote></li></ul><h2 id="ä½¿ç”¨API"><a href="#ä½¿ç”¨API" class="headerlink" title="ä½¿ç”¨API"></a>ä½¿ç”¨API</h2><blockquote><p>APIï¼šApplication Programming Interfaceï¼Œåº”ç”¨ç¨‹åºæ¥å£</p></blockquote><h3 id="å®‰è£…Requests"><a href="#å®‰è£…Requests" class="headerlink" title="å®‰è£…Requests"></a>å®‰è£…Requests</h3><p><code>python -m pip install --user requests</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-comment"># è¿™ä¸ªAPIè¿”å›GitHubå½“å‰æ‰˜ç®¡äº†å¤šå°‘ä¸ªPythoné¡¹ç›®ï¼Œä»¥åŠæœ‰å…³æœ€å—æ¬¢è¿çš„Pythoné¡¹ç›®çš„ä¿¡æ¯</span><br>url = <span class="hljs-string">&#x27;https://api.github.com/search/repositories?q=language:python&amp;sort=stars&#x27;</span><br><br><span class="hljs-comment"># æ˜¾å¼åœ°è°ƒç”¨ç¬¬ä¸‰ç‰ˆçš„GitHub API</span><br>headers = &#123;<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/vnd.github.v3+json&#x27;</span>&#125;<br><span class="hljs-comment"># å°†å“åº”å¯¹è±¡èµ‹ç»™å˜é‡r</span><br>r = requests.get(url, headers=headers)<br><br><span class="hljs-comment"># çŠ¶æ€ç 200æ„å‘³æˆåŠŸ</span><br>print(<span class="hljs-string">f&quot;Status cpde: <span class="hljs-subst">&#123;r.status_code&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># è¿™ä¸ªAPIè¿”å›jsonæ ¼å¼çš„ä¿¡æ¯ï¼Œå› æ­¤ç”¨json()æ–¹æ³•å°†ä¿¡æ¯è½¬æ¢ä¸ºä¸€ä¸ªPythonå­—å…¸</span><br>response_dict = r.json()<br><br>print(response_dict.keys())<br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">Status cpde: <span class="hljs-number">200</span><br><span class="hljs-function"><span class="hljs-title">dict_keys</span><span class="hljs-params">([<span class="hljs-string">&#x27;total_count&#x27;</span>, <span class="hljs-string">&#x27;incomplete_results&#x27;</span>, <span class="hljs-string">&#x27;items&#x27;</span>])</span></span><br></code></pre></td></tr></table></figure><h3 id="å¤„ç†å“åº”å­—å…¸"><a href="#å¤„ç†å“åº”å­—å…¸" class="headerlink" title="å¤„ç†å“åº”å­—å…¸"></a>å¤„ç†å“åº”å­—å…¸</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> requests<br><br>url = <span class="hljs-string">&#x27;https://api.github.com/search/repositories?q=language:python&amp;sort=stars&#x27;</span><br>headers = &#123;<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/vnd.github.v3+json&#x27;</span>&#125;<br>r = requests.get(url, headers=headers)<br>print(<span class="hljs-string">f&quot;Status cpde: <span class="hljs-subst">&#123;r.status_code&#125;</span>&quot;</span>)<br><br>response_dict = r.json()<br><span class="hljs-comment"># æ‰“å°total_countï¼šGitHubä¸€å…±æœ‰å¤šå°‘ä¸ªpythonä»“åº“</span><br>print(<span class="hljs-string">f&quot;Total repositories: <span class="hljs-subst">&#123;response_dict[<span class="hljs-string">&#x27;total_count&#x27;</span>]&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># ä¸&#x27;items&#x27;å…³è”çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­æœ‰å¾ˆå¤šå­—å…¸ï¼Œè€Œæ¯ä¸ªå­—å…¸åˆåŒ…å«ä¸€ä¸ªæœ‰å…³pythonä»“åº“çš„ä¿¡æ¯ã€‚æ‰“å°repo_dictsä»¥è·æ‚‰è·å¾—äº†å¤šå°‘ä¸ªä»“åº“çš„ä¿¡æ¯</span><br>repo_dicts = response_dict[<span class="hljs-string">&#x27;items&#x27;</span>]<br>print(<span class="hljs-string">f&quot;Respositories returned: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(repo_dicts)&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># æå–ç¬¬ä¸€ä¸ªå­—å…¸çœ‹ä¸€çœ‹</span><br><span class="hljs-comment">######################################</span><br>repo_dict = repo_dicts[<span class="hljs-number">0</span>]<br>print(<span class="hljs-string">f&quot;\nKeys: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(repo_dict)&#125;</span>&quot;</span>)<br><span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> <span class="hljs-built_in">sorted</span>(repo_dict.keys()):<br>    print(key)<br><span class="hljs-comment">######################################</span><br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">Status cpde: 200<br>Total repositories: 7353231<br>Respositories returned: 30 <br><br>Keys: 74<br>archive_url<br>archived<br>...<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸€ä¸‹ä¸Šè¿°ç¨‹åº#####ä¹‹é—´çš„ç¨‹åºæ®µï¼Œä»¥ä¾¿èƒ½æå–å‡ºæˆ‘ä»¬æƒ³è¦çš„æœ‰å…³ç¬¬ä¸€ä¸ªå­—å…¸ï¼ˆç¬¬ä¸€ä¸ªä»“åº“ï¼‰çš„ç›¸å…³ä¿¡æ¯ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py">...<br><span class="hljs-comment">########################################################</span><br>repo_dict = repo_dicts[<span class="hljs-number">0</span>]<br>print(<span class="hljs-string">&quot;\nSelected information about first repositoryï¼š&quot;</span>)<br>print(<span class="hljs-string">f&quot;Name: <span class="hljs-subst">&#123;repo_dict[<span class="hljs-string">&#x27;name&#x27;</span>]&#125;</span>&quot;</span>)<br>print(<span class="hljs-string">f&quot;Owner: <span class="hljs-subst">&#123;repo_dict[<span class="hljs-string">&#x27;owner&#x27;</span>][<span class="hljs-string">&#x27;login&#x27;</span>]&#125;</span>&quot;</span>)<br>print(<span class="hljs-string">f&quot;Stars: <span class="hljs-subst">&#123;repo_dict[<span class="hljs-string">&#x27;stargazers_count&#x27;</span>]&#125;</span>&quot;</span>)<br>print(<span class="hljs-string">f&quot;Repository: <span class="hljs-subst">&#123;repo_dict[<span class="hljs-string">&#x27;html_url&#x27;</span>]&#125;</span>&quot;</span>)<br><span class="hljs-comment">########################################################</span><br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs txt">Status cpde: 200<br>Total repositories: 7278320<br>Respositories returned: 30<br><br>Selected information about first repositoryï¼š<br>Name: system-design-primer<br>Owner: donnemartin<br>Stars: 133664<br>Repository: https://github.com/donnemartin/system-design-primer<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨Plotlyå¯è§†åŒ–ä»“åº“"><a href="#ä½¿ç”¨Plotlyå¯è§†åŒ–ä»“åº“" class="headerlink" title="ä½¿ç”¨Plotlyå¯è§†åŒ–ä»“åº“"></a>ä½¿ç”¨Plotlyå¯è§†åŒ–ä»“åº“</h3><p>ï¼ˆå¥½å§ï¼Œå…¶å®ä¹‹å‰æ²¡å†™Plotlyä¹Ÿæœ‰ä¸€éƒ¨åˆ†æ˜¯å› ä¸ºåæ­£å†™åˆ°è¿™å„¿ä¹Ÿè¦å†™ï¼‰</p><h4 id="å®‰è£…Plotly"><a href="#å®‰è£…Plotly" class="headerlink" title="å®‰è£…Plotly"></a>å®‰è£…Plotly</h4><p><code>python -m pip install --user plotly</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -!- coding: utf-8 -!-</span><br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> plotly.graph_objs <span class="hljs-keyword">import</span> Bar<br><span class="hljs-keyword">from</span> plotly <span class="hljs-keyword">import</span> offline<br><br>url = <span class="hljs-string">&#x27;https://api.github.com/search/repositories?q=language:python&amp;sort=stars&#x27;</span><br>headers = &#123;<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/vnd.github.v3+json&#x27;</span>&#125;<br>r = requests.get(url, headers=headers)<br>print(<span class="hljs-string">f&quot;Status code: <span class="hljs-subst">&#123;r.status_code&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># å¤„ç†ç»“æœ</span><br>response_dict = r.json()<br>repo_dicts = response_dict[<span class="hljs-string">&#x27;items&#x27;</span>]<br><span class="hljs-comment">################## NEW ##################</span><br>repo_names, stars = [], []<br><span class="hljs-keyword">for</span> repo_dict <span class="hljs-keyword">in</span> repo_dicts:<br>    repo_names.append(repo_dict[<span class="hljs-string">&#x27;name&#x27;</span>])<br>    stars.append(repo_dict[<span class="hljs-string">&#x27;stargazers_count&#x27;</span>])<br><br><span class="hljs-comment"># å¯è§†åŒ–</span><br>data = [&#123; <span class="hljs-comment"># åˆ—è¡¨dataåŒ…å«ä¸€ä¸ªå­—å…¸ï¼ŒæŒ‡å®šå›¾è¡¨çš„ç±»å‹å¹¶æä¾›xyå€¼</span><br>    <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>,<br>    <span class="hljs-string">&#x27;x&#x27;</span>: repo_names,<br>    <span class="hljs-string">&#x27;y&#x27;</span>: stars,<br>&#125;]<br>my_layout = &#123; <span class="hljs-comment"># ä½¿ç”¨å­—å…¸å®šä¹‰å›¾è¡¨çš„å¸ƒå±€</span><br>    <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;GitHubä¸Šæœ€å—æ¬¢è¿çš„Pythoné¡¹ç›®&#x27;</span>,<br>    <span class="hljs-string">&#x27;xaxis&#x27;</span>: &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Repository&#x27;</span>&#125;,<br>    <span class="hljs-string">&#x27;yaxis&#x27;</span>: &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Stars&#x27;</span>&#125;,<br>&#125;<br><br>fig = &#123;<br>    <span class="hljs-string">&#x27;data&#x27;</span>: data,<br>    <span class="hljs-string">&#x27;layout&#x27;</span>: my_layout,<br>&#125;<br>offline.plot(fig, filename=<span class="hljs-string">&#x27;python_repos.html&#x27;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/img/image.59w9u8awfcg0.png" alt="image"></p><h4 id="æ”¹è¿›Plotlyå›¾è¡¨"><a href="#æ”¹è¿›Plotlyå›¾è¡¨" class="headerlink" title="æ”¹è¿›Plotlyå›¾è¡¨"></a>æ”¹è¿›Plotlyå›¾è¡¨</h4><p>å¯ä»¥åœ¨ <strong>data</strong> å’Œ <strong>my_layout</strong> ä¸­ï¼Œä»¥<strong>é”®å€¼å¯¹</strong>çš„å½¢å¼æŒ‡å®šå„ç§æ ·å¼</p><ol><li>é€šè¿‡ä¿®æ”¹dataï¼Œå¯ä»¥å®šåˆ¶æ¡å½¢<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py">data = [&#123;<br>    <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>,<br>    <span class="hljs-string">&#x27;x&#x27;</span>: repo_names,<br>    <span class="hljs-string">&#x27;y&#x27;</span>: stars,<br>    <span class="hljs-string">&#x27;marker&#x27;</span>: &#123;<br>        <span class="hljs-comment"># æ¡å½¢é¢œè‰²</span><br>        <span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;rgb(60, 100, 150)&#x27;</span>,<br>        <span class="hljs-comment"># æ¡å½¢è¾¹æ¡†</span><br>        <span class="hljs-string">&#x27;line&#x27;</span>: &#123;<span class="hljs-string">&#x27;width&#x27;</span>: <span class="hljs-number">1.5</span>, <span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;rgb(25, 25, 25)&#x27;</span>&#125;<br>    &#125;,<br>    <span class="hljs-comment"># æ¡å½¢ä¸é€æ˜åº¦</span><br>    <span class="hljs-string">&#x27;opacity&#x27;</span>: <span class="hljs-number">0.6</span>,<br>&#125;]<br></code></pre></td></tr></table></figure></li><li>ä¿®æ”¹my_layoutæ›´æ”¹å…¶ä»–å¸ƒå±€<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py">my_layout = &#123;<br>    <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;GitHubä¸Šæœ€å—æ¬¢è¿çš„Pythoné¡¹ç›®&#x27;</span>,<br>    <span class="hljs-string">&#x27;xaxis&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Repository&#x27;</span>,<br>        <span class="hljs-string">&#x27;titlefont&#x27;</span>: &#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">24</span>&#125;,<br>        <span class="hljs-string">&#x27;tickfont&#x27;</span>: &#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">14</span>&#125;, <span class="hljs-comment"># åˆ»åº¦æ ‡ç­¾å­—å·</span><br>    &#125;,<br>    <span class="hljs-string">&#x27;yaxis&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Stars&#x27;</span>,<br>        <span class="hljs-string">&#x27;titlefont&#x27;</span>: &#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">24</span>&#125;,<br>        <span class="hljs-string">&#x27;tickfont&#x27;</span>: &#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">14</span>&#125;, <span class="hljs-comment"># åˆ»åº¦æ ‡ç­¾å­—å·</span><br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/img/image.7dz1sa9wzhc0.png" alt="image"></li></ol><h5 id="æ·»åŠ è‡ªå®šä¹‰å·¥å…·æç¤º"><a href="#æ·»åŠ è‡ªå®šä¹‰å·¥å…·æç¤º" class="headerlink" title="æ·»åŠ è‡ªå®šä¹‰å·¥å…·æç¤º"></a>æ·»åŠ è‡ªå®šä¹‰å·¥å…·æç¤º</h5><p>åœ¨Plotlyä¸­ï¼Œå°†é¼ æ ‡æŒ‡å‘æ¡å½¢å°†æ˜¾ç¤ºå…¶è¡¨ç¤ºçš„ä¿¡æ¯ï¼Œç§°ä¸º<strong>å·¥å…·æç¤º</strong><br>ä¸‹é¢æ¥åˆ›å»ºå·¥å…·æç¤ºï¼Œä»¥æ˜¾ç¤ºé¡¹ç›®çš„æè¿°å’Œæ‰€æœ‰è€…</p><p>ä¸ºæ­¤ï¼Œéœ€è¦å†æå–ä¸€äº›ä¿¡æ¯å¹¶ä¿®æ”¹å¯¹è±¡data</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs py">...<br><span class="hljs-comment"># å¤„ç†ç»“æœ</span><br>response_dict = r.json()<br>repo_dicts = response_dict[<span class="hljs-string">&#x27;items&#x27;</span>]<br>repo_names, stars, labels = [], [], [] <span class="hljs-comment">#### NEW ####</span><br><span class="hljs-keyword">for</span> repo_dict <span class="hljs-keyword">in</span> repo_dicts:<br>    repo_names.append(repo_dict[<span class="hljs-string">&#x27;name&#x27;</span>])<br>    stars.append(repo_dict[<span class="hljs-string">&#x27;stargazers_count&#x27;</span>])<br><br>    <span class="hljs-comment">#### NEW ####</span><br>    owner = repo_dict[<span class="hljs-string">&#x27;owner&#x27;</span>][<span class="hljs-string">&#x27;login&#x27;</span>]<br>    description = repo_dict[<span class="hljs-string">&#x27;description&#x27;</span>]<br>    label = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;owner&#125;</span>&lt;br /&gt;<span class="hljs-subst">&#123;description&#125;</span>&quot;</span><br>    labels.append(label)<br><br><span class="hljs-comment"># å¯è§†åŒ–</span><br>data = [&#123;<br>    <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>,<br>    <span class="hljs-string">&#x27;x&#x27;</span>: repo_names,<br>    <span class="hljs-string">&#x27;y&#x27;</span>: stars,<br>    <span class="hljs-string">&#x27;hovertext&#x27;</span>: labels, <span class="hljs-comment">#### NEW ####</span><br>    <span class="hljs-string">&#x27;marker&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;rgb(60, 100, 150)&#x27;</span>,<br>        <span class="hljs-string">&#x27;line&#x27;</span>: &#123;<span class="hljs-string">&#x27;width&#x27;</span>: <span class="hljs-number">1.5</span>, <span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;rgb(25, 25, 25)&#x27;</span>&#125;<br>    &#125;,<br>    <span class="hljs-string">&#x27;opacity&#x27;</span>: <span class="hljs-number">0.6</span>,<br>&#125;]<br>my_layout = &#123;<br>...<br></code></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªç©ºåˆ—è¡¨labelsï¼Œç”¨äºå­˜å‚¨è¦ç»™å„ä¸ªé¡¹ç›®ï¼ˆå„ä¸ªæ¡å½¢ï¼‰æ˜¾ç¤ºçš„æ–‡æœ¬<br>Plotlyå…è®¸åœ¨æ–‡æœ¬å…ƒç´ ä¸­ä½¿ç”¨<strong>HTMLä»£ç </strong>ï¼ˆæ³¨æ„è§„èŒƒçš„æ¢è¡Œç¬¦ br å’Œ / é—´æœ‰ç©ºæ ¼ï¼‰</p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/IzayoiAster/-@master/img/image.11xbfy3ywfhs.png" alt="image"></p><h5 id="æ·»åŠ å¯å•å‡»çš„é“¾æ¥"><a href="#æ·»åŠ å¯å•å‡»çš„é“¾æ¥" class="headerlink" title="æ·»åŠ å¯å•å‡»çš„é“¾æ¥"></a>æ·»åŠ å¯å•å‡»çš„é“¾æ¥</h5><p>ä¸‹é¢æ¥å®ç°ç‚¹å‡»xè½´å¯¹åº”çš„é¡¹ç›®åæ¥è·³è½¬è‡³ç›¸åº”çš„GitHubä¸»é¡µ</p><p>ä¸Šæ–‡ä¸­ï¼Œxè½´å¯¹åº”çš„å€¼çš„åˆ—è¡¨æ˜¯<code>repo_names</code>ï¼Œæˆ‘ä»¬å…ˆæ”¹åä¸º<code>repo_links</code>ä½¿ç¨‹åºæ›´ä¸ºæ¸…æ™°<br>ä¿®æ”¹å¤„ç†ç»“æœçš„éƒ¨åˆ†ç¨‹åºï¼Œå¹¶å°†dataä¸­xçš„æ•°æ®æºæ¢ä¸º<code>repo_links</code></p><p><strong>æœ€ç»ˆå®Œæ•´ç¨‹åº</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -!- coding: utf-8 -!-</span><br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> plotly.graph_objs <span class="hljs-keyword">import</span> Bar<br><span class="hljs-keyword">from</span> plotly <span class="hljs-keyword">import</span> offline<br><br>url = <span class="hljs-string">&#x27;https://api.github.com/search/repositories?q=language:python&amp;sort=stars&#x27;</span><br>headers = &#123;<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/vnd.github.v3+json&#x27;</span>&#125;<br>r = requests.get(url, headers=headers)<br>print(<span class="hljs-string">f&quot;Status cpde: <span class="hljs-subst">&#123;r.status_code&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># å¤„ç†ç»“æœ</span><br>response_dict = r.json()<br>repo_dicts = response_dict[<span class="hljs-string">&#x27;items&#x27;</span>]<br>repo_links, stars, labels = [], [], [] <br><span class="hljs-keyword">for</span> repo_dict <span class="hljs-keyword">in</span> repo_dicts:<br>    repo_name = repo_dict[<span class="hljs-string">&#x27;name&#x27;</span>]<br>    repo_url = repo_dict[<span class="hljs-string">&#x27;html_url&#x27;</span>]<br>    repo_link = <span class="hljs-string">f&quot;&lt;a href=&#x27;<span class="hljs-subst">&#123;repo_url&#125;</span>&#x27;&gt;<span class="hljs-subst">&#123;repo_name&#125;</span>&lt;/a&gt;&quot;</span><br>    repo_links.append(repo_link)<br><br>    stars.append(repo_dict[<span class="hljs-string">&#x27;stargazers_count&#x27;</span>])<br><br>    owner = repo_dict[<span class="hljs-string">&#x27;owner&#x27;</span>][<span class="hljs-string">&#x27;login&#x27;</span>]<br>    description = repo_dict[<span class="hljs-string">&#x27;description&#x27;</span>]<br>    label = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;owner&#125;</span>&lt;br /&gt;<span class="hljs-subst">&#123;description&#125;</span>&quot;</span><br>    labels.append(label)<br><br><span class="hljs-comment"># å¯è§†åŒ–</span><br>data = [&#123;<br>    <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>,<br>    <span class="hljs-string">&#x27;x&#x27;</span>: repo_links,<br>    <span class="hljs-string">&#x27;y&#x27;</span>: stars,<br>    <span class="hljs-string">&#x27;hovertext&#x27;</span>: labels, <br>    <span class="hljs-string">&#x27;marker&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;rgb(60, 100, 150)&#x27;</span>,<br>        <span class="hljs-string">&#x27;line&#x27;</span>: &#123;<span class="hljs-string">&#x27;width&#x27;</span>: <span class="hljs-number">1.5</span>, <span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;rgb(25, 25, 25)&#x27;</span>&#125;<br>    &#125;,<br>    <span class="hljs-string">&#x27;opacity&#x27;</span>: <span class="hljs-number">0.6</span>,<br>&#125;]<br>my_layout = &#123;<br>    <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;GitHubä¸Šæœ€å—æ¬¢è¿çš„Pythoné¡¹ç›®&#x27;</span>,<br>    <span class="hljs-string">&#x27;xaxis&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Repository&#x27;</span>,<br>        <span class="hljs-string">&#x27;titlefont&#x27;</span>: &#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">24</span>&#125;,<br>        <span class="hljs-string">&#x27;tickfont&#x27;</span>: &#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">14</span>&#125;,<br>    &#125;,<br>    <span class="hljs-string">&#x27;yaxis&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Stars&#x27;</span>,<br>        <span class="hljs-string">&#x27;titlefont&#x27;</span>: &#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">24</span>&#125;,<br>        <span class="hljs-string">&#x27;tickfont&#x27;</span>: &#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">14</span>&#125;, <br>    &#125;,<br>&#125;<br><br>fig = &#123;<br>    <span class="hljs-string">&#x27;data&#x27;</span>: data,<br>    <span class="hljs-string">&#x27;layout&#x27;</span>: my_layout,<br>&#125;<br>offline.plot(fig, filename=<span class="hljs-string">&#x27;python_repos.html&#x27;</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå­¦ä¹ ç¬”è®°1</title>
    <link href="/2021/06/01/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/"/>
    <url>/2021/06/01/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</url>
    
    <content type="html"><![CDATA[<h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-built_in">str</span>.title() <span class="hljs-comment">#é¦–å­—æ¯å¤§å†™</span><br><span class="hljs-built_in">str</span>.upper() <span class="hljs-comment">#å¤§å†™</span><br><span class="hljs-built_in">str</span>.lower() <span class="hljs-comment">#å°å†™</span><br><br> <span class="hljs-comment">#få­—ç¬¦ä¸²(&quot;format&quot;)ï¼Œå­—ç¬¦ä¸²å‰åŠ fï¼Œå°†è¦æ’å…¥å‘å˜é‡æ”¾åˆ°&#123;&#125;é‡Œ ï¼ˆ3.6ä¹‹åï¼‰</span><br> first_name = <span class="hljs-string">&quot;aster&quot;</span><br> last_name = <span class="hljs-string">&quot;izayoi&quot;</span><br> print(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;first_name.title()&#125;</span><span class="hljs-subst">&#123;last_name.title()&#125;</span>&quot;</span>) <span class="hljs-comment">#IzayoiAster</span><br><br> <span class="hljs-comment">#åˆ é™¤ç©ºæ ¼ ï¼ˆstripï¼šå‰¥å»ï¼Œé™¤å»ï¼‰</span><br> <span class="hljs-comment">#lstripå·¦ç©ºæ ¼ rstripå³ stripä¸¤ä¾§</span><br> <span class="hljs-comment">#ä¸æ”¹å˜åŸå˜é‡ï¼Œè‹¥éœ€è¦æ”¹å˜éœ€è¦ç»™åŸå˜é‡èµ‹å€¼</span><br> name = <span class="hljs-string">&quot;IzayoiAster   &quot;</span><br> print(name.strip()) <span class="hljs-comment">#IzayoiAster</span><br> print(name) <span class="hljs-comment">#IzayoiAster___</span><br></code></pre></td></tr></table></figure><h3 id="æ•°"><a href="#æ•°" class="headerlink" title="æ•°"></a>æ•°</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-number">3</span> ** <span class="hljs-number">2</span> <span class="hljs-comment">#ä¹˜æ–¹ï¼Œ9</span><br><br><span class="hljs-comment">#ç»“æœåŒ…å«çš„å°æ•°ä½å¯èƒ½æ˜¯ä¸ç¡®å®šçš„</span><br><span class="hljs-comment">#å°†ä»»æ„ä¸¤ä¸ªæ•°ç›¸é™¤æ—¶ï¼Œç»“æœæ€»æ˜¯æµ®ç‚¹æ•°ï¼Œå³ä½¿éƒ½æ˜¯æ•´æ•°ä¸”èƒ½æ•´é™¤</span><br><br><span class="hljs-comment">#å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿å°†æ•°å­—åˆ†ç»„</span><br>age = <span class="hljs-number">114_514_1919_810</span><br>print(age) <span class="hljs-comment">#1145141919810</span><br><br><span class="hljs-comment">#åŒæ—¶ç»™xyzèµ‹å€¼</span><br>x, y, z = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">eg = [<span class="hljs-string">&#x27;eg1&#x27;</span>, <span class="hljs-string">&#x27;eg2&#x27;</span>, <span class="hljs-string">&#x27;eg3&#x27;</span>]<br>eg[-<span class="hljs-number">1</span>] <span class="hljs-comment">#&#x27;eg3&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="åˆ—è¡¨åŠ å‡"><a href="#åˆ—è¡¨åŠ å‡" class="headerlink" title="åˆ—è¡¨åŠ å‡"></a>åˆ—è¡¨åŠ å‡</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py">eg.append(<span class="hljs-string">&#x27;eg4&#x27;</span>) <span class="hljs-comment">#[&#x27;eg1&#x27;, &#x27;eg2&#x27;, &#x27;eg3&#x27;, &#x27;eg4&#x27;]</span><br><span class="hljs-keyword">del</span> eg[<span class="hljs-number">1</span>] <span class="hljs-comment">#[&#x27;eg1&#x27;, &#x27;eg3&#x27;, &#x27;eg4&#x27;]</span><br>eg.insert(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;eg2&#x27;</span>) <span class="hljs-comment">#[&#x27;eg1&#x27;, &#x27;eg2&#x27;, &#x27;eg3&#x27;, &#x27;eg4&#x27;] (æ’å…¥åˆ°ç¬¬1ä½ï¼ŒåŸæ¥çš„1åŠå³è¾¹çš„ï¼Œå³ç§»1)</span><br><br><span class="hljs-comment">#å¯¹æ¯”delï¼Œpop(id)å¯ä»¥åœ¨åˆ é™¤æ—¶è·å–å€¼ï¼Œè‹¥ä¸åŠ å‚æ•°åˆ™ä¸ºpopæœ«å°¾å…ƒç´ </span><br>poped_eg = eg.pop() <span class="hljs-comment">#[&#x27;eg1&#x27;, &#x27;eg2&#x27;, &#x27;eg3&#x27;]</span><br><br><span class="hljs-comment">#remove: æ ¹æ®å€¼åˆ é™¤</span><br>eg.remove(<span class="hljs-string">&#x27;eg3&#x27;</span>) <span class="hljs-comment">#[&#x27;eg1&#x27;, &#x27;eg2&#x27;]</span><br><span class="hljs-comment">#æ³¨æ„ï¼šremoveåªåˆ é™¤ ç¬¬ä¸€ä¸ª å€¼ï¼Œå¦‚æœå‡ºç°å¯¹æ­¤ï¼Œéœ€è¦å¾ªç¯remove</span><br></code></pre></td></tr></table></figure><h4 id="ç»„ç»‡åˆ—è¡¨"><a href="#ç»„ç»‡åˆ—è¡¨" class="headerlink" title="ç»„ç»‡åˆ—è¡¨"></a>ç»„ç»‡åˆ—è¡¨</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">eg.sort() <span class="hljs-comment">#æ°¸ä¹…æ’åº</span><br>eg.<span class="hljs-built_in">sorted</span>() <span class="hljs-comment">#ä¸´æ—¶ï¼ˆegæœ¬èº«ä¸å˜ï¼‰</span><br>eg.reverse() <span class="hljs-comment">#æ°¸ä¹…å€’åº</span><br><br><span class="hljs-built_in">len</span>(eg) <span class="hljs-comment">#é•¿åº¦</span><br></code></pre></td></tr></table></figure><h4 id="åˆ›å»ºæ•°å€¼åˆ—è¡¨"><a href="#åˆ›å»ºæ•°å€¼åˆ—è¡¨" class="headerlink" title="åˆ›å»ºæ•°å€¼åˆ—è¡¨"></a>åˆ›å»ºæ•°å€¼åˆ—è¡¨</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>): <br><span class="hljs-comment">#range(a, b): [a, b)å†…çš„æ•´æ•°</span><br><br><span class="hljs-comment">#æ³¨æ„ï¼šrangeæ²¡æœ‰reverseæˆå‘˜å‡½æ•°ï¼Œå¯ä»¥ç”¨list()å…ˆè½¬ä¸ºåˆ—è¡¨</span><br><br>even_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-number">11</span>, <span class="hljs-number">2</span>)) <span class="hljs-comment">#ç¬¬ä¸‰ä¸ª2 æ„ä¸º æ­¥é•¿ä¸º2</span><br>even_nums.reverse()<br>print(even_nums) <span class="hljs-comment">#[10, 8, 6, 4, 2]</span><br><br><span class="hljs-comment">#å½“ç„¶ï¼Œä¸Šé¢çš„ç­‰ä»·äºè¿™ä¸ª</span><br>even_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">2</span>))<br>print(even_nums) <span class="hljs-comment">#[10, 8, 6, 4, 2]</span><br><br><span class="hljs-comment">#åˆ—è¡¨ç»Ÿè®¡</span><br><span class="hljs-built_in">min</span>(nums), <span class="hljs-built_in">max</span>(nums), <span class="hljs-built_in">sum</span>(nums)<br><br><span class="hljs-comment">#åˆ—è¡¨è§£æ</span><br>square = [value ** <span class="hljs-number">2</span> <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>)]<br><span class="hljs-comment">#[è¡¨è¾¾å¼ ä¸ºè¡¨è¾¾å¼æä¾›å€¼çš„å¾ªç¯]</span><br></code></pre></td></tr></table></figure><h4 id="ä½¿ç”¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†"><a href="#ä½¿ç”¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†" class="headerlink" title="ä½¿ç”¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†"></a>ä½¿ç”¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#åˆ‡ç‰‡</span><br>eg = [<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;4&#x27;</span>, <span class="hljs-string">&#x27;5&#x27;</span>]<br>eg[<span class="hljs-number">1</span> : <span class="hljs-number">3</span>] <span class="hljs-comment">#[&#x27;1&#x27;, &#x27;2&#x27;]ï¼Œç»å…¸å·¦å¼€å³é—­</span><br>eg[ : <span class="hljs-number">3</span>] <span class="hljs-comment">#[&#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;]ï¼Œä»å¤´å¼€å§‹</span><br>eg[<span class="hljs-number">3</span> : ] <span class="hljs-comment">#[&#x27;3&#x27;, &#x27;4&#x27;, &#x27;5&#x27;]ï¼Œç›´åˆ°æœ€å</span><br>ed[-<span class="hljs-number">3</span> : ] <span class="hljs-comment">#[&#x27;3&#x27;, &#x27;4&#x27;, &#x27;5&#x27;] </span><br><span class="hljs-comment">#åˆ‡ç‰‡å¯æ”¾åœ¨foré‡Œ</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> eg[<span class="hljs-number">3</span> : ]:<br></code></pre></td></tr></table></figure><h5 id="èµ‹å€¼åˆ—è¡¨"><a href="#èµ‹å€¼åˆ—è¡¨" class="headerlink" title="èµ‹å€¼åˆ—è¡¨"></a>èµ‹å€¼åˆ—è¡¨</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">eg1 = [......]<br>eg2 = eg1[:] <span class="hljs-comment">#eg2ç”±eg1å¤åˆ¶è€Œæ¥ï¼Œä¿®æ”¹eg1æ—¶ï¼Œeg2ä¸å˜</span><br><br><span class="hljs-comment">#æ³¨æ„åŒºåˆ† â†“</span><br>eg2 = eg1 <span class="hljs-comment">#å¯ä»¥ç†è§£æˆï¼šeg2æ˜¯æŒ‡å‘eg1çš„ä¸€ä¸ªâ€œæŒ‡é’ˆâ€ï¼Œä¿®æ”¹eg1æ—¶ï¼Œeg2ä¹Ÿæ”¹å˜</span><br></code></pre></td></tr></table></figure><h4 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h4><p>ç†è§£ä¸ºä¸å¯å˜çš„åˆ—è¡¨å³å¯</p><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">and</span>, <span class="hljs-keyword">or</span><br><br><span class="hljs-keyword">if</span> value <span class="hljs-keyword">in</span> nums:<br>    ... ...<br><span class="hljs-keyword">if</span> value <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> nums:<br>    ... ...<br><br><span class="hljs-keyword">if</span> - <span class="hljs-keyword">elif</span> - <span class="hljs-keyword">else</span><br>ä¸å¼ºåˆ¶æœ‰<span class="hljs-keyword">else</span>è¯­å¥<br><br><span class="hljs-comment">#æ£€æŸ¥ç©ºåˆ—è¡¨</span><br>nums = [...]<br><span class="hljs-keyword">if</span> nums:<br>    ......<br><span class="hljs-keyword">else</span>:<br>    print(<span class="hljs-string">&quot;åˆ—è¡¨ä¸ºç©ºï¼&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h3><p>ç±»æ¯”C++çš„<code>map</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py">my_empty_dict = &#123;&#125; <span class="hljs-comment">#ç©ºå­—å…¸</span><br>my_dict = &#123;<span class="hljs-string">&#x27;key1&#x27;</span>:<span class="hljs-string">&#x27;value1&#x27;</span>, <span class="hljs-string">&#x27;key2&#x27;</span>:<span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br>print(my_dict) <span class="hljs-comment">#&#123;&#x27;key1&#x27;: &#x27;value1&#x27;, &#x27;key2&#x27;: &#x27;value2&#x27;&#125;</span><br><br><span class="hljs-comment">#æ·»åŠ é”®å€¼å¯¹</span><br>my_dict[<span class="hljs-string">&#x27;key3&#x27;</span>] = <span class="hljs-string">&#x27;value3&#x27;</span><br>print(my_dict) <span class="hljs-comment">#&#123;&#x27;key1&#x27;: &#x27;value1&#x27;, &#x27;key2&#x27;: &#x27;value2&#x27;, &#x27;key3&#x27;: &#x27;value3&#x27;&#125;</span><br><span class="hljs-comment">#py3.7ä¸­ï¼Œå…ƒç´ çš„æ’åˆ—é¡ºåºä¸å®šä¹‰æ—¶ç›¸åŒ</span><br><br><span class="hljs-keyword">del</span> my_dict[<span class="hljs-string">&#x27;key3&#x27;</span>]<br><br>å¦‚æœä½¿ç”¨äº† my_dict[<span class="hljs-string">&#x27;key4&#x27;</span>] ä¼šæŠ¥é”™ï¼Œæœ‰éœ€è¦çš„è¯å¯ä»¥ç”¨ my_dict.get(<span class="hljs-string">&#x27;key4&#x27;</span>)<br>ä¼šè¿”å› No value assigned.<br>æ‰€ä»¥å¦‚æœæŒ‡å®šçš„keyæœ‰å¯èƒ½ä¸å­˜åœ¨ï¼Œåº”ç”¨getè€Œä¸æ˜¯[]<br></code></pre></td></tr></table></figure><h4 id="éå†å­—å…¸"><a href="#éå†å­—å…¸" class="headerlink" title="éå†å­—å…¸"></a>éå†å­—å…¸</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#éå†é”®</span><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> my_dict.items():<br><span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> my_dict.keys(): <span class="hljs-comment">#æ˜¾å¼</span><br><span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> my_dict: <span class="hljs-comment">#éšå¼</span><br><span class="hljs-comment">#æŒ‰åºéå†é”®</span><br><span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> <span class="hljs-built_in">sorted</span>(my_dict.keys()):<br><br><span class="hljs-comment">#éå†å€¼ï¼ˆæœ‰é‡å¤ï¼‰</span><br><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> my_dict.values():<br><span class="hljs-comment">#éå†å€¼ï¼ˆå»é‡ï¼ï¼‰</span><br><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> my_dict.<span class="hljs-built_in">set</span>():<br></code></pre></td></tr></table></figure><p>åˆ—è¡¨å’Œå­—å…¸å¯ä»¥äº’ç›¸åµŒå¥—</p><h3 id="input"><a href="#input" class="headerlink" title="input"></a>input</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">name = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Input your name: &quot;</span>)<br>age = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Input your age: &quot;</span>))<br></code></pre></td></tr></table></figure><h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><p>æ‡‚å¾—éƒ½æ‡‚ï¼š<code>True, False, continue, break</code><br>ä¾‹ï¼šåœ¨åˆ—è¡¨é—´ç§»åŠ¨å…ƒç´ </p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">check</span>(<span class="hljs-params">data</span>):</span><br>    ...<br><br>unchecked_datas = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>checked_datas = []<br><br><span class="hljs-keyword">while</span> unchecked_datas:<br>    cur_data = unchecked_datas.pop()<br>    chekc(cur_data)<br>    check_data.append(cur_data)<br></code></pre></td></tr></table></figure><p>ä¸Šæ–‡è¯´è¿‡çš„ ç”¨removeåˆ é™¤å…¨éƒ¨é‡å¤å…ƒç´ ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">while</span> target <span class="hljs-keyword">in</span> list_:<br>    list_.remove(target)<br></code></pre></td></tr></table></figure><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#å…³é”®å­—å®å‚ï¼ˆä¸å¿…æœ‰åºï¼‰</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">my_func</span>(<span class="hljs-params">para2, para1</span>):</span><br>    ...<br><br>my_func(para1 = <span class="hljs-string">&#x27;para1&#x27;</span>, para2 = <span class="hljs-string">&#x27;para2&#x27;</span>)<br></code></pre></td></tr></table></figure><p>ç»“åˆä¸Šæ–‡å¯çŸ¥ï¼Œä¼ å‚ä¸ºlistæ—¶ï¼Œ<code>fun(list)</code>å’Œ<code>fun(list[:])</code>ä¸åŒï¼ˆç•¥ï¼‰</p><h4 id="ä¼ é€’ä»»æ„æ•°é‡çš„å®å‚"><a href="#ä¼ é€’ä»»æ„æ•°é‡çš„å®å‚" class="headerlink" title="ä¼ é€’ä»»æ„æ•°é‡çš„å®å‚"></a>ä¼ é€’ä»»æ„æ•°é‡çš„å®å‚</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># case 1</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printNums</span>(<span class="hljs-params">*nums</span>):</span> <span class="hljs-comment">#åˆ›å»ºäº†ä¸€ä¸ªåä¸ºnumsçš„å…ƒç»„</span><br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>        ...<br><br>printNums(<span class="hljs-number">1</span>)<br>printNums(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br><br><span class="hljs-comment"># case 2</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buildProfile</span>(<span class="hljs-params">first, last, **profile</span>):</span> <span class="hljs-comment">#åä¸ºprofileçš„å­—å…¸</span><br>    profile[<span class="hljs-string">&#x27;first_name&#x27;</span>] = first<br>    profile[<span class="hljs-string">&#x27;second_name&#x27;</span>] = second<br>    <span class="hljs-keyword">return</span> profile<br>    <span class="hljs-comment">#è§£é‡Šä¸€ä¸‹ï¼Œå¿…é¡»æä¾›åå’Œå§“ï¼Œå¦‚æœè¿˜æœ‰é¢å¤–çš„å±æ€§ï¼Œåˆ™ä¹Ÿå­˜è¿›å­—å…¸profileä¸­ï¼Œæœ€åä¸€å¹¶è¿”å›</span><br><br>user_profile = buildProfile(<span class="hljs-string">&#x27;Aster&#x27;</span>, <span class="hljs-string">&#x27;Izayoi&#x27;</span>, sister:<span class="hljs-string">&#x27;IzayoiLotus&#x27;</span>, age:<span class="hljs-string">&#x27;18&#x27;</span>)<br></code></pre></td></tr></table></figure><h4 id="å°†å‡½æ•°å­˜å‚¨åœ¨æ¨¡å—ä¸­"><a href="#å°†å‡½æ•°å­˜å‚¨åœ¨æ¨¡å—ä¸­" class="headerlink" title="å°†å‡½æ•°å­˜å‚¨åœ¨æ¨¡å—ä¸­"></a>å°†å‡½æ•°å­˜å‚¨åœ¨æ¨¡å—ä¸­</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># ex.py</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myFun</span>():</span><br>    ...<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># main.py</span><br><span class="hljs-keyword">import</span> ex<br><br>ex.myFun()<br></code></pre></td></tr></table></figure><p>ex.pyå³ä¸ºä¸€ä¸ªæ¨¡å—ï¼›ä¹Ÿå¯ä»¥ä»æ¨¡å—ä¸­å¯¼å…¥ç‰¹å®šå‡½æ•°ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> ex <span class="hljs-keyword">import</span> myFun<br><br>myFun()<br></code></pre></td></tr></table></figure><p>å¯ä»¥ç»™æ¨¡å—æˆ–å‡½æ•°èµ·åˆ«åï¼ŒååŠ <code>as &lt;nickname&gt;</code>å³å¯<br><code>from ex import *</code>ï¼šå¯¼å…¥exä¸­çš„æ‰€æœ‰å‡½æ•°ï¼ˆä¸æ¨èï¼‰</p><h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><h4 id="åˆ›å»ºç±»"><a href="#åˆ›å»ºç±»" class="headerlink" title="åˆ›å»ºç±»"></a>åˆ›å»ºç±»</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, age</span>):</span><br>        self.name = name<br>        self.age = age<br></code></pre></td></tr></table></figure><p><code>__init__</code>å³æ„é€ å‡½æ•°ï¼Œselfç±»æ¯”C++ this</p><p>æ„Ÿè§‰OOè¯­è¨€éƒ½å·®ä¸å¤šï¼Œç±»è¿™å—å„¿ä¹Ÿç•¥ç€å†™äº†ï¼ˆé€ƒï¼‰</p><h4 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, age</span>):</span><br>        ...<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span>(<span class="hljs-params">Animal</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, age, <span class="hljs-built_in">type</span></span>):</span><br>        <span class="hljs-comment">#super()æ˜¯å…¶çˆ¶ç±»ï¼Œå¯ä»¥ç†è§£æˆC++çš„ Animal::ï¼ˆï¼Ÿä¸ç¡®å®šï¼‰</span><br>        <span class="hljs-built_in">super</span>().__init__(name, age)<br>        self.<span class="hljs-built_in">type</span> = <span class="hljs-built_in">type</span><br></code></pre></td></tr></table></figure><h5 id="é‡å†™çˆ¶ç±»"><a href="#é‡å†™çˆ¶ç±»" class="headerlink" title="é‡å†™çˆ¶ç±»"></a>é‡å†™çˆ¶ç±»</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span>:</span><br>    ...<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">whatAnimal</span>():</span><br>        print(<span class="hljs-string">&quot;Unknown&quot;</span>)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span>(<span class="hljs-params">Animal</span>):</span><br>    ...<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">whatAnimal</span>():</span> <span class="hljs-comment">#é‡å†™äº†</span><br>        print(<span class="hljs-string">&quot;I&#x27;m a dog!&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="å°†å®ä¾‹ç”¨ä½œå±æ€§"><a href="#å°†å®ä¾‹ç”¨ä½œå±æ€§" class="headerlink" title="å°†å®ä¾‹ç”¨ä½œå±æ€§"></a>å°†å®ä¾‹ç”¨ä½œå±æ€§</h4><blockquote><p>ä½¿ç”¨ä»£ç æ¨¡æ‹Ÿå®ç‰©æ—¶ï¼Œå¯èƒ½ä¼šå‘ç°ç±»çš„ç»†èŠ‚è¶Šæ¥è¶Šå¤š<br>è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°†ç±»çš„ä¸€éƒ¨åˆ†æå–å‡ºæ¥ï¼Œä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç±»</p></blockquote><blockquote><p>ä¾‹å¦‚ï¼Œä¸æ–­ç»™ElectricCarç±»æ·»åŠ ç»†èŠ‚ï¼Œå¯èƒ½å‘ç°å¾ˆå¤šå’Œç”µç“¶æœ‰å…³çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°†è¿™äº›å±æ€§å’Œæ–¹æ³•æå–å‡ºæ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªæ–°çš„åä¸ºBatteryçš„ç±»ä¸­ã€‚<strong>å¹¶å°†ä¸€ä¸ªBatteryå®ä¾‹ä½œä¸ºElectricCarç±»çš„å±æ€§</strong></p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span>:</span><br>    ...<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Battery</span>:</span><br>    ...<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElectricCar</span>(<span class="hljs-params">Car</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, model, year</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__(model, year)<br>        self.battery = Battery() <span class="hljs-comment">#åˆ›å»ºä¸€ä¸ªæ–°çš„Batteryå®ä¾‹ï¼Œå°†å…¶ä½œä¸ºECarç±»çš„å±æ€§</span><br></code></pre></td></tr></table></figure><h4 id="ä»æ¨¡å—ä¸­å¯¼å…¥ç±»"><a href="#ä»æ¨¡å—ä¸­å¯¼å…¥ç±»" class="headerlink" title="ä»æ¨¡å—ä¸­å¯¼å…¥ç±»"></a>ä»æ¨¡å—ä¸­å¯¼å…¥ç±»</h4><p>åŒå‡½æ•°<br>å¯å¯¼å…¥å¤šä¸ªç±»ï¼Œç”¨é€—å·åˆ†éš”</p><h4 id="Pyæ ‡å‡†åº“"><a href="#Pyæ ‡å‡†åº“" class="headerlink" title="Pyæ ‡å‡†åº“"></a>Pyæ ‡å‡†åº“</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#eg</span><br><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randint<br>randint(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>) <span class="hljs-comment">#1ï¼Œ6é—´éšæœºæ•´æ•°</span><br><br><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> choice<br>members = [<span class="hljs-string">&#x27;Aster&#x27;</span>, <span class="hljs-string">&#x27;Lotus&#x27;</span>]<br>lucky_baby = choice(members) <span class="hljs-comment">#choiceä»å…ƒç»„æˆ–åˆ—è¡¨ä¸­éšæœºé€‰å–ä¸€ä¸ªå…ƒç´ </span><br></code></pre></td></tr></table></figure><h3 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h3><p>åªç®¡æ‰“å¼€æ–‡ä»¶å°±å¥½ï¼ŒPythonè‡ªä¼šåœ¨åˆé€‚çš„æ—¶å€™å°†å…¶å…³é—­</p><h4 id="æ–‡ä»¶è¯»å–"><a href="#æ–‡ä»¶è¯»å–" class="headerlink" title="æ–‡ä»¶è¯»å–"></a>æ–‡ä»¶è¯»å–</h4><blockquote><p>æ˜¾ç¤ºæ–‡ä»¶è·¯å¾„æ—¶ï¼ŒWindowsä½¿ç”¨åæ–œæ ( \ )è€Œä¸æ˜¯æ–œæ ( / )ï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­ä¾ç„¶å¯ä»¥ä½¿ç”¨æ–œæ ( / )</p></blockquote><blockquote><p>è¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ï¼ŒPythonå…¨éƒ¨æ˜¯ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚æœè¦è¯»å–æ•°å€¼å¹¶ä½¿ç”¨ï¼Œåº”ä½¿ç”¨ int( ) æˆ– float( )</p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#eg</span><br>file_path = <span class="hljs-string">&#x27;/home/aster/test.txt&#x27;</span><br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path) <span class="hljs-keyword">as</span> file_test:<br>    contents = file_test.read() <span class="hljs-comment">#read()å¯ä»¥è¯»å–æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹</span><br>    print(contents.rstrip())<br><br>    <span class="hljs-comment">#é€è¡Œè¯»å–</span><br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file_test:<br>        print(line.rstrip())<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¸Šé¢ä¸¤ä¸ªprintéƒ½è¦åŠ <code>.rstrip()</code>ï¼šå› ä¸ºæ¯è¡Œæœ«å°¾éƒ½æœ‰éšå«çš„æ¢è¡Œç¬¦ï¼Œå¦‚æœå†åŠ ä¸Šprintçš„è‡ªåŠ¨æ¢è¡Œå°±ä¼šæ¢ä¸¤æ¬¡è¡Œ</p><p>ä½¿ç”¨å…³é”®å­— <strong>with</strong> æ—¶ï¼Œ<code>open()</code>è¿”å›çš„æ–‡ä»¶å¯¹è±¡åªåœ¨withä»£ç å—å†…å¯ç”¨ã€‚å¦‚æœè¦åœ¨ä»£ç å—ä¹‹å¤–è®¿é—®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨withä»£ç å—å†…<strong>å°†æ–‡ä»¶çš„å„è¡Œå­˜å‚¨åœ¨ä¸€ä¸ªåˆ—è¡¨é‡Œ</strong><br><code>.readlines()</code>æ–¹æ³•å¯ä»¥è¯»å–æ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œå¹¶å°†ä»–å¦ˆå‚¨å­˜åœ¨ä¸€ä¸ªåˆ—è¡¨é‡Œ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename) <span class="hljs-keyword">as</span> file_test:<br>    lines = file_test.readlines()<br><br><span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br>    print(line.rstrip()) <span class="hljs-comment">#åœ¨withä»£ç å—ä¹‹å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨å•¦</span><br></code></pre></td></tr></table></figure><p>ä¾‹ï¼šåœ†å‘¨ç‡é‡ŒåŒ…å«ä½ çš„ç”Ÿæ—¥å—ï¼Ÿ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(pi.txt) <span class="hljs-keyword">as</span> pi:<br>    lines = pi.readlines()<br><br><span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br>    pi_string += line.strip() <span class="hljs-comment">#å°†piçš„æ¯ä¸€è¡Œç»„æˆä¸€ä¸²piå­—ç¬¦ä¸²</span><br><br>birthday = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Please input your birthday: &quot;</span>)<br><span class="hljs-keyword">if</span> birthday <span class="hljs-keyword">in</span> pi_string:<br>    print(<span class="hljs-string">&quot;Including!&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="æ–‡ä»¶å†™å…¥"><a href="#æ–‡ä»¶å†™å…¥" class="headerlink" title="æ–‡ä»¶å†™å…¥"></a>æ–‡ä»¶å†™å…¥</h4><p>å†™å…¥ä½¿ç”¨<code>.write()</code></p><h5 id="open-çš„å‚æ•°"><a href="#open-çš„å‚æ•°" class="headerlink" title="open( )çš„å‚æ•°"></a>open( )çš„å‚æ•°</h5><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>ç©º</td><td>é»˜è®¤åªè¯»</td></tr><tr><td>r</td><td>è¯»å–æ¨¡å¼</td></tr><tr><td>w</td><td>å†™å…¥æ¨¡å¼</td></tr><tr><td>a</td><td>é™„åŠ æ¨¡å¼</td></tr><tr><td>r+</td><td>è¯»å†™æ¨¡å¼</td></tr></tbody></table><blockquote><p>  Pythonåªèƒ½å°†å­—ç¬¦ä¸²å†™å…¥æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œå­˜å‚¨æ•°å€¼æ—¶ï¼Œå¿…é¡»å…ˆç”¨ str( ) è½¬ä¸ºå­—ç¬¦ä¸²</p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> file_test:<br>    file_test.write(<span class="hljs-string">&quot;writeä¸ä¼šè‡ªåŠ¨æ¢è¡Œ\n&quot;</span>)<br>    file_test.write(<span class="hljs-string">&quot;æ‰€ä»¥ä¸è¦å¿˜äº†æ‰‹åŠ¨æ·»åŠ æ¢è¡Œç¬¦å“¦\n&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="åˆ†ææ–‡æœ¬"><a href="#åˆ†ææ–‡æœ¬" class="headerlink" title="åˆ†ææ–‡æœ¬"></a>åˆ†ææ–‡æœ¬</h4><p>æ–¹æ³•<code>spilt()</code>ä»¥ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦å°†å­—ç¬¦ä¸²æ‹†åˆ†ï¼Œå¹¶å°†æ‹†å¼€çš„æ¯ä¸€éƒ¨åˆ†å­˜å‚¨åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­</p><h4 id="å­˜å‚¨æ•°æ®"><a href="#å­˜å‚¨æ•°æ®" class="headerlink" title="å­˜å‚¨æ•°æ®"></a>å­˜å‚¨æ•°æ®</h4><p>ä½¿ç”¨äº†JSON (JavaScript Object Notation)</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">json.dump(data_list, target_file)  <span class="hljs-comment"># jsonå­˜å‚¨ï¼Œdump(æ•°æ®åˆ—è¡¨, ç›®æ ‡æ–‡ä»¶)</span><br>json.load(data_list, target_file)  <span class="hljs-comment"># jsonè¯»å–ï¼Œload(ç›®æ ‡æ•°æ®åˆ—è¡¨, è¢«è¯»å–çš„æ–‡ä»¶)</span><br></code></pre></td></tr></table></figure><p>ä¸æ˜¯å¾ˆå¥½è¯´ï¼Œç›´æ¥çœ‹ä¾‹å­å§</p><p>ä¾‹ï¼šç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œåœ¨ç”¨æˆ·é¦–æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œæç¤ºè¾“å…¥è‡ªå·±çš„åå­—ï¼Œå¹¶åœ¨å†æ¬¡è¿è¡Œç¨‹åºçš„æ—¶å€™è®°ä½ä»–</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 1.remember_user.py</span><br><span class="hljs-keyword">import</span> json<br><br>username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;What&#x27;s your name? &quot;</span>)<br><br>filename = <span class="hljs-string">&#x27;username.json&#x27;</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    json.dump(username, f)<br>    print(<span class="hljs-string">f&quot;We&#x27;ll remember you when you come back, <span class="hljs-subst">&#123;username&#125;</span>!&quot;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 2.greet_user.py</span><br><span class="hljs-keyword">import</span> json<br><br>filename = <span class="hljs-string">&#x27;username.json&#x27;</span><br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename) <span class="hljs-keyword">as</span> f:<br>        username = json.load(f)<br><span class="hljs-keyword">except</span> FileNotFoundError: <span class="hljs-comment"># ä»¥å‰å¹¶æœªå­˜å‚¨ç”¨æˆ·å</span><br>    username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;What is your name?&quot;</span>)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>        json.dump(username, f) <br>        print(<span class="hljs-string">f&quot;We&#x27;ll remember you when you come back, <span class="hljs-subst">&#123;username&#125;</span>!&quot;</span>)<br><span class="hljs-keyword">else</span>: <span class="hljs-comment"># è‹¥å­˜å‚¨è¿‡ç”¨æˆ·åï¼Œä¼šåœ¨tryä¸­æ‰“å¼€äº†jsonå¹¶å¯¼å…¥</span><br>    print(<span class="hljs-string">f&quot;Welcome back, <span class="hljs-subst">&#123;username&#125;</span>!&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="ä¸€äº›æŠ¥é”™"><a href="#ä¸€äº›æŠ¥é”™" class="headerlink" title="ä¸€äº›æŠ¥é”™"></a>ä¸€äº›æŠ¥é”™</h3><p>è‹¥æŠ¥é”™<code>SyntaxError: Non-UTF-8 code starting with &#39;\xc8&#39; in file</code>ï¼Œå¯èƒ½æ˜¯å› ä¸ºxxxx.pyæ–‡ä»¶é‡Œé¢æœ‰ä¸­æ–‡å­—ç¬¦<br>è§£å†³æ–¹æ¡ˆï¼šå¼€å¤´åŠ ä¸Š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -!- coding: utf-8 -!-</span><br></code></pre></td></tr></table></figure><p>è‹¥æŠ¥é”™<code>(unicode error) &#39;utf-8&#39; codec can&#39;t decode byte 0xb7 in position xxx</code><br>è§£å†³æ–¹æ¡ˆï¼šæŠŠç¼–è¯‘ç¯å¢ƒçš„ç¼–ç åˆ‡æ¢ä¸ºUTF-8</p><h3 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h3><p>ï¼ˆP174 æœ‰éœ€æ±‚å†çœ‹ï¼‰</p>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hadoopå­¦ä¹ ç¬”è®°2</title>
    <link href="/2021/04/15/Hadoop%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/"/>
    <url>/2021/04/15/Hadoop%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/</url>
    
    <content type="html"><![CDATA[<h4 id="å®¢æˆ·ç«¯ä»£ç å¸¸è§å¥—è·¯"><a href="#å®¢æˆ·ç«¯ä»£ç å¸¸è§å¥—è·¯" class="headerlink" title="å®¢æˆ·ç«¯ä»£ç å¸¸è§å¥—è·¯"></a>å®¢æˆ·ç«¯ä»£ç å¸¸è§å¥—è·¯</h4><p>1.è·å–ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡<br>2.æ‰§è¡Œç›¸å…³çš„æ“ä½œå‘½ä»¤<br>3.å…³é—­èµ„æº<br>eg: HDFS ZooKeeper</p><h4 id="IDEAæŠ€å·§"><a href="#IDEAæŠ€å·§" class="headerlink" title="IDEAæŠ€å·§"></a>IDEAæŠ€å·§</h4><p>æŠ›å¼‚å¸¸ï¼šå…‰æ ‡æ”¾ä¸Šå»å<code>Alt + Enterï¼Œâ†‘â†“</code><br>æç¤ºå‡½æ•°å‚æ•°ï¼š<code>Ctrl + P</code><br>å…¨éƒ¨æ ¼å¼åŒ–ï¼š<code>Ctrl + Alt + L</code><br>å˜é‡å˜ä¸ºå±æ€§ï¼ˆå…¨å±€å˜é‡ï¼‰ï¼š<code>Ctrl + Alt + F</code></p><h3 id="slf4jæŠ¥é”™"><a href="#slf4jæŠ¥é”™" class="headerlink" title="slf4jæŠ¥é”™"></a>slf4jæŠ¥é”™</h3><p>ï¼ˆæœªçŸ¥è§£å†³æ–¹æ¡ˆï¼‰</p>]]></content>
    
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCodeå¿«æ·ç¼–è¯‘</title>
    <link href="/2021/03/21/VSCode%E5%BF%AB%E6%8D%B7%E7%BC%96%E8%AF%91/"/>
    <url>/2021/03/21/VSCode%E5%BF%AB%E6%8D%B7%E7%BC%96%E8%AF%91/</url>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰ç”¨VSCodeçš„æ—¶å€™ï¼Œä¸ºäº†ç¼–è¯‘C++è¿˜é…ç½®äº†åŠå¤©ã€‚ä¸€ä¸ªå¯’å‡è¿‡å»ä¸çŸ¥é“å’‹å›äº‹ï¼Œé…ç½®ä¸å¥½ä½¿äº†ã€‚<br>æ­£æ‰“ç®—å†é…ç½®ä¸€éï¼Œçªç„¶å‘ç°ä¸€ä¸ªæ‡’ç‹—æ’ä»¶â€”â€”<code>Code Runner</code></p><p><a href="https://zhuanlan.zhihu.com/p/54861567">è´´ä¸€ä¸ªåŸåœ°å€</a></p><p><strong>è¿è¡Œï¼š</strong> Ctrl + Alt + N<br><strong>ä¸­æ­¢è¿è¡Œï¼š</strong> Ctrl + Alt + M<br><strong>è§£å†³ä¹±ç  &amp; è¾“å…¥ï¼š</strong><br>é€‰æ‹© æ–‡ä»¶ -&gt; é¦–é€‰é¡¹ -&gt; è®¾ç½®ï¼Œæ‰“å¼€VS Codeè®¾ç½®é¡µé¢ï¼Œæ‰¾åˆ° Run Code configurationï¼Œå‹¾ä¸Š Run In Terminal é€‰é¡¹ã€‚è®¾ç½®ä¹‹åï¼Œä»£ç å°±ä¼šåœ¨ Terminal ä¸­è¿è¡Œäº†ã€‚<br><img src="https://pic4.zhimg.com/80/v2-f893e1b487feee43b5903c9cf2781ffb_720w.jpg"></p>]]></content>
    
    
    
    <tags>
      
      <tag>æŠ€æœ¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•è¯¾ä¸€</title>
    <link href="/2021/03/18/%E7%AE%97%E6%B3%95%E8%AF%BE%E4%B8%80/"/>
    <url>/2021/03/18/%E7%AE%97%E6%B3%95%E8%AF%BE%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<h4 id="é¸½å­æ•°"><a href="#é¸½å­æ•°" class="headerlink" title="é¸½å­æ•°"></a>é¸½å­æ•°</h4><blockquote><p>é¸½å­æ•°ç”±ä»¥ä¸‹è¿‡ç¨‹å®šä¹‰ï¼šä»ä»»ä½•æ­£æ•´æ•°å¼€å§‹ï¼Œå°†æ•°å­—æ›¿æ¢ä¸ºå…¶å„ä¸ªæ•°ä½çš„å¹³æ–¹å’Œï¼Œå¹¶é‡å¤è¯¥è¿‡ç¨‹ï¼Œç›´åˆ°è¯¥æ•°å­—ç­‰äº1ã€‚å¦‚æœä¸èƒ½ï¼Œåˆ™è¿™ä¸ªæ•°å­—ä¸æ˜¯é¸½å­æ•°ã€‚<br>ä¾‹å¦‚7æ˜¯é¸½å­æ•°ï¼Œå› ä¸º7-&gt;49-&gt;97-&gt;130-&gt;10-&gt;1ã€‚ï¼ˆ7<em>7=49,4</em>4+9<em>9=97,9</em>9+7*7=130â€¦.å¦‚æ­¤ç±»æ¨ï¼‰<br>æ˜¾ç„¶1æ˜¯ç¬¬ä¸€ä¸ªé¸½å­æ•°ã€‚<br>æœ‰Qä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®ç»™å‡ºä¸€ä¸ªæ•°kï¼Œä½ éœ€è¦è¾“å‡ºç¬¬kä¸ªé¸½å­æ•°ã€‚<br>Input<br>ç¬¬ä¸€è¡Œä¸€ä¸ªQï¼Œä»£è¡¨è¯¢é—®çš„ä¸ªæ•°ï¼ˆQ&lt;=100000ï¼‰<br>æ¥ä¸‹æ¥Qè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•°å­—kï¼ˆk&lt;150000ï¼‰<br>Output<br>æ¯è¡Œè¾“å‡ºä¸€ä¸ªæ•°ï¼Œä»£è¡¨ç¬¬kä¸ªé¸½å­æ•°</p></blockquote><p>é¦–å…ˆç®—äº†ä¸ª6ï¼Œå‘ç°ä¼šå¾ªç¯ï¼š</p><blockquote><p>6 36 117 51 26 40 16 37 56 61</p></blockquote><p>é¢˜ç›®ä¸­çš„è¿™ä¸ªé¸½å­æ•°å°±æ˜¯è‡ªèº«æ¯ä¸€ä½çš„æ•°å­—å¹³æ–¹ç›¸åŠ ï¼Œä¸€ç›´å¾ªç¯ï¼Œçœ‹çœ‹ä¼šä¸ä¼šç­‰äº1ï¼Œä¸º1çš„å°±æ˜¯é¸½å­æ•°ã€‚å…¶å®åŸºæœ¬çš„æ–¹æ³•å°±æ˜¯ç›´æ¥æ‰“è¡¨ï¼Œç„¶åç›´æ¥æ‰¾ç¬¬kä¸ªé¸½å­æ•°ï¼Œæˆ‘çš„æƒ³æ³•ä¹Ÿå·®ä¸å¤šã€‚<br>kçš„æ•°æ®èŒƒå›´æ˜¯150000ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®©æ•°å­—çš„èŒƒå›´å¼€åˆ°2000000ï¼Œå¯ä»¥è¯´åœ¨1~2000000ï¼ˆæˆ‘æ‰æ²¡æœ‰æ‰“è¡¨è¯æ˜ï¼‰é‡Œä¸€å®šæ‰¾å¾—åˆ°150000ä¸ªé¸½å­æ•°ï¼Œç„¶å1â€”2000000é‡Œæ¯ä¸ªä½æ•°çš„å¹³æ–¹çš„å’Œæœ€å¤§æ˜¯ä¸º487ï¼Œä¹Ÿå°±æ˜¯1999999çš„æ—¶å€™ï¼Œç„¶åæˆ‘ä»¬åªè¦æŠŠ487ä»¥å†…åŒ…æ‹¬487çš„æ‰€æœ‰çš„é¸½å­æ•°éƒ½æ ‡è®°èµ·æ¥å°±è¡Œï¼Œå› ä¸ºæ¯ä¸ªä½æ•°å¹³æ–¹å’Œä¸ç®¡æ€ä¹ˆå¾ªç¯ç›¸åŠ éƒ½ä¸å¯èƒ½è¶…è¿‡487äº†éƒ½æ˜¯åœ¨487ä»¥å†…ï¼Œä¹Ÿå°±æ˜¯è¯´487ä¹‹åçš„æ•°å­—åˆ¤æ–­æ˜¯ä¸æ˜¯é¸½å­æ•°åªéœ€è¦ç®—ä¸€æ¬¡å„ä¸ªä½æ•°çš„å¹³æ–¹å’Œå†æ”¾åˆ°1â€”487é‡Œå»æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†é‚£è¿™ä¸ªæ•°ä¹Ÿæ˜¯é¸½å­æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">int</span> a[<span class="hljs-number">500</span>], b[<span class="hljs-number">500005</span>];<br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">memset</span>(a, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(a));<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">487</span>; i++)&#123; <span class="hljs-comment">//æ‰¾487ä»¥å†…çš„é¸½å­æ•°</span><br>    <span class="hljs-keyword">int</span> n = i, m, l = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">1000</span>; j++)&#123; <span class="hljs-comment">//è¿™ä¸ªæ˜¯å„ä¸ªä½æ•°ä¹‹å’Œï¼Œç„¶åå¾ªç¯</span><br>    m = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(n)&#123;<br>    m += (n % <span class="hljs-number">10</span>) * (n % <span class="hljs-number">10</span>);<br>    n /= <span class="hljs-number">10</span>;<br>    &#125;<br>    n = m;<br>    <span class="hljs-keyword">if</span>(m == <span class="hljs-number">1</span>)&#123; <span class="hljs-comment">//å’Œä¸º1å°±æ ‡è®°æ˜¯é¸½å­æ•°</span><br>    a[i] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">int</span> ans = <span class="hljs-number">1</span>; <span class="hljs-comment">//ç”¨æ¥æ ‡è®°ä¸ºç¬¬å‡ ä¸ª</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">500000</span>; i++)&#123; <span class="hljs-comment">//æ‰¾500000å†…çš„é¸½å­æ•°ï¼Œå°†æ¯ä¸€ä¸ªé¸½å­æ•°æ˜¯ç¬¬å‡ ä¸ªå­˜å¥½</span><br><span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>, z = i;<br><span class="hljs-keyword">while</span>(z)&#123;<br>sum += (z % <span class="hljs-number">10</span>) * (z % <span class="hljs-number">10</span>);<br>z /= <span class="hljs-number">10</span>;<br>&#125;<br><span class="hljs-keyword">if</span>(a[sum] == <span class="hljs-number">1</span>)&#123; <span class="hljs-comment">//ä¸€æ¬¡çš„å„ä¸ªä½æ•°çš„å¹³æ–¹å’Œåœ¨487å†…æ‰¾ï¼Œæ˜¯å°±æ ‡è®°æ˜¯ç¬¬å‡ ä¸ª</span><br>   b[ans++] = i;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">int</span> q, k;<br><span class="hljs-built_in">cin</span> &gt;&gt; q;<br><span class="hljs-keyword">while</span>(q--)&#123;<br><span class="hljs-built_in">cin</span> &gt;&gt; k;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; b[k] &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="Swiches-and-lamps"><a href="#Swiches-and-lamps" class="headerlink" title="Swiches and lamps"></a>Swiches and lamps</h4><blockquote><p>æœ‰nä¸ªå¼€å…³å’Œmç›ç¯ï¼Œå¯¹äºä¸€ç›ç¯ï¼Œåªè¦å­˜åœ¨ä¸€ä¸ªæ§åˆ¶è¿™ä¸ªç¯çš„å¼€å…³æ˜¯å¼€ç€çš„ï¼Œè¿™ä¸ªç¯å°±ä¼šè¢«ç‚¹äº®ã€‚ç„¶åç»™ä½ nÃ—mnÃ—mçš„01çŸ©é˜µï¼Œå¦‚æœiiè¡Œjjåˆ—ä¸º1ä»£è¡¨å¼€å…³iiå¯ä»¥æ§åˆ¶ç¯jjï¼Œé—®ä½ èƒ½å¦åˆ æ‰ä¸€ä¸ªå¼€å…³ï¼Œä½¿å¾—æ‰€æœ‰çš„ç¯ä»æ—§èƒ½è¢«ç‚¹äº®ã€‚</p></blockquote><p>å¯¹äºæ¯ä¸€æ±‚å’Œï¼Œå¦‚æœå¯¹äºæŸä¸€è¡Œï¼Œå¦‚æœå»æ‰æŸä¸€è¡Œåè¿™ä¸€åˆ—çš„å’Œä¼šå˜æˆ0ï¼Œè¯´æ˜ä¼šæœ‰ç¯ä¸å—æ§åˆ¶ï¼Œè¿™ä¸€è¡Œå°±ä¸èƒ½åˆ æ‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxn 2016</span><br><span class="hljs-keyword">int</span> <span class="hljs-built_in">map</span>[maxn][maxn], sum[maxn], n, m;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)&#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%1d&quot;</span>, <span class="hljs-built_in">map</span>[i] + j);<br>        sum[j] += <span class="hljs-built_in">map</span>[i][j];<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>, j; i &lt;= n; i++)&#123;<br>        <span class="hljs-keyword">for</span>(j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>            <span class="hljs-keyword">if</span>(sum[j] - <span class="hljs-built_in">map</span>[i][j] == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">if</span>(j &gt; m) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> * <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;YES&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> * <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;NO&quot;</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æƒåŠ›æŒ‡æ•°"><a href="#æƒåŠ›æŒ‡æ•°" class="headerlink" title="æƒåŠ›æŒ‡æ•°"></a>æƒåŠ›æŒ‡æ•°</h4><blockquote><p>åœ¨é€‰ä¸¾é—®é¢˜ä¸­ï¼Œæ€»å…±æœ‰nä¸ªå°å›¢ä½“ï¼Œæ¯ä¸ªå°å›¢ä½“æ‹¥æœ‰ä¸€å®šæ•°é‡çš„é€‰ç¥¨æ•°ã€‚å¦‚æœå…¶ä¸­mä¸ªå°å›¢ä½“çš„ç¥¨æ•°å’Œè¶…è¿‡æ€»ç¥¨æ•°çš„ä¸€åŠï¼Œåˆ™æ­¤ç»„åˆä¸ºâ€œè·èƒœè”ç›Ÿâ€ã€‚nä¸ªå›¢ä½“å¯å½¢æˆè‹¥å¹²ä¸ªè·èƒœè”ç›Ÿã€‚ä¸€ä¸ªå°å›¢ä½“è¦æˆä¸ºä¸€ä¸ªâ€œå…³é”®åŠ å…¥è€…â€çš„æ¡ä»¶æ˜¯ï¼šåœ¨å…¶æ‰€åœ¨çš„è·èƒœè”ç›Ÿä¸­ï¼Œå¦‚æœç¼ºå°‘äº†è¿™ä¸ªå°å›¢ä½“çš„åŠ å…¥ï¼Œåˆ™æ­¤è”ç›Ÿä¸èƒ½æˆä¸ºè·èƒœè”ç›Ÿã€‚ä¸€ä¸ªå°å›¢ä½“çš„æƒåˆ©æŒ‡æ•°æ˜¯æŒ‡ï¼šä¸€ä¸ªå°å›¢ä½“åœ¨æ‰€æœ‰è·èƒœè”ç›Ÿä¸­æˆä¸ºâ€œå…³é”®åŠ å…¥è€…â€çš„æ¬¡æ•°ã€‚è¯·ä½ è®¡ç®—æ¯ä¸ªå°å›¢ä½“çš„æƒåˆ©æŒ‡æ•°ã€‚<br>Input<br>è¾“å…¥æ•°æ®çš„ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ­£æ•´æ•°Tï¼Œè¡¨ç¤ºæœ‰Tç»„æµ‹è¯•æ•°æ®ã€‚æ¯ä¸€ç»„æµ‹è¯•æ•°æ®çš„ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ­£æ•´æ•°nï¼ˆ0&lt;n&lt;=20ï¼‰ã€‚ç¬¬äºŒè¡Œæœ‰nä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤º1åˆ°nå·å°å›¢ä½“çš„ç¥¨æ•°ã€‚<br>Output<br>å¯¹æ¯ç»„æµ‹è¯•æ•°æ®ï¼Œåœ¨åŒä¸€ä¸ªè¡ŒæŒ‰é¡ºåºè¾“å‡º1åˆ°nå·å°å›¢ä½“çš„æƒåˆ©æŒ‡æ•°ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">int</span> n, t, s, a[<span class="hljs-number">21</span>], ans[<span class="hljs-number">21</span>], flag[<span class="hljs-number">21</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; t;<br>    <span class="hljs-keyword">while</span>(t--)&#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>        s = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)&#123;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; a[i];<br>            s += a[i];<br>        &#125;<br>        <span class="hljs-built_in">memset</span>(ans, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(ans));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; (<span class="hljs-number">1</span>&lt;&lt;n); i++)&#123;<br>            <span class="hljs-keyword">int</span> tmp = <span class="hljs-number">0</span>;<br>            <span class="hljs-built_in">memset</span>(flag, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(flag));<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)&#123;<br>                <span class="hljs-keyword">if</span>(i &amp; (<span class="hljs-number">1</span>&lt;&lt;j))&#123;<br>                    tmp += a[j];<span class="hljs-comment">//mä¸ªå›¢ä½“çš„æ€»ç¥¨æ•°</span><br>                    flag[j] = <span class="hljs-number">1</span>;<span class="hljs-comment">//åŠ ä¸€ä¸ªtmpå°±æ ‡è®°ä¸€ä¸‹</span><br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(tmp &lt;= s / <span class="hljs-number">2</span>)<span class="hljs-comment">//å°‘ä¸€ä¸ªå›¢ä½“å°±å½“ä¸ä¸Š</span><br>                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)<br>                    <span class="hljs-keyword">if</span>(tmp + a[j] &gt; s/<span class="hljs-number">2</span> &amp;&amp; flag[j] == <span class="hljs-number">0</span>)<span class="hljs-comment">//åŠ ä¸ŠæŸä¸ªå›¢ä½“å°±å½“ä¸Šäº†ï¼Œç„¶åå½“çš„ä»£ç å°±æ˜¯flagæ²¡æœ‰æ ‡è®°çš„</span><br>                        ans[j]++;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= n<span class="hljs-number">-2</span>; i++)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,ans[i]);<span class="hljs-comment">//è¾“å‡ºæ ¼å¼</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, ans[n - <span class="hljs-number">1</span>]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºâ€œSSHæœåŠ¡å™¨æ‹’ç»äº†å¯†ç â€</title>
    <link href="/2021/03/15/%E5%85%B3%E4%BA%8ESSH%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8B%92%E7%BB%9D%E4%BA%86%E5%AF%86%E7%A0%81/"/>
    <url>/2021/03/15/%E5%85%B3%E4%BA%8ESSH%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8B%92%E7%BB%9D%E4%BA%86%E5%AF%86%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©è·Ÿç€å­¦Hadoopï¼ŒXshellç¡¬æ˜¯è¿ä¸ä¸Šï¼Œæœåˆ°ä¸€ä¸ªç™¾åº¦ç»éªŒç¬‘æ­»æˆ‘äº†â€”â€”</p><blockquote><p>â€¦ï¼ˆå‰é¢ä¸€å †æŒ‡ä»¤ï¼‰<br>5/7<br>å¦‚æœèµ°åˆ°è¿™ä¸€æ­¥ä½ å‘ç°ä½ çš„é…ç½®å¹¶æ²¡æœ‰å“ªé‡Œé”™äº†é‚£ä¹ˆæˆ‘ä»¬å°±æ˜¯é“å‹äº†ã€‚ã€‚ã€‚<br>å›åˆ°Xshellæ‰¾åˆ°ä½ çš„è™šæ‹Ÿæœºå³é”®è¿›å…¥å±æ€§<br>6/7<br>æŠŠå¤§å†™ç”¨æˆ·åæ”¹æˆå°å†™ï¼Œç¡®å®š<br>7/7<br>è¿æ¥ä¸Šäº†ã€‚ã€‚ã€‚</p></blockquote><p>æ²¡æƒ³åˆ°æœ‰äººå’Œæˆ‘ä¸€æ ·å‚»å“ˆå“ˆå“ˆ</p>]]></content>
    
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hadoopå­¦ä¹ ç¬”è®°1</title>
    <link href="/2021/03/14/Hadoop%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/"/>
    <url>/2021/03/14/Hadoop%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</url>
    
    <content type="html"><![CDATA[<p>Hadoopåˆ†ä¸º<strong>å­˜å‚¨</strong>å’Œ<strong>è®¡ç®—</strong></p><ul><li>å­˜å‚¨ï¼šHDFS</li><li>è®¡ç®—ï¼šMapReduce</li></ul><h4 id="HDFSæ–‡ä»¶ç³»ç»Ÿ"><a href="#HDFSæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="HDFSæ–‡ä»¶ç³»ç»Ÿ"></a>HDFSæ–‡ä»¶ç³»ç»Ÿ</h4><p>HDFSï¼ˆHadoop Distributed File System, Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰<br><strong>NameNode â†’ å¤šä¸ªDataNodes</strong></p><ul><li>NameNode: æ–‡ä»¶åœ¨å“ª</li><li>DataNodes: å­˜æ•°æ®</li><li>2NN: è´Ÿè´£å¤‡ä»½NN</li></ul><h4 id="Yarnæ¶æ„"><a href="#Yarnæ¶æ„" class="headerlink" title="Yarnæ¶æ„"></a>Yarnæ¶æ„</h4><p>YARN ï¼ˆYet Another Resource Negotiatorï¼Œå¦ä¸€ç§èµ„æºåè°ƒè€…ï¼‰<br><strong>client â†’ RM â†’ NMs</strong></p><ul><li>ResourceManager(RM) : æ•´ä¸ªé›†ç¾¤èµ„æºï¼ˆCPU, RAMï¼‰ç­‰çš„è€å¤§</li><li>NodeManager(NM) : å•ä¸ªèŠ‚ç‚¹æœåŠ¡å™¨çš„è€å¤§</li><li>å•ä¸ªèŠ‚ç‚¹æœåŠ¡å™¨èƒ½è™šæ‹Ÿå‡ºå¤šä¸ªå„¿å­ï¼Œæ¯ä¸ªå„¿å­ç›¸å½“äºä¸€ä¸ªå°ç”µè„‘ï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œç§°ä¸ºContainerå®¹å™¨ï¼Œå†…å«ApplicationManager(AM) : å•ä¸ªä»»åŠ¡çš„è€å¤§</li></ul><p><img src="./Hadoop%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%80/01.jpg"></p><h4 id="å…‹éš†è™šæ‹Ÿæœº"><a href="#å…‹éš†è™šæ‹Ÿæœº" class="headerlink" title="å…‹éš†è™šæ‹Ÿæœº"></a>å…‹éš†è™šæ‹Ÿæœº</h4><p>å³é”®ç§»é™¤å¹¶ä¸ä¼šçœŸæ­£åˆ æ‰ï¼Œå¯ä»¥é€šè¿‡åŸä½ç½®çš„vmxå¯¼å…¥<br>å³é”®ç®¡ç†ä»ç£ç›˜åˆ é™¤æ‰æ˜¯åˆ æ‰</p><p>å…‹éš†ä¹‹åï¼Œå¦‚ä¸‹æ“ä½œï¼ˆç›´æ¥ç”¨rootç”¨æˆ·ç™»å½•æ›´æ–¹ä¾¿ï¼‰ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens33<br>vim <span class="hljs-regexp">/etc/</span>hostname<br>reboot<br></code></pre></td></tr></table></figure><p>é‡å¯åè¿›è¡Œæ£€æŸ¥</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ifconfig<br>ping www<span class="hljs-selector-class">.baidu</span>.com<br>hostname<br></code></pre></td></tr></table></figure><p>å†åœ¨Xshellé‡Œå¯¼å…¥ï¼Œå¹¶è¾“<code>hostname</code>å†æ¬¡æ£€æŸ¥</p><h4 id="å®‰è£…JDK-Hadoop"><a href="#å®‰è£…JDK-Hadoop" class="headerlink" title="å®‰è£…JDK Hadoop"></a>å®‰è£…JDK Hadoop</h4><p>ï¼ˆå·²ç»åœ¨hadoop100æ‰§è¡Œäº†<code>rpm -qa | grep -i java | xargs -n1 rpm -e --nodeps</code>ï¼‰<br>ä¸€èˆ¬åœ¨102å®‰è£…å³å¯<br>p.s.æ•™ç¨‹é‡Œå†™çš„æ˜¯<br><code>tar -zxvf hadoop-3.1.3.tar.gz -C /opt/module/ </code><br>ä½†æ˜¯æˆ‘åœ¨æ“ä½œé˜¿é‡Œäº‘çš„æœåŠ¡å™¨æ—¶ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ€»æ˜¯æŠ¥é”™â€œæ— æ³•openï¼šæ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•â€ï¼Œè²Œä¼¼æ˜¯å®ƒä¸è¯†åˆ«æ ¹ç›®å½•/ï¼Œç”¨äº†ç›¸å¯¹è·¯å¾„ä¹‹åå°±å¥½ä½¿äº†ã€‚ç¥ç§˜<br>å¦å¤–ï¼Œæå‰cdåˆ°moduleä¹Ÿå¯ä»¥è¿™æ ·ï¼š<br><code>tar -zxvf ../software/hadoop-3.1.3.tar.gz</code></p><p>å“¦å“¦å“¦æˆ‘çŸ¥é“äº†ï¼š</p><blockquote><p>/æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ï¼Œ/rootæ˜¯è¶…çº§ç”¨æˆ·rootç”¨æˆ·çš„ä¸ªäººç›®å½•<br>æˆ‘ä¸€å¼€å§‹ç™»çš„æ—¶å€™ï¼Œæ˜¯åœ¨rootä¸‹äº†ï¼Œè¿˜ä»¥ä¸ºæ˜¯æ ¹ç›®å½•ï¼Œå„ç§æ“ä½œä¹Ÿæ²¡åŠ /  â€¦â€¦</p></blockquote><h4 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h4><ul><li>XshellåŒå‡»æ ‡ç­¾å°±èƒ½å†å¼€ä¸€ä¸ªæ–°çš„</li><li>Ctrl + Lå¯ä»¥æ§åˆ¶å°æ¢ä¸€é¡µ</li><li>Tabå¯ä»¥æ§åˆ¶å°æ™ºèƒ½è¡¥å…¨ï¼Œ ä¹Ÿå¯ä»¥æŸ¥çœ‹å½“å‰ç›®å½•æ–‡ä»¶åˆ—è¡¨</li><li><code>ssh hostname</code>ï¼Œ<code>exit</code>é€€å‡º</li><li>æŸ¥å…¬ç½‘IPï¼š<code>curl httpbin.org/ip </code></li></ul><h4 id="é…ç½®å®Œå…¨åˆ†å¸ƒ"><a href="#é…ç½®å®Œå…¨åˆ†å¸ƒ" class="headerlink" title="é…ç½®å®Œå…¨åˆ†å¸ƒ"></a>é…ç½®å®Œå…¨åˆ†å¸ƒ</h4><p>scp / rsync / xsync</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">å­˜ä¸€ä¸‹xsyncè„šæœ¬</span><br><span class="hljs-meta">#</span><span class="bash">!/bin/bash</span><br><span class="hljs-meta">#</span><span class="bash">1. åˆ¤æ–­å‚æ•°ä¸ªæ•°</span><br>if [ $# -lt 1 ]<br>then<br>    echo Not Enough Arguement!<br>    exit;<br>fi<br><br><span class="hljs-meta">#</span><span class="bash">2. éå†é›†ç¾¤æ‰€æœ‰æœºå™¨</span><br>for host in hadoop102 hadoop103 hadoop104<br>do<br>    echo ==================== $host ====================<br>    #3. éå†æ‰€æœ‰ç›®å½•ï¼ŒæŒ¨ä¸ªå‘é€<br>    for file in $@<br>    do<br>        #4. åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨<br>        if [ -e $file ]<br>        then<br>            #5. è·å–çˆ¶ç›®å½• -På–æ¶ˆè½¯é“¾æ¥<br>            pdir=$(cd -P $(dirname $file); pwd)<br>            #6. è·å–å½“å‰æ–‡ä»¶çš„åç§°<br>            fname=$(basename $file)<br>            #7. -pæ— è§†æ˜¯å¦å·²ç»å­˜åœ¨<br>            ssh $host &quot;mkdir -p $pdir&quot;<br>            rsync -av $pdir/$fname $host:$pdir<br>        else<br>            echo $file does not exists!<br>        fi<br>    done<br>done<br></code></pre></td></tr></table></figure><h4 id="é…ç½®é›†ç¾¤"><a href="#é…ç½®é›†ç¾¤" class="headerlink" title="é…ç½®é›†ç¾¤"></a>é…ç½®é›†ç¾¤</h4><p>core-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æŒ‡å®š NameNode çš„åœ°å€ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>fs.defaultFS<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hdfs://hadoop102:8020<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æŒ‡å®š hadoop æ•°æ®çš„å­˜å‚¨ç›®å½• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hadoop.tmp.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>/opt/module/hadoop-3.1.3/data<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- é…ç½® HDFS ç½‘é¡µç™»å½•ä½¿ç”¨çš„é™æ€ç”¨æˆ·ä¸º izayoiaster --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hadoop.http.staticuser.user<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>izayoiaster<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>hdfs-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- nn web ç«¯è®¿é—®åœ°å€--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.http-address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hadoop102:9870<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 2nn web ç«¯è®¿é—®åœ°å€--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hadoop104:9868<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>yarn-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æŒ‡å®š MR èµ° shuffle --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>mapreduce_shuffle<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æŒ‡å®š ResourceManager çš„åœ°å€--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hadoop103<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ç¯å¢ƒå˜é‡çš„ç»§æ‰¿ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- å°šç¡…è°·çš„3.1è¯´ï¼Œè¿™ä¸ªæ˜¯3.1çš„bugï¼Œ3.2ä»¥ä¸Šçš„ä¸ç”¨å†™ç¯å¢ƒå˜é‡ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.env-whitelist<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>mapred-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æŒ‡å®š MapReduce ç¨‹åºè¿è¡Œåœ¨ Yarn ä¸Š --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.framework.name<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>yarn<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æœ€ååˆ«å¿˜äº†åŒæ­¥ä¸€ä¸‹<br><code>xsync /opt/module/hadoop3.1.3/etc/hadoop/</code><br>ç„¶ååœ¨103 104æ£€æŸ¥ä¸€ä¸‹<br><code>cat /opt/module/hadoop3.1.3/etc/hadoop/core-site.xml </code></p><h4 id="é…ç½®å†å²æœåŠ¡å™¨"><a href="#é…ç½®å†å²æœåŠ¡å™¨" class="headerlink" title="é…ç½®å†å²æœåŠ¡å™¨"></a>é…ç½®å†å²æœåŠ¡å™¨</h4><p>mapred-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å†å²æœåŠ¡å™¨å†…éƒ¨åœ°å€ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hadoop102:10020<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å†å²æœåŠ¡å™¨ web ç«¯åœ°å€ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hadoop102:19888<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä»¥åŠ åŒæ­¥ä¸€ä¸‹<br>ï¼ˆåœ¨102ï¼‰å¯åŠ¨å†å²æœåŠ¡å™¨</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">mapred <span class="hljs-comment">--daemon start historyserver</span><br>è™½ç„¶å°šç¡…è°·çš„pdfè¿™ä¹ˆå†™çš„ï¼Œä½†è²Œä¼¼æœ‰æ—¶å€™éœ€è¦å®šä½åˆ°hadoopçš„binç›®å½•ä¸‹æ‰è¡Œâ€¦â€¦<br>ï¼ˆè™½ç„¶é‚£æ¬¡æˆ‘æ˜¯ä¸å°å¿ƒåœ¨<span class="hljs-number">103</span>å¯åŠ¨äº†ï¼‰<br></code></pre></td></tr></table></figure><blockquote><p><em>Daemonæ˜¯å®ˆæŠ¤ç¥çš„æ„æ€å“¦</em></p></blockquote><h4 id="é…ç½®æ—¥å¿—èšé›†"><a href="#é…ç½®æ—¥å¿—èšé›†" class="headerlink" title="é…ç½®æ—¥å¿—èšé›†"></a>é…ç½®æ—¥å¿—èšé›†</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼€å¯æ—¥å¿—èšé›†åŠŸèƒ½ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-comment">&lt;!-- è®¾ç½®æ—¥å¿—èšé›†æœåŠ¡å™¨åœ°å€ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.log.server.url<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>http://hadoop102:19888/jobhistory/logs<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-comment">&lt;!-- è®¾ç½®æ—¥å¿—ä¿ç•™æ—¶é—´ä¸º 7 å¤© --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>604800<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="é›†ç¾¤å¯åœè„šæœ¬"><a href="#é›†ç¾¤å¯åœè„šæœ¬" class="headerlink" title="é›†ç¾¤å¯åœè„šæœ¬"></a>é›†ç¾¤å¯åœè„šæœ¬</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/bin/bash</span><br>if [ $# -lt 1 ]<br>then<br>    echo &quot;No Args Input...&quot;<br>    exit ;<br>fi<br>case $1 in<br>&quot;start&quot;)<br>    echo &quot; =================== å¯åŠ¨ hadoop é›†ç¾¤ ===================&quot;<br>    echo &quot; --------------- å¯åŠ¨ hdfs ---------------&quot;<br>    ssh hadoop102 &quot;/opt/module/hadoop-3.1.3/sbin/start-dfs.sh&quot;<br>    echo &quot; --------------- å¯åŠ¨ yarn ---------------&quot;<br>    ssh hadoop103 &quot;/opt/module/hadoop-3.1.3/sbin/start-yarn.sh&quot;<br>    echo &quot; --------------- å¯åŠ¨ historyserver ---------------&quot;<br>    ssh hadoop102 &quot;/opt/module/hadoop-3.1.3/bin/mapred --daemon start historyserver&quot;<br>;;<br>&quot;stop&quot;)<br>    echo &quot; =================== å…³é—­ hadoop é›†ç¾¤ ===================&quot;<br>    echo &quot; --------------- å…³é—­ historyserver ---------------&quot;<br>    ssh hadoop102 &quot;/opt/module/hadoop-3.1.3/bin/mapred --daemon stop historyserver&quot;<br>    echo &quot; --------------- å…³é—­ yarn ---------------&quot;<br>    ssh hadoop103 &quot;/opt/module/hadoop-3.1.3/sbin/stop-yarn.sh&quot;<br>    echo &quot; --------------- å…³é—­ hdfs ---------------&quot;<br>    ssh hadoop102 &quot;/opt/module/hadoop-3.1.3/sbin/stop-dfs.sh&quot;<br>;;<br>*)<br>    echo &quot;Input Args Error...&quot;<br>;;<br>esac<br></code></pre></td></tr></table></figure><h4 id="jpsall"><a href="#jpsall" class="headerlink" title="jpsall"></a>jpsall</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/bin/bash</span><br>for host in hadoop102 hadoop103 hadoop104<br>do<br>    echo =============== $host ===============<br>    ssh $host jps<br>done<br></code></pre></td></tr></table></figure><h4 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h4><h5 id="è¯¯åˆ é™¤ç”¨æˆ·æ–‡ä»¶"><a href="#è¯¯åˆ é™¤ç”¨æˆ·æ–‡ä»¶" class="headerlink" title="è¯¯åˆ é™¤ç”¨æˆ·æ–‡ä»¶"></a>è¯¯åˆ é™¤ç”¨æˆ·æ–‡ä»¶</h5><p>æ¯”å¦‚æˆ‘å°±ä¸å°å¿ƒåˆ æ‰äº†ç»™æˆ‘çš„é‚£å°æœåŠ¡å™¨çš„/rooté‡Œçš„æ‰€æœ‰ä¸œè¥¿ï¼ˆæˆ‘çœŸæ†¨æ†¨ï¼‰ï¼Œé‡å¯ä¹‹åæ²¡æœ‰é‚£ä¸ª[xxx@xxx]ï¼Œå˜æˆbashäº†ï¼Œé‚£å°±è¾“å…¥è¿™ä¸ªï¼š<br><code>-bash-4.2# cp -a /etc/skel/. /root</code><br>ï¼ˆ<code>-a</code>æ˜¯å«éšè—æ–‡ä»¶ï¼Œ<code>/etc/skel/</code>æ˜¯ä¿å‘½æ•°æ®ï¼Œåé¢çš„<code>.</code>åˆ«å¿˜äº†ï¼Œç©ºæ ¼åæ¥è¯¯åˆ çš„ç›®å½•ï¼Œæ¯”å¦‚<code>/home/izayoiaster</code>ï¼‰<br>å¼„å¥½äº†å¯ä»¥<code>ls -a</code>æ£€æŸ¥ä¸€ä¸‹ï¼Œçœ‹çœ‹å¤šæ²¡å¤šå‡ ä¸ªbashï¼Œä¹‹årebootä¸€ä¸‹å°±è¡Œäº†<br>ï¼ˆè¿™éƒ½èƒ½å¼„å¥½ï¼Œç‰›é€¼ï¼‰</p><h5 id="Hadoopæ‰¾ä¸åˆ°Java"><a href="#Hadoopæ‰¾ä¸åˆ°Java" class="headerlink" title="Hadoopæ‰¾ä¸åˆ°Java"></a>Hadoopæ‰¾ä¸åˆ°Java</h5><p>æ¯”å¦‚åœ¨ç»™æˆ‘çš„é‚£å°æœåŠ¡å™¨ä¸Šï¼Œç…§ç€æ•™ç¨‹é…ç½®å¥½ä¹‹åhadoopä¼šæŠ¥é”™ï¼š<br><code>ERROR: JAVA_HOME /opt/jdk/jdk1.8.0_144 does not exist.</code><br>ç…§ç€ç½‘ä¸Šï¼Œæ‰‹åŠ¨é…ç½®äº†ä¸€ä¸‹hadoop-3.1.3/etc/hadoop/hadoop-env.shï¼ŒåŠ äº†ä¸€å¥<br><code>export JAVA_HOME=/opt/module/jdk1.8.0_212</code><br>å°±å¥½ä½¿å•¦ï¼</p><h5 id="å¯åŠ¨hadoopæ—¶æŠ¥é”™"><a href="#å¯åŠ¨hadoopæ—¶æŠ¥é”™" class="headerlink" title="å¯åŠ¨hadoopæ—¶æŠ¥é”™"></a>å¯åŠ¨hadoopæ—¶æŠ¥é”™</h5><h6 id="case-1"><a href="#case-1" class="headerlink" title="case 1"></a>case 1</h6><p><code>nodemanager is running as process xxxx. Stop it first.</code><br>å…ˆstop-all.shä¸‹ï¼Œç„¶åå†start</p><h6 id="case-2"><a href="#case-2" class="headerlink" title="case 2"></a>case 2</h6><p><code>Hadoop ERROR: but there is no HDFS_NAMENODE_USER defined. Aborting operation. Starting datanodes</code><br>ä½¿ç”¨rooté…ç½®çš„hadoopå¹¶å¯åŠ¨ä¼šå‡ºç°æŠ¥é”™</p><p>æ–¹æ³•ï¼š</p><p>1ã€å¯¹äºstart-dfs.shå’Œstop-dfs.shæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹åˆ—å‚æ•°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/usr/bin/env bash</span><br>HDFS_DATANODE_USER=root<br>HADOOP_SECURE_DN_USER=hdfs<br>HDFS_NAMENODE_USER=root<br>HDFS_SECONDARYNAMENODE_USER=root<br></code></pre></td></tr></table></figure><p>2ã€å¯¹äºstart-yarn.shå’Œstop-yarn.shæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹åˆ—å‚æ•°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/usr/bin/env bash</span><br>YARN_RESOURCEMANAGER_USER=root<br>HADOOP_SECURE_DN_USER=yarn<br>YARN_NODEMANAGER_USER=root<br></code></pre></td></tr></table></figure><h5 id="æ— æ³•è®¿é—®Hadoop"><a href="#æ— æ³•è®¿é—®Hadoop" class="headerlink" title="æ— æ³•è®¿é—®Hadoop"></a>æ— æ³•è®¿é—®Hadoop</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¦‚æœæ˜¯é€šè¿‡å…¬ç½‘IPè®¿é—®é˜¿é‡Œäº‘ä¸Šå†…ç½‘æ­å»ºçš„é›†ç¾¤ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.client.use.datanode.hostname<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>only cofig in clients<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
